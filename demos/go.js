/*
 * GoJS v1.5.7 JavaScript Library for HTML Diagrams
 * Northwoods Software, http://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2015 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.5.7/doc/license.html.
 */
(function(window) { var r,aa={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),f=Math.max(8,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();aa.Debug=null;var ca=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),da=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),ea=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),fa=0<=navigator.platform.toUpperCase().indexOf("MAC"),ga=null!==navigator.platform.match(/(iPhone|iPod|iPad)/i);
function ia(a,b){var c=-1;return function(){var d=this,e=arguments;-1!==c&&window.clearTimeout(c);c=ma(function(){c=-1;a.apply(d,e)},b)}}function ma(a,b){return window.setTimeout(a,b)}function na(a,b){return window.setInterval(a,b)}function oa(a){return window.document.createElement(a)}function u(a){throw Error(a);}function pa(a,b){if(a.pa){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);u(c)}}
function ra(a,b,c,d){a instanceof b||(c=sa(c),void 0!==d&&(c+="."+d),ta(a,b,c))}function w(a,b,c,d){typeof a!==b&&(c=sa(c),void 0!==d&&(c+="."+d),ta(a,b,c))}function ua(a,b,c){"number"===typeof a&&isFinite(a)||(b=sa(b),void 0!==c&&(b+="."+c),u(b+" must be a real number type, and not NaN or Infinity: "+a))}function va(a,b,c,d){a instanceof wa&&a.Sd===b||(c=sa(c),void 0!==d&&(c+="."+d),ta(a,"a constant of class "+xa(b),c))}
function ta(a,b,c,d){b=sa(b);c=sa(c);void 0!==d&&(c+="."+d);"string"===typeof a?u(c+" value is not an instance of "+b+': "'+a+'"'):u(c+" value is not an instance of "+b+": "+a)}function za(a,b,c,d){c=sa(c);void 0!==d&&(c+="."+d);u(c+" is not in the range "+b+": "+a)}function Aa(a){u(xa(a)+" constructor cannot take any arguments.")}
function Ba(a){u("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")}function Da(a){window.console&&window.console.log(a)}function Ea(a){return"object"===typeof a&&null!==a}function Fa(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection}function Ga(a,b,c){Fa(a)||ta(a,"Array or NodeList or HTMLCollection",b,c)}
function Ia(a){return a.length}function Ka(a){return Array.prototype.slice.call(a)}function La(a,b){Array.isArray(a);return a[b]}function Na(a,b,c){Array.isArray(a)?a[b]=c:u("Cannot replace an object in an HTMLCollection or NodeList at "+b)}function Oa(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1}
function Qa(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):u("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)}function Ta(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):u("Cannot remove an object from an HTMLCollection or NodeList at "+b)}var Ua=[];function Va(){var a=Ua.pop();return void 0===a?new z:a}function Wa(a,b){var c=Ua.pop();if(void 0===c)return new z(a,b);c.x=a;c.y=b;return c}function A(a){Ua.push(a)}var Xa=[];
function Ya(){var a=Xa.pop();return void 0===a?new Za:a}function $a(a){Xa.push(a)}var ab=[];function bb(){var a=ab.pop();return void 0===a?new D:a}function db(a,b,c,d){var e=ab.pop();if(void 0===e)return new D(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e}function fb(a){ab.push(a)}var gb=[];function hb(){var a=gb.pop();return void 0===a?new ib:a}function jb(a){gb.push(a)}var kb=null;function E(){var a=kb;return null!==a?(kb=null,a):new mb}function F(a){a.reset();kb=a}var nb=[];
function ob(){var a=nb.pop();return void 0===a?[]:a}function pb(a){a.length=0;nb.push(a)}var qb=Object.freeze([]),rb=1;function sb(a){a.__gohashid=rb++}function tb(a){var b=a.__gohashid;void 0===b&&(b=rb++,a.__gohashid=b);return b}function ub(a){return a.__gohashid}function vb(a,b){b.Xv=a;aa[a]=b}function yb(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}
function G(a,b,c,d){w(a,"function","Util.defineProperty:classfunc");w(b,"object","Util.defineProperty:propobj");w(c,"function","Util.defineProperty:getter");w(d,"function","Util.defineProperty:setter");for(var e in b){b=b[e];Object.defineProperty(a.prototype,e,{get:c,set:d});c=Object.getOwnPropertyDescriptor(a.prototype,e);b&&c&&Object.defineProperty(a.prototype,b,c);break}}
function H(a,b,c,d){w(a,"function","Util.defineReadOnlyProperty:classfunc");w(b,"object","Util.defineReadOnlyProperty:propobj");w(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var f=b[e];b={get:c,set:function(a){u('The property "'+f+'" is read-only and cannot be set to '+a)}};if(void 0!==d)for(var g in d)b[g]=d[g];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);f&&d&&Object.defineProperty(a.prototype,f,d);break}}
function zb(a,b){for(var c in b)b[c]=!0;a.prototype.IA=b}function sa(a){return void 0===a?"":"string"===typeof a?a:"function"===typeof a?xa(a):null===a?"*":""}function xa(a){if("function"===typeof a){if(a.Xv)return a.Xv;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.Xv=b}else if("object"===typeof a&&a.constructor)return xa(a.constructor);return typeof a}
function I(a,b,c){w(a,"function","Util.defineEnumValue:classfunc");w(b,"string","Util.defineEnumValue:name");w(c,"number","Util.defineEnumValue:num");c=new wa(a,b,c);Object.freeze(c);a[b]=c;var d=a.Es;d instanceof Fb||(d=new Fb("string",wa),a.Es=d);d.add(b,c);return c}function Gb(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){}return c}
function Hb(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){}}
function Ib(a,b){w(a,"object","Setting properties requires Objects as arguments");w(b,"object","Setting properties requires Objects as arguments");var c=a instanceof L,d=a instanceof M,e;for(e in b){""===e&&u("Setting properties requires non-empty property names");var f=a,g=e;if(c||d){var h=e.indexOf(".");if(0<h){var k=e.substring(0,h);if(c)f=a.Cd(k);else if(f=a[k],void 0===f||null===f)f=a.Xa[k];Ea(f)?g=e.substr(h+1):u("Unable to find object named: "+k+" in "+a.toString()+" when trying to set property: "+
e)}}if("_"!==g[0]&&!Ob(f,g))if(d&&Ob(a.Xa,g))f=a.Xa;else if(d&&Pb(a,g)){a.zx(g,b[g]);continue}else u('Trying to set undefined property "'+g+'" on object: '+f.toString());f[g]=b[e];"_"===g[0]&&(h=f.Ik,Fa(h)||(h=[],f.Ik=h),h.push(g))}}function Ob(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.IA;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1}
function Qb(a,b){if(!Ea(b)||b instanceof Element||b instanceof CanvasRenderingContext2D||b instanceof Rb||b instanceof Sb)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=Gb(b,d);null===e||"function"===typeof e||Ob(b,d)||(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c}
function Tb(a,b){if(null!==b&&"number"!==typeof b&&"string"!==typeof b&&"boolean"!==typeof b&&"function"!==typeof b)if(void 0!==ub(b)){if(!Ub.contains(b))if(Ub.add(b),Wb.add(Qb(a,b)),b instanceof N||b instanceof Xb||b instanceof Fb)for(var c=b.i;c.next();)Tb(a+"["+c.key+"]",c.value);else for(c in b){var d=Gb(b,c);if(void 0!==d&&null!==d&&Ea(d)&&d!==b.IA){if(b instanceof Zb){if(d===b.pi)continue}else if(b instanceof L){if("data"===c||d===b.Cg)continue;if("itemArray"===c||d===b.uh)continue;if(b instanceof
O&&d===b.Lj)continue}else if(!(b instanceof M))if(b instanceof ec){if("archetypeGroupData"===c||d===b.Tv)continue}else if(b instanceof hc){if("archetypeLinkData"===c||d===b.Vv)continue;if("archetypeLabelNodeData"===c||d===b.Uv)continue}else if(b instanceof ic){if("archetypeNodeData"===c||d===b.sj)continue}else if(b instanceof jc){if("nodeDataArray"===c||d===b.De)continue;if("linkDataArray"===c||d===b.Ng||d===b.Yk)continue;if(d===b.Vb)continue;if(d===b.Gg)continue}else if(b instanceof kc||b instanceof
lc||b instanceof sc)continue;Tb(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)Tb(a+"["+c+"]",b[c]);else Wb.add(Qb(a,b))}
function tc(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");a=""===a?"0":a;b=[];for(c=0;256>c;c++)b[c]=c;for(c=e=d=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,f="",g=0;g<a.length;g++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(g)^b[(b[c]+b[d])%256]);return f}
var xc=null,Ub,Wb,xc=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[tc("7ca11abfd022028846")]=tc("398c3597c01238");for(var c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[tc("7ca11abfd7330390")](tc(c[d-1]),10,15*d+0);b[tc("7ca11abfd022028846")]=tc("39f046ebb36e4b");for(d=1;5>d;d++)b[tc("7ca11abfd7330390")](tc(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])I=function(a,b){var c=new wa(a,b,2);Object.freeze(c);a[b]=c;var d=a.Es;d instanceof Fb||(d=new Fb("string",wa),a.Es=d);d.add(b,c);return c};return a}();function wa(a,b,c){sb(this);this.vz=a;this.yb=b;this.oE=c}wa.prototype.toString=function(){return xa(this.vz)+"."+this.yb};H(wa,{Sd:"classType"},function(){return this.vz});H(wa,{name:"name"},function(){return this.yb});H(wa,{value:"value"},function(){return this.oE});var yc;
wa.findName=yc=function(a,b){if(null===b||""===b)return null;w(a,"function","findName:classfunc");w(b,"string","EnumValue.findName:name");var c=a.Es;return c instanceof Fb?c.ha(b):null};function zc(){this.sz=[]}zc.prototype.toString=function(){return this.sz.join("")};zc.prototype.add=function(a){""!==a&&this.sz.push(a)};function Sb(){}function Ac(a){void 0===a&&(a=42);this.seed=a;this.Kv=48271;this.Ds=2147483647;this.lz=this.Ds/this.Kv;this.SD=this.Ds%this.Kv;this.OD=1/this.Ds;this.random()}
Ac.prototype.random=function(){var a=this.seed%this.lz*this.Kv-this.seed/this.lz*this.SD;this.seed=0<a?a:a+this.Ds;return this.seed*this.OD};function Bc(){}H(Bc,{i:"iterator"},function(){return this});Bc.prototype.reset=Bc.prototype.reset=function(){};Bc.prototype.next=Bc.prototype.hasNext=Bc.prototype.next=function(){return!1};Bc.prototype.first=Bc.prototype.first=function(){return null};Bc.prototype.any=function(){return!1};Bc.prototype.all=function(){return!0};Bc.prototype.each=function(){};
H(Bc,{count:"count"},function(){return 0});Bc.prototype.lf=function(){};Bc.prototype.toString=function(){return"EmptyIterator"};var Cc=new Bc;function Dc(a){this.key=-1;this.value=a}zb(Dc,{key:!0,value:!0});H(Dc,{i:"iterator"},function(){return this});Dc.prototype.reset=Dc.prototype.reset=function(){this.key=-1};Dc.prototype.next=Dc.prototype.hasNext=Dc.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};Dc.prototype.first=Dc.prototype.first=function(){this.key=0;return this.value};
Dc.prototype.any=function(a){this.key=-1;return a(this.value)};Dc.prototype.all=function(a){this.key=-1;return a(this.value)};Dc.prototype.each=function(a){this.key=-1;a(this.value)};H(Dc,{count:"count"},function(){return 1});Dc.prototype.lf=function(){this.value=null};Dc.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ec(a){this.Sc=a;this.Di=null;this.reset()}zb(Ec,{key:!0,value:!0});H(Ec,{i:"iterator"},function(){return this});
G(Ec,{Pl:"predicate"},function(){return this.Di},function(a){this.Di=a});Ec.prototype.reset=Ec.prototype.reset=function(){var a=this.Sc;a.Rc=null;this.Ga=a.K;this.Pc=-1};Ec.prototype.next=Ec.prototype.hasNext=Ec.prototype.next=function(){var a=this.Sc;if(a.K!==this.Ga){if(0>this.key)return!1;Ba(a)}var a=a.l,b=a.length,c=++this.Pc,d=this.Di;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Pc=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.lf()}return!1};
Ec.prototype.first=Ec.prototype.first=function(){var a=this.Sc;this.Ga=a.K;this.Pc=0;var a=a.l,b=a.length,c=this.Di;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Pc=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};Ec.prototype.any=function(a){var b=this.Sc;b.Rc=null;var c=b.K;this.Pc=-1;for(var d=b.l,e=d.length,f=this.Di,g=0;g<e;g++){var h=d[g];if(null===f||f(h)){if(a(h))return!0;b.K!==c&&Ba(b)}}return!1};
Ec.prototype.all=function(a){var b=this.Sc;b.Rc=null;var c=b.K;this.Pc=-1;for(var d=b.l,e=d.length,f=this.Di,g=0;g<e;g++){var h=d[g];if(null===f||f(h)){if(!a(h))return!1;b.K!==c&&Ba(b)}}return!0};Ec.prototype.each=function(a){var b=this.Sc;b.Rc=null;var c=b.K;this.Pc=-1;for(var d=b.l,e=d.length,f=this.Di,g=0;g<e;g++){var h=d[g];if(null===f||f(h))a(h),b.K!==c&&Ba(b)}};H(Ec,{count:"count"},function(){var a=this.Di;if(null!==a){for(var b=0,c=this.Sc.l,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Sc.l.length});
Ec.prototype.lf=function(){this.key=-1;this.value=null;this.Ga=-1;this.Di=null;this.Sc.Rc=this};Ec.prototype.toString=function(){return"ListIterator@"+this.Pc+"/"+this.Sc.count};function Fc(a){this.Sc=a;this.reset()}zb(Fc,{key:!0,value:!0});H(Fc,{i:"iterator"},function(){return this});Fc.prototype.reset=Fc.prototype.reset=function(){var a=this.Sc;a.Mm=null;this.Ga=a.K;this.Pc=a.l.length};
Fc.prototype.next=Fc.prototype.hasNext=Fc.prototype.next=function(){var a=this.Sc;if(a.K!==this.Ga){if(0>this.key)return!1;Ba(a)}var b=--this.Pc;if(0<=b)return this.key=b,this.value=a.l[b],!0;this.lf();return!1};Fc.prototype.first=Fc.prototype.first=function(){var a=this.Sc;this.Ga=a.K;var b=a.l;this.Pc=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};
Fc.prototype.any=function(a){var b=this.Sc;b.Mm=null;var c=b.K,d=b.l,e=d.length;this.Pc=e;for(e-=1;0<=e;e++){if(a(d[e]))return!0;b.K!==c&&Ba(b)}return!1};Fc.prototype.all=function(a){var b=this.Sc;b.Mm=null;var c=b.K,d=b.l,e=d.length;this.Pc=e;for(e-=1;0<=e;e++){if(!a(d[e]))return!1;b.K!==c&&Ba(b)}return!0};Fc.prototype.each=function(a){var b=this.Sc;b.Mm=null;var c=b.K,d=b.l,e=d.length;this.Pc=e;for(e-=1;0<=e;e++)a(d[e]),b.K!==c&&Ba(b)};H(Fc,{count:"count"},function(){return this.Sc.l.length});
Fc.prototype.lf=function(){this.key=-1;this.value=null;this.Ga=-1;this.Sc.Mm=this};Fc.prototype.toString=function(){return"ListIteratorBackwards("+this.Pc+"/"+this.Sc.count+")"};
function N(a){sb(this);this.pa=!1;this.l=[];this.K=0;this.Mm=this.Rc=null;void 0===a||null===a?this.da=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.da=a:za(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:za(a,"null, a primitive type name, or a class type","List constructor: type")}
vb("List",N);N.prototype.hd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};N.prototype.freeze=N.prototype.freeze=function(){this.pa=!0;return this};N.prototype.thaw=N.prototype.wa=function(){this.pa=!1;return this};N.prototype.toString=function(){return"List("+sa(this.da)+")#"+ub(this)};N.prototype.add=N.prototype.push=N.prototype.add=function(a){null!==a&&(pa(this,a),this.l.push(a),this.hd())};
N.prototype.addAll=N.prototype.md=function(a){if(null===a)return this;pa(this);var b=this.l;if(Fa(a))for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);b.push(e)}else for(a=a.i;a.next();)e=a.value,b.push(e);this.hd();return this};N.prototype.clear=N.prototype.clear=function(){pa(this);this.l.length=0;this.hd()};N.prototype.contains=N.prototype.has=N.prototype.contains=function(a){return null===a?!1:-1!==this.l.indexOf(a)};N.prototype.indexOf=N.prototype.indexOf=function(a){return null===a?-1:this.l.indexOf(a)};
N.prototype.elt=N.prototype.get=N.prototype.Y=function(a){var b=this.l;(0>a||a>=b.length)&&za(a,"0 <= i < length",N,"elt:i");return b[a]};N.prototype.setElt=N.prototype.set=N.prototype.Rf=function(a,b){var c=this.l;(0>a||a>=c.length)&&za(a,"0 <= i < length",N,"setElt:i");pa(this,a);c[a]=b};N.prototype.first=N.prototype.first=function(){var a=this.l;return 0===a.length?null:a[0]};N.prototype.last=N.prototype.ad=function(){var a=this.l,b=a.length;return 0<b?a[b-1]:null};
N.prototype.pop=N.prototype.pop=function(){pa(this);var a=this.l;return 0<a.length?a.pop():null};N.prototype.any=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.K!==c&&Ba(this)}return!1};N.prototype.all=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.K!==c&&Ba(this)}return!0};N.prototype.each=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++)a(b[e]),this.K!==c&&Ba(this)};
N.prototype.insertAt=N.prototype.qd=function(a,b){0>a&&za(a,">= 0",N,"insertAt:i");pa(this,a);var c=this.l;a>=c.length?c.push(b):c.splice(a,0,b);this.hd();return!0};N.prototype.remove=N.prototype["delete"]=N.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=this.l;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.hd();return!0};
N.prototype.removeAt=N.prototype.Dc=function(a){var b=this.l;(0>a||a>=b.length)&&za(a,"0 <= i < length",N,"removeAt:i");pa(this,a);a===b.length-1?b.pop():b.splice(a,1);this.hd()};N.prototype.removeRange=N.prototype.removeRange=function(a,b){var c=this.l;(0>a||a>=c.length)&&za(a,"0 <= from < length",N,"elt:from");(0>b||b>=c.length)&&za(b,"0 <= to < length",N,"elt:to");pa(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.hd()};
N.prototype.copy=function(){for(var a=new N(this.da),b=this.l,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};N.prototype.toArray=N.prototype.be=function(){for(var a=this.l,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};N.prototype.toSet=function(){for(var a=new Xb(this.da),b=this.l,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};N.prototype.sort=N.prototype.sort=function(a){pa(this);this.l.sort(a);this.hd();return this};
N.prototype.sortRange=N.prototype.lo=function(a,b,c){var d=this.l,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);pa(this);var f=c-b;if(1>=f)return this;(0>b||b>=e-1)&&za(b,"0 <= from < length",N,"sortRange:from");if(2===f)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.hd()),this;if(0===b)if(c>=e)d.sort(a);else for(f=d.slice(0,c),f.sort(a),a=0;a<c;a++)d[a]=f[a];else if(c>=e)for(f=d.slice(b),f.sort(a),a=b;a<e;a++)d[a]=f[a-b];else for(f=d.slice(b,c),f.sort(a),a=b;a<c;a++)d[a]=f[a-b];this.hd();
return this};N.prototype.reverse=N.prototype.reverse=function(){pa(this);this.l.reverse();this.hd();return this};H(N,{count:"count"},function(){return this.l.length});H(N,{size:"size"},function(){return this.l.length});H(N,{length:"length"},function(){return this.l.length});H(N,{i:"iterator"},function(){if(0>=this.l.length)return Cc;var a=this.Rc;return null!==a?(a.reset(),a):new Ec(this)});
H(N,{Kl:"iteratorBackwards"},function(){if(0>=this.l.length)return Cc;var a=this.Mm;return null!==a?(a.reset(),a):new Fc(this)});function Gc(a){this.Qj=a;this.reset()}zb(Gc,{key:!0,value:!0});H(Gc,{i:"iterator"},function(){return this});Gc.prototype.reset=Gc.prototype.reset=function(){var a=this.Qj;a.Rc=null;this.Ga=a.K;this.gb=null};
Gc.prototype.next=Gc.prototype.hasNext=Gc.prototype.next=function(){var a=this.Qj;if(a.K!==this.Ga){if(null===this.key)return!1;Ba(a)}var b=this.gb,b=null===b?a.La:b.wb;if(null!==b)return this.gb=b,this.value=b.value,this.key=b.key,!0;this.lf();return!1};Gc.prototype.first=Gc.prototype.first=function(){var a=this.Qj;this.Ga=a.K;a=a.La;if(null!==a){this.gb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Gc.prototype.any=function(a){var b=this.Qj;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.K!==c&&Ba(b);d=d.wb}return!1};Gc.prototype.all=function(a){var b=this.Qj;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.K!==c&&Ba(b);d=d.wb}return!0};Gc.prototype.each=function(a){var b=this.Qj;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.value),b.K!==c&&Ba(b),d=d.wb};H(Gc,{count:"count"},function(){return this.Qj.uc});
Gc.prototype.lf=function(){this.value=this.key=null;this.Ga=-1;this.Qj.Rc=this};Gc.prototype.toString=function(){return null!==this.gb?"SetIterator@"+this.gb.value:"SetIterator"};
function Xb(a){sb(this);this.pa=!1;void 0===a||null===a?this.da=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.da=a:za(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a:za(a,"null, a primitive type name, or a class type","Set constructor: type");this.vc={};this.uc=0;this.Rc=null;this.K=0;this.Mg=this.La=null}vb("Set",Xb);
Xb.prototype.hd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};Xb.prototype.freeze=Xb.prototype.freeze=function(){this.pa=!0;return this};Xb.prototype.thaw=Xb.prototype.wa=function(){this.pa=!1;return this};Xb.prototype.toString=function(){return"Set("+sa(this.da)+")#"+ub(this)};
Xb.prototype.add=Xb.prototype.add=function(a){if(null===a)return!1;pa(this,a);var b=a;Ea(a)&&(b=tb(a));return void 0===this.vc[b]?(this.uc++,a=new Lc(a,a),this.vc[b]=a,b=this.Mg,null===b?this.La=a:(a.Ym=b,b.wb=a),this.Mg=a,this.hd(),!0):!1};Xb.prototype.addAll=Xb.prototype.md=function(a){if(null===a)return this;pa(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.add(La(a,c));else for(a=a.i;a.next();)this.add(a.value);return this};
Xb.prototype.contains=Xb.prototype.has=Xb.prototype.contains=function(a){if(null===a)return!1;var b=a;return Ea(a)&&(b=ub(a),void 0===b)?!1:void 0!==this.vc[b]};Xb.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(!this.contains(a.value))return!1;return!0};Xb.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(this.contains(a.value))return!0;return!1};Xb.prototype.first=Xb.prototype.first=function(){var a=this.La;return null===a?null:a.value};
Xb.prototype.any=function(a){for(var b=this.K,c=this.La;null!==c;){if(a(c.value))return!0;this.K!==b&&Ba(this);c=c.wb}return!1};Xb.prototype.all=function(a){for(var b=this.K,c=this.La;null!==c;){if(!a(c.value))return!1;this.K!==b&&Ba(this);c=c.wb}return!0};Xb.prototype.each=function(a){for(var b=this.K,c=this.La;null!==c;)a(c.value),this.K!==b&&Ba(this),c=c.wb};
Xb.prototype.remove=Xb.prototype["delete"]=Xb.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return!1;a=this.vc[b];if(void 0===a)return!1;var c=a.wb,d=a.Ym;null!==c&&(c.Ym=d);null!==d&&(d.wb=c);this.La===a&&(this.La=c);this.Mg===a&&(this.Mg=d);delete this.vc[b];this.uc--;this.hd();return!0};
Xb.prototype.removeAll=Xb.prototype.TC=function(a){if(null===a)return this;pa(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.remove(La(a,c));else for(a=a.i;a.next();)this.remove(a.value);return this};Xb.prototype.retainAll=function(a){if(null===a||0===this.count)return this;pa(this);var b=new Xb(this.da);b.md(a);a=new N(this.da);for(var c=this.i;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.i;b.next();)this.remove(b.value);return this};
Xb.prototype.clear=Xb.prototype.clear=function(){pa(this);this.vc={};this.uc=0;this.Mg=this.La=null;this.hd()};Xb.prototype.copy=function(){var a=new Xb(this.da),b=this.vc,c;for(c in b)a.add(b[c].value);return a};Xb.prototype.toArray=Xb.prototype.be=function(){var a=Array(this.uc),b=this.vc,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};Xb.prototype.toList=function(){var a=new N(this.da),b=this.vc,c;for(c in b)a.add(b[c].value);return a};H(Xb,{count:"count"},function(){return this.uc});
H(Xb,{size:"size"},function(){return this.uc});H(Xb,{i:"iterator"},function(){if(0>=this.uc)return Cc;var a=this.Rc;return null!==a?(a.reset(),a):new Gc(this)});function Mc(a){this.Fa=a;this.reset()}zb(Mc,{key:!0,value:!0});H(Mc,{i:"iterator"},function(){return this});Mc.prototype.reset=Mc.prototype.reset=function(){this.Ga=this.Fa.K;this.gb=null};
Mc.prototype.next=Mc.prototype.hasNext=Mc.prototype.next=function(){var a=this.Fa;if(a.K!==this.Ga){if(null===this.key)return!1;Ba(a)}var b=this.gb,b=null===b?a.La:b.wb;if(null!==b)return this.gb=b,this.value=this.key=a=b.key,!0;this.lf();return!1};Mc.prototype.first=Mc.prototype.first=function(){var a=this.Fa;this.Ga=a.K;a=a.La;return null!==a?(this.gb=a,this.value=this.key=a=a.key):null};
Mc.prototype.any=function(a){var b=this.Fa,c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.key))return!0;b.K!==c&&Ba(b);d=d.wb}return!1};Mc.prototype.all=function(a){var b=this.Fa,c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.key))return!1;b.K!==c&&Ba(b);d=d.wb}return!0};Mc.prototype.each=function(a){var b=this.Fa,c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.key),b.K!==c&&Ba(b),d=d.wb};H(Mc,{count:"count"},function(){return this.Fa.uc});
Mc.prototype.lf=function(){this.value=this.key=null;this.Ga=-1};Mc.prototype.toString=function(){return null!==this.gb?"MapKeySetIterator@"+this.gb.value:"MapKeySetIterator"};function Pc(a){sb(this);this.pa=!0;this.Fa=a}yb(Pc,Xb);Pc.prototype.freeze=function(){return this};Pc.prototype.wa=function(){return this};Pc.prototype.toString=function(){return"MapKeySet("+this.Fa.toString()+")"};Pc.prototype.add=Pc.prototype.set=Pc.prototype.add=function(){u("This Set is read-only: "+this.toString());return!1};
Pc.prototype.contains=Pc.prototype.has=Pc.prototype.contains=function(a){return this.Fa.contains(a)};Pc.prototype.remove=Pc.prototype["delete"]=Pc.prototype.remove=function(){u("This Set is read-only: "+this.toString());return!1};Pc.prototype.clear=Pc.prototype.clear=function(){u("This Set is read-only: "+this.toString())};Pc.prototype.first=Pc.prototype.first=function(){var a=this.Fa.La;return null!==a?a.key:null};
Pc.prototype.any=function(a){for(var b=this.Fa.La;null!==b;){if(a(b.key))return!0;b=b.wb}return!1};Pc.prototype.all=function(a){for(var b=this.Fa.La;null!==b;){if(!a(b.key))return!1;b=b.wb}return!0};Pc.prototype.each=function(a){for(var b=this.Fa.La;null!==b;)a(b.key),b=b.wb};Pc.prototype.copy=function(){return new Pc(this.Fa)};Pc.prototype.toSet=function(){var a=new Xb(this.Fa.Ap),b=this.Fa.vc,c;for(c in b)a.add(b[c].key);return a};
Pc.prototype.toArray=Pc.prototype.be=function(){var a=this.Fa.vc,b=Array(this.Fa.uc),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};Pc.prototype.toList=function(){var a=new N(this.da),b=this.Fa.vc,c;for(c in b)a.add(b[c].key);return a};H(Pc,{count:"count"},function(){return this.Fa.uc});H(Pc,{size:"size"},function(){return this.Fa.uc});H(Pc,{i:"iterator"},function(){return 0>=this.Fa.uc?Cc:new Mc(this.Fa)});function Qc(a){this.Fa=a;this.reset()}zb(Qc,{key:!0,value:!0});H(Qc,{i:"iterator"},function(){return this});
Qc.prototype.reset=Qc.prototype.reset=function(){var a=this.Fa;a.Nm=null;this.Ga=a.K;this.gb=null};Qc.prototype.next=Qc.prototype.hasNext=Qc.prototype.next=function(){var a=this.Fa;if(a.K!==this.Ga){if(null===this.key)return!1;Ba(a)}var b=this.gb,b=null===b?a.La:b.wb;if(null!==b)return this.gb=b,this.value=b.value,this.key=b.key,!0;this.lf();return!1};
Qc.prototype.first=Qc.prototype.first=function(){var a=this.Fa;this.Ga=a.K;a=a.La;if(null!==a){this.gb=a;var b=a.value;this.key=a.key;return this.value=b}return null};Qc.prototype.any=function(a){var b=this.Fa;b.Nm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.K!==c&&Ba(b);d=d.wb}return!1};Qc.prototype.all=function(a){var b=this.Fa;b.Nm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.K!==c&&Ba(b);d=d.wb}return!0};
Qc.prototype.each=function(a){var b=this.Fa;b.Nm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.value),b.K!==c&&Ba(b),d=d.wb};H(Qc,{count:"count"},function(){return this.Fa.uc});Qc.prototype.lf=function(){this.value=this.key=null;this.Ga=-1;this.Fa.Nm=this};Qc.prototype.toString=function(){return null!==this.gb?"MapValueSetIterator@"+this.gb.value:"MapValueSetIterator"};function Lc(a,b){this.key=a;this.value=b;this.Ym=this.wb=null}zb(Lc,{key:!0,value:!0});
Lc.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Rc(a){this.Fa=a;this.reset()}zb(Rc,{key:!0,value:!0});H(Rc,{i:"iterator"},function(){return this});Rc.prototype.reset=Rc.prototype.reset=function(){var a=this.Fa;a.Rc=null;this.Ga=a.K;this.gb=null};
Rc.prototype.next=Rc.prototype.hasNext=Rc.prototype.next=function(){var a=this.Fa;if(a.K!==this.Ga){if(null===this.key)return!1;Ba(a)}var b=this.gb,b=null===b?a.La:b.wb;if(null!==b)return this.gb=b,this.key=b.key,this.value=b.value,!0;this.lf();return!1};Rc.prototype.first=Rc.prototype.first=function(){var a=this.Fa;this.Ga=a.K;a=a.La;return null!==a?(this.gb=a,this.key=a.key,this.value=a.value,a):null};
Rc.prototype.any=function(a){var b=this.Fa;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d))return!0;b.K!==c&&Ba(b);d=d.wb}return!1};Rc.prototype.all=function(a){var b=this.Fa;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d))return!1;b.K!==c&&Ba(b);d=d.wb}return!0};Rc.prototype.each=function(a){var b=this.Fa;b.Rc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d),b.K!==c&&Ba(b),d=d.wb};H(Rc,{count:"count"},function(){return this.Fa.uc});
Rc.prototype.lf=function(){this.value=this.key=null;this.Ga=-1;this.Fa.Rc=this};Rc.prototype.toString=function(){return null!==this.gb?"MapIterator@"+this.gb:"MapIterator"};
function Fb(a,b){sb(this);this.pa=!1;void 0===a||null===a?this.Ap=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.Ap=a:za(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.Ap=a===Object?"object":a===String?"string":a===Number?"number":a:za(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.ru=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||
"function"===b?this.ru=b:za(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.ru=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:za(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.vc={};this.uc=0;this.Nm=this.Rc=null;this.K=0;this.Mg=this.La=null}vb("Map",Fb);Fb.prototype.hd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};
Fb.prototype.freeze=Fb.prototype.freeze=function(){this.pa=!0;return this};Fb.prototype.thaw=Fb.prototype.wa=function(){this.pa=!1;return this};Fb.prototype.toString=function(){return"Map("+sa(this.Ap)+","+sa(this.ru)+")#"+ub(this)};Fb.prototype.add=Fb.prototype.set=Fb.prototype.add=function(a,b){pa(this,a);var c=a;Ea(a)&&(c=tb(a));var d=this.vc[c];if(void 0===d)return this.uc++,d=new Lc(a,b),this.vc[c]=d,c=this.Mg,null===c?this.La=d:(d.Ym=c,c.wb=d),this.Mg=d,this.hd(),!0;d.value=b;return!1};
Fb.prototype.addAll=Fb.prototype.md=function(a){if(null===a)return this;if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);this.add(d.key,d.value)}else for(a=a.i;a.next();)this.add(a.key,a.value);return this};Fb.prototype.first=Fb.prototype.first=function(){return this.La};Fb.prototype.any=function(a){for(var b=this.K,c=this.La;null!==c;){if(a(c))return!0;this.K!==b&&Ba(this);c=c.wb}return!1};
Fb.prototype.all=function(a){for(var b=this.K,c=this.La;null!==c;){if(!a(c))return!1;this.K!==b&&Ba(this);c=c.wb}return!0};Fb.prototype.each=function(a){for(var b=this.K,c=this.La;null!==c;)a(c),this.K!==b&&Ba(this),c=c.wb};Fb.prototype.contains=Fb.prototype.has=Fb.prototype.contains=function(a){var b=a;return Ea(a)&&(b=ub(a),void 0===b)?!1:void 0!==this.vc[b]};
Fb.prototype.getValue=Fb.prototype.get=Fb.prototype.ha=function(a){var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return null;a=this.vc[b];return void 0===a?null:a.value};Fb.prototype.remove=Fb.prototype["delete"]=Fb.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return!1;a=this.vc[b];if(void 0===a)return!1;var c=a.wb,d=a.Ym;null!==c&&(c.Ym=d);null!==d&&(d.wb=c);this.La===a&&(this.La=c);this.Mg===a&&(this.Mg=d);delete this.vc[b];this.uc--;this.hd();return!0};
Fb.prototype.clear=Fb.prototype.clear=function(){pa(this);this.vc={};this.uc=0;this.Mg=this.La=null;this.hd()};Fb.prototype.copy=function(){var a=new Fb(this.Ap,this.ru),b=this.vc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};Fb.prototype.toArray=Fb.prototype.be=function(){var a=this.vc,b=Array(this.uc),c=0,d;for(d in a){var e=a[d];b[c]=new Lc(e.key,e.value);c++}return b};Fb.prototype.toKeySet=Fb.prototype.Yh=function(){return new Pc(this)};H(Fb,{count:"count"},function(){return this.uc});
H(Fb,{size:"size"},function(){return this.uc});H(Fb,{i:"iterator"},function(){if(0>=this.count)return Cc;var a=this.Rc;return null!==a?(a.reset(),a):new Rc(this)});H(Fb,{mI:"iteratorKeys"},function(){return 0>=this.count?Cc:new Mc(this)});H(Fb,{AC:"iteratorValues"},function(){if(0>=this.count)return Cc;var a=this.Nm;return null!==a?(a.reset(),a):new Qc(this)});function z(a,b){void 0===a?this.y=this.x=0:(this.x=a,this.y=b);this.pa=!1}vb("Point",z);z.Qg=!0;zb(z,{x:!0,y:!0});
z.prototype.assign=function(a){this.x=a.x;this.y=a.y};z.prototype.setTo=z.prototype.k=function(a,b){this.x=a;this.y=b;return this};z.prototype.set=z.prototype.set=function(a){this.kb();this.x=a.x;this.y=a.y;return this};z.prototype.copy=function(){var a=new z;a.x=this.x;a.y=this.y;return a};r=z.prototype;r.va=function(){this.pa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.pa=!0;return this};
r.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;return this};r.kb=function(a){if(this.pa){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);u(b)}};z.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new z(c,e)}return new z};
z.stringify=function(a){return a instanceof z?a.x.toString()+" "+a.y.toString():a.toString()};z.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};z.prototype.equals=z.prototype.A=function(a){return a instanceof z?this.x===a.x&&this.y===a.y:!1};z.prototype.equalTo=z.prototype.Qu=function(a,b){return this.x===a&&this.y===b};z.prototype.equalsApprox=z.prototype.Vd=function(a){return Q.q(this.x,a.x)&&Q.q(this.y,a.y)};
z.prototype.add=z.prototype.add=function(a){this.kb();this.x+=a.x;this.y+=a.y;return this};z.prototype.subtract=z.prototype.ws=function(a){this.kb();this.x-=a.x;this.y-=a.y;return this};z.prototype.offset=z.prototype.offset=function(a,b){this.kb();this.x+=a;this.y+=b;return this};
z.prototype.rotate=z.prototype.rotate=function(a){this.kb();if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=0,e=0;360<=a?a-=360:0>a&&(a+=360);90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.x=d*b-e*c;this.y=e*b+d*c;return this};z.prototype.scale=z.prototype.scale=function(a,b){this.x*=a;this.y*=b;return this};
z.prototype.distanceSquaredPoint=z.prototype.Xi=function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a};z.prototype.distanceSquared=z.prototype.sr=function(a,b){var c=a-this.x,d=b-this.y;return c*c+d*d};z.prototype.normalize=z.prototype.normalize=function(){this.kb();var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};z.prototype.directionPoint=z.prototype.Qh=function(a){return Wc(a.x-this.x,a.y-this.y)};
z.prototype.direction=z.prototype.direction=function(a,b){return Wc(a-this.x,b-this.y)};function Wc(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}z.prototype.projectOntoLineSegment=function(a,b,c,d){Q.Ml(a,b,c,d,this.x,this.y,this);return this};z.prototype.projectOntoLineSegmentPoint=function(a,b){Q.Ml(a.x,a.y,b.x,b.y,this.x,this.y,this);return this};
z.prototype.snapToGrid=function(a,b,c,d){Q.xr(this.x,this.y,a,b,c,d,this);return this};z.prototype.snapToGridPoint=function(a,b){Q.xr(this.x,this.y,a.x,a.y,b.width,b.height,this);return this};z.prototype.setRectSpot=z.prototype.qs=function(a,b){this.kb();this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};z.prototype.setSpot=z.prototype.ss=function(a,b,c,d,e){this.kb();this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};
z.prototype.transform=function(a){a.Ka(this);return this};function Xc(a,b){b.ah(a);return a}var Yc;z.distanceLineSegmentSquared=Yc=function(a,b,c,d,e,f){var g=e-c,h=f-d,k=g*g+h*h;c-=a;d-=b;var l=-c*g-d*h;if(0>=l||l>=k)return g=e-a,h=f-b,Math.min(c*c+d*d,g*g+h*h);a=g*d-h*c;return a*a/k};var Zc;z.distanceSquared=Zc=function(a,b,c,d){a=c-a;b=d-b;return a*a+b*b};var $c;
z.direction=$c=function(a,b,c,d){a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};z.prototype.isReal=z.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)};function Za(a,b){void 0===a?this.height=this.width=0:(this.width=a,this.height=b);this.pa=!1}vb("Size",Za);Za.Qg=!0;zb(Za,{width:!0,height:!0});
Za.prototype.assign=function(a){this.width=a.width;this.height=a.height};Za.prototype.setTo=Za.prototype.k=function(a,b){this.width=a;this.height=b;return this};Za.prototype.set=Za.prototype.set=function(a){this.kb();this.width=a.width;this.height=a.height;return this};Za.prototype.copy=function(){var a=new Za;a.width=this.width;a.height=this.height;return a};r=Za.prototype;r.va=function(){this.pa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
r.freeze=function(){this.pa=!0;return this};r.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;return this};r.kb=function(a){if(this.pa){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);u(b)}};Za.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new Za(c,e)}return new Za};
Za.stringify=function(a){return a instanceof Za?a.width.toString()+" "+a.height.toString():a.toString()};Za.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};Za.prototype.equals=Za.prototype.A=function(a){return a instanceof Za?this.width===a.width&&this.height===a.height:!1};Za.prototype.equalTo=Za.prototype.Qu=function(a,b){return this.width===a&&this.height===b};Za.prototype.equalsApprox=Za.prototype.Vd=function(a){return Q.q(this.width,a.width)&&Q.q(this.height,a.height)};
Za.prototype.isReal=Za.prototype.w=function(){return isFinite(this.width)&&isFinite(this.height)};
function D(a,b,c,d){void 0===a?this.height=this.width=this.y=this.x=0:a instanceof z?b instanceof z?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof Za?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):u("Incorrect arguments supplied to Rect constructor"):(this.x=a,this.y=b,this.width=c,this.height=d);this.pa=!1}vb("Rect",D);D.Qg=!0;zb(D,{x:!0,y:!0,width:!0,height:!0});
D.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};function ad(a,b,c){a.width=b;a.height=c}D.prototype.setTo=D.prototype.k=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;return this};D.prototype.set=D.prototype.set=function(a){this.kb();this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};D.prototype.setPoint=D.prototype.Pe=function(a){this.kb();this.x=a.x;this.y=a.y;return this};
D.prototype.setSize=function(a){this.kb();this.width=a.width;this.height=a.height;return this};D.prototype.copy=function(){var a=new D;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};r=D.prototype;r.va=function(){this.pa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.pa=!0;return this};r.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;return this};
r.kb=function(a){if(this.pa){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);u(b)}};D.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));return new D(c,e,f,g)}return new D};
D.stringify=function(a){return a instanceof D?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};D.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};D.prototype.equals=D.prototype.A=function(a){return a instanceof D?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:!1};D.prototype.equalTo=D.prototype.Qu=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};
D.prototype.equalsApprox=D.prototype.Vd=function(a){return Q.q(this.x,a.x)&&Q.q(this.y,a.y)&&Q.q(this.width,a.width)&&Q.q(this.height,a.height)};D.prototype.containsPoint=D.prototype.na=function(a){return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};D.prototype.containsRect=D.prototype.Wi=function(a){return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
D.prototype.contains=D.prototype.contains=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};D.prototype.reset=function(){this.kb();this.height=this.width=this.y=this.x=0};D.prototype.offset=D.prototype.offset=function(a,b){this.kb();this.x+=a;this.y+=b;return this};D.prototype.inflate=D.prototype.$e=function(a,b){return bd(this,b,a,b,a)};
D.prototype.addMargin=D.prototype.wu=function(a){return bd(this,a.top,a.right,a.bottom,a.left)};D.prototype.subtractMargin=D.prototype.VG=function(a){return bd(this,-a.top,-a.right,-a.bottom,-a.left)};D.prototype.grow=function(a,b,c,d){return bd(this,a,b,c,d)};function bd(a,b,c,d,e){a.kb();var f=a.width;c+e<=-f?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}D.prototype.intersectRect=function(a){return cd(this,a.x,a.y,a.width,a.height)};
D.prototype.intersect=function(a,b,c,d){return cd(this,a,b,c,d)};function cd(a,b,c,d,e){a.kb();var f=Math.max(a.x,b),g=Math.max(a.y,c);b=Math.min(a.x+a.width,b+d);c=Math.min(a.y+a.height,c+e);a.x=f;a.y=g;a.width=Math.max(0,b-f);a.height=Math.max(0,c-g);return a}D.prototype.intersectsRect=D.prototype.If=function(a){return this.rC(a.x,a.y,a.width,a.height)};
D.prototype.intersects=D.prototype.rC=function(a,b,c,d){var e=this.width,f=this.x;if(Infinity!==e&&Infinity!==c&&(e+=f,c+=a,isNaN(c)||isNaN(e)||f>c||a>e))return!1;a=this.height;c=this.y;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};function hd(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;if(e>d+f||f>c+e)return!1;c=a.height;d=b.height+10+10;e=a.y;f=b.y-10;return e>d+f||f>c+e?!1:!0}D.prototype.unionPoint=D.prototype.Zh=function(a){return id(this,a.x,a.y,0,0)};
D.prototype.unionRect=D.prototype.fh=function(a){return id(this,a.x,a.y,a.width,a.height)};D.prototype.union=D.prototype.HD=function(a,b,c,d){this.kb();void 0===c&&(c=0);void 0===d&&(d=0);return id(this,a,b,c,d)};function id(a,b,c,d,e){var f=Math.min(a.x,b),g=Math.min(a.y,c);b=Math.max(a.x+a.width,b+d);c=Math.max(a.y+a.height,c+e);a.x=f;a.y=g;a.width=b-f;a.height=c-g;return a}
D.prototype.setSpot=D.prototype.ss=function(a,b,c){this.kb();this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var jd;D.contains=jd=function(a,b,c,d,e,f,g,h){void 0===g&&(g=0);void 0===h&&(h=0);return a<=e&&e+g<=a+c&&b<=f&&f+h<=b+d};D.intersects=function(a,b,c,d,e,f,g,h){c+=a;g+=e;if(a>g||e>c)return!1;a=d+b;h+=f;return b>h||f>a?!1:!0};G(D,{left:"left"},function(){return this.x},function(a){this.kb(a);this.x=a});
G(D,{top:"top"},function(){return this.y},function(a){this.kb(a);this.y=a});G(D,{right:"right"},function(){return this.x+this.width},function(a){this.kb(a);this.x+=a-(this.x+this.width)});G(D,{bottom:"bottom"},function(){return this.y+this.height},function(a){this.kb(a);this.y+=a-(this.y+this.height)});G(D,{position:"position"},function(){return new z(this.x,this.y)},function(a){this.kb(a);this.x=a.x;this.y=a.y});
G(D,{size:"size"},function(){return new Za(this.width,this.height)},function(a){this.kb(a);this.width=a.width;this.height=a.height});G(D,{Yj:"center"},function(){return new z(this.x+this.width/2,this.y+this.height/2)},function(a){this.kb(a);this.x=a.x-this.width/2;this.y=a.y-this.height/2});G(D,{ua:"centerX"},function(){return this.x+this.width/2},function(a){this.kb(a);this.x=a-this.width/2});G(D,{Da:"centerY"},function(){return this.y+this.height/2},function(a){this.kb(a);this.y=a-this.height/2});
D.prototype.isReal=D.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};D.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function qd(a,b,c,d){void 0===a?this.left=this.bottom=this.right=this.top=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):u("Invalid arguments to Margin constructor");this.pa=!1}vb("Margin",qd);qd.Qg=!0;zb(qd,{top:!0,right:!0,bottom:!0,left:!0});qd.prototype.assign=function(a){this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
qd.prototype.setTo=qd.prototype.k=function(a,b,c,d){this.kb();this.top=a;this.right=b;this.bottom=c;this.left=d;return this};qd.prototype.set=qd.prototype.set=function(a){this.kb();this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};qd.prototype.copy=function(){var a=new qd;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};r=qd.prototype;r.va=function(){this.pa=!0;Object.freeze(this);return this};
r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.pa=!0;return this};r.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;return this};r.kb=function(a){if(this.pa){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);u(b)}};
qd.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new qd;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new qd(c);for(var f=NaN;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));if(isNaN(f))return new qd(c,e);for(var g=NaN;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));return isNaN(g)?new qd(c,e):new qd(c,e,f,g)}return new qd};
qd.stringify=function(a){return a instanceof qd?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};qd.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};qd.prototype.equals=qd.prototype.A=function(a){return a instanceof qd?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:!1};
qd.prototype.equalTo=qd.prototype.Qu=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};qd.prototype.equalsApprox=qd.prototype.Vd=function(a){return Q.q(this.top,a.top)&&Q.q(this.right,a.right)&&Q.q(this.bottom,a.bottom)&&Q.q(this.left,a.left)};qd.prototype.isReal=qd.prototype.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ib(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}ib.Qg=!0;
zb(ib,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});ib.prototype.set=ib.prototype.set=function(a){this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};ib.prototype.copy=function(){var a=new ib;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ib.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
ib.prototype.equals=ib.prototype.A=function(a){return a instanceof ib?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};ib.prototype.isIdentity=ib.prototype.Nr=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};ib.prototype.reset=ib.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0;return this};
ib.prototype.multiply=ib.prototype.multiply=function(a){var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,f=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ib.prototype.multiplyInverted=ib.prototype.KC=function(a){var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,f=a.m11*b,g=b*(a.m21*a.dy-a.m22*a.dx),h=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*f;e=this.m12*e+this.m22*f;f=this.m11*g+this.m21*h+this.dx;g=this.m12*g+this.m22*h+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=f;this.dy=g;return this};
ib.prototype.invert=ib.prototype.by=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ib.prototype.rotate=ib.prototype.rotate=function(a,b,c){360<=a?a-=360:0>a&&(a+=360);if(0===a)return this;this.translate(b,c);var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var f=this.m11*-e+this.m21*d,g=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=f;this.m22=g;this.translate(-b,-c);return this};
ib.prototype.translate=ib.prototype.translate=function(a,b){this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this};ib.prototype.scale=ib.prototype.scale=function(a,b){void 0===b&&(b=a);this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b;return this};ib.prototype.transformPoint=ib.prototype.Ka=function(a){var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};
ib.prototype.invertedTransformPoint=ib.prototype.ah=function(a){var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),f=a.x,g=a.y;a.x=f*this.m22*b+g*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=f*c+g*d+e;return a};
ib.prototype.transformRect=ib.prototype.FD=function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=this.m11,g=this.m12,h=this.m21,k=this.m22,l=this.dx,m=this.dy,n=b*f+c*h+l,p=b*g+c*k+m,q=d*f+c*h+l,c=d*g+c*k+m,s=b*f+e*h+l,b=b*g+e*k+m,f=d*f+e*h+l,d=d*g+e*k+m,e=n,g=p,n=Math.min(n,q),e=Math.max(e,q),g=Math.min(g,c),p=Math.max(p,c),n=Math.min(n,s),e=Math.max(e,s),g=Math.min(g,b),p=Math.max(p,b),n=Math.min(n,f),e=Math.max(e,f),g=Math.min(g,d),p=Math.max(p,d);a.x=n;a.y=g;a.width=e-n;a.height=p-g;return a};
function R(a,b,c,d){void 0===a?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.pa=!1}vb("Spot",R);R.Qg=!0;zb(R,{x:!0,y:!0,offsetX:!0,offsetY:!0});R.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};R.prototype.setTo=R.prototype.k=function(a,b,c,d){this.kb();this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};
R.prototype.set=R.prototype.set=function(a){this.kb();this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};R.prototype.copy=function(){var a=new R;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};r=R.prototype;r.va=function(){this.pa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.pa=!0;return this};
r.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;return this};r.kb=function(a){if(this.pa){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);u(b)}};function rd(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}var sd;
R.parse=sd=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return td;if("TopLeft"===a)return ud;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return vd;if("TopRight"===a)return Bd;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return Cd;if("Center"===a)return Dd;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return Ed;if("BottomLeft"===a)return Fd;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return Gd;if("BottomRight"===a)return Hd;if("TopSide"===a)return Id;if("LeftSide"===
a)return Jd;if("RightSide"===a)return Kd;if("BottomSide"===a)return Ld;if("TopBottomSides"===a)return Md;if("LeftRightSides"===a)return Vd;if("TopLeftSides"===a)return Wd;if("TopRightSides"===a)return Xd;if("BottomLeftSides"===a)return Yd;if("BottomRightSides"===a)return Zd;if("NotTopSide"===a)return $d;if("NotLeftSide"===a)return ae;if("NotRightSide"===a)return be;if("NotBottomSide"===a)return ce;if("AllSides"===a)return de;if("Default"===a)return ee;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(g=parseFloat(d));return new R(c,e,f,g)}return new R};R.stringify=function(a){return a instanceof R?a.Kc()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
R.prototype.toString=function(){return this.Kc()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(td)?"None":this.A(ud)?"TopLeft":this.A(vd)?"Top":this.A(Bd)?"TopRight":this.A(Cd)?"Left":this.A(Dd)?"Center":this.A(Ed)?"Right":this.A(Fd)?"BottomLeft":this.A(Gd)?"Bottom":this.A(Hd)?"BottomRight":this.A(Id)?"TopSide":this.A(Jd)?"LeftSide":this.A(Kd)?"RightSide":this.A(Ld)?"BottomSide":this.A(Md)?"TopBottomSides":this.A(Vd)?
"LeftRightSides":this.A(Wd)?"TopLeftSides":this.A(Xd)?"TopRightSides":this.A(Yd)?"BottomLeftSides":this.A(Zd)?"BottomRightSides":this.A($d)?"NotTopSide":this.A(ae)?"NotLeftSide":this.A(be)?"NotRightSide":this.A(ce)?"NotBottomSide":this.A(de)?"AllSides":this.A(ee)?"Default":"None"};R.prototype.equals=R.prototype.A=function(a){return a instanceof R?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:!1};
R.prototype.opposite=function(){return new R(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)};R.prototype.includesSide=function(a){if(!this.Jn()||!a.Jn())return!1;a=a.offsetY;return(this.offsetY&a)===a};R.prototype.isSpot=R.prototype.Kc=function(){return!isNaN(this.x)&&!isNaN(this.y)};R.prototype.isNoSpot=R.prototype.Gd=function(){return isNaN(this.x)||isNaN(this.y)};R.prototype.isSide=R.prototype.Jn=function(){return this.Gd()&&1===this.offsetX&&0!==this.offsetY};
R.prototype.isDefault=R.prototype.lc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var td;R.None=td=rd(new R(0,0,0,0),0).va();var ee;R.Default=ee=rd(new R(0,0,-1,0),-1).va();var ud;R.TopLeft=ud=(new R(0,0,0,0)).va();var vd;R.TopCenter=vd=(new R(.5,0,0,0)).va();var Bd;R.TopRight=Bd=(new R(1,0,0,0)).va();var Cd;R.LeftCenter=Cd=(new R(0,.5,0,0)).va();var Dd;R.Center=Dd=(new R(.5,.5,0,0)).va();var Ed;R.RightCenter=Ed=(new R(1,.5,0,0)).va();var Fd;
R.BottomLeft=Fd=(new R(0,1,0,0)).va();var Gd;R.BottomCenter=Gd=(new R(.5,1,0,0)).va();var Hd;R.BottomRight=Hd=(new R(1,1,0,0)).va();var fe;R.MiddleTop=fe=vd;var ge;R.MiddleLeft=ge=Cd;var he;R.MiddleRight=he=Ed;var ie;R.MiddleBottom=ie=Gd;R.Top=vd;var je;R.Left=je=Cd;var oe;R.Right=oe=Ed;R.Bottom=Gd;var Id;R.TopSide=Id=rd(new R(0,0,1,1),1).va();var Jd;R.LeftSide=Jd=rd(new R(0,0,1,2),1).va();var Kd;R.RightSide=Kd=rd(new R(0,0,1,4),1).va();var Ld;R.BottomSide=Ld=rd(new R(0,0,1,8),1).va();var Md;
R.TopBottomSides=Md=rd(new R(0,0,1,9),1).va();var Vd;R.LeftRightSides=Vd=rd(new R(0,0,1,6),1).va();var Wd;R.TopLeftSides=Wd=rd(new R(0,0,1,3),1).va();var Xd;R.TopRightSides=Xd=rd(new R(0,0,1,5),1).va();var Yd;R.BottomLeftSides=Yd=rd(new R(0,0,1,10),1).va();var Zd;R.BottomRightSides=Zd=rd(new R(0,0,1,12),1).va();var $d;R.NotTopSide=$d=rd(new R(0,0,1,14),1).va();var ae;R.NotLeftSide=ae=rd(new R(0,0,1,13),1).va();var be;R.NotRightSide=be=rd(new R(0,0,1,11),1).va();var ce;
R.NotBottomSide=ce=rd(new R(0,0,1,7),1).va();var de;R.AllSides=de=rd(new R(0,0,1,15),1).va();function pe(){this.re=[1,0,0,1,0,0]}pe.prototype.copy=function(){var a=new pe;a.re[0]=this.re[0];a.re[1]=this.re[1];a.re[2]=this.re[2];a.re[3]=this.re[3];a.re[4]=this.re[4];a.re[5]=this.re[5];return a};function qe(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.KB=[]}qe.prototype.addColorStop=function(a,b){this.KB.push({offset:a,color:b})};
function re(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.iv=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.document=b||document;this.YB=c;this.fv=null;this.path=[];this.Ph=new pe;this.stack=[];this.Ie=[];this.qD=this.lC=this.Ju=0;this.Ou=a;this.kG="http://www.w3.org/2000/svg";this.width=
this.Ou.width;this.height=this.Ou.height;this.Bk=se(this,"svg",{width:this.width+"px",height:this.height+"px",eJ:"0 0 "+this.Ou.width+" "+this.Ou.height});this.Bk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.Bk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");te(this,1,0,0,1,0,0);a=se(this,"clipPath",{id:"mainClip"});a.appendChild(se(this,"rect",{x:0,y:0,width:this.width,height:this.height}));this.Bk.appendChild(a);
this.Ie[0].setAttributeNS(null,"clip-path","url(#mainClip)")}r=re.prototype;r.arc=function(a,b,c,d,e,f){ue(this,a,b,c,d,e,f)};r.beginPath=function(){this.path=[]};r.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])};r.clearRect=function(){};r.clip=function(){ve(this,"clipPath",this.path,new pe)};r.closePath=function(){this.path.push(["z"])};r.createLinearGradient=function(a,b,c,d){var e=new qe("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};r.createPattern=function(){};
r.createRadialGradient=function(a,b,c,d,e,f){var g=new qe("radial");g.x1=a;g.y1=b;g.r1=c;g.x2=d;g.y2=e;g.r2=f;return g};
r.drawImage=function(a,b,c,d,e,f,g,h,k){a=[b,c,d,e,f,g,h,k,a];b=this.Ph;e=a[8];c="";e instanceof HTMLCanvasElement&&(c=e.toDataURL());e instanceof HTMLImageElement&&(c=e.src);c={x:0,y:0,width:a[6],height:a[7],href:c};d="";f=a[6]/a[2];g=a[7]/a[3];if(0!==a[4]||0!==a[5])d+=" translate("+a[4]+", "+a[5]+")";if(1!==f||1!==g)d+=" scale("+f+", "+g+")";if(0!==a[0]||0!==a[1])d+=" translate("+-a[0]+", "+-a[1]+")";if(0!==a[0]||0!==a[1]||a[2]!==e.naturalWidth||a[3]!==e.naturalHeight)e="CLIP"+this.Ju,this.Ju++,
f=se(this,"clipPath",{id:e}),f.appendChild(se(this,"rect",{x:a[0],y:a[1],width:a[2],height:a[3]})),this.Bk.appendChild(f),c["clip-path"]="url(#"+e+")";we(this,"image",c,b,d);this.addElement("image",c)};r.fill=function(){ve(this,"fill",this.path,this.Ph)};r.fillRect=function(a,b,c,d){Ie(this,"fill",[a,b,c,d],this.Ph)};
r.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};we(this,"fill",b,this.Ph);this.addElement("text",b,a[0])};r.lineTo=function(a,b){this.path.push(["L",a,b])};r.moveTo=function(a,b){this.path.push(["M",a,b])};r.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};r.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
r.restore=function(){this.Ph=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.iv=a.iv;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
r.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,iv:this.iv,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.Ph.copy())};
r.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||te(this,a,b,c,d,e,f)};r.scale=function(){};r.stroke=function(){ve(this,"stroke",this.path,this.Ph)};r.strokeRect=function(a,b,c,d){Ie(this,"stroke",[a,b,c,d],this.Ph)};function se(a,b,c,d){a=a.document.createElementNS(a.kG,b);if(Ea(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}
r.addElement=function(a,b,c){a=se(this,a,b,c);0<this.Ie.length?this.Ie[this.Ie.length-1].appendChild(a):this.Bk.appendChild(a);return this.fv=a};
function we(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"==b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof qe?Je(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"==b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof qe?Je(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.re;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function Je(a,b){var c="GRAD"+a.lC;a.lC++;var d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=se(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=se(a,"radialGradient",d);else throw Error("invalid gradient");for(var e=b.KB,f=e.length,g=[],h=0;h<f;h++){var k=e[h],l=k.color,k={offset:k.offset,"stop-color":l};/^rgba\(/.test(l)&&(l=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(l),
k["stop-color"]="rgb("+l[1]+","+l[2]+","+l[3]+")",k["stop-opacity"]=l[4]);g.push(k)}g.sort(function(a,b){return a.offset>b.offset?1:-1});for(h=0;h<f;h++)d.appendChild(se(a,"stop",g[h]));a.Bk.appendChild(d);return"url(#"+c+")"}function Ie(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};we(a,b,c,d);a.addElement("rect",c)}
function ve(a,b,c,d){for(var e=[],f=0;f<c.length;f++){var g=Ka(c[f]),h=[g.shift()];if("A"==h[0])h.push(g.shift()+","+g.shift(),g.shift(),g.shift()+","+g.shift(),g.shift()+","+g.shift());else for(;g.length;)h.push(g.shift()+","+g.shift());e.push(h.join(" "))}c={d:e.join(" ")};we(a,b,c,d);"clipPath"===b?(b="CLIP"+a.Ju,a.Ju++,d=se(a,"clipPath",{id:b}),d.appendChild(se(a,"path",c)),a.Bk.appendChild(d),0<a.Ie.length&&a.Ie[a.Ie.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function ue(a,b,c,d,e,f,g){var h=Math.abs(e-f);if(e!=f){var k=b+d*Math.cos(f);f=c+d*Math.sin(f);h>=2*Math.PI?(ue(a,b,c,d,e,e+Math.PI,g),ue(a,b,c,d,e+Math.PI,e+2*Math.PI,g),a.path.push(["M",k,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),h=180*h/Math.PI,e=g?0:1,g=180<=h==!!g?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,h,g,e,k,f]))}}function te(a,b,c,d,e,f,g){var h=new pe;h.re=[b,c,d,e,f,g];b={};we(a,"g",b,h);h=a.addElement("g",b);a.Ie.push(h)}
r.Ja=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+this.qD;this.qD++;var b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,f,g;c=se(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",WI:this.shadowBlur/2});d=se(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=se(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});f=se(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});g=se(this,"feMerge",{});g.appendChild(se(this,"feMergeNode",{"in":"offsetBlur"}));g.appendChild(se(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);b.appendChild(g);0<this.Ie.length&&this.Ie[this.Ie.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};
function Rb(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.Yc=c;c.getContext&&c.getContext("2d")||u("Browser does not support HTML Canvas Element");this.LE=c.getContext("2d");c.N=a;Object.seal(this)}r=Rb.prototype;r.getContext=function(){return this.LE};r.toDataURL=function(a,b){return this.Yc.toDataURL(a,b)};r.getBoundingClientRect=function(){return this.Yc.getBoundingClientRect()};r.focus=function(){return this.Yc.focus()};
r.addEventListener=function(a,b,c){this.Yc.addEventListener(a,b,c)};r.removeEventListener=function(a,b,c){this.Yc.removeEventListener(a,b,c)};G(Rb,{width:"width"},function(){return this.Yc.width},function(a){this.Yc.width=a});G(Rb,{height:"height"},function(){return this.Yc.height},function(a){this.Yc.height=a});G(Rb,{style:"style"},function(){return this.Yc.style},function(a){this.Yc.style=a});
var Q={ga:4*((Math.sqrt(2)-1)/3),fj:(new z(0,0)).va(),VD:(new D(0,0,0,0)).va(),ro:(new qd(0,0,0,0)).va(),TD:(new qd(2,2,2,2)).va(),UD:(new Za(Infinity,Infinity)).va(),QD:(new z(-Infinity,-Infinity)).va(),PD:(new z(Infinity,Infinity)).va(),so:(new Za(0,0)).va(),Ov:(new Za(1,1)).va(),qo:(new Za(6,6)).va(),Lv:(new Za(8,8)).va(),RD:(new z(NaN,NaN)).va(),Pv:new Sb,ai:new Sb,mz:null,sqrt:function(a){if(0>=a)return 0;var b=Q.mz;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);Q.mz=b}return 1>a?
(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)},q:function(a,b){var c=a-b;return.5>c&&-.5<c},Sa:function(a,b){var c=a-b;return 5E-8>c&&-5E-8<c},bd:function(a,b,c,d,e,f,g){0>=e&&(e=1E-6);var h=0,k=0,l=0,m=0;a<c?(k=a,h=c):(k=c,h=a);b<d?(m=b,l=d):(m=d,l=b);if(a===c)return m<=g&&g<=l&&a-e<=f&&f<=a+e;if(b===d)return k<=f&&f<=h&&b-e<=g&&g<=b+e;h+=e;k-=e;if(k<=f&&f<=h&&(l+=e,m-=e,m<=g&&g<=l))if(h-k>l-m)if(a-c>e||c-a>e){if(f=(d-b)/(c-a)*(f-a)+b,f-e<=g&&g<=f+e)return!0}else return!0;else if(b-
d>e||d-b>e){if(g=(c-a)/(d-b)*(g-b)+a,g-e<=f&&f<=g+e)return!0}else return!0;return!1},Gu:function(a,b,c,d,e,f,g,h,k,l,m,n){if(Q.bd(a,b,g,h,n,c,d)&&Q.bd(a,b,g,h,n,e,f))return Q.bd(a,b,g,h,n,l,m);var p=(a+c)/2,q=(b+d)/2,s=(c+e)/2,t=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(p+s)/2;c=(q+t)/2;var s=(s+e)/2,t=(t+f)/2,v=(d+s)/2,x=(c+t)/2;return Q.Gu(a,b,p,q,d,c,v,x,k,l,m,n)||Q.Gu(v,x,s,t,e,f,g,h,k,l,m,n)},DE:function(a,b,c,d,e,f,g,h,k){var l=(c+e)/2,m=(d+f)/2;k.x=(((a+c)/2+l)/2+(l+(e+g)/2)/2)/2;k.y=(((b+d)/2+m)/2+(m+
(f+h)/2)/2)/2;return k},CE:function(a,b,c,d,e,f,g,h){var k=(c+e)/2,l=(d+f)/2;return $c(((a+c)/2+k)/2,((b+d)/2+l)/2,(k+(e+g)/2)/2,(l+(f+h)/2)/2)},rn:function(a,b,c,d,e,f,g,h,k,l){if(Q.bd(a,b,g,h,k,c,d)&&Q.bd(a,b,g,h,k,e,f))id(l,a,b,0,0),id(l,g,h,0,0);else{var m=(a+c)/2,n=(b+d)/2,p=(c+e)/2,q=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(m+p)/2;c=(n+q)/2;var p=(p+e)/2,q=(q+f)/2,s=(d+p)/2,t=(c+q)/2;Q.rn(a,b,m,n,d,c,s,t,k,l);Q.rn(s,t,p,q,e,f,g,h,k,l)}return l},Rd:function(a,b,c,d,e,f,g,h,k,l){if(Q.bd(a,b,g,h,k,c,d)&&
Q.bd(a,b,g,h,k,e,f))0===l.length&&(l.push(a),l.push(b)),l.push(g),l.push(h);else{var m=(a+c)/2,n=(b+d)/2,p=(c+e)/2,q=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(m+p)/2;c=(n+q)/2;var p=(p+e)/2,q=(q+f)/2,s=(d+p)/2,t=(c+q)/2;Q.Rd(a,b,m,n,d,c,s,t,k,l);Q.Rd(s,t,p,q,e,f,g,h,k,l)}return l},Fy:function(a,b,c,d,e,f,g,h,k,l){if(Q.bd(a,b,e,f,l,c,d))return Q.bd(a,b,e,f,l,h,k);var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var p=(m+c)/2,q=(n+d)/2;return Q.Fy(a,b,m,n,p,q,g,h,k,l)||Q.Fy(p,q,c,d,e,f,g,h,k,l)},NI:function(a,b,c,
d,e,f,g){g.x=((a+c)/2+(c+e)/2)/2;g.y=((b+d)/2+(d+f)/2)/2;return g},Ey:function(a,b,c,d,e,f,g,h){if(Q.bd(a,b,e,f,g,c,d))id(h,a,b,0,0),id(h,e,f,0,0);else{var k=(a+c)/2,l=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var m=(k+c)/2,n=(l+d)/2;Q.Ey(a,b,k,l,m,n,g,h);Q.Ey(m,n,c,d,e,f,g,h)}return h},$n:function(a,b,c,d,e,f,g,h){if(Q.bd(a,b,e,f,g,c,d))0===h.length&&(h.push(a),h.push(b)),h.push(e),h.push(f);else{var k=(a+c)/2,l=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var m=(k+c)/2,n=(l+d)/2;Q.$n(a,b,k,l,m,n,g,h);Q.$n(m,n,c,d,e,f,g,h)}return h},
lr:function(a,b,c,d,e,f,g,h,k,l,m,n,p,q){0>=p&&(p=1E-6);if(Q.bd(a,b,g,h,p,c,d)&&Q.bd(a,b,g,h,p,e,f)){var s=(a-g)*(l-n)-(b-h)*(k-m);if(0===s)return!1;p=((a*h-b*g)*(k-m)-(a-g)*(k*n-l*m))/s;s=((a*h-b*g)*(l-n)-(b-h)*(k*n-l*m))/s;if((k>m?k-m:m-k)<(l>n?l-n:n-l)){if(g=k=0,b<h?(k=b,g=h):(k=h,g=b),s<k||s>g)return!1}else if(a<g?k=a:(k=g,g=a),p<k||p>g)return!1;q.x=p;q.y=s;return!0}var s=(a+c)/2,t=(b+d)/2;c=(c+e)/2;d=(d+f)/2;e=(e+g)/2;f=(f+h)/2;var v=(s+c)/2,x=(t+d)/2;c=(c+e)/2;d=(d+f)/2;var B=(v+c)/2,y=(x+d)/
2,C=(m-k)*(m-k)+(n-l)*(n-l),K=!1;Q.lr(a,b,s,t,v,x,B,y,k,l,m,n,p,q)&&(b=(q.x-k)*(q.x-k)+(q.y-l)*(q.y-l),b<C&&(C=b,K=!0));a=q.x;s=q.y;Q.lr(B,y,c,d,e,f,g,h,k,l,m,n,p,q)&&(b=(q.x-k)*(q.x-k)+(q.y-l)*(q.y-l),b<C?K=!0:(q.x=a,q.y=s));return K},mr:function(a,b,c,d,e,f,g,h,k,l,m,n,p){var q=0;0>=p&&(p=1E-6);if(Q.bd(a,b,g,h,p,c,d)&&Q.bd(a,b,g,h,p,e,f)){p=(a-g)*(l-n)-(b-h)*(k-m);if(0===p)return q;var s=((a*h-b*g)*(k-m)-(a-g)*(k*n-l*m))/p,t=((a*h-b*g)*(l-n)-(b-h)*(k*n-l*m))/p;if(s>=m)return q;if((k>m?k-m:m-k)<
(l>n?l-n:n-l)){if(a=k=0,b<h?(k=b,a=h):(k=h,a=b),t<k||t>a)return q}else if(a<g?(k=a,a=g):k=g,s<k||s>a)return q;0<p?q++:0>p&&q--}else{var s=(a+c)/2,t=(b+d)/2,v=(c+e)/2,x=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(s+v)/2;c=(t+x)/2;var v=(v+e)/2,x=(x+f)/2,B=(d+v)/2,y=(c+x)/2,q=q+Q.mr(a,b,s,t,d,c,B,y,k,l,m,n,p),q=q+Q.mr(B,y,v,x,e,f,g,h,k,l,m,n,p)}return q},Ml:function(a,b,c,d,e,f,g){if(Q.Sa(a,c)){var h=0;c=0;b<d?(h=b,c=d):(h=d,c=b);d=f;if(d<h)return g.x=a,g.y=h,!1;if(d>c)return g.x=a,g.y=c,!1;g.x=a;g.y=d;return!0}if(Q.Sa(b,
d)){a<c?h=a:(h=c,c=a);d=e;if(d<h)return g.x=h,g.y=b,!1;if(d>c)return g.x=c,g.y=b,!1;g.x=d;g.y=b;return!0}h=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>h)return g.x=a,g.y=b,!1;if(1.000005<h)return g.x=c,g.y=d,!1;g.x=a+h*(c-a);g.y=b+h*(d-b);return!0},og:function(a,b,c,d,e,f,g,h,k){if(Q.q(a,c)&&Q.q(b,d))return k.x=a,k.y=b,!1;if(Q.Sa(e,g)){if(Q.Sa(a,c))return Q.Ml(a,b,c,d,e,f,k),!1;f=(d-b)/(c-a)*(e-a)+b;return Q.Ml(a,b,c,d,e,f,k)}h=(h-f)/(g-e);if(Q.Sa(a,c)){f=h*(a-e)+f;c=g=0;b<d?(g=b,
c=d):(g=d,c=b);if(f<g)return k.x=a,k.y=g,!1;if(f>c)return k.x=a,k.y=c,!1;k.x=a;k.y=f;return!0}g=(d-b)/(c-a);if(Q.Sa(h,g))return Q.Ml(a,b,c,d,e,f,k),!1;e=(g*a-h*e+f-b)/(g-h);if(Q.Sa(g,0)){a<c?g=a:(g=c,c=a);if(e<g)return k.x=g,k.y=b,!1;if(e>c)return k.x=c,k.y=b,!1;k.x=e;k.y=b;return!0}f=g*(e-a)+b;return Q.Ml(a,b,c,d,e,f,k)},oI:function(a,b,c,d,e){return Q.og(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},XH:function(a,b,c,d,e,f,g,h,k,l){function m(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<n&&(n=e,k.x=c,k.y=d)}var n=
Infinity;m(k.x,k.y);var p=0,q=0,s=0,t=0;e<g?(p=e,q=g):(p=g,q=e);f<h?(s=e,t=g):(s=g,t=e);p=(q-p)/2+l;l=(t-s)/2+l;e=(e+g)/2;f=(f+h)/2;if(0===p||0===l)return k;if(.5>(c>a?c-a:a-c)){p=1-(c-e)*(c-e)/(p*p);if(0>p)return k;p=Math.sqrt(p);d=-l*p+f;m(c,l*p+f);m(c,d)}else{c=(d-b)/(c-a);d=1/(p*p)+c*c/(l*l);h=2*c*(b-c*a)/(l*l)-2*c*f/(l*l)-2*e/(p*p);p=h*h-4*d*(2*c*a*f/(l*l)-2*b*f/(l*l)+f*f/(l*l)+e*e/(p*p)-1+(b-c*a)*(b-c*a)/(l*l));if(0>p)return k;p=Math.sqrt(p);l=(-h+p)/(2*d);m(l,c*l-c*a+b);p=(-h-p)/(2*d);m(p,
c*p-c*a+b)}return k},kk:function(a,b,c,d,e,f,g,h,k){var l=1E21,m=a,n=b;if(Q.og(a,b,a,d,e,f,g,h,k)){var p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f);p<l&&(l=p,m=k.x,n=k.y)}Q.og(c,b,c,d,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));Q.og(a,b,c,b,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));Q.og(a,d,c,d,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));k.x=m;k.y=n;return 1E21>l},$u:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,h=a.left,k=a.right,
l=a.top,m=a.bottom;return d===f?(f=a=0,e<g?(a=e,f=g):(a=g,f=e),h<=d&&d<=k&&a<=m&&f>=l):e===g?(d<f?a=d:(a=f,f=d),l<=e&&e<=m&&a<=k&&f>=h):a.na(b)||a.na(c)||Q.Zu(h,l,k,l,d,e,f,g)||Q.Zu(k,l,k,m,d,e,f,g)||Q.Zu(k,m,h,m,d,e,f,g)||Q.Zu(h,m,h,l,d,e,f,g)?!0:!1},Zu:function(a,b,c,d,e,f,g,h){return 0>=Q.Ku(a,b,c,d,e,f)*Q.Ku(a,b,c,d,g,h)&&0>=Q.Ku(e,f,g,h,a,b)*Q.Ku(e,f,g,h,c,d)},Ku:function(a,b,c,d,e,f){c-=a;d-=b;a=e-a;b=f-b;f=a*d-b*c;0===f&&(f=a*c+b*d,0<f&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0)));return 0>f?-1:0<f?1:0},
cs:function(a){0>a&&(a+=360);360<=a&&(a-=360);return a},SB:function(a,b,c,d,e,f){void 0===f&&(f=!1);var g=Math.PI;f||(d*=g/180,e*=g/180);f=d<e?1:-1;var h=[],k=g/2,l=d;for(d=Math.min(2*g+1E-5,Math.abs(e-d));1E-5<d;)e=l+f*Math.min(d,k),h.push(Q.RE(c,l,e,a,b)),d-=Math.abs(e-l),l=e;return h},RE:function(a,b,c,d,e){var f=(c-b)/2,g=a*Math.cos(f),h=a*Math.sin(f),k=.5522847498*Math.tan(f),l=g+k*h,g=-h+k*g,h=-g,k=f+b,f=Math.cos(k),k=Math.sin(k);return[d+a*Math.cos(b),e+a*Math.sin(b),d+l*f-g*k,e+l*k+g*f,d+
l*f-h*k,e+l*k+h*f,d+a*Math.cos(c),e+a*Math.sin(c)]},xr:function(a,b,c,d,e,f,g){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/f)*f+d;var h=c;c+e-a<e/2&&(h=c+e);a=d;d+f-b<f/2&&(a=d+f);g.k(h,a);return g},hC:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(0<e);return f},$E:function(a,b,c,d){var e=0>c,f=0>d,g=0,h=g=0;a<b?(g=1,h=0):(g=0,h=1);var k=0,l=0,m=0,k=0===g?a:b,l=0===g?c:d;if(0===g?e:f)l=-l;g=h;m=0===g?c:d;if(0===g?e:f)m=-m;return Q.aF(k,0===g?a:b,l,m,0,0)},aF:function(a,
b,c,d,e,f){e=0;if(0<d)if(0<c){f=a*a;e=b*b;a*=c;var g=b*d,h=-e+g,k=-e+Math.sqrt(a*a+g*g);b=h;for(var l=0;9999999999>l;++l){b=.5*(h+k);if(b===h||b===k)break;var m=a/(b+f),n=g/(b+e),m=m*m+n*n-1;if(0<m)h=b;else if(0>m)k=b;else break}c=f*c/(b+f)-c;d=e*d/(b+e)-d;e=Math.sqrt(c*c+d*d)}else e=Math.abs(d-b);else d=a*a-b*b,e=a*c,e<d?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,e=Math.sqrt(c*c+f*f)):e=Math.abs(c-a);return e}};
function Ke(a){1<arguments.length&&u("Geometry constructor can take at most one optional argument, the Geometry type.");sb(this);this.pa=!1;void 0===a&&(a=Le);this.da=a;this.fb=this.Wa=this.Wb=this.Pb=0;this.ji=new N(Me);this.kt=this.ji.K;this.Vs=(new D).freeze();this.Ca=!0;this.Fh=ud;this.Gh=Hd;this.Gm=this.Hm=NaN;this.ph=Ne}vb("Geometry",Ke);Ke.Qg=!0;
Ke.prototype.copy=function(){var a=new Ke;a.da=this.da;a.Pb=this.Pb;a.Wb=this.Wb;a.Wa=this.Wa;a.fb=this.fb;for(var b=this.ji.l,c=b.length,d=a.ji,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.kt=this.kt;a.Vs.assign(this.Vs);a.Ca=this.Ca;a.Fh=this.Fh.O();a.Gh=this.Gh.O();a.Hm=this.Hm;a.Gm=this.Gm;a.ph=this.ph;return a};var Oe;Ke.Line=Oe=I(Ke,"Line",0);var Pe;Ke.Rectangle=Pe=I(Ke,"Rectangle",1);var Qe;Ke.Ellipse=Qe=I(Ke,"Ellipse",2);var Le;Ke.Path=Le=I(Ke,"Path",3);
Ke.prototype.va=function(){this.freeze();Object.freeze(this);return this};Ke.prototype.freeze=function(){this.pa=!0;var a=this.Ya;a.freeze();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].freeze();return this};Ke.prototype.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;var a=this.Ya;a.wa();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].wa();return this};
Ke.prototype.equalsApprox=Ke.prototype.Vd=function(a){if(!(a instanceof Ke))return!1;if(this.type!==a.type)return this.type===Oe&&a.type===Le?Ze(this,a):a.type===Oe&&this.type===Le?Ze(a,this):!1;if(this.type===Le){var b=this.Ya.l;a=a.Ya.l;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Vd(a[d]))return!1;return!0}return Q.q(this.ia,a.ia)&&Q.q(this.ja,a.ja)&&Q.q(this.s,a.s)&&Q.q(this.u,a.u)};
function Ze(a,b){if(a.type!==Oe||b.type!==Le)return!1;if(1===b.Ya.count){var c=b.Ya.Y(0);if(1===c.ra.count&&Q.q(a.ia,c.ia)&&Q.q(a.ja,c.ja)&&(c=c.ra.Y(0),c.type===$e&&Q.q(a.s,c.s)&&Q.q(a.u,c.u)))return!0}return!1}var af;Ke.stringify=af=function(a){return a.toString()};
Ke.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case Oe:return 0>a?"M"+this.ia.toString()+" "+this.ja.toString()+"L"+this.s.toString()+" "+this.u.toString():"M"+this.ia.toFixed(a)+" "+this.ja.toFixed(a)+"L"+this.s.toFixed(a)+" "+this.u.toFixed(a);case Pe:var b=new D(this.ia,this.ja,0,0);b.HD(this.s,this.u,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Qe:b=new D(this.ia,this.ja,0,0);b.HD(this.s,this.u,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Le:for(var b="",c=this.Ya.l,d=c.length,e=0;e<d;e++){var f=c[e];0<e&&(b+=" x ");f.Mr&&(b+="F ");b+=f.toString(a)}return b;default:return this.type.toString()}};var bf;
Ke.fillPath=bf=function(a){"string"!==typeof a&&ta(a,"string",Ke,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var cf;
Ke.parse=cf=function(a,b){function c(){return l>=t-1?!0:null!==k[l+1].match(/[A-Za-z]/)}function d(){l++;return k[l]}function e(){var a=new z(parseFloat(d()),parseFloat(d()));m===m.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function f(){return s=e()}function g(){return q=e()}function h(){return"c"!==n.toLowerCase()&&"s"!==n.toLowerCase()?s:new z(2*s.x-q.x,2*s.y-q.y)}void 0===b&&(b=!1);"string"!==typeof a&&ta(a,"string",Ke,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var k=a.split(" "),l=-1,m="",n="",p=new z(0,0),q=new z(0,0),s=new z(0,
0),t=k.length,v=E(),x=!1,B=!1,y=!0;!(l>=t-1);)if(n=m,m=d(),""!==m)switch(m.toUpperCase()){case "X":y=!0;B=x=!1;break;case "M":var C=f();null===v.xb||!0===y?(S(v,C.x,C.y,x,!1,!B),y=!1):v.moveTo(C.x,C.y);for(p=s;!c();)C=f(),v.lineTo(C.x,C.y);break;case "L":for(;!c();)C=f(),v.lineTo(C.x,C.y);break;case "H":for(;!c();)s=C=new z((m===m.toLowerCase()?s.x:0)+parseFloat(d()),s.y),v.lineTo(s.x,s.y);break;case "V":for(;!c();)s=C=new z(s.x,(m===m.toLowerCase()?s.y:0)+parseFloat(d())),v.lineTo(s.x,s.y);break;
case "C":for(;!c();){var K=e(),J=g(),C=f();T(v,K.x,K.y,J.x,J.y,C.x,C.y)}break;case "S":for(;!c();)K=h(),J=g(),C=f(),T(v,K.x,K.y,J.x,J.y,C.x,C.y);break;case "Q":for(;!c();)J=g(),C=f(),df(v,J.x,J.y,C.x,C.y);break;case "T":for(;!c();)q=J=h(),C=f(),df(v,J.x,J.y,C.x,C.y);break;case "B":for(;!c();){var C=parseFloat(d()),K=parseFloat(d()),J=parseFloat(d()),ba=parseFloat(d()),ja=parseFloat(d()),Y=ja,P=!1;c()||(Y=parseFloat(d()),c()||(P=0!==parseFloat(d())));m===m.toLowerCase()&&(J+=s.x,ba+=s.y);v.arcTo(C,
K,J,ba,ja,Y,P)}break;case "A":for(;!c();)K=Math.abs(parseFloat(d())),J=Math.abs(parseFloat(d())),ba=parseFloat(d()),ja=!!parseFloat(d()),Y=!!parseFloat(d()),C=f(),ef(v,K,J,ba,ja,Y,C.x,C.y);break;case "Z":C=v.m.Ya.l[v.m.Ya.length-1];ff(v);s=p;break;case "F":C="";for(K=1;k[l+K];)if(null!==k[l+K].match(/[Uu]/))K++;else if(null===k[l+K].match(/[A-Za-z]/))K++;else{C=k[l+K];break}C.match(/[Mm]/)?x=!0:gf(v);break;case "U":C="";for(K=1;k[l+K];)if(null!==k[l+K].match(/[Ff]/))K++;else if(null===k[l+K].match(/[A-Za-z]/))K++;
else{C=k[l+K];break}C.match(/[Mm]/)?B=!0:v.Ja(!1)}p=v.m;F(v);if(b)for(v=p.Ya.i;v.next();)C=v.value,C.Mr=!0;return p};function hf(a,b){for(var c=a.length,d=Va(),e=0;e<c;e++){var f=a[e];d.x=f[0];d.y=f[1];b.Ka(d);f[0]=d.x;f[1]=d.y;d.x=f[2];d.y=f[3];b.Ka(d);f[2]=d.x;f[3]=d.y;d.x=f[4];d.y=f[5];b.Ka(d);f[4]=d.x;f[5]=d.y;d.x=f[6];d.y=f[7];b.Ka(d);f[6]=d.x;f[7]=d.y}A(d)}Ke.prototype.ky=function(){if(this.Ca||this.kt!==this.Ya.K)return!0;for(var a=this.Ya.l,b=a.length,c=0;c<b;c++)if(a[c].ky())return!0;return!1};
Ke.prototype.ez=function(){this.Ca=!1;this.kt=this.Ya.K;for(var a=this.Ya.l,b=a.length,c=0;c<b;c++)a[c].ez()};Ke.prototype.Bf=function(){var a=this.Vs;a.wa();isNaN(this.Hm)||isNaN(this.Gm)?a.k(0,0,0,0):a.k(0,0,this.Hm,this.Gm);jf(this,a,!1);id(a,0,0,0,0);a.freeze()};Ke.prototype.computeBoundsWithoutOrigin=Ke.prototype.IE=function(){var a=new D;jf(this,a,!0);return a};
function jf(a,b,c){switch(a.type){case Oe:case Pe:case Qe:c?b.k(a.Pb,a.Wb,0,0):id(b,a.Pb,a.Wb,0,0);id(b,a.Wa,a.fb,0,0);break;case Le:var d=a.Ya;a=d.l;for(var d=d.length,e=0;e<d;e++){var f=a[e];c&&0===e?b.k(f.ia,f.ja,0,0):id(b,f.ia,f.ja,0,0);for(var g=f.ra.l,h=g.length,k=f.ia,l=f.ja,m=0;m<h;m++){var n=g[m];switch(n.type){case $e:case vf:k=n.s;l=n.u;id(b,k,l,0,0);break;case wf:Q.rn(k,l,n.vb,n.Lb,n.ve,n.we,n.s,n.u,.5,b);k=n.s;l=n.u;break;case xf:Q.Ey(k,l,n.vb,n.Lb,n.s,n.u,.5,b);k=n.s;l=n.u;break;case yf:case zf:for(var n=
n.type===yf?Af(n,f):Bf(n,f,k,l),p=n.length,q=null,s=0;s<p;s++)q=n[s],Q.rn(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.5,b);null!==q&&(k=q[6],l=q[7]);break;default:u("Unknown Segment type: "+n.type)}}}break;default:u("Unknown Geometry type: "+a.type)}}Ke.prototype.normalize=Ke.prototype.normalize=function(){pa(this);var a=this.IE();this.offset(-a.x,-a.y);return new z(-a.x,-a.y)};Ke.prototype.offset=Ke.prototype.offset=function(a,b){pa(this);this.transform(1,0,0,1,a,b);return this};
Ke.prototype.scale=Ke.prototype.scale=function(a,b){pa(this);this.transform(a,0,0,b,0,0);return this};Ke.prototype.rotate=Ke.prototype.rotate=function(a,b,c){pa(this);void 0===b&&(b=0);void 0===c&&(c=0);var d=hb();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);jb(d);return this};
Ke.prototype.transform=Ke.prototype.transform=function(a,b,c,d,e,f){var g=0,h=0;switch(this.type){case Oe:case Pe:case Qe:g=this.Pb;h=this.Wb;this.Pb=g*a+h*c+e;this.Wb=g*b+h*d+f;g=this.Wa;h=this.fb;this.Wa=g*a+h*c+e;this.fb=g*b+h*d+f;break;case Le:for(var k=this.Ya.l,l=k.length,m=0;m<l;m++){var n=k[m],g=n.ia,h=n.ja;n.ia=g*a+h*c+e;n.ja=g*b+h*d+f;for(var n=n.ra.l,p=n.length,q=0;q<p;q++){var s=n[q];switch(s.type){case $e:case vf:g=s.s;h=s.u;s.s=g*a+h*c+e;s.u=g*b+h*d+f;break;case wf:g=s.vb;h=s.Lb;s.vb=
g*a+h*c+e;s.Lb=g*b+h*d+f;g=s.ve;h=s.we;s.ve=g*a+h*c+e;s.we=g*b+h*d+f;g=s.s;h=s.u;s.s=g*a+h*c+e;s.u=g*b+h*d+f;break;case xf:g=s.vb;h=s.Lb;s.vb=g*a+h*c+e;s.Lb=g*b+h*d+f;g=s.s;h=s.u;s.s=g*a+h*c+e;s.u=g*b+h*d+f;break;case yf:g=s.ua;h=s.Da;s.ua=g*a+h*c+e;s.Da=g*b+h*d+f;0!==b&&(g=180*Math.atan2(b,a)/Math.PI,0>g&&(g+=360),s.ae+=g);0>a&&(s.ae=180-s.ae,s.gf=-s.gf);0>d&&(s.ae=-s.ae,s.gf=-s.gf);s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case zf:g=s.s;h=s.u;s.s=g*
a+h*c+e;s.u=g*b+h*d+f;0!==b&&(g=180*Math.atan2(b,a)/Math.PI,0>g&&(g+=360),s.$h+=g);0>a&&(s.$h=180-s.$h,s.ok=!s.ok);0>d&&(s.$h=-s.$h,s.ok=!s.ok);s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:u("Unknown Segment type: "+s.type)}}}}this.Ca=!0;return this};
Ke.prototype.$q=function(a,b){var c=this.Pb,d=this.Wb,e=this.Wa,f=this.fb,g=Math.min(c,e),h=Math.min(d,f),c=Math.abs(e-c),d=Math.abs(f-d),f=Va();f.x=g;f.y=h;b.Ka(f);e=new Me(f.x,f.y);f.x=g+c;f.y=h;b.Ka(f);e.ra.add(new Cf($e,f.x,f.y));f.x=g+c;f.y=h+d;b.Ka(f);e.ra.add(new Cf($e,f.x,f.y));f.x=g;f.y=h+d;b.Ka(f);e.ra.add((new Cf($e,f.x,f.y)).close());A(f);a.type=Le;a.Ya.add(e);return a};
Ke.prototype.na=function(a,b,c,d){var e=a.x,f=a.y,g=this.Qa.x-20;a=a.y;for(var h=0,k=0,l=0,m=0,n=0,p=0,q=this.Ya.l,s=q.length,t=0;t<s;t++){var v=q[t];if(v.Mr){if(c&&v.na(e,f,b))return!0;for(var x=v.ra,k=v.ia,l=v.ja,B=k,y=l,C=x.l,K=0;K<=x.length;K++){var J,ba;K!==x.length?(J=C[K],ba=J.type,n=J.s,p=J.u):(ba=$e,n=B,p=y);switch(ba){case vf:m=Df(e,f,g,a,k,l,B,y);if(isNaN(m))return!0;h+=m;B=n;y=p;break;case $e:m=Df(e,f,g,a,k,l,n,p);if(isNaN(m))return!0;h+=m;break;case wf:m=Q.mr(k,l,J.vb,J.Lb,J.ve,J.we,
n,p,g,a,e,f,.5);h+=m;break;case xf:m=Q.mr(k,l,(k+2*J.vb)/3,(l+2*J.Lb)/3,(J.vb+2*n)/3,(J.vb+2*n)/3,n,p,g,a,e,f,.5);h+=m;break;case yf:case zf:ba=J.type===yf?Af(J,v):Bf(J,v,k,l);for(var ja=ba.length,Y=null,P=0;P<ja;P++){Y=ba[P];if(0===P){m=Df(e,f,g,a,k,l,Y[0],Y[1]);if(isNaN(m))return!0;h+=m}m=Q.mr(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],g,a,e,f,.5);h+=m}null!==Y&&(n=Y[6],p=Y[7]);break;default:u("Unknown Segment type: "+J.type)}k=n;l=p}if(0!==h)return!0;h=0}else if(v.na(e,f,d?b:b+2))return!0}return 0!==
h};function Df(a,b,c,d,e,f,g,h){if(Q.bd(e,f,g,h,.05,a,b))return NaN;var k=(a-c)*(f-h);if(0===k)return 0;var l=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/k;b=(a*d-b*c)*(f-h)/k;if(l>=a)return 0;if((e>g?e-g:g-e)<(f>h?f-h:h-f)){if(e=a=0,f<h?(a=f,e=h):(a=h,e=f),b<a||b>e)return 0}else if(e<g?(a=e,e=g):a=g,l<a||l>e)return 0;return 0<k?1:-1}function Ef(a,b,c,d){a=a.Ya.l;for(var e=a.length,f=0;f<e;f++)if(a[f].na(b,c,d))return!0;return!1}
Ke.prototype.getPointAlongPath=function(a){(0>a||1<a)&&za(a,"0 <= fraction <= 1",Ke,"getPointAlongPath:fraction");var b=this.Ya.first(),c=ob(),d=[];d.push(b.ia);d.push(b.ja);for(var e=b.ia,f=b.ja,g=e,h=f,k=b.ra.l,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.da){case vf:c.push(d);d=[];d.push(n.s);d.push(n.u);e=n.s;f=n.u;g=e;h=f;break;case $e:d.push(n.s);d.push(n.u);e=n.s;f=n.u;break;case wf:Q.Rd(e,f,n.xc,n.Qd,n.uf,n.vf,n.Wa,n.fb,.5,d);e=n.s;f=n.u;break;case xf:Q.$n(e,f,n.xc,n.Qd,n.Wa,n.fb,.5,d);e=n.s;
f=n.u;break;case yf:for(var p=Af(n,b),q=p.length,s=0;s<q;s++){var t=p[s];Q.Rd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d);e=t[6];f=t[7]}break;case zf:p=Bf(n,b,e,f);q=p.length;for(s=0;s<q;s++)t=p[s],Q.Rd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d),e=t[6],f=t[7];break;default:u("Segment not of valid type")}n.Lg&&(d.push(g),d.push(h))}c.push(d);p=0;g=c.length;for(h=d=b=0;h<g;h++)for(k=c[h],l=k.length,m=0;m<l;m+=2)e=k[m],f=k[m+1],0!==m&&(n=Math.sqrt(Zc(b,d,e,f)),p+=n),b=e,d=f;a*=p;for(h=p=0;h<g;h++)for(k=c[h],
l=k.length,m=0;m<l;m++){e=k[m];f=k[m+1];if(0!==m){n=Math.sqrt(Zc(b,d,e,f));if(p+n>a)return m=(a-p)/n,pb(c),new z(b+(e-b)*m,d+(f-d)*m);p+=n}b=e;d=f}pb(c);return null};G(Ke,{type:"type"},function(){return this.da},function(a){this.da!==a&&(pa(this,a),this.da=a,this.Ca=!0)});G(Ke,{ia:"startX"},function(){return this.Pb},function(a){this.Pb!==a&&(pa(this,a),this.Pb=a,this.Ca=!0)});G(Ke,{ja:"startY"},function(){return this.Wb},function(a){this.Wb!==a&&(pa(this,a),this.Wb=a,this.Ca=!0)});
G(Ke,{s:"endX"},function(){return this.Wa},function(a){this.Wa!==a&&(pa(this,a),this.Wa=a,this.Ca=!0)});G(Ke,{u:"endY"},function(){return this.fb},function(a){this.fb!==a&&(pa(this,a),this.fb=a,this.Ca=!0)});G(Ke,{Ya:"figures"},function(){return this.ji},function(a){this.ji!==a&&(pa(this,a),this.ji=a,this.Ca=!0)});Ke.prototype.add=Ke.prototype.add=function(a){this.ji.add(a);return this};G(Ke,{o:"spot1"},function(){return this.Fh},function(a){pa(this,a);this.Fh=a.O()});
G(Ke,{p:"spot2"},function(){return this.Gh},function(a){pa(this,a);this.Gh=a.O()});G(Ke,{Wc:"defaultStretch"},function(){return this.ph},function(a){pa(this,a);this.ph=a});H(Ke,{Qa:"bounds"},function(){this.ky()&&(this.ez(),this.Bf());return this.Vs});function Me(a,b,c,d){sb(this);this.pa=!1;void 0===c&&(c=!0);this.Pk=c;void 0===d&&(d=!0);this.Im=d;this.Pb=void 0!==a?a:0;this.Wb=void 0!==b?b:0;this.bn=new N(Cf);this.bu=this.bn.K;this.Ca=!0}vb("PathFigure",Me);Me.Qg=!0;
Me.prototype.copy=function(){var a=new Me;a.Pk=this.Pk;a.Im=this.Im;a.Pb=this.Pb;a.Wb=this.Wb;for(var b=this.bn.l,c=b.length,d=a.bn,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.bu=this.bu;a.Ca=this.Ca;return a};Me.prototype.equalsApprox=Me.prototype.Vd=function(a){if(!(a instanceof Me&&Q.q(this.ia,a.ia)&&Q.q(this.ja,a.ja)))return!1;var b=this.ra.l;a=a.ra.l;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Vd(a[d]))return!1;return!0};r=Me.prototype;
r.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.ia.toString()+" "+this.ja.toString():"M"+this.ia.toFixed(a)+" "+this.ja.toFixed(a),c=this.ra.l,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};r.freeze=function(){this.pa=!0;var a=this.ra;a.freeze();for(var b=a.l,a=a.length,c=0;c<a;c++)b[c].freeze();return this};r.wa=function(){this.pa=!1;var a=this.ra;a.wa();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].wa();return this};
r.ky=function(){if(this.Ca)return!0;var a=this.ra;if(this.bu!==a.K)return!0;for(var a=a.l,b=a.length,c=0;c<b;c++)if(a[c].Ca)return!0;return!1};r.ez=function(){this.Ca=!1;var a=this.ra;this.bu=a.K;for(var a=a.l,b=a.length,c=0;c<b;c++){var d=a[c];d.Ca=!1;d.bi=null}};G(Me,{Mr:"isFilled"},function(){return this.Pk},function(a){pa(this,a);this.Pk=a});G(Me,{rk:"isShadowed"},function(){return this.Im},function(a){pa(this,a);this.Im=a});
G(Me,{ia:"startX"},function(){return this.Pb},function(a){pa(this,a);this.Pb=a;this.Ca=!0});G(Me,{ja:"startY"},function(){return this.Wb},function(a){pa(this,a);this.Wb=a;this.Ca=!0});G(Me,{ra:"segments"},function(){return this.bn},function(a){pa(this,a);this.bn=a;this.Ca=!0});Me.prototype.add=Me.prototype.add=function(a){this.bn.add(a);return this};
Me.prototype.na=function(a,b,c){for(var d=this.ia,e=this.ja,f=d,g=e,h=this.ra.l,k=h.length,l=0;l<k;l++){var m=h[l];switch(m.type){case vf:f=m.s;g=m.u;d=m.s;e=m.u;break;case $e:if(Q.bd(d,e,m.s,m.u,c,a,b))return!0;d=m.s;e=m.u;break;case wf:if(Q.Gu(d,e,m.vb,m.Lb,m.ve,m.we,m.s,m.u,.5,a,b,c))return!0;d=m.s;e=m.u;break;case xf:if(Q.Fy(d,e,m.vb,m.Lb,m.s,m.u,.5,a,b,c))return!0;d=m.s;e=m.u;break;case yf:case zf:for(var n=m.type===yf?Af(m,this):Bf(m,this,d,e),p=n.length,q=null,s=0;s<p;s++)if(q=n[s],0===s&&
Q.bd(d,e,q[0],q[1],c,a,b)||Q.Gu(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.5,a,b,c))return!0;null!==q&&(d=q[6],e=q[7]);break;default:u("Unknown Segment type: "+m.type)}if(m.av&&(d!==f||e!==g)&&Q.bd(d,e,f,g,c,a,b))return!0}return!1};
function Cf(a,b,c,d,e,f,g,h){sb(this);this.pa=!1;void 0===a&&(a=$e);this.da=a;this.Wa=void 0!==b?b:0;this.fb=void 0!==c?c:0;a===zf?(void 0!==f&&(a=f%360,0>a&&(a+=360),this.xc=a),void 0!==d&&(this.uf=Math.max(d,0)),void 0!==e&&(this.vf=Math.max(e,0)),this.Pm=!!g,this.gm=!!h):(void 0!==d&&(this.xc=d),void 0!==e&&(this.Qd=e),void 0!==f&&(a===yf&&(f=Math.max(f,0)),this.uf=f),void 0!==g&&"number"===typeof g&&(a===yf&&(g=Math.max(g,0)),this.vf=g));this.Lg=!1;this.Ca=!0;this.bi=null}vb("PathSegment",Cf);
Cf.Qg=!0;Cf.prototype.copy=function(){var a=new Cf;a.da=this.da;a.Wa=this.Wa;a.fb=this.fb;void 0!==this.xc&&(a.xc=this.xc);void 0!==this.Qd&&(a.Qd=this.Qd);void 0!==this.uf&&(a.uf=this.uf);void 0!==this.vf&&(a.vf=this.vf);void 0!==this.Pm&&(a.Pm=this.Pm);void 0!==this.gm&&(a.gm=this.gm);a.Lg=this.Lg;a.Ca=this.Ca;return a};
Cf.prototype.equalsApprox=Cf.prototype.Vd=function(a){if(!(a instanceof Cf)||this.type!==a.type||this.av!==a.av)return!1;switch(this.type){case vf:case $e:return Q.q(this.s,a.s)&&Q.q(this.u,a.u);case wf:return Q.q(this.s,a.s)&&Q.q(this.u,a.u)&&Q.q(this.vb,a.vb)&&Q.q(this.Lb,a.Lb)&&Q.q(this.ve,a.ve)&&Q.q(this.we,a.we);case xf:return Q.q(this.s,a.s)&&Q.q(this.u,a.u)&&Q.q(this.vb,a.vb)&&Q.q(this.Lb,a.Lb);case yf:return Q.q(this.ae,a.ae)&&Q.q(this.gf,a.gf)&&Q.q(this.ua,a.ua)&&Q.q(this.Da,a.Da)&&Q.q(this.radiusX,
a.radiusX)&&Q.q(this.radiusY,a.radiusY);case zf:return this.ok===a.ok&&this.dv===a.dv&&Q.q(this.$h,a.$h)&&Q.q(this.s,a.s)&&Q.q(this.u,a.u)&&Q.q(this.radiusX,a.radiusX)&&Q.q(this.radiusY,a.radiusY);default:return!1}};
Cf.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case vf:b=0>a?"M"+this.s.toString()+" "+this.u.toString():"M"+this.s.toFixed(a)+" "+this.u.toFixed(a);break;case $e:b=0>a?"L"+this.s.toString()+" "+this.u.toString():"L"+this.s.toFixed(a)+" "+this.u.toFixed(a);break;case wf:b=0>a?"C"+this.vb.toString()+" "+this.Lb.toString()+" "+this.ve.toString()+" "+this.we.toString()+" "+this.s.toString()+" "+this.u.toString():"C"+this.vb.toFixed(a)+" "+this.Lb.toFixed(a)+" "+this.ve.toFixed(a)+
" "+this.we.toFixed(a)+" "+this.s.toFixed(a)+" "+this.u.toFixed(a);break;case xf:b=0>a?"Q"+this.vb.toString()+" "+this.Lb.toString()+" "+this.s.toString()+" "+this.u.toString():"Q"+this.vb.toFixed(a)+" "+this.Lb.toFixed(a)+" "+this.s.toFixed(a)+" "+this.u.toFixed(a);break;case yf:b=0>a?"B"+this.ae.toString()+" "+this.gf.toString()+" "+this.ua.toString()+" "+this.Da.toString()+" "+this.radiusX:"B"+this.ae.toFixed(a)+" "+this.gf.toFixed(a)+" "+this.ua.toFixed(a)+" "+this.Da.toFixed(a)+" "+this.radiusX;
break;case zf:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.$h.toString()+" "+(this.dv?1:0)+" "+(this.ok?1:0)+" "+this.s.toString()+" "+this.u.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.$h.toFixed(a)+" "+(this.dv?1:0)+" "+(this.ok?1:0)+" "+this.s.toFixed(a)+" "+this.u.toFixed(a);break;default:b=this.type.toString()}return b+(this.Lg?"z":"")};var vf;Cf.Move=vf=I(Cf,"Move",0);var $e;Cf.Line=$e=I(Cf,"Line",1);var wf;
Cf.Bezier=wf=I(Cf,"Bezier",2);var xf;Cf.QuadraticBezier=xf=I(Cf,"QuadraticBezier",3);var yf;Cf.Arc=yf=I(Cf,"Arc",4);var zf;Cf.SvgArc=zf=I(Cf,"SvgArc",4);Cf.prototype.freeze=function(){this.pa=!0;return this};Cf.prototype.wa=function(){this.pa=!1;return this};Cf.prototype.close=Cf.prototype.close=function(){this.Lg=!0;return this};
function Af(a,b){if(null!==a.bi&&!1===b.Ca)return a.bi;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);var e=a.xc,f=a.Qd,g=Q.SB(0,0,c<d?c:d,a.ae,a.ae+a.gf,!1);if(c!==d){var h=hb();h.reset();c<d?h.scale(1,d/c):h.scale(c/d,1);hf(g,h);jb(h)}c=g.length;for(d=0;d<c;d++)h=g[d],h[0]+=e,h[1]+=f,h[2]+=e,h[3]+=f,h[4]+=e,h[5]+=f,h[6]+=e,h[7]+=f;a.bi=g;return a.bi}
function Bf(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos(f(a,b,c,d))}function f(a,b,c,d){return(a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d))}if(null!==a.bi&&!1===b.Ca)return a.bi;b=a.uf;var g=a.vf,h=Math.PI/180*a.xc,k=a.Pm,l=a.gm,m=a.Wa,n=a.fb,p=Math.cos(h),q=Math.sin(h),s=p*(c-m)/2+q*(d-n)/2,h=-q*(c-m)/2+p*(d-n)/2,t=s*s/(b*b)+h*h/(g*g);1<t&&(b*=Math.sqrt(t),g*=Math.sqrt(t));t=(k===l?-1:1)*Math.sqrt((b*b*g*g-b*b*h*h-g*g*s*s)/(b*b*h*h+g*g*s*s));isNaN(t)&&(t=0);k=t*b*h/g;t=t*-g*s/
b;isNaN(k)&&(k=0);isNaN(t)&&(t=0);c=(c+m)/2+p*k-q*t;d=(d+n)/2+q*k+p*t;n=e(1,0,(s-k)/b,(h-t)/g);p=(s-k)/b;m=(h-t)/g;s=(-s-k)/b;k=(-h-t)/g;h=e(p,m,s,k);s=f(p,m,s,k);-1>=s?h=Math.PI:1<=s&&(h=0);!l&&0<h&&(h-=2*Math.PI);l&&0>h&&(h+=2*Math.PI);l=b>g?1:b/g;s=b>g?g/b:1;b=Q.SB(0,0,b>g?b:g,n,n+h,!0);g=hb();g.reset();g.translate(c,d);g.rotate(a.xc,0,0);g.scale(l,s);hf(b,g);jb(g);a.bi=b;return a.bi}G(Cf,{av:"isClosed"},function(){return this.Lg},function(a){this.Lg!==a&&(this.Lg=a,this.Ca=!0)});
G(Cf,{type:"type"},function(){return this.da},function(a){pa(this,a);this.da=a;this.Ca=!0});G(Cf,{s:"endX"},function(){return this.Wa},function(a){pa(this,a);this.Wa=a;this.Ca=!0});G(Cf,{u:"endY"},function(){return this.fb},function(a){pa(this,a);this.fb=a;this.Ca=!0});G(Cf,{vb:"point1X"},function(){return this.xc},function(a){pa(this,a);this.xc=a;this.Ca=!0});G(Cf,{Lb:"point1Y"},function(){return this.Qd},function(a){pa(this,a);this.Qd=a;this.Ca=!0});
G(Cf,{ve:"point2X"},function(){return this.uf},function(a){pa(this,a);this.uf=a;this.Ca=!0});G(Cf,{we:"point2Y"},function(){return this.vf},function(a){pa(this,a);this.vf=a;this.Ca=!0});G(Cf,{ua:"centerX"},function(){return this.xc},function(a){pa(this,a);this.xc=a;this.Ca=!0});G(Cf,{Da:"centerY"},function(){return this.Qd},function(a){pa(this,a);this.Qd=a;this.Ca=!0});G(Cf,{radiusX:"radiusX"},function(){return this.uf},function(a){0>a&&za(a,">= zero",Cf,"radiusX");pa(this,a);this.uf=a;this.Ca=!0});
G(Cf,{radiusY:"radiusY"},function(){return this.vf},function(a){0>a&&za(a,">= zero",Cf,"radiusY");pa(this,a);this.vf=a;this.Ca=!0});G(Cf,{ae:"startAngle"},function(){return this.Wa},function(a){this.Wa!==a&&(pa(this,a),a%=360,0>a&&(a+=360),this.Wa=a,this.Ca=!0)});G(Cf,{gf:"sweepAngle"},function(){return this.fb},function(a){pa(this,a);360<a&&(a=360);-360>a&&(a=-360);this.fb=a;this.Ca=!0});G(Cf,{ok:"isClockwiseArc"},function(){return this.gm},function(a){pa(this,a);this.gm=a;this.Ca=!0});
G(Cf,{dv:"isLargeArc"},function(){return this.Pm},function(a){pa(this,a);this.Pm=a;this.Ca=!0});G(Cf,{$h:"xAxisRotation"},function(){return this.xc},function(a){a%=360;0>a&&(a+=360);pa(this,a);this.xc=a;this.Ca=!0});function Ff(){this.N=null;this.wx=(new z(0,0)).freeze();this.qw=(new z(0,0)).freeze();this.Ss=this.Mt=0;this.Bt="";this.pu=this.ht=!1;this.dt=this.Us=0;this.ci=this.ot=this.xt=!1;this.Yo=null;this.ou=0;this.wf=this.mu=null}vb("InputEvent",Ff);
Ff.prototype.copy=function(){var a=new Ff;a.N=this.N;a.wx.assign(this.xe);a.qw.assign(this.S);a.Mt=this.Mt;a.Ss=this.Ss;a.Bt=this.Bt;a.ht=this.ht;a.pu=this.pu;a.Us=this.Us;a.dt=this.dt;a.xt=this.xt;a.ot=this.ot;a.ci=this.ci;a.Yo=this.Yo;a.ou=this.ou;a.mu=this.mu;a.wf=this.wf;return a};
Ff.prototype.toString=function(){var a="^";0!==this.Cc&&(a+="M:"+this.Cc);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.le&&(a+="C:"+this.le);0!==this.ck&&(a+="D:"+this.ck);this.rc&&(a+="h");this.bubbles&&(a+="b");null!==this.S&&(a+="@"+this.S.toString());return a};G(Ff,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Ff,{xe:"viewPoint"},function(){return this.wx},function(a){ra(a,z,Ff,"viewPoint");this.wx.assign(a)});
G(Ff,{S:"documentPoint"},function(){return this.qw},function(a){ra(a,z,Ff,"documentPoint");this.qw.assign(a)});G(Ff,{Cc:"modifiers"},function(){return this.Mt},function(a){this.Mt=a});G(Ff,{button:"button"},function(){return this.Ss},function(a){this.Ss=a});G(Ff,{key:"key"},function(){return this.Bt},function(a){this.Bt=a});G(Ff,{ek:"down"},function(){return this.ht},function(a){this.ht=a});G(Ff,{up:"up"},function(){return this.pu},function(a){this.pu=a});
G(Ff,{le:"clickCount"},function(){return this.Us},function(a){this.Us=a});G(Ff,{ck:"delta"},function(){return this.dt},function(a){this.dt=a});G(Ff,{Pr:"isMultiTouch"},function(){return this.xt},function(a){this.xt=a});G(Ff,{rc:"handled"},function(){return this.ot},function(a){this.ot=a});G(Ff,{bubbles:"bubbles"},function(){return this.ci},function(a){this.ci=a});G(Ff,{event:"event"},function(){return this.Yo},function(a){this.Yo=a});
H(Ff,{sk:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});G(Ff,{timestamp:"timestamp"},function(){return this.ou},function(a){this.ou=a});G(Ff,{Sf:"targetDiagram"},function(){return this.mu},function(a){this.mu=a});G(Ff,{Jd:"targetObject"},function(){return this.wf},function(a){this.wf=a});
G(Ff,{control:"control"},function(){return 0!==(this.Cc&1)},function(a){this.Cc=a?this.Cc|1:this.Cc&-2});G(Ff,{shift:"shift"},function(){return 0!==(this.Cc&4)},function(a){this.Cc=a?this.Cc|4:this.Cc&-5});G(Ff,{alt:"alt"},function(){return 0!==(this.Cc&2)},function(a){this.Cc=a?this.Cc|2:this.Cc&-3});G(Ff,{Yr:"meta"},function(){return 0!==(this.Cc&8)},function(a){this.Cc=a?this.Cc|8:this.Cc&-9});G(Ff,{left:"left"},function(){return 0===this.button},function(a){this.button=a?0:2});
G(Ff,{xI:"middle"},function(){return 1===this.button},function(a){this.button=a?1:0});G(Ff,{right:"right"},function(){return 2===this.button},function(a){this.button=a?2:0});function Gf(){this.N=null;this.yb="";this.Vt=this.hu=null;this.Ts=!1}vb("DiagramEvent",Gf);Gf.prototype.copy=function(){var a=new Gf;a.N=this.N;a.yb=this.yb;a.hu=this.hu;a.Vt=this.Vt;a.Ts=this.Ts;return a};
Gf.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");null!==this.Zy&&(a+=":"+this.Zy.toString());null!==this.Dy&&(a+="("+this.Dy.toString()+")");return a};G(Gf,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Gf,{name:"name"},function(){return this.yb},function(a){this.yb=a});G(Gf,{Zy:"subject"},function(){return this.hu},function(a){this.hu=a});G(Gf,{Dy:"parameter"},function(){return this.Vt},function(a){this.Vt=a});
G(Gf,{cancel:"cancel"},function(){return this.Ts},function(a){this.Ts=a});function Hf(){this.Eo=If;this.dl=this.Lt="";this.$p=this.aq=this.eq=this.fq=this.dq=this.N=this.gd=null}vb("ChangedEvent",Hf);var Pf;Hf.Transaction=Pf=I(Hf,"Transaction",-1);var If;Hf.Property=If=I(Hf,"Property",0);var Qf;Hf.Insert=Qf=I(Hf,"Insert",1);var Rf;Hf.Remove=Rf=I(Hf,"Remove",2);Hf.prototype.clear=Hf.prototype.clear=function(){this.$p=this.aq=this.eq=this.fq=this.dq=this.N=this.gd=null};
Hf.prototype.copy=function(){var a=new Hf;a.gd=this.gd;a.N=this.N;a.Eo=this.Eo;a.Lt=this.Lt;a.dl=this.dl;a.dq=this.dq;var b=this.fq;a.fq=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.eq;a.eq=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.aq;a.aq=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.$p;a.$p=Ea(b)&&"function"===typeof b.O?b.O():b;return a};
Hf.prototype.toString=function(){var a="",a=this.Vc===Pf?a+"* ":this.Vc===If?a+(null!==this.U?"!m":"!d"):a+((null!==this.U?"!m":"!d")+this.Vc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.bf&&this.bf!==this.propertyName&&(a+=" "+this.bf);a+=": ";this.Vc===Pf?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=Sf(this.object)),null!==this.oldValue&&(a+="  old: "+Sf(this.oldValue)),null!==this.Pf&&(a+=" "+this.Pf),null!==this.newValue&&(a+=
"  new: "+Sf(this.newValue)),null!==this.Nf&&(a+=" "+this.Nf));return a};Hf.prototype.getValue=Hf.prototype.ha=function(a){return a?this.oldValue:this.newValue};Hf.prototype.getParam=function(a){return a?this.Pf:this.Nf};Hf.prototype.canUndo=Hf.prototype.canUndo=function(){return null!==this.U||null!==this.g?!0:!1};Hf.prototype.undo=Hf.prototype.undo=function(){this.canUndo()&&(null!==this.U?this.U.wl(this,!0):null!==this.g&&this.g.wl(this,!0))};
Hf.prototype.canRedo=Hf.prototype.canRedo=function(){return null!==this.U||null!==this.g?!0:!1};Hf.prototype.redo=Hf.prototype.redo=function(){this.canRedo()&&(null!==this.U?this.U.wl(this,!1):null!==this.g&&this.g.wl(this,!1))};G(Hf,{U:"model"},function(){return this.gd},function(a){this.gd=a});G(Hf,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Hf,{Vc:"change"},function(){return this.Eo},function(a){this.Eo=a});
G(Hf,{bf:"modelChange"},function(){return this.Lt},function(a){this.Lt=a});G(Hf,{propertyName:"propertyName"},function(){return this.dl},function(a){this.dl=a});H(Hf,{hI:"isTransactionFinished"},function(){return this.Eo===Pf&&("CommittedTransaction"===this.dl||"FinishedUndo"===this.dl||"FinishedRedo"===this.dl)});G(Hf,{object:"object"},function(){return this.dq},function(a){this.dq=a});G(Hf,{oldValue:"oldValue"},function(){return this.fq},function(a){this.fq=a});
G(Hf,{Pf:"oldParam"},function(){return this.eq},function(a){this.eq=a});G(Hf,{newValue:"newValue"},function(){return this.aq},function(a){this.aq=a});G(Hf,{Nf:"newParam"},function(){return this.$p},function(a){this.$p=a});
function jc(a){1<arguments.length&&u("Model constructor can only take one optional argument, the Array of node data.");sb(this);this.kw=this.yb="";this.Fj=!1;this.Sw={};this.De=[];this.Vb=new Fb(null,Object);this.$k="key";this.Ys=this.Ft=null;this.cw=this.dw=!1;this.bq="category";this.Gg=new Fb(null,Xb);this.ui=null;this.Eh=!1;this.vx=null;this.V=new Tf;void 0!==a&&(this.pg=a)}vb("Model",jc);jc.prototype.clear=jc.prototype.clear=function(){this.De=[];this.Vb.clear();this.Gg.clear();this.V.clear()};
r=jc.prototype;r.Bs=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.ak&&(a+=',\n  "dataFormat": '+this.quote(this.ak));this.Ta&&(a+=',\n  "isReadOnly": '+this.Ta);"key"!==this.Ol&&"string"===typeof this.Ol&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Ol));this.Kx&&(a+=',\n  "copiesArrays": true');this.Jx&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.Nl&&"string"===typeof this.Nl&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Nl));return a};
r.gz=function(){var a="",b=this.Zr,c=!1,d;for(d in b)if(!Uf(d,b[d])){c=!0;break}c&&(a=',\n  "modelData": '+Vf(this,b));return a+',\n  "nodeDataArray": '+Wf(this,this.pg,!0)};r.gs=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.ak=a.dataFormat);a.isReadOnly&&(this.Ta=a.isReadOnly);a.nodeKeyProperty&&(this.Ol=a.nodeKeyProperty);a.copiesArrays&&(this.Kx=a.copiesArrays);a.copiesArrayObjects&&(this.Jx=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.Nl=a.nodeCategoryProperty)};
r.Hy=function(a){var b=a.modelData;Ea(b)&&(this.js(b),this.Zr=b);a=a.nodeDataArray;Fa(a)&&(this.js(a),this.pg=a)};r.toString=function(a){void 0===a&&(a=0);if(1<a)return this.bz();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.pg;for(var c=Ia(a),d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e))}return b};
jc.prototype.toJson=jc.prototype.toJSON=jc.prototype.bz=function(a){void 0===a&&(a=this.constructor===jc?"go.Model":this.constructor===Xf?"go.GraphLinksModel":this.constructor===Yf?"go.TreeModel":xa(this));return'{ "class": '+this.quote(a)+this.Bs()+this.gz()+"}"};
jc.fromJson=jc.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&ra(b,jc,jc,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){}else Da("WARNING: no JSON.parse available");else"object"===typeof a?c=a:u("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var f=c["class"];if("string"===typeof f)try{var g=null;0===f.indexOf("go.")?(f=f.substr(3),g=aa[f]):(g=aa[f],void 0===g&&(g=window[f]));"function"===typeof g&&
(e=new g)}catch(h){}null===e||e instanceof jc?b=e:u("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new Xf);b.gs(c);b.Hy(c);return b};
jc.prototype.replaceJsonObjects=jc.prototype.js=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);Ea(d)&&Na(a,c,this.js(d))}else if(Ea(a)){for(c in a)if(d=a[c],Ea(d)&&(d=this.js(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,f=0;f<d.length;f++)if("number"!==typeof d[f]){e=!1;break}if(e){e=new N(z);for(f=0;f<d.length/2;f++)e.add(new z(d[2*f],d[2*f+1]));e.freeze();a[c]=e}}if("object"===typeof a){c=a;d=a["class"];if("NaN"===d)c=NaN;else if("Date"===d)c=new Date(a.value);
else if("go.Point"===d)c=new z(Zf(a.x),Zf(a.y));else if("go.Size"===d)c=new Za(Zf(a.width),Zf(a.height));else if("go.Rect"===d)c=new D(Zf(a.x),Zf(a.y),Zf(a.width),Zf(a.height));else if("go.Margin"===d)c=new qd(Zf(a.top),Zf(a.right),Zf(a.bottom),Zf(a.left));else if("go.Spot"===d)c="string"===typeof a["enum"]?sd(a["enum"]):new R(Zf(a.x),Zf(a.y),Zf(a.offsetX),Zf(a.offsetY));else if("go.Brush"===d){if(c=new $f,c.type=yc($f,a.type),"string"===typeof a.color&&(c.color=a.color),a.start instanceof R&&(c.start=
a.start),a.end instanceof R&&(c.end=a.end),"number"===typeof a.startRadius&&(c.vs=Zf(a.startRadius)),"number"===typeof a.endRadius&&(c.ur=Zf(a.endRadius)),a=a.colorStops,Ea(a))for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d&&(b=null,b="string"===typeof a.path?cf(a.path):new Ke,b.type=yc(Ke,a.type),"number"===typeof a.startX&&(b.ia=Zf(a.startX)),"number"===typeof a.startY&&(b.ja=Zf(a.startY)),"number"===typeof a.endX&&(b.s=Zf(a.endX)),"number"===typeof a.endY&&(b.u=Zf(a.endY)),
a.spot1 instanceof R&&(b.o=a.spot1),a.spot2 instanceof R&&(b.p=a.spot2),c=b);a=c}}return a};jc.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
jc.prototype.writeJsonValue=jc.prototype.Cs=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.Cs(a.valueOf()):Fa(a)?Wf(this,a):Ea(a)?Vf(this,a):"function"===typeof a?"null":a.toString()};
function Wf(a,b,c){void 0===c&&(c=!1);var d=Ia(b);if(0>=d)return"[]";var e=new zc;e.add("[ ");c&&1<d&&e.add("\n");for(var f=0;f<d;f++){var g=La(b,f);void 0!==g&&(0<f&&(e.add(","),c&&e.add("\n")),e.add(a.Cs(g)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function Uf(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function ag(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function Vf(a,b){var c=b;if(c instanceof z){var d=c;b={"class":"go.Point",x:ag(d.x),y:ag(d.y)}}else if(c instanceof Za){var e=c;b={"class":"go.Size",width:ag(e.width),height:ag(e.height)}}else if(c instanceof D)b={"class":"go.Rect",x:ag(c.x),y:ag(c.y),width:ag(c.width),height:ag(c.height)};else if(c instanceof qd)b={"class":"go.Margin",top:ag(c.top),right:ag(c.right),bottom:ag(c.bottom),left:ag(c.left)};else if(c instanceof R)e=c,b=e.Kc()?{"class":"go.Spot",x:ag(e.x),y:ag(e.y),offsetX:ag(e.offsetX),
offsetY:ag(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof $f){b={"class":"go.Brush",type:c.type.name};if(c.type===bg)b.color=c.color;else if(c.type===cg||c.type===dg)b.start=c.start,b.end=c.end,c.type===dg&&(0!==c.vs&&(b.startRadius=ag(c.vs)),isNaN(c.ur)||(b.endRadius=ag(c.ur)));if(null!==c.or){for(var f={},g=c.or.i;g.next();)f[g.key]=g.value;b.colorStops=f}}else if(c instanceof Ke)b={"class":"go.Geometry",type:c.type.name},0!==c.ia&&(b.startX=ag(c.ia)),0!==c.ja&&(b.startY=
ag(c.ja)),0!==c.s&&(b.endX=ag(c.s)),0!==c.u&&(b.endY=ag(c.u)),c.o.A(ud)||(b.spot1=c.o),c.p.A(Hd)||(b.spot2=c.p),c.type===Le&&(b.path=af(c));else if(c instanceof U||c instanceof M||c instanceof jg||c instanceof jc||c instanceof kg||c instanceof ec||c instanceof lg||c instanceof kc||c instanceof Tf||c instanceof mg)return Da("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+c.toString()),"{}";f="{";c=!0;for(d in b)if(e=Gb(b,d),!Uf(d,e))if(c?
c=!1:f+=", ",f+='"'+d+'":',"points"===d&&e instanceof N&&e.da===z){g=e;e="[";for(g=g.i;g.next();){var h=g.value;1<e.length&&(e+=",");e+=a.Cs(h.x);e+=",";e+=a.Cs(h.y)}e+="]";f+=e}else f+=a.Cs(e);return f+"}"}function Zf(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}G(jc,{name:"name"},function(){return this.yb},function(a){var b=this.yb;b!==a&&(w(a,"string",jc,"name"),this.yb=a,this.h("name",b,a))});
G(jc,{ak:"dataFormat"},function(){return this.kw},function(a){var b=this.kw;b!==a&&(w(a,"string",jc,"dataFormat"),this.kw=a,this.h("dataFormat",b,a))});G(jc,{Ta:"isReadOnly"},function(){return this.Fj},function(a){var b=this.Fj;b!==a&&(w(a,"boolean",jc,"isReadOnly"),this.Fj=a,this.h("isReadOnly",b,a))});G(jc,{Zr:"modelData"},function(){return this.Sw},function(a){var b=this.Sw;b!==a&&(w(a,"object",jc,"modelData"),this.Sw=a,this.h("modelData",b,a),this.rb(a))});
jc.prototype.addChangedListener=jc.prototype.yx=function(a){w(a,"function",jc,"addChangedListener:listener");null===this.ui&&(this.ui=new N("function"));this.ui.add(a)};jc.prototype.removeChangedListener=jc.prototype.Ky=function(a){w(a,"function",jc,"removeChangedListener:listener");null!==this.ui&&(this.ui.remove(a),0===this.ui.count&&(this.ui=null))};
jc.prototype.Hu=function(a){this.Ma||this.V.oC(a);if(null!==this.ui){var b=this.ui,c=b.length;if(1===c)b=b.Y(0),b(a);else if(0!==c)for(var d=b.be(),e=0;e<c;e++)b=d[e],b(a)}};jc.prototype.raiseChangedEvent=jc.prototype.ec=function(a,b,c,d,e,f,g){ng(this,"",a,b,c,d,e,f,g)};jc.prototype.raiseChanged=jc.prototype.h=function(a,b,c,d,e){ng(this,"",If,a,this,b,c,d,e)};jc.prototype.raiseDataChanged=jc.prototype.Gy=function(a,b,c,d,e,f){ng(this,"",If,b,a,c,d,e,f)};
function ng(a,b,c,d,e,f,g,h,k){void 0===h&&(h=null);void 0===k&&(k=null);var l=new Hf;l.U=a;l.Vc=c;l.bf=b;l.propertyName=d;l.object=e;l.oldValue=f;l.Pf=h;l.newValue=g;l.Nf=k;a.Hu(l)}G(jc,{V:"undoManager"},function(){return this.vx},function(a){var b=this.vx;b!==a&&(ra(a,Tf,jc,"undoManager"),null!==b&&b.tG(this),this.vx=a,null!==a&&a.vE(this))});G(jc,{Ma:"skipsUndoManager"},function(){return this.Eh},function(a){w(a,"boolean",jc,"skipsUndoManager");this.Eh=a});
jc.prototype.wl=function(a,b){if(null!==a&&a.U===this)if(a.Vc===If){var c=a.object,d=a.propertyName,e=a.ha(b);Hb(c,d,e)}else a.Vc===Qf?"nodeDataArray"===a.bf?(c=a.newValue,Ea(c)&&(d=this.$a(c),void 0!==d&&(b?(Ta(this.De,a.Nf),this.Vb.remove(d)):(Qa(this.De,a.Nf,c),this.Vb.add(d,c))))):""===a.bf?(c=a.object,!Fa(c)&&a.propertyName&&(c=Gb(a.object,a.propertyName)),Fa(c)&&(d=a.newValue,e=a.Nf,b?Ta(c,e):Qa(c,e,d))):u("unknown ChangedEvent.Insert object: "+a.toString()):a.Vc===Rf?"nodeDataArray"===a.bf?
(c=a.oldValue,Ea(c)&&(d=this.$a(c),void 0!==d&&(b?(Qa(this.De,a.Pf,c),this.Vb.add(d,c)):(Ta(this.De,a.Pf),this.Vb.remove(d))))):""===a.bf?(c=a.object,!Fa(c)&&a.propertyName&&(c=Gb(a.object,a.propertyName)),Fa(c)&&(d=a.oldValue,e=a.Pf,b?Qa(c,e,d):Ta(c,e))):u("unknown ChangedEvent.Remove object: "+a.toString()):a.Vc!==Pf&&u("unknown ChangedEvent: "+a.toString())};jc.prototype.startTransaction=jc.prototype.Ab=function(a){return this.V.Ab(a)};jc.prototype.commitTransaction=jc.prototype.pd=function(a){return this.V.pd(a)};
jc.prototype.rollbackTransaction=jc.prototype.co=function(){return this.V.co()};jc.prototype.updateTargetBindings=jc.prototype.rb=function(a,b){void 0===b&&(b="");ng(this,"SourceChanged",Pf,b,a,null,null)};G(jc,{Ol:"nodeKeyProperty"},function(){return this.$k},function(a){var b=this.$k;b!==a&&(og(a,jc,"nodeKeyProperty"),0<this.Vb.count&&u("Cannot set Model.nodeKeyProperty when there is existing node data"),this.$k=a,this.h("nodeKeyProperty",b,a))});
function og(a,b,c){"string"!==typeof a&&"function"!==typeof a&&ta(a,"string or function",b,c)}jc.prototype.getKeyForNodeData=jc.prototype.$a=function(a){if(null!==a){var b=this.$k;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;u("Key value for node data "+a+" is not a number or a string: "+b)}}};
jc.prototype.setKeyForNodeData=jc.prototype.Ty=function(a,b){void 0!==b&&null!==b&&pg(b)||ta(b,"number or string",jc,"setKeyForNodeData:key");if(null!==a){var c=this.$k;if(""!==c)if(this.me(a)){var d=Gb(a,c);d!==b&&null===this.He(b)&&(Hb(a,c,b),this.Vb.remove(d),this.Vb.add(b,a),ng(this,"nodeKey",If,c,a,d,b),"string"===typeof c&&this.rb(a,c),this.hs(d,b))}else Hb(a,c,b)}};
G(jc,{qI:"makeUniqueKeyFunction"},function(){return this.Ft},function(a){var b=this.Ft;b!==a&&(null!==a&&w(a,"function",jc,"makeUniqueKeyFunction"),this.Ft=a,this.h("makeUniqueKeyFunction",b,a))});function pg(a){return"number"===typeof a||"string"===typeof a}jc.prototype.containsNodeData=jc.prototype.me=function(a){a=this.$a(a);return void 0===a?!1:this.Vb.contains(a)};
jc.prototype.findNodeDataForKey=jc.prototype.He=function(a){null===a&&u("Model.findNodeDataForKey:key must not be null");return void 0!==a&&pg(a)?this.Vb.ha(a):null};
G(jc,{pg:"nodeDataArray"},function(){return this.De},function(a){var b=this.De;if(b!==a){Ga(a,jc,"nodeDataArray");this.Vb.clear();this.dz();for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);if(!Ea(e)){u("Model.nodeDataArray must only contain Objects, not: "+e);return}tb(e)}this.De=a;for(var f=new N(Object),d=0;d<c;d++){var e=La(a,d),g=this.$a(e);void 0===g?f.add(e):null!==this.Vb.ha(g)?f.add(e):this.Vb.add(g,e)}for(d=f.i;d.next();)e=d.value,this.DC(e),f=this.$a(e),void 0!==f&&this.Vb.add(f,e);ng(this,"nodeDataArray",
If,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=La(a,d),this.bo(e),this.ao(e);this.JB();Array.isArray(a)||(this.Ta=!0)}});
jc.prototype.makeNodeDataKeyUnique=jc.prototype.DC=function(a){if(null!==a){var b=this.$k;if(""!==b){var c=this.$a(a);if(void 0===c||this.Vb.contains(c)){var d=this.Ft;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Vb.contains(c))){Hb(a,b,c);return}if("string"===typeof c){for(d=2;this.Vb.contains(c+d);)d++;Hb(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.Vb.count-1;this.Vb.contains(d);)d--;Hb(a,b,d)}else u("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};jc.prototype.addNodeData=jc.prototype.rl=function(a){if(null!==a){tb(a);var b=this.$a(a);if(void 0===b||this.Vb.ha(b)!==a)this.DC(a),b=this.$a(a),void 0===b?u("Model.makeNodeDataKeyUnique failed on "+a+".  Data not added to Model."):(this.Vb.add(b,a),b=Ia(this.De),Qa(this.De,b,a),ng(this,"nodeDataArray",Qf,"nodeDataArray",this,null,a,null,b),this.bo(a),this.ao(a))}};jc.prototype.addNodeDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.rl(La(a,c));else for(a=a.i;a.next();)this.rl(a.value)};
jc.prototype.removeNodeData=jc.prototype.My=function(a){if(null!==a){var b=this.$a(a);void 0!==b&&this.Vb.contains(b)&&(this.Vb.remove(b),b=Oa(this.De,a),0>b||(Ta(this.De,b),ng(this,"nodeDataArray",Rf,"nodeDataArray",this,a,null,b,null),this.As(a)))}};jc.prototype.removeNodeDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.My(La(a,c));else for(a=a.i;a.next();)this.My(a.value)};r=jc.prototype;r.hs=function(a,b){var c=qg(this,a);c instanceof Xb&&this.Gg.add(b,c)};r.dz=function(){};
r.bo=function(){};r.ao=function(){};r.As=function(){};function rg(a,b,c){if(void 0!==b){var d=a.Gg.ha(b);null===d&&(d=new Xb(Object),a.Gg.add(b,d));d.add(c)}}function sg(a,b,c){if(void 0!==b){var d=a.Gg.ha(b);d instanceof Xb&&(void 0===c||null===c?a.Gg.remove(b):(d.remove(c),0===d.count&&a.Gg.remove(b)))}}function qg(a,b){if(void 0===b)return null;var c=a.Gg.ha(b);return c instanceof Xb?c:null}jc.prototype.clearUnresolvedReferences=jc.prototype.JB=function(a){void 0===a?this.Gg.clear():this.Gg.remove(a)};
G(jc,{FH:"copyNodeDataFunction"},function(){return this.Ys},function(a){var b=this.Ys;b!==a&&(null!==a&&w(a,"function",jc,"copyNodeDataFunction"),this.Ys=a,this.h("copyNodeDataFunction",b,a))});G(jc,{Kx:"copiesArrays"},function(){return this.dw},function(a){var b=this.dw;b!==a&&(null!==a&&w(a,"boolean",jc,"copiesArrays"),this.dw=a,this.h("copiesArrays",b,a))});
G(jc,{Jx:"copiesArrayObjects"},function(){return this.cw},function(a){var b=this.cw;b!==a&&(null!==a&&w(a,"boolean",jc,"copiesArrayObjects"),this.cw=a,this.h("copiesArrayObjects",b,a))});jc.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.Ys,b=null!==b?b(a,this):tg(this,a,!0);Ea(b)&&sb(b);return b};
function tg(a,b,c){if(a.Kx&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=tg(a,b[c],a.Jx);d.push(e)}sb(d);return d}if(c&&Ea(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=Gb(b,d),f;f=e;f instanceof U||f instanceof M||f instanceof jg||f instanceof ug||f instanceof vg||f instanceof kg||f instanceof ec||f instanceof lg||f instanceof Ff||f instanceof Gf?("_"!==d[0]&&Da('Warning: found GraphObject or Diagram reference when copying model data on property "'+d+'" of data object: '+
b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+f.toString()),f=!0):f=f instanceof jc||f instanceof Tf||f instanceof mg||f instanceof Hf?!0:!1;f||(e=tg(a,e,!1));Hb(c,d,e)}sb(c);return c}return b}var wg=!1;
jc.prototype.setDataProperty=function(a,b,c){if(this.me(a))if(b===this.Ol)this.Ty(a,c);else{if(b===this.Nl){this.yv(a,c);return}}else!wg&&a instanceof U&&(wg=!0,Da('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Gy(a,b,d,c))};jc.prototype.addArrayItem=function(a,b){this.DF(a,-1,b)};
jc.prototype.insertArrayItem=jc.prototype.DF=function(a,b,c){a===this.De&&u("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=Ia(a));Qa(a,b,c);ng(this,"",Qf,"",a,null,c,null,b)};jc.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1);a===this.De&&u("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=Ia(a)-1);var c=La(a,b);Ta(a,b);ng(this,"",Rf,"",a,c,null,b,null)};
G(jc,{Nl:"nodeCategoryProperty"},function(){return this.bq},function(a){var b=this.bq;b!==a&&(og(a,jc,"nodeCategoryProperty"),this.bq=a,this.h("nodeCategoryProperty",b,a))});jc.prototype.getCategoryForNodeData=jc.prototype.Tx=function(a){if(null===a)return"";var b=this.bq;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;u("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
jc.prototype.setCategoryForNodeData=jc.prototype.yv=function(a,b){w(b,"string",jc,"setCategoryForNodeData:cat");if(null!==a){var c=this.bq;if(""!==c)if(this.me(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"nodeCategory",If,c,a,d,b))}else Hb(a,c,b)}};
function Xf(a,b){2<arguments.length&&u("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");jc.call(this);this.Ng=[];this.Yk=new Xb(Object);this.sj=this.Xs=null;this.qi="from";this.ti="to";this.Hp=this.Gp="";this.Dp="category";this.Og="";this.Ot="isGroup";this.Ai="group";this.ew=!1;void 0!==a&&(this.pg=a);void 0!==b&&(this.aj=b)}yb(Xf,jc);vb("GraphLinksModel",Xf);
Xf.prototype.clear=Xf.prototype.clear=function(){jc.prototype.clear.call(this);this.Ng=[];this.Yk.clear()};r=Xf.prototype;r.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.bz();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.pg;for(var c=Ia(a),d=0,d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e));b+="\n link data:";a=this.aj;c=Ia(a);for(d=0;d<c;d++)e=La(a,d),b+=" "+this.ik(e)+"--\x3e"+this.lk(e)}return b};
r.Bs=function(){var a=jc.prototype.Bs.call(this),b="";"category"!==this.Tr&&"string"===typeof this.Tr&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Tr));"from"!==this.Nn&&"string"===typeof this.Nn&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.Nn));"to"!==this.Pn&&"string"===typeof this.Pn&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Pn));""!==this.Ur&&"string"===typeof this.Ur&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.Ur));""!==this.Wr&&"string"===typeof this.Wr&&(b+=
',\n  "linkToPortIdProperty": '+this.quote(this.Wr));""!==this.Vr&&"string"===typeof this.Vr&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Vr));"isGroup"!==this.bs&&"string"===typeof this.bs&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.bs));"group"!==this.Yn&&"string"===typeof this.Yn&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Yn));return a+b};r.gz=function(){var a=jc.prototype.gz.call(this),b=',\n  "linkDataArray": '+Wf(this,this.aj,!0);return a+b};
r.gs=function(a){jc.prototype.gs.call(this,a);a.linkFromKeyProperty&&(this.Nn=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Pn=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Ur=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Wr=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.Tr=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.Vr=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.bs=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.Yn=a.nodeGroupKeyProperty)};
r.Hy=function(a){jc.prototype.Hy.call(this,a);a=a.linkDataArray;Fa(a)&&(this.js(a),this.aj=a)};r.wl=function(a,b){var c=null;if(a.Vc===Qf){if("linkDataArray"===a.bf?c=this.Ng:"linkLabelKeys"===a.bf&&(c=this.$i(a.object)),Fa(c)){b?Ta(c,a.Nf):Qa(c,a.Nf,a.newValue);return}}else if(a.Vc===Rf&&("linkDataArray"===a.bf?c=this.Ng:"linkLabelKeys"===a.bf&&(c=this.$i(a.object)),Fa(c))){b?Qa(c,a.Pf,a.oldValue):Ta(c,a.Pf);return}jc.prototype.wl.call(this,a,b)};
G(Xf,{Dx:"archetypeNodeData"},function(){return this.sj},function(a){var b=this.sj;b!==a&&(null!==a&&ra(a,Object,Xf,"archetypeNodeData"),this.sj=a,this.h("archetypeNodeData",b,a))});Xf.prototype.Ll=function(a){if(void 0!==a){var b=this.sj;if(null!==b){var c=this.He(a);null===c&&(c=this.copyNodeData(b),Hb(c,this.$k,a),this.rl(c))}return a}};
G(Xf,{Nn:"linkFromKeyProperty"},function(){return this.qi},function(a){var b=this.qi;b!==a&&(og(a,Xf,"linkFromKeyProperty"),this.qi=a,this.h("linkFromKeyProperty",b,a))});Xf.prototype.getFromKeyForLinkData=Xf.prototype.ik=function(a){if(null!==a){var b=this.qi;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;u("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setFromKeyForLinkData=Xf.prototype.zv=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setFromKeyForLinkData:key");if(null!==a){var c=this.qi;if(""!==c)if(b=this.Ll(b),this.Nh(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.He(b)&&rg(this,b,a),ng(this,"linkFromKey",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
G(Xf,{Pn:"linkToKeyProperty"},function(){return this.ti},function(a){var b=this.ti;b!==a&&(og(a,Xf,"linkToKeyProperty"),this.ti=a,this.h("linkToKeyProperty",b,a))});Xf.prototype.getToKeyForLinkData=Xf.prototype.lk=function(a){if(null!==a){var b=this.ti;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;u("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setToKeyForLinkData=Xf.prototype.Bv=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setToKeyForLinkData:key");if(null!==a){var c=this.ti;if(""!==c)if(b=this.Ll(b),this.Nh(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.He(b)&&rg(this,b,a),ng(this,"linkToKey",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
G(Xf,{Ur:"linkFromPortIdProperty"},function(){return this.Gp},function(a){var b=this.Gp;b!==a&&(og(a,Xf,"linkFromPortIdProperty"),this.Gp=a,this.h("linkFromPortIdProperty",b,a))});Xf.prototype.getFromPortIdForLinkData=Xf.prototype.mF=function(a){if(null===a)return"";var b=this.Gp;if(""===b)return"";a=Gb(a,b);return void 0===a?"":a};
Xf.prototype.setFromPortIdForLinkData=Xf.prototype.Sy=function(a,b){w(b,"string",Xf,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.Gp;if(""!==c)if(this.Nh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkFromPortId",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};G(Xf,{Wr:"linkToPortIdProperty"},function(){return this.Hp},function(a){var b=this.Hp;b!==a&&(og(a,Xf,"linkToPortIdProperty"),this.Hp=a,this.h("linkToPortIdProperty",b,a))});
Xf.prototype.getToPortIdForLinkData=Xf.prototype.pF=function(a){if(null===a)return"";var b=this.Hp;if(""===b)return"";a=Gb(a,b);return void 0===a?"":a};Xf.prototype.setToPortIdForLinkData=Xf.prototype.Wy=function(a,b){w(b,"string",Xf,"setToPortIdForLinkData:portname");if(null!==a){var c=this.Hp;if(""!==c)if(this.Nh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkToPortId",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
G(Xf,{Vr:"linkLabelKeysProperty"},function(){return this.Og},function(a){var b=this.Og;b!==a&&(og(a,Xf,"linkLabelKeysProperty"),this.Og=a,this.h("linkLabelKeysProperty",b,a))});Xf.prototype.getLabelKeysForLinkData=Xf.prototype.$i=function(a){if(null===a)return qb;var b=this.Og;if(""===b)return qb;a=Gb(a,b);return void 0===a?qb:a};
Xf.prototype.setLabelKeysForLinkData=Xf.prototype.oD=function(a,b){Ga(b,Xf,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.Og;if(""!==c)if(this.Nh(a)){var d=Gb(a,c);void 0===d&&(d=qb);if(d!==b){for(var e=Ia(d),f=0;f<e;f++){var g=La(d,f);sg(this,g,a)}Hb(a,c,b);e=Ia(b);for(f=0;f<e;f++)g=La(b,f),null===this.He(g)&&rg(this,g,a);ng(this,"linkLabelKeys",If,c,a,d,b);"string"===typeof c&&this.rb(a,c)}}else Hb(a,c,b)}};
Xf.prototype.addLabelKeyForLinkData=Xf.prototype.Ax=function(a,b){if(null!==b&&void 0!==b&&(pg(b)||ta(b,"number or string",Xf,"addLabelKeyForLinkData:key"),null!==a)){var c=this.Og;if(""!==c){var d=Gb(a,c);void 0===d?(c=[],c.push(b),this.oD(a,c)):Fa(d)?0<=Oa(d,b)||(Qa(d,Infinity,b),this.Nh(a)&&(null===this.He(b)&&rg(this,b,a),ng(this,"linkLabelKeys",Qf,c,a,null,b))):u(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
Xf.prototype.removeLabelKeyForLinkData=Xf.prototype.WC=function(a,b){if(null!==b&&void 0!==b&&(pg(b)||ta(b,"number or string",Xf,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.Og;if(""!==c){var d=Gb(a,c);if(Fa(d)){var e=Oa(d,b);0>e||(Ta(d,e),this.Nh(a)&&(sg(this,b,a),ng(this,"linkLabelKeys",Rf,c,a,b,null)))}else void 0!==d&&u(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
G(Xf,{aj:"linkDataArray"},function(){return this.Ng},function(a){var b=this.Ng;if(b!==a){Ga(a,Xf,"linkDataArray");for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);if(!Ea(e)){u("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}tb(e)}this.Ng=a;for(var f=new Xb(Object),d=0;d<c;d++)e=La(a,d),f.add(e);this.Yk=f;ng(this,"linkDataArray",If,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=La(a,d),xg(this,e)}});Xf.prototype.containsLinkData=Xf.prototype.Nh=function(a){return null===a?!1:this.Yk.contains(a)};
Xf.prototype.addLinkData=Xf.prototype.vu=function(a){if(null!==a){if(void 0===ub(a))sb(a);else if(this.Nh(a))return;this.Yk.add(a);var b=Ia(this.Ng);Qa(this.Ng,b,a);ng(this,"linkDataArray",Qf,"linkDataArray",this,null,a,null,b);xg(this,a)}};Xf.prototype.addLinkDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.vu(La(a,c));else for(a=a.i;a.next();)this.vu(a.value)};
Xf.prototype.removeLinkData=Xf.prototype.Ly=function(a){if(null!==a){this.Yk.remove(a);var b=this.Ng.indexOf(a);if(!(0>b)){Ta(this.Ng,b);ng(this,"linkDataArray",Rf,"linkDataArray",this,a,null,b,null);b=this.ik(a);sg(this,b,a);b=this.lk(a);sg(this,b,a);var c=this.$i(a);if(Fa(c))for(var d=Ia(c),e=0;e<d;e++)b=La(c,e),sg(this,b,a)}}};Xf.prototype.removeLinkDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.Ly(La(a,c));else for(a=a.i;a.next();)this.Ly(a.value)};
function xg(a,b){var c=a.ik(b),c=a.Ll(c);null===a.He(c)&&rg(a,c,b);c=a.lk(b);c=a.Ll(c);null===a.He(c)&&rg(a,c,b);var d=a.$i(b);if(Fa(d))for(var e=Ia(d),f=0;f<e;f++)c=La(d,f),null===a.He(c)&&rg(a,c,b)}G(Xf,{EH:"copyLinkDataFunction"},function(){return this.Xs},function(a){var b=this.Xs;b!==a&&(null!==a&&w(a,"function",Xf,"copyLinkDataFunction"),this.Xs=a,this.h("copyLinkDataFunction",b,a))});
Xf.prototype.copyLinkData=Xf.prototype.RB=function(a){if(null===a)return null;var b=null,b=this.Xs;if(null!==b)b=b(a,this);else{var b=new a.constructor,c;for(c in a)if("__gohashid"!==c){var d=Gb(a,c);Hb(b,c,d)}}null!==b&&(sb(b),""!==this.qi&&Hb(b,this.qi,void 0),""!==this.ti&&Hb(b,this.ti,void 0),""!==this.Og&&Hb(b,this.Og,[]));return b};
G(Xf,{bs:"nodeIsGroupProperty"},function(){return this.Ot},function(a){var b=this.Ot;b!==a&&(og(a,Xf,"nodeIsGroupProperty"),this.Ot=a,this.h("nodeIsGroupProperty",b,a))});Xf.prototype.isGroupForNodeData=Xf.prototype.iy=function(a){if(null===a)return!1;var b=this.Ot;return""===b?!1:Gb(a,b)?!0:!1};G(Xf,{Yn:"nodeGroupKeyProperty"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(og(a,Xf,"nodeGroupKeyProperty"),this.Ai=a,this.h("nodeGroupKeyProperty",b,a))});
G(Xf,{Al:"copiesGroupKeyOfNodeData"},function(){return this.ew},function(a){this.ew!==a&&(w(a,"boolean",Xf,"copiesGroupKeyOfNodeData"),this.ew=a)});Xf.prototype.getGroupKeyForNodeData=Xf.prototype.Il=function(a){if(null!==a){var b=this.Ai;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;u("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setGroupKeyForNodeData=Xf.prototype.Av=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setGroupKeyForNodeData:key");if(null!==a){var c=this.Ai;if(""!==c)if(this.me(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.He(b)&&rg(this,b,a),ng(this,"nodeGroupKey",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
Xf.prototype.copyNodeData=function(a){if(null===a)return null;a=jc.prototype.copyNodeData.call(this,a);this.Al||""===this.Ai||Hb(a,this.Ai,void 0);return a};
Xf.prototype.setDataProperty=function(a,b,c){if(this.me(a))if(b===this.Ol)this.Ty(a,c);else{if(b===this.Nl){this.yv(a,c);return}if(b===this.Yn){this.Av(a,c);return}b===this.bs&&u("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.Nh(a)){if(b===this.Nn){this.zv(a,c);return}if(b===this.Pn){this.Bv(a,c);return}if(b===this.Ur){this.Sy(a,c);return}if(b===this.Wr){this.Wy(a,c);return}if(b===this.Tr){this.nD(a,c);return}if(b===this.Vr){this.oD(a,c);return}}else!wg&&
a instanceof U&&(wg=!0,Da('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Gy(a,b,d,c))};r=Xf.prototype;
r.hs=function(a,b){jc.prototype.hs.call(this,a,b);for(var c=this.Vb.i;c.next();)this.Oy(c.value,a,b);for(var d=this.Yk.i;d.next();){var e=c.value,f=a,g=b;if(this.ik(e)===f){var h=this.qi;Hb(e,h,g);ng(this,"linkFromKey",If,h,e,f,g);"string"===typeof h&&this.rb(e,h)}this.lk(e)===f&&(h=this.ti,Hb(e,h,g),ng(this,"linkToKey",If,h,e,f,g),"string"===typeof h&&this.rb(e,h));var k=this.$i(e);if(Fa(k))for(var l=Ia(k),h=this.Og,m=0;m<l;m++)La(k,m)===f&&(Na(k,m,g),ng(this,"linkLabelKeys",Qf,h,e,f,g))}};
r.Oy=function(a,b,c){if(this.Il(a)===b){var d=this.Ai;Hb(a,d,c);ng(this,"nodeGroupKey",If,d,a,b,c);"string"===typeof d&&this.rb(a,d)}};r.dz=function(){jc.prototype.dz.call(this);for(var a=this.aj,b=Ia(a),c=0;c<b;c++){var d=La(a,c);xg(this,d)}};
r.bo=function(a){jc.prototype.bo.call(this,a);a=this.$a(a);var b=qg(this,a);if(null!==b){for(var c=new N(Object),b=b.i;b.next();){var d=b.value;if(this.me(d)){if(this.Il(d)===a){var e=this.Ai;ng(this,"nodeGroupKey",If,e,d,a,a);"string"===typeof e&&this.rb(d,e);c.add(d)}}else{this.ik(d)===a&&(e=this.qi,ng(this,"linkFromKey",If,e,d,a,a),"string"===typeof e&&this.rb(d,e),c.add(d));this.lk(d)===a&&(e=this.ti,ng(this,"linkToKey",If,e,d,a,a),"string"===typeof e&&this.rb(d,e),c.add(d));var f=this.$i(d);
if(Fa(f))for(var g=Ia(f),e=this.Og,h=0;h<g;h++)La(f,h)===a&&(ng(this,"linkLabelKeys",Qf,e,d,a,a),c.add(d))}}for(c=c.i;c.next();)sg(this,a,c.value)}};r.ao=function(a){jc.prototype.ao.call(this,a);var b=this.Il(a);null===this.He(b)&&rg(this,b,a)};r.As=function(a){jc.prototype.As.call(this,a);var b=this.Il(a);sg(this,b,a)};G(Xf,{Tr:"linkCategoryProperty"},function(){return this.Dp},function(a){var b=this.Dp;b!==a&&(og(a,Xf,"linkCategoryProperty"),this.Dp=a,this.h("linkCategoryProperty",b,a))});
Xf.prototype.getCategoryForLinkData=Xf.prototype.Wu=function(a){if(null===a)return"";var b=this.Dp;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;u("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
Xf.prototype.setCategoryForLinkData=Xf.prototype.nD=function(a,b){w(b,"string",Xf,"setCategoryForLinkData:cat");if(null!==a){var c=this.Dp;if(""===c)return"";if(this.Nh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkCategory",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
function Yf(a){1<arguments.length&&u("TreeModel constructor can only take one optional argument, the Array of node data.");jc.call(this);this.Bi="parent";this.fw=!1;this.iq="parentLinkCategory";void 0!==a&&(this.pg=a)}yb(Yf,jc);vb("TreeModel",Yf);Yf.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.bz();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.pg;for(var c=Ia(a),d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e))}return b};
Yf.prototype.Bs=function(){var a=jc.prototype.Bs.call(this),b="";"parent"!==this.Zn&&"string"===typeof this.Zn&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Zn));return a+b};Yf.prototype.gs=function(a){jc.prototype.gs.call(this,a);a.nodeParentKeyProperty&&(this.Zn=a.nodeParentKeyProperty)};Yf.prototype.Ll=function(a){return a};
G(Yf,{Zn:"nodeParentKeyProperty"},function(){return this.Bi},function(a){var b=this.Bi;b!==a&&(og(a,Yf,"nodeParentKeyProperty"),this.Bi=a,this.h("nodeParentKeyProperty",b,a))});G(Yf,{Bl:"copiesParentKeyOfNodeData"},function(){return this.fw},function(a){this.fw!==a&&(w(a,"boolean",Yf,"copiesParentKeyOfNodeData"),this.fw=a)});
Yf.prototype.getParentKeyForNodeData=Yf.prototype.Jl=function(a){if(null!==a){var b=this.Bi;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;u("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
Yf.prototype.setParentKeyForNodeData=Yf.prototype.wg=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Yf,"setParentKeyForNodeData:key");if(null!==a){var c=this.Bi;if(""!==c)if(b=this.Ll(b),this.me(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.He(b)&&rg(this,b,a),ng(this,"nodeParentKey",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};
G(Yf,{LI:"parentLinkCategoryProperty"},function(){return this.iq},function(a){var b=this.iq;b!==a&&(og(a,Yf,"parentLinkCategoryProperty"),this.iq=a,this.h("parentLinkCategoryProperty",b,a))});Yf.prototype.getParentLinkCategoryForNodeData=Yf.prototype.oF=function(a){if(null===a)return"";var b=this.iq;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;u("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
Yf.prototype.setParentLinkCategoryForNodeData=Yf.prototype.JG=function(a,b){w(b,"string",Yf,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.iq;if(""===c)return"";if(this.me(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"parentLinkCategory",If,c,a,d,b),"string"===typeof c&&this.rb(a,c))}else Hb(a,c,b)}};Yf.prototype.copyNodeData=function(a){if(null===a)return null;a=jc.prototype.copyNodeData.call(this,a);this.Bl||""===this.Bi||Hb(a,this.Bi,void 0);return a};
Yf.prototype.setDataProperty=function(a,b,c){if(this.me(a))if(b===this.Ol)this.Ty(a,c);else{if(b===this.Nl){this.yv(a,c);return}if(b===this.Zn){this.wg(a,c);return}}else!wg&&a instanceof U&&(wg=!0,Da('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Gy(a,b,d,c))};r=Yf.prototype;r.hs=function(a,b){jc.prototype.hs.call(this,a,b);for(var c=this.Vb.i;c.next();)this.Oy(c.value,a,b)};
r.Oy=function(a,b,c){if(this.Jl(a)===b){var d=this.Bi;Hb(a,d,c);ng(this,"nodeParentKey",If,d,a,b,c);"string"===typeof d&&this.rb(a,d)}};r.bo=function(a){jc.prototype.bo.call(this,a);a=this.$a(a);var b=qg(this,a);if(null!==b){for(var c=new N(Object),b=b.i;b.next();){var d=b.value;if(this.me(d)&&this.Jl(d)===a){var e=this.Bi;ng(this,"nodeParentKey",If,e,d,a,a);"string"===typeof e&&this.rb(d,e);c.add(d)}}for(c=c.i;c.next();)sg(this,a,c.value)}};
r.ao=function(a){jc.prototype.ao.call(this,a);var b=this.Jl(a),b=this.Ll(b);null===this.He(b)&&rg(this,b,a)};r.As=function(a){jc.prototype.As.call(this,a);var b=this.Jl(a);sg(this,b,a)};
function yg(a,b,c){sb(this);this.pa=!1;void 0===a?a="":w(a,"string",yg,"constructor:targetprop");void 0===b?b=a:w(b,"string",yg,"constructor:sourceprop");void 0===c?c=null:null!==c&&w(c,"function",yg,"constructor:conv");this.aB=-1;this.wf=null;this.nu=a;this.lu=this.nx=0;this.WA=null;this.tx=!1;this.eu=b;this.bw=c;this.Rw=zg;this.Wv=null}vb("Binding",yg);var zg;yg.OneWay=zg=I(yg,"OneWay",1);var Ag;yg.TwoWay=Ag=I(yg,"TwoWay",2);
yg.parseEnum=function(a,b){w(a,"function",yg,"parseEnum:ctor");va(b,a,yg,"parseEnum:defval");return function(c){c=yc(a,c);return null===c?b:c}};var Sf;yg.toString=Sf=function(a){var b=a;Ea(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};
yg.prototype.toString=function(){return"Binding("+this.Gv+":"+this.uD+(-1!==this.Ck?" "+this.Ck:"")+" "+this.mode.name+")"};yg.prototype.freeze=function(){this.pa=!0;return this};yg.prototype.wa=function(){this.pa=!1;return this};G(yg,{Ck:null},function(){return this.aB},function(a){pa(this);w(a,"number",yg,"targetId");this.aB=a});G(yg,{Gv:"targetProperty"},function(){return this.nu},function(a){pa(this);w(a,"string",yg,"targetProperty");this.nu=a});
G(yg,{Sl:"sourceName"},function(){return this.WA},function(a){pa(this);null!==a&&w(a,"string",yg,"sourceName");this.WA=a;null!==a&&(this.tx=!1)});G(yg,{ys:"toModel"},function(){return this.tx},function(a){pa(this);w(a,"boolean",yg,"toModel");this.tx=a});G(yg,{uD:"sourceProperty"},function(){return this.eu},function(a){pa(this);w(a,"string",yg,"sourceProperty");this.eu=a});G(yg,{ME:"converter"},function(){return this.bw},function(a){pa(this);null!==a&&w(a,"function",yg,"converter");this.bw=a});
G(yg,{BE:"backConverter"},function(){return this.Wv},function(a){pa(this);null!==a&&w(a,"function",yg,"backConverter");this.Wv=a});G(yg,{mode:"mode"},function(){return this.Rw},function(a){pa(this);va(a,yg,yg,"mode");this.Rw=a});yg.prototype.makeTwoWay=function(a){void 0===a&&(a=null);null!==a&&w(a,"function",yg,"makeTwoWay");this.mode=Ag;this.BE=a;return this};yg.prototype.ofObject=yg.prototype.mv=function(a){void 0===a&&(a="");this.Sl=a;this.ys=!1;return this};
yg.prototype.ofModel=function(){this.Sl=null;this.ys=!0;return this};yg.prototype.ofData=function(){this.Sl=null;this.ys=!1;return this};function Bg(a,b,c){a=a.Sl;var d=null;return d=null===a||""===a?b:"."===a?c:".."===a?c.I:b.Cd(a)}
yg.prototype.updateTarget=yg.prototype.JD=function(a,b,c){var d=this.eu;if(void 0===c||d===c){c=this.nu;var e=this.bw;if(null===e&&""===c)Da("Binding error: target property is the empty string: "+this.toString());else{var f=b;""!==d&&(f=Gb(b,d));if(void 0!==f)if(null===e)""!==c&&Hb(a,c,f);else try{if(""!==c){var g=e(f,a);Hb(a,c,g)}else e(f,a)}catch(h){}}}};
yg.prototype.updateSource=yg.prototype.Hv=function(a,b,c,d){void 0===d&&(d=null);if(this.Rw===Ag){var e=this.nu;if(void 0===c||e===c){c=this.eu;var f=this.Wv;if(null!==f||""!==c){var g=a;""!==e&&(g=Gb(a,e));if(void 0!==g)if(null===f)null!==d&&d.U?d.U.setDataProperty(b,c,g):Hb(b,c,g);else try{if(""!==c){var h=f(g,b);null!==d&&d.U?d.U.setDataProperty(b,c,h):Hb(b,c,h)}else f(g,b)}catch(k){}}}}};function mg(){this.XD=(new N(Hf)).freeze();this.yb="";this.bA=!1}vb("Transaction",mg);
mg.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.ig.count.toString()+(this.Lr?"":", incomplete");if(void 0!==a&&0<a){a=this.ig.count;for(var c=0;c<a;c++){var d=this.ig.Y(c);null!==d&&(b+="\n  "+d.toString())}}return b};mg.prototype.clear=mg.prototype.clear=function(){var a=this.ig;a.wa();for(var b=a.count-1;0<=b;b--){var c=a.Y(b);null!==c&&c.clear()}a.clear();a.freeze()};mg.prototype.canUndo=mg.prototype.canUndo=function(){return this.Lr};
mg.prototype.undo=mg.prototype.undo=function(){if(this.canUndo())for(var a=this.ig.count-1;0<=a;a--){var b=this.ig.Y(a);null!==b&&b.undo()}};mg.prototype.canRedo=mg.prototype.canRedo=function(){return this.Lr};mg.prototype.redo=mg.prototype.redo=function(){if(this.canRedo())for(var a=this.ig.count,b=0;b<a;b++){var c=this.ig.Y(b);null!==c&&c.redo()}};H(mg,{ig:"changes"},function(){return this.XD});G(mg,{name:"name"},function(){return this.yb},function(a){this.yb=a});
G(mg,{Lr:"isComplete"},function(){return this.bA},function(a){this.bA=a});function Tf(){this.Tw=new Xb(jc);this.ee=!1;this.dE=(new N(mg)).freeze();this.Yf=-1;this.qA=999;this.th=!1;this.ct=null;this.Tj=0;this.uz=!1;this.dg=(new N("string")).freeze();this.Um=new N("number");this.yw=!0;this.Mw=!1}vb("UndoManager",Tf);
Tf.prototype.toString=function(a){for(var b="UndoManager "+this.Th+"<"+this.history.count+"<="+this.EC,b=b+"[",c=this.LC.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.LC.Y(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.Y(d).toString(a-1);return b};
Tf.prototype.clear=Tf.prototype.clear=function(){var a=this.history;a.wa();for(var b=a.count-1;0<=b;b--){var c=a.Y(b);null!==c&&c.clear()}a.clear();this.Yf=-1;a.freeze();this.th=!1;this.ct=null;this.Tj=0;this.dg.wa();this.dg.clear();this.dg.freeze();this.Um.clear()};Tf.prototype.addModel=Tf.prototype.vE=function(a){this.Tw.add(a)};Tf.prototype.removeModel=Tf.prototype.tG=function(a){this.Tw.remove(a)};
Tf.prototype.startTransaction=Tf.prototype.Ab=function(a){void 0===a&&(a="");null===a&&(a="");if(this.Ua)return!1;!0===this.yw&&(this.yw=!1,this.Tj++,this.pc("StartingFirstTransaction",a,this.Oh),0<this.Tj&&this.Tj--);this.isEnabled&&(this.dg.wa(),this.dg.add(a),this.dg.freeze(),null===this.Oh?this.Um.add(0):this.Um.add(this.Oh.ig.count));this.Tj++;var b=1===this.ce;b&&this.pc("StartedTransaction",a,this.Oh);return b};
Tf.prototype.commitTransaction=Tf.prototype.pd=function(a){void 0===a&&(a="");return Qg(this,!0,a)};Tf.prototype.rollbackTransaction=Tf.prototype.co=function(){return Qg(this,!1,"")};
function Qg(a,b,c){if(a.Ua)return!1;a.Ex&&1>a.ce&&Da("Ending transaction without having started a transaction: "+c);var d=1===a.ce;d&&b&&a.isEnabled&&a.pc("CommittingTransaction",c,a.Oh);var e=0;if(0<a.ce&&(a.Tj--,a.isEnabled)){var f=a.dg.count;0<f&&(""===c&&(c=a.dg.Y(0)),a.dg.wa(),a.dg.Dc(f-1),a.dg.freeze());f=a.Um.count;0<f&&(e=a.Um.Y(f-1),a.Um.Dc(f-1))}f=a.Oh;if(d){if(b){a.Mw=!1;if(a.isEnabled&&null!==f){b=f;b.Lr=!0;b.name=c;d=a.history;d.wa();for(e=d.count-1;e>a.Th;e--)f=d.Y(e),null!==f&&f.clear(),
d.Dc(e),a.Mw=!0;e=a.EC;0===e&&(e=1);0<e&&d.count>=e&&(f=d.Y(0),null!==f&&f.clear(),d.Dc(0),a.Yf--);d.add(b);a.Yf++;d.freeze();f=b}a.pc("CommittedTransaction",c,f)}else{a.th=!0;try{a.isEnabled&&null!==f&&(f.Lr=!0,f.undo())}finally{a.pc("RolledBackTransaction",c,f),a.th=!1}null!==f&&f.clear()}a.ct=null;return!0}if(a.isEnabled&&!b&&null!==f){a=e;c=f.ig;for(b=c.count-1;b>=a;b--)d=c.Y(b),null!==d&&d.undo(),c.wa(),c.Dc(b);c.freeze()}return!1}
Tf.prototype.canUndo=Tf.prototype.canUndo=function(){if(!this.isEnabled||0<this.ce||this.Ua)return!1;var a=this.DD;return null!==a&&a.canUndo()?!0:!1};Tf.prototype.undo=Tf.prototype.undo=function(){if(this.canUndo()){var a=this.DD;try{this.pc("StartingUndo","Undo",a),this.th=!0,this.Yf--,a.undo()}catch(b){Da("undo error: "+b.toString())}finally{this.th=!1,this.pc("FinishedUndo","Undo",a)}}};
Tf.prototype.canRedo=Tf.prototype.canRedo=function(){if(!this.isEnabled||0<this.ce||this.Ua)return!1;var a=this.CD;return null!==a&&a.canRedo()?!0:!1};Tf.prototype.redo=Tf.prototype.redo=function(){if(this.canRedo()){var a=this.CD;try{this.pc("StartingRedo","Redo",a),this.th=!0,this.Yf++,a.redo()}catch(b){Da("redo error: "+b.toString())}finally{this.th=!1,this.pc("FinishedRedo","Redo",a)}}};
Tf.prototype.pc=function(a,b,c){void 0===c&&(c=null);var d=new Hf;d.Vc=Pf;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.dG;a.next();)b=a.value,d.U=b,b.Hu(d)};Tf.prototype.handleChanged=Tf.prototype.oC=function(a){if(this.isEnabled&&!this.Ua&&!this.skipsEvent(a)){var b=this.Oh;null===b&&(this.ct=b=new mg);var c=a.copy(),b=b.ig;b.wa();b.add(c);b.freeze();this.Ex&&0>=this.ce&&!this.yw&&(a=a.g,null!==a&&!1===a.Ce||Da("Change not within a transaction: "+c.toString()))}};
Tf.prototype.skipsEvent=function(a){if(null===a||0>a.Vc.value)return!0;a=a.object;if(a instanceof U){if(a=a.layer,null!==a&&a.bc)return!0}else if(a instanceof jg&&a.bc)return!0;return!1};H(Tf,{dG:"models"},function(){return this.Tw.i});G(Tf,{isEnabled:"isEnabled"},function(){return this.ee},function(a){this.ee=a});H(Tf,{DD:"transactionToUndo"},function(){return 0<=this.Th&&this.Th<=this.history.count-1?this.history.Y(this.Th):null});
H(Tf,{CD:"transactionToRedo"},function(){return this.Th<this.history.count-1?this.history.Y(this.Th+1):null});H(Tf,{Ua:"isUndoingRedoing"},function(){return this.th});H(Tf,{history:"history"},function(){return this.dE});G(Tf,{EC:"maxHistoryLength"},function(){return this.qA},function(a){this.qA=a});H(Tf,{Th:"historyIndex"},function(){return this.Yf});H(Tf,{Oh:"currentTransaction"},function(){return this.ct});H(Tf,{ce:"transactionLevel"},function(){return this.Tj});
H(Tf,{wC:"isInTransaction"},function(){return 0<this.Tj});G(Tf,{Ex:"checksTransactionLevel"},function(){return this.uz},function(a){this.uz=a});H(Tf,{LC:"nestedTransactionNames"},function(){return this.dg});function ec(){0<arguments.length&&Aa(ec);sb(this);this.N=null;this.xz=!0;this.zz=this.Az=this.Lz=this.Bz=!1;this.Kj=this.Tv=null;this.sB=1.05;this.Jz=1;this.Nw=NaN;this.nA=null;this.tB=NaN}vb("CommandHandler",ec);var Rg=null,Sg="";ec.prototype.toString=function(){return"CommandHandler"};
H(ec,{g:"diagram"},function(){return this.N});ec.prototype.fc=function(a){this.N=a};
ec.prototype.doKeyDown=function(){var a=this.g;if(null!==a){var b=a.C,c=fa?b.Yr:b.control,d=b.shift,e=b.alt,f=b.key;!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():"Del"===f||"Backspace"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===f?this.canSelectAll()&&
this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.ke&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.ke&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.je&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.je&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.je?a.scroll("page","left"):a.ke&&a.scroll("page","up"):"PageDown"===f?d&&a.je?a.scroll("page","right"):a.ke&&a.scroll("page","down"):"Home"===
f?(b=a.Xc,c&&a.ke?a.position=new z(a.position.x,b.y):!c&&a.je&&(a.position=new z(b.x,a.position.y))):"End"===f?(b=a.Xc,d=a.Va,c&&a.ke?a.position=new z(d.x,b.bottom-d.height):!c&&a.je&&(a.position=new z(b.right-d.width,d.y))):"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&
d&&"G"===f?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};ec.prototype.doKeyUp=function(){var a=this.g;null!==a&&(a.C.bubbles=!0)};ec.prototype.stopCommand=function(){var a=this.g;if(null!==a){var b=a.Ea;b instanceof Tg&&a.Fe&&a.Iu();null!==b&&b.doCancel()}};
ec.prototype.canStopCommand=function(){return!0};ec.prototype.selectAll=function(){var a=this.g;if(null!==a){a.ba();try{a.Fb="wait";a.ma("ChangingSelection");for(var b=a.cj;b.next();)b.value.Ia=!0;for(var c=a.Of;c.next();)c.value.Ia=!0;for(var d=a.links;d.next();)d.value.Ia=!0}finally{a.ma("ChangedSelection"),a.Fb=""}}};ec.prototype.canSelectAll=function(){var a=this.g;return null!==a&&a.Fe};
ec.prototype.deleteSelection=function(){var a=this.g;if(null!==a&&!a.ma("SelectionDeleting",a.selection))try{a.Fb="wait";a.Ab("Delete");a.ma("ChangingSelection");for(var b=new Xb(O),c=a.selection.i;c.next();)Ug(b,c.value,!0,this.YE?Infinity:0,!0,function(a){return a.canDelete()});a.Ny(b,!0);a.ma("SelectionDeleted",b)}finally{a.ma("ChangedSelection"),a.pd("Delete"),a.Fb=""}};ec.prototype.canDeleteSelection=function(){var a=this.g;return null===a||a.Ta||a.Le||!a.sl||0===a.selection.count?!1:!0};
function Ug(a,b,c,d,e,f){void 0===f&&(f=null);if(!(a.contains(b)||null!==f&&!f(b)||b instanceof Vg))if(a.add(b),b instanceof V){if(c&&b instanceof Wg)for(var g=b.mc;g.next();)Ug(a,g.value,c,d,e,f);if(e)for(g=b.Hd;g.next();){var h=g.value;if(!a.contains(h)){var k=h.M,l=h.R;null!==k&&a.contains(k)&&null!==l&&a.contains(l)?Ug(a,h,c,d,e,f):null!==k&&null!==l||Ug(a,h,c,d,e,f)}}if(1<d)for(b=b.dC();b.next();)Ug(a,b.value,c,d-1,e,f)}else if(b instanceof W)for(g=b.Kf;g.next();)Ug(a,g.value,c,d,e,f)}
ec.prototype.wn=function(a,b,c){var d=new Fb(O,O);for(a=a.i;a.next();)Xg(this,a.value,b,d,c);if(null!==b){c=b.U;a=!1;null!==b.Xa.Zc&&(a=b.Xa.Zc.Rh);for(var e=new Xb(W),f=new Fb(W,W),g=d.i;g.next();){var h=g.value;if(h instanceof W){var k=h;a||null!==k.M&&null!==k.R||e.add(k)}else if(c instanceof Yf&&h instanceof V&&null!==h.data){var k=c,l=h,h=g.key,m=h.Gl();null!==m&&(m=d.ha(m),null!==m?(k.wg(l.data,k.$a(m.data)),k=b.Ef(l.data),h=h.Ar(),null!==h&&null!==k&&f.add(h,k)):k.wg(l.data,void 0))}}0<e.count&&
b.Ny(e,!1);if(0<f.count)for(b=f.i;b.next();)d.add(b.key,b.value)}for(b=d.i;b.next();)b.value.rb();return d};
function Xg(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.ha(b);var f=null,g=b.data;if(null!==g&&null!==c){var h=c.U;b instanceof W?h instanceof Xf&&(g=h.RB(g),Ea(g)&&(h.vu(g),f=c.Ef(g))):(g=h.copyNodeData(g),Ea(g)&&(h.rl(g),f=c.$g(g)))}else Yg(b),f=b.copy(),null!==c&&null!==f&&c.add(f);if(!(f instanceof O))return null;f.Ia=!1;f.kg=!1;d.add(b,f);if(b instanceof V){for(h=b.Hd;h.next();){g=h.value;if(g.M===b){var k=d.ha(g);null!==k&&(k.M=f)}g.R===b&&(k=d.ha(g),null!==
k&&(k.R=f))}if(b instanceof Wg&&f instanceof Wg)for(h=f,b=b.mc;b.next();)g=Xg(a,b.value,c,d,e),g instanceof W||null===g||(g.Ba=h)}else if(b instanceof W)for(h=b.M,null!==h&&(h=d.ha(h),null!==h&&(f.M=h)),h=b.R,null!==h&&(h=d.ha(h),null!==h&&(f.R=h)),b=b.Kf;b.next();)h=Xg(a,b.value,c,d,e),null!==h&&(h.vd=f);return f}
ec.prototype.copySelection=function(){var a=this.g;if(null!==a){for(var b=new Xb(O),a=a.selection.i;a.next();)Ug(b,a.value,!0,this.PE?Infinity:0,this.NE,function(a){return a.canCopy()});this.copyToClipboard(b)}};ec.prototype.canCopySelection=function(){var a=this.g;return null!==a&&a.Ui&&a.Bx&&0!==a.selection.count?!0:!1};ec.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
ec.prototype.canCutSelection=function(){var a=this.g;return null!==a&&!a.Ta&&!a.Le&&a.Ui&&a.sl&&a.Bx&&0!==a.selection.count?!0:!1};ec.prototype.copyToClipboard=function(a){var b=this.g;if(null!==b){var c=null;if(null===a)Rg=null,Sg="";else{var c=b.U,d=!1,e=!1,f=null;try{if(c instanceof Yf){var g=c,d=g.Bl;g.Bl=this.QB}c instanceof Xf&&(g=c,e=g.Al,g.Al=this.PB);f=b.wn(a,null,!0)}finally{c instanceof Yf&&(c.Bl=d),c instanceof Xf&&(c.Al=e),c=new N(O),c.md(f),Rg=c,Sg=b.U.ak}}b.ma("ClipboardChanged",c)}};
ec.prototype.pasteFromClipboard=function(){var a=new Xb(O),b=Rg;if(null===b)return a;var c=this.g;if(null===c||Sg!==c.U.ak)return a;var d=c.U,e=!1,f=!1,g=null;try{if(d instanceof Yf){var h=d,e=h.Bl;h.Bl=this.QB}d instanceof Xf&&(h=d,f=h.Al,h.Al=this.PB);g=c.wn(b,c,!1)}finally{for(d instanceof Yf&&(d.Bl=e),d instanceof Xf&&(d.Al=f),b=g.i;b.next();)c=b.value,d=b.key,c.location.w()||(d.location.w()?c.location=d.location:!c.position.w()&&d.position.w()&&(c.position=d.position)),a.add(c)}return a};
ec.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Fb="wait";b.Ab("Paste");b.ma("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Zg(b);for(var d=c.i;d.next();)d.value.Ia=!0;b.ma("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e){var f=b.Xa.Zc;null===f&&(f=new $g,f.fc(b));var g=f.computeEffectiveCollection(b.selection);f.moveParts(g,new z(a.x-e.ua,a.y-e.Da),!1)}}b.ma("ClipboardPasted",c)}finally{b.pd("Paste"),b.Fb=
""}};ec.prototype.canPasteSelection=function(){var a=this.g;return null===a||a.Ta||a.Le||!a.on||!a.Bx||null===Rg||Sg!==a.U.ak?!1:!0};ec.prototype.undo=function(){var a=this.g;null!==a&&a.V.undo()};ec.prototype.canUndo=function(){var a=this.g;return null===a||a.Ta||a.Le?!1:a.BB&&a.V.canUndo()};ec.prototype.redo=function(){var a=this.g;null!==a&&a.V.redo()};ec.prototype.canRedo=function(){var a=this.g;return null===a||a.Ta||a.Le?!1:a.BB&&a.V.canRedo()};
ec.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.Jv);ua(a,ec,"decreaseZoom:factor");var b=this.g;null!==b&&b.qn===ah&&(a*=b.scale,a<b.mg||a>b.lg||(b.scale=a))};ec.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.Jv);ua(a,ec,"canDecreaseZoom:factor");var b=this.g;if(null===b||b.qn!==ah)return!1;a*=b.scale;return a<b.mg||a>b.lg?!1:b.Eu};
ec.prototype.increaseZoom=function(a){void 0===a&&(a=this.Jv);ua(a,ec,"increaseZoom:factor");var b=this.g;null!==b&&b.qn===ah&&(a*=b.scale,a<b.mg||a>b.lg||(b.scale=a))};ec.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.Jv);ua(a,ec,"canIncreaseZoom:factor");var b=this.g;if(null===b||b.qn!==ah)return!1;a*=b.scale;return a<b.mg||a>b.lg?!1:b.Eu};ec.prototype.resetZoom=function(a){void 0===a&&(a=this.Mu);ua(a,ec,"resetZoom:newscale");var b=this.g;null===b||a<b.mg||a>b.lg||(b.scale=a)};
ec.prototype.canResetZoom=function(a){void 0===a&&(a=this.Mu);ua(a,ec,"canResetZoom:newscale");var b=this.g;return null===b||a<b.mg||a>b.lg?!1:b.Eu};ec.prototype.zoomToFit=function(){var a=this.g;if(null!==a){var b=a.scale,c=a.position;b!==this.tB||isNaN(this.Nw)?(this.Nw=b,this.nA=c.copy(),a.zoomToFit(),a.te(),this.tB=a.scale):(a.scale=this.Nw,a.position=this.nA)}};ec.prototype.canZoomToFit=function(){var a=this.g;return null===a?!1:a.Eu};
ec.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Ab("Collapse Tree");var c=new N(V);if(null!==a&&a.sc)a.collapseTree(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.sc&&(a.collapseTree(),c.add(a)))}b.ma("TreeCollapsed",c)}finally{b.pd("Collapse Tree")}};
ec.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a){if(!a.sc)return!1;if(0<a.Vu().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&b.sc&&0<b.Vu().count)return!0;return!1};
ec.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Ab("Expand Tree");var c=new N(V);if(null===a||a.sc)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.sc||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.ma("TreeExpanded",c)}finally{b.pd("Expand Tree")}};
ec.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a){if(a.sc)return!1;if(0<a.Vu().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&!b.sc&&0<b.Vu().count)return!0;return!1};
ec.prototype.groupSelection=function(){var a=this.g;if(null!==a){var b=a.U;if(b instanceof Xf){var c=this.CB;if(null!==c){var d=null;try{a.Fb="wait";a.Ab("Group");a.ma("ChangingSelection");for(var e=new N(O),f=a.selection.i;f.next();){var g=f.value;g.$c()&&g.canGroup()&&e.add(g)}for(var h=new N(O),k=e.i;k.next();){for(var l=k.value,f=!1,m=e.i;m.next();)if(l.bh(m.value)){f=!0;break}f||h.add(l)}if(0<h.count){var n=h.first().Ba;if(null!==n)for(;null!==n;){for(var e=!1,p=h.i;p.next();)if(!p.value.bh(n)){e=
!0;break}if(e)n=n.Ba;else break}if(c instanceof Wg)Yg(c),d=c.copy(),null!==d&&a.add(d);else if(b.iy(c)){var q=b.copyNodeData(c);Ea(q)&&(b.rl(q),d=a.Uu(q))}if(null!==d){null!==n&&this.isValidMember(n,d)&&(d.Ba=n);for(var s=h.i;s.next();){var t=s.value;this.isValidMember(d,t)&&(t.Ba=d)}a.select(d)}}a.ma("ChangedSelection");a.ma("SelectionGrouped",d)}finally{a.pd("Group"),a.Fb=""}}}}};
ec.prototype.canGroupSelection=function(){var a=this.g;if(null===a||a.Ta||a.Le||!a.on||!a.zu||!(a.U instanceof Xf)||null===this.CB)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.$c()&&b.canGroup())return!0}return!1};function bh(a){var b=ob();for(a=a.i;a.next();){var c=a.value;c instanceof W||b.push(c)}a=new Xb(O);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],f=!0,g=0;g<c;g++)if(e.bh(b[g])){f=!1;break}f&&a.add(e)}pb(b);return a}
ec.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof W)return!1;if(null!==a){if(a===b||a.bh(b))return!1;var c=a.sy;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.sy;return null!==c?c(a,b):!0};
ec.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf)try{b.Fb="wait";b.Ab("Ungroup");b.ma("ChangingSelection");var d=new N(Wg);if(null!==a)d.add(a);else for(var e=b.selection.i;e.next();){var f=e.value;f instanceof Wg&&(a=f,a.canUngroup()&&d.add(a))}if(0<d.count){b.Iu();for(var g=d.i;g.next();){var h=g.value;h.expandSubGraph();var k=h.Ba,l=null!==k&&null!==k.data?c.$a(k.data):void 0,m=new N(O);m.md(h.mc);for(var n=m.i;n.next();){var p=
n.value;p.Ia=!0;if(!(p instanceof W)){var q=p.data;null!==q?c.Av(q,l):p.Ba=k}}b.remove(h)}}b.ma("ChangedSelection");b.ma("SelectionUngrouped",d,m)}finally{b.pd("Ungroup"),b.Fb=""}}};ec.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta||b.Le||!b.sl||!b.Du||!(b.U instanceof Xf))return!1;if(null!==a){if(a.canUngroup())return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&b.canUngroup())return!0;return!1};
ec.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=bh(a).i;d.next();){var e=d.value;null!==e.Ba&&(!b||this.isValidMember(null,e)?e.Ba=null:c=!1)}return c};ec.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Ab("Collapse SubGraph");var c=new N(Wg);if(null!==a&&a.ud)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof Wg&&(a=e,a.ud&&(a.collapseSubGraph(),c.add(a)))}b.ma("SubGraphCollapsed",c)}finally{b.pd("Collapse SubGraph")}};
ec.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a)return a.ud?!0:!1;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&b.ud)return!0;return!1};
ec.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Ab("Expand SubGraph");var c=new N(Wg);if(null===a||a.ud)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof Wg&&(a=e,a.ud||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.ma("SubGraphExpanded",c)}finally{b.pd("Expand SubGraph")}};
ec.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a)return a.ud?!1:!0;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&!b.ud)return!0;return!1};
ec.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&ra(a,Zb,ec,"editTextBlock");var b=this.g;if(null!==b){var c=b.Xa.$y;if(null!==c){if(null===a){a=null;for(var d=b.selection.i;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.vr(function(a){return a instanceof Zb&&a.Px})}null!==a&&(b.Ea=null,c.xg=a,b.Ea=c)}}};
ec.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);null!==a&&ra(a,Zb,ec,"canEditTextBlock");var b=this.g;if(null===b||b.Ta||b.Le||!b.Cu||null===b.Xa.$y)return!1;if(null!==a){if(a=a.J,null!==a&&a.canEdit())return!0}else for(b=b.selection.i;b.next();)if(a=b.value,a.canEdit()&&(a=a.vr(function(a){return a instanceof Zb&&a.Px}),null!==a))return!0;return!1};
ec.prototype.showContextMenu=function(a){var b=this.g;if(null!==b){var c=b.Xa.Ix;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new Ff,e=null;a instanceof U?e=a.Ra(Dd):b.IF||(e=b.Va,e=new z(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.xe=b.ED(e),d.S=e,b.C=d);b.Ea=c;ch(c,!1,a)}}};
ec.prototype.canShowContextMenu=function(a){var b=this.g;if(null===b)return!1;var c=b.Xa.Ix;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};G(ec,{NE:"copiesConnectedLinks"},function(){return this.xz},function(a){w(a,"boolean",ec,"copiesConnectedLinks");this.xz=a});G(ec,{PE:"copiesTree"},function(){return this.Bz},function(a){w(a,"boolean",ec,"copiesTree");this.Bz=a});
G(ec,{YE:"deletesTree"},function(){return this.Lz},function(a){w(a,"boolean",ec,"deletesTree");this.Lz=a});G(ec,{QB:"copiesParentKey"},function(){return this.Az},function(a){w(a,"boolean",ec,"copiesParentKey");this.Az=a});G(ec,{PB:"copiesGroupKey"},function(){return this.zz},function(a){w(a,"boolean",ec,"copiesGroupKey");this.zz=a});
G(ec,{CB:"archetypeGroupData"},function(){return this.Tv},function(a){null!==a&&ra(a,Object,ec,"archetypeGroupData");var b=this.g;null!==b&&(b=b.U,b instanceof Xf&&(a instanceof Wg||b.iy(a)||u("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.Tv=a});G(ec,{sy:"memberValidation"},function(){return this.Kj},function(a){null!==a&&w(a,"function",ec,"memberValidation");this.Kj=a});
G(ec,{Mu:"defaultScale"},function(){return this.Jz},function(a){ua(a,ec,"defaultScale");0<a||u("defaultScale must be larger than zero, not: "+a);this.Jz=a});G(ec,{Jv:"zoomFactor"},function(){return this.sB},function(a){ua(a,ec,"zoomFactor");1<a||u("zoomFactor must be larger than 1.0, not: "+a);this.sB=a});function kg(){0<arguments.length&&Aa(kg);sb(this);this.N=null;this.yb="";this.ee=!0;this.$z=!1;this.oB=null;this.tu=-1}vb("Tool",kg);kg.prototype.fc=function(a){this.N=a};
kg.prototype.toString=function(){return""!==this.name?this.name+" Tool":xa(Object.getPrototypeOf(this))};kg.prototype.updateAdornments=function(){};kg.prototype.canStart=function(){return this.isEnabled};kg.prototype.doStart=function(){};kg.prototype.doActivate=function(){this.ca=!0};kg.prototype.doDeactivate=function(){this.ca=!1};kg.prototype.doStop=function(){};kg.prototype.doCancel=function(){this.stopTool()};
kg.prototype.stopTool=function(){var a=this.g;null!==a&&a.Ea===this&&(a.Ea=null,a.Fb="")};kg.prototype.doMouseDown=function(){!this.ca&&this.canStart()&&this.doActivate()};kg.prototype.doMouseMove=function(){};kg.prototype.doMouseUp=function(){this.stopTool()};kg.prototype.doMouseWheel=function(){};kg.prototype.canStartMultiTouch=function(){return!0};
kg.prototype.standardPinchZoomStart=function(){var a=this.g;if(null!==a){var b=a.C.event,c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Ue[0])c=a.Ue[0],d=a.Ue[1];else return;this.doCancel();if(a.Cm){a.zw=!0;a.AA=a.scale;var e=a.eb,f=a.cb,g=a.Oa.getBoundingClientRect(),h=c.clientX-e/g.width*g.left,k=c.clientY-f/g.height*g.top,c=d,d=c.clientX-e/g.width*g.left-h,f=c.clientY-f/g.height*g.top-k,f=Math.sqrt(d*d+f*
f);a.XA=f;b.preventDefault();b.cancelBubble=!0}else dh(a)}};
kg.prototype.standardPinchZoomMove=function(){var a=this.g;if(null!==a){var b=a.C.event;this.doCancel();dh(a);var c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Ue[0])c=a.Ue[0],d=a.Ue[1];else return;if(a.Cm&&a.zw){var e=a.eb,f=a.cb,g=a.Oa.getBoundingClientRect(),h=c,c=h.clientX-e/g.width*g.left,k=h.clientY-f/g.height*g.top,h=d,d=h.clientX-e/g.width*g.left,f=h.clientY-f/g.height*g.top,g=d-c,e=f-k,g=Math.sqrt(g*
g+e*e)/a.XA,c=new z((Math.min(d,c)+Math.max(d,c))/2,(Math.min(f,k)+Math.max(f,k))/2),k=a.AA*g,d=a.ib;k!==a.scale&&d.canResetZoom(k)&&(f=a.Wl,a.Wl=c,d.resetZoom(k),a.Wl=f);b.preventDefault();b.cancelBubble=!0}}};kg.prototype.doKeyDown=function(){var a=this.g;null!==a&&"Esc"===a.C.key&&this.doCancel()};kg.prototype.doKeyUp=function(){};kg.prototype.startTransaction=kg.prototype.Ab=function(a){void 0===a&&(a=this.name);this.Qe=null;var b=this.g;return null===b?!1:b.Ab(a)};
kg.prototype.stopTransaction=kg.prototype.ej=function(){var a=this.g;return null===a?!1:null===this.Qe?a.co():a.pd(this.Qe)};
kg.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.Fe){var b=a.C,c=a.zr(b.S,!1);if(null!==c)if(fa?b.Yr:b.control){a.ma("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Ba;null!==b&&(b.Ia=!b.Ia);a.ma("ChangedSelection")}else if(b.shift){if(!c.Ia){a.ma("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Ba;null!==b&&(b.Ia=!0);a.ma("ChangedSelection")}}else{if(!c.Ia){for(b=c;null!==b&&!b.canSelect();)b=b.Ba;null!==b&&a.select(b)}}else!b.left||(fa?b.Yr:b.control)||
b.shift||a.Iu()}};kg.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.bc});var c=this.g;if(null!==c){var d=c.C,e=c.Dd(d.S,a,b);d.Jd=e;eh(e,d,c)}};
function eh(a,b,c){var d=0;b.left?d=1===b.le?1:2===b.le?2:1:b.right&&1===b.le&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ma(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ma(e)}if(null!==a)for(b.rc=!1;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.tr?a.tr:a.click;break;case 3:c=
a.Hx}if(null!==c&&(c(b,a),b.rc))break;a=a.I}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.tr?c.tr:c.click;break;case 3:a=c.Hx}null!==a&&a(b)}}
kg.prototype.standardMouseOver=function(){var a=this.g;if(null!==a){var b=a.C;if(null!==b.g&&!0!==a.qb.Gc){var c=a.Ma;a.Ma=!0;var d=a.Dd(b.S,null,null);b.Jd=d;var e=!1;if(d!==a.jm){var f=a.jm,g=f;a.jm=d;this.doCurrentObjectChanged(f,d);for(b.rc=!1;null!==f;){var h=f.JC;if(null!==h){if(d===f)break;if(null!==d&&d.pk(f))break;h(b,f,d);e=!0;if(b.rc)break}f=f.I}f=g;for(b.rc=!1;null!==d;){h=d.IC;if(null!==h){if(f===d)break;if(null!==f&&f.pk(d))break;h(b,d,f);e=!0;if(b.rc)break}d=d.I}d=a.jm}if(null!==d){f=
d;for(h="";null!==f;){h=f.cursor;if(""!==h)break;f=f.I}a.Fb=h;b.rc=!1;for(f=d;null!==f;){h=f.wy;if(null!==h&&(h(b,f),e=!0,b.rc))break;f=f.I}}else a.Fb="",h=a.wy,null!==h&&(h(b),e=!0);e&&a.wd();a.Ma=c}}};kg.prototype.doCurrentObjectChanged=function(){};
kg.prototype.standardMouseWheel=function(){var a=this.g;if(null!==a){var b=a.C,c=b.ck;if(0!==c&&a.Xc.w()){var d=a.ib,e=a.Xa.$r;if((e===fh&&!b.shift||e===gh&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.Wl,a.Wl=b.xe,0<c?d.increaseZoom():d.decreaseZoom(),a.Wl=e,b.bubbles=!1;else if(e===fh&&b.shift||e===gh&&!b.control){d=a.position.copy();e=0<c?c:-c;if(!b.shift&&a.ke){var f=a.os,e=e/40*f;0<c?a.scroll("pixel","up",e):a.scroll("pixel","down",e)}else b.shift&&a.je&&(f=a.ns,e=e/40*f,0<c?
a.scroll("pixel","left",e):a.scroll("pixel","right",e));a.position.A(d)||(b.bubbles=!1)}}}};kg.prototype.standardWaitAfter=function(a){w(a,"number",kg,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.tu=ma(function(){b.doWaitAfter()},a)};kg.prototype.cancelWaitAfter=function(){-1!==this.tu&&window.clearTimeout(this.tu);this.tu=-1};kg.prototype.doWaitAfter=function(){};
kg.prototype.findToolHandleAt=function(a,b){var c=this.g;if(null===c)return null;c=c.Dd(a,null,function(a){a=a.J;return null===a?!1:null!==a.Xb});if(null===c)return null;var d=c.J;return null===d||d.kc!==b?null:c};kg.prototype.isBeyondDragSize=function(a,b){var c=this.g;if(null===c)return!1;void 0===a&&(a=c.Yb.xe);void 0===b&&(b=c.C.xe);var d=c.Xa.cF,e=d.width,d=d.height;c.Yb.sk&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};H(kg,{g:"diagram"},function(){return this.N});
G(kg,{name:"name"},function(){return this.yb},function(a){w(a,"string",kg,"name");this.yb=a});G(kg,{isEnabled:"isEnabled"},function(){return this.ee},function(a){w(a,"boolean",kg,"isEnabled");this.ee=a});G(kg,{ca:"isActive"},function(){return this.$z},function(a){w(a,"boolean",kg,"isActive");this.$z=a});G(kg,{Qe:"transactionResult"},function(){return this.oB},function(a){null!==a&&w(a,"string",kg,"transactionResult");this.oB=a});
function $g(){0<arguments.length&&Aa($g);kg.call(this);this.name="Dragging";this.yz=this.dA=!0;this.lp=this.Rz=!1;this.hA=!0;this.Aw=(new Za(NaN,NaN)).freeze();this.Bw=ud;this.Cw=(new z(NaN,NaN)).freeze();this.Qz=!1;this.Oz=this.wz=this.Pz=this.Ez=this.Dh=null;this.Uo=this.fA=!1;this.fn=new z(NaN,NaN);this.fu=new z;this.iu=!1;this.du=this.cA=!0;this.tm=100;this.ii=[];this.cE=(new Xb(O)).freeze()}yb($g,kg);vb("DraggingTool",$g);
G($g,{vC:"isCopyEnabled"},function(){return this.dA},function(a){w(a,"boolean",$g,"isCopyEnabled");this.dA=a});G($g,{OE:"copiesEffectiveCollection"},function(){return this.yz},function(a){w(a,"boolean",$g,"copiesEffectiveCollection");this.yz=a});G($g,{dF:"dragsTree"},function(){return this.Rz},function(a){w(a,"boolean",$g,"dragsTree");this.Rz=a});G($g,{cv:"isGridSnapEnabled"},function(){return this.lp},function(a){w(a,"boolean",$g,"isGridSnapEnabled");this.lp=a});
G($g,{EF:"isComplexRoutingRealtime"},function(){return this.cA},function(a){w(a,"boolean",$g,"isComplexRoutingRealtime");this.cA=a});G($g,{GF:"isGridSnapRealtime"},function(){return this.hA},function(a){w(a,"boolean",$g,"isGridSnapRealtime");this.hA=a});G($g,{nC:"gridSnapCellSize"},function(){return this.Aw},function(a){ra(a,Za,$g,"gridSnapCellSize");this.Aw.A(a)||(this.Aw=a=a.O())});
G($g,{qF:"gridSnapCellSpot"},function(){return this.Bw},function(a){ra(a,R,$g,"gridSnapCellSpot");this.Bw.A(a)||(this.Bw=a=a.O())});G($g,{rF:"gridSnapOrigin"},function(){return this.Cw},function(a){ra(a,z,$g,"gridSnapOrigin");this.Cw.A(a)||(this.Cw=a=a.O())});G($g,{Rh:"dragsLink"},function(){return this.Qz},function(a){w(a,"boolean",$g,"dragsLink");this.Qz=a});G($g,{rr:"currentPart"},function(){return this.Ez},function(a){null!==a&&ra(a,O,$g,"currentPart");this.Ez=a});
G($g,{Qb:"copiedParts"},function(){return this.wz},function(a){this.wz=a});G($g,{Hb:"draggedParts"},function(){return this.Pz},function(a){this.Pz=a});H($g,{UH:"draggingParts"},function(){return null!==this.Qb?this.Qb.Yh():null!==this.Hb?this.Hb.Yh():this.cE});G($g,{qc:"draggedLink"},function(){return this.Oz},function(a){null!==a&&ra(a,W,$g,"draggedLink");this.Oz=a});G($g,{bv:"isDragOutStarted"},function(){return this.fA},function(a){this.fA=a});
G($g,{dj:"startPoint"},function(){return this.fu},function(a){ra(a,z,$g,"startPoint");this.fu.A(a)||(this.fu=a=a.O())});G($g,{TB:"delay"},function(){return this.tm},function(a){w(a,"number",$g,"delay");this.tm=a});$g.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Xj&&!a.Ui&&!a.yu||!a.Fe)return!1;var b=a.C;return!b.left||a.Ea!==this&&(!this.isBeyondDragSize()||b.sk&&b.timestamp-a.Yb.timestamp<this.tm)?!1:null!==this.findDraggablePart()};
$g.prototype.findDraggablePart=function(){var a=this.g;if(null===a)return null;a=a.zr(a.Yb.S,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Ba;return null!==a&&(a.canMove()||a.canCopy())?a:null};$g.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.Fe){var b=a.zr(a.Yb.S,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Ba;this.rr=b;this.rr.Ia||(a.ma("ChangingSelection"),b=a.C,(fa?b.Yr:b.control)||b.shift||Zg(a),this.rr.Ia=!0,a.ma("ChangedSelection"))}}};
$g.prototype.doActivate=function(){var a=this.g;if(null!==a){this.standardMouseSelect();var b=this.rr;null!==b&&(b.canMove()||b.canCopy())&&(this.ca=!0,this.fn.set(a.position),oh(this,a.selection),this.ii.length=0,this.Hb=this.computeEffectiveCollection(a.selection),a.us=!0,ph(this,this.Hb),this.Ab("Drag"),this.dj=a.Yb.S,a.Yd=!0,a.yu&&(this.bv=!0,this.Uo=!1,qh=this,rh=this.g,this.doSimulatedDragOut()))}};
function oh(a,b){if(a.Rh){var c=a.g;null!==c&&c.tl&&(c.U instanceof Xf&&1===b.count&&b.first()instanceof W?(a.qc=b.first(),a.qc.canRelinkFrom()&&a.qc.canRelinkTo()&&a.qc.nr(),a.Dh=c.Xa.SC,null===a.Dh&&(a.Dh=new sh,a.Dh.fc(c))):(a.qc=null,a.Dh=null))}}
$g.prototype.computeEffectiveCollection=function(a){var b=null!==this.g&&this.g.Ea===this,c=new Fb(O);if(null===a)return c;for(var d=a.i;d.next();)th(this,c,d.value,b);if(null!==this.qc&&this.Rh)return c;for(d=a.i;d.next();)a=d.value,a instanceof W&&(b=a.M,null===b||c.contains(b)?(b=a.R,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function uh(a){return void 0===a?new vh(Q.fj):new vh(a.copy())}
function th(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof V){b.add(c,uh(c.location));if(c instanceof Wg)for(var e=c.mc;e.next();)th(a,b,e.value,d);for(e=c.Hd;e.next();){var f=e.value;if(!b.contains(f)){var g=f.M,h=f.R;null!==g&&b.contains(g)&&null!==h&&b.contains(h)&&th(a,b,f,d)}}if(a.dF)for(c=c.dC();c.next();)th(a,b,c.value,d)}else if(c instanceof W)for(f=c,b.add(f,uh()),e=f.Kf;e.next();)th(a,b,e.value,d);else c instanceof Vg||b.add(c,uh(c.location))}
$g.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&wh(a);xh(this);yh(this,this.Hb);this.Hb=null;this.Uo=this.bv=!1;if(0<zh.count){for(var b=zh.length,c=0;c<b;c++){var d=zh.Y(c);Ah(d);Bh(d);xh(d);null!==d.g&&wh(d.g)}zh.clear()}Ah(this);this.fn.k(NaN,NaN);qh=rh=null;Bh(this);a.Yd=!1;a.Fb="";a.us=!1;this.ej()};function xh(a){var b=a.g;if(null!==b){var c=b.Ma;b.Ma=!0;Ch(a,b.C,null);b.Ma=c}a.ii.length=0}
function Dh(){var a=qh;Bh(a);Eh(a);var b=a.g;null!==b&&a.fn.w()&&(b.position=a.fn);null!==b&&wh(b)}$g.prototype.doCancel=function(){Bh(this);Eh(this);var a=this.g;null!==a&&this.fn.w()&&(a.position=this.fn);this.stopTool()};function ph(a,b){if(null!==b){a.iu=!0;for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.mo=!0)}}}function yh(a,b){if(null!==b){for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.mo=!1,d.nk&&Fh(d)&&d.zb())}a.iu=!1}}
$g.prototype.doKeyDown=function(){var a=this.g;null!==a&&(a=a.C,null!==a&&this.ca&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};$g.prototype.doKeyUp=function(){var a=this.g;null!==a&&null!==a.C&&this.ca&&this.doMouseMove()};function Gh(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=a.i;g.next();){var h=g.value;if(h.$c()&&h.qa()){var k=h.location,h=k.x,k=k.y;isNaN(h)||isNaN(k)||(h<c&&(c=h),k<d&&(d=k),h>e&&(e=h),k>f&&(f=k))}}Infinity===c?b.k(0,0,0,0):b.k(c,d,e-c,f-d)}
function Ph(a,b){if(null===a.Qb){var c=a.g;if(!(null===c||b&&(c.Ta||c.Le))&&null!==a.Hb){var d=c.V;d.isEnabled&&d.wC?null!==d.Oh&&0<d.Oh.ig.count&&(c.V.co(),c.Ab("Drag")):Eh(a);c.Ma=!b;c.$l=!b;a.dj=c.Yb.S;d=a.OE?a.Hb.Yh():c.selection;d=c.wn(d,c,!0);for(c=d.i;c.next();)c.value.location=c.key.location;c=bb();Gh(d,c);fb(c);for(var c=new Fb(O),e=a.Hb.i;e.next();){var f=e.key;f.$c()&&f.canCopy()&&(f=d.ha(f),null!==f&&(f.Ge(),c.add(f,uh(f.location))))}for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&
c.add(e,uh());a.Qb=c;oh(a,c.Yh());null!==a.qc&&(c=a.qc,d=c.Rl,c.uk(a.dj.x-(d.x+d.width/2),a.dj.y-(d.y+d.height/2)))}}}function Bh(a){var b=a.g;if(null!==b){if(null!==a.Qb&&(b.Ny(a.Qb.Yh(),!1),a.Qb=null,null!==a.Hb))for(var c=a.Hb.i;c.next();)c.key instanceof W&&(c.value.point=new z(0,0));b.Ma=!1;b.$l=!1;a.dj=b.Yb.S}}function Ah(a){if(null!==a.qc){if(a.Rh&&null!==a.Dh){var b=a.Dh;b.g.remove(b.Kd);b.g.remove(b.Ld)}a.qc=null;a.Dh=null}}
function Qh(a,b,c){var d=a.g;if(null!==d){var e=a.dj,f=Va();f.assign(d.C.S);a.moveParts(b,f.ws(e),c);A(f)}}
$g.prototype.moveParts=function(a,b,c){if(null!==a&&(ra(a,Fb,$g,"moveParts:parts"),0!==a.count)){var d=Va(),e=Va();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);var f=this.iu;f||ph(this,a);for(var g=new N(Rh),h=new N(Lc),k=a.i;k.next();){var l=k.key;if(l.$c()){var m=Sh(this,l,a);if(null!==m)g.add(new Rh(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=Va(),p=this.computeMove(l,d.add(e),a,n);l.location=p;A(n);k.value.rD=n.ws(m)}}else k.key instanceof W&&h.add(k.gb)}for(c=
g.i;c.next();)g=c.value,m=g.info.point,d.assign(m),g.dc.location=d.add(g.sF.rD);m=Va();c=Va();for(h=h.i;h.next();)if(n=h.value,g=n.key,g instanceof W)if(g.mo)k=g.M,l=g.R,null!==this.qc&&this.Rh?(n=n.value.point,a.add(g,uh(e)),k=b.x-n.x,l=b.y-n.y,g.uk(k,l)):(null!==k&&(m.assign(k.location),p=a.ha(k),null!==p&&m.ws(p.point)),null!==l&&(c.assign(l.location),p=a.ha(l),null!==p&&c.ws(p.point)),null!==k&&null!==l?m.Vd(c)?(n=n.value.point,k=d,k.assign(m),k.ws(n),a.add(g,uh(m)),g.uk(k.x,k.y)):(g.mo=!1,g.zb()):
(n=n.value.point,a.add(g,uh(null!==k?m:null!==l?c:b)),k=e.x-n.x,l=e.y-n.y,g.uk(k,l)));else if(null===g.M||null===g.R)n=n.value.point,a.add(g,uh(b)),k=e.x-n.x,l=e.y-n.y,g.uk(k,l);A(d);A(e);A(m);A(c);f||yh(this,a)}};function Sh(a,b,c){b=b.Ba;if(null!==b){a=Sh(a,b,c);if(null!==a)return a;a=c.ha(b);if(null!==a)return a}return null}
function Eh(a){if(null!==a.Hb){for(var b=a.g,c=a.Hb.i;c.next();){var d=c.key;d.$c()&&(d.location=c.value.point)}for(c=a.Hb.i;c.next();)if(d=c.key,d instanceof W&&d.mo){var e=c.value.point;a.Hb.add(d,uh());d.uk(-e.x,-e.y)}b.te()}}
$g.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new z);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.cv&&(this.GF||null===c||this.g.C.up)&&(e=Va(),c=e,c.assign(b),null!==a)){var f=this.g;if(null!==f){var g=f.Gr,h=this.nC,f=h.width,h=h.height,k=this.rF,l=k.x,k=k.y,m=this.qF;if(null!==g){var n=g.Xu;isNaN(f)&&(f=n.width);isNaN(h)&&(h=n.height);g=g.mC;isNaN(l)&&(l=g.x);isNaN(k)&&(k=g.y)}g=Wa(0,0);g.ss(0,0,f,h,m);Q.xr(b.x,b.y,l+g.x,k+g.y,f,h,c);A(g)}}c=null!==a.XB?a.XB(a,
b,e):e;h=a.cG;f=h.x;isNaN(f)&&(f=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);g=a.YF;l=g.x;isNaN(l)&&(l=a.location.x);g=g.y;isNaN(g)&&(g=a.location.y);d.k(Math.max(f,Math.min(c.x,l)),Math.max(h,Math.min(c.y,g)));e!==b&&A(e);return d};function Th(a,b){if(null===b)return!0;var c=b.J;return null===c||c instanceof Vg||c.layer.bc||a.Hb&&a.Hb.contains(c)||a.Qb&&a.Qb.contains(c)?!0:!1}
function Uh(a,b,c,d){var e=a.g;if(null!==e){a.Rh&&(null!==a.qc&&(a.qc.M=null,a.qc.R=null),Vh(a,!1));var f=!1;!1===a.du&&(f=e.Ma,e.Ma=!0);var g=Wh(e,b,null,function(b){return!Th(a,b)}),h=e.C;h.Jd=g;var k=e.Ma;e.Ma=!0;var l=Ch(a,h,g);if(a.ca||null!==qh){if(null===g){var m=e.gG;null!==m&&(m(h),l=!0)}if(a.ca||null!==qh)if(a.doDragOver(b,g),a.ca||null!==qh)e.Ma=k,l&&e.te(),!1===a.du&&(e.Ma=f),(e.je||e.ke)&&(c||d)&&Xh(e,h.xe)}}}
function Ch(a,b,c){var d=!1,e=a.ii.length,f=0<e?a.ii[0]:null;if(c===f)return!1;b.rc=!1;for(var g=0;g<e;g++){var h=a.ii[g],k=h.fG;if(null!==k&&(k(b,h,c),d=!0,b.rc))break}a.ii.length=0;if(!a.ca&&null===qh||null===c)return d;for(b.rc=!1;null!==c;)a.ii.push(c),c=Yh(c);e=a.ii.length;for(g=0;g<e&&(h=a.ii[g],k=h.eG,null===k||(k(b,h,f),d=!0,!b.rc));g++);return d}function Yh(a){var b=a.I;return null!==b?b:a instanceof O&&!(a instanceof Wg)&&(a=a.Ba,null!==a&&a.vF)?a:null}
function Zh(a,b,c){var d=a.Dh;if(null===d)return null;var e=a.g.Fl(b,d.PC,function(a){return d.findValidLinkablePort(a,c)});a=Va();for(var f=Infinity,g=null,e=e.i;e.next();){var h=e.value;if(null!==h.J){var k=h.Ra(Dd,a),k=b.Xi(k);k<f&&(g=h,f=k)}}A(a);return g}
function Vh(a,b){var c=a.qc;if(null!==c&&!(2>c.Z)){var d=a.g;if(null!==d&&!d.Ta&&(d=a.Dh,null!==d)){var e=null,f=null;null===c.M&&(e=Zh(a,c.j(0),!1),null!==e&&(f=e.J));var g=null,h=null;null===c.R&&(g=Zh(a,c.j(c.Z-1),!0),null!==g&&(h=g.J));var k=d.isValidLink(f,e,h,g);b?(c.nm=c.j(0).copy(),c.rm=c.j(c.Z-1).copy(),c.mo=!1,c.M=f,null!==e&&(c.Gf=e.cd),c.R=h,null!==g&&(c.yg=g.cd)):k?$h(d,f,e,h,g):$h(d,null,null,null,null)}}}$g.prototype.doDragOver=function(){};
function ai(a,b){var c=a.g;if(null!==c){a.Rh&&Vh(a,!0);xh(a);var d=Wh(c,b,null,function(b){return!Th(a,b)}),e=c.C;e.Jd=d;if(null!==d){e.rc=!1;for(var f=d;null!==f;){var g=f.ty;if(null!==g&&(g(e,f),e.rc))break;f=Yh(f)}}else g=c.ty,null!==g&&g(e);if(a.ca||null!==qh)if(a.doDropOnto(b,d),a.ca||null!==qh)for(d=c.selection.i;d.next();)e=d.value,e instanceof V&&bi(c,e.Q)}}$g.prototype.doDropOnto=function(){};
$g.prototype.doMouseMove=function(){if(this.ca){var a=this.g;if(null!==a&&null!==this.rr&&null!==this.Hb){var b=!1,c=!1;this.mayCopy()?(b=!0,a.Fb="copy",Ph(this,!1),ph(this,this.Qb),Qh(this,this.Qb,!1),yh(this,this.Qb)):this.mayMove()?(c=!0,a.Fb="default",Bh(this),Qh(this,this.Hb,!0)):this.mayDragOut()?(a.Fb="no-drop",Ph(this,!1),Qh(this,this.Qb,!1)):Bh(this);Uh(this,a.C.S,c,b)}}};
$g.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.Qb?(Bh(this),Ph(this,!0),ph(this,this.Qb),Qh(this,this.Qb,!1),yh(this,this.Qb),null!==this.Qb&&a.lD(this.Qb.Yh())):(b=!0,Bh(this),this.mayMove()&&(Qh(this,this.Hb,!0),this.du=!1,Uh(this,a.C.S,!0,!1),this.du=!0));this.Uo=!0;ai(this,a.C.S);if(this.ca){this.Qb=null;if(b&&null!==this.Hb)for(b=this.Hb.i;b.next();){var d=b.key;d instanceof V&&(d=d.Ba,null===d||null===d.placeholder||this.Hb.contains(d)||
d.NB&&d.H())}a.Rb();yh(this,this.Hb);this.Qe=c?"Copy":"Move";a.ma(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};$g.prototype.mayCopy=function(){if(!this.vC)return!1;var a=this.g;if(null===a||a.Ta||a.Le||!a.on||!a.Ui||(fa?!a.C.alt:!a.C.control))return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.$c()&&b.canCopy())return!0}return null!==this.qc&&this.Rh&&this.qc.canCopy()?!0:!1};
$g.prototype.mayDragOut=function(){if(!this.vC)return!1;var a=this.g;if(null===a||!a.yu||!a.Ui||a.Xj)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.$c()&&b.canCopy())return!0}return null!==this.qc&&this.Rh&&this.qc.canCopy()?!0:!1};$g.prototype.mayMove=function(){var a=this.g;if(null===a||a.Ta||!a.Xj)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.$c()&&b.canMove())return!0}return null!==this.qc&&this.Rh&&this.qc.canMove()?!0:!1};var zh=new N($g),qh=null,rh=null;
$g.prototype.mayDragIn=function(){var a=this.g;if(null===a||!a.AB||a.Ta||a.Le||!a.on)return!1;var b=qh;return null===b||b.g.U.ak!==a.U.ak?!1:!0};$g.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.g;a.qb.Xh();ci(a);a=qh;null!==a&&(a.g.Fb="copy")}};$g.prototype.doSimulatedDragLeave=function(){var a=qh;null!==a&&a.doSimulatedDragOut();this.doCancel()};
$g.prototype.doSimulatedDragOver=function(){var a=this.g;if(null!==a){var b=qh;null!==b&&null!==b.Hb&&this.mayDragIn()&&(a.Fb="copy",di(this,b.Hb.Yh(),!1),Qh(this,this.Qb,!1),Uh(this,a.C.S,!1,!0))}};
$g.prototype.doSimulatedDrop=function(){var a=this.g;if(null!==a){var b=qh;null!==b&&(b.Uo=!0,Bh(this),this.mayDragIn()&&(this.Ab("Drop"),di(this,b.Hb.Yh(),!0),Qh(this,this.Qb,!1),null!==this.Qb&&a.lD(this.Qb.Yh()),this.Qe="ExternalCopy",ai(this,a.C.S),a.Rb(),this.Qb=null,a.focus(),a.ma("ExternalObjectsDropped",a.selection),this.ej()))}};
function di(a,b,c){if(null===a.Qb){var d=a.g;if(null!==d&&!d.Ta&&!d.Le){d.Ma=!c;d.$l=!c;a.dj=d.C.S;d=d.wn(b,d,!0);c=bb();Gh(b,c);var e=c.x+c.width/2,f=c.y+c.height/2;fb(c);var g=a.fu;c=new Fb(O);var h=Va();for(b=b.i;b.next();){var k=b.value;if(k.$c()&&k.canCopy()){var l=k.location,k=d.ha(k);h.k(g.x-(e-l.x),g.y-(f-l.y));k.location=h;k.Ge();c.add(k,uh(h))}}A(h);for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&c.add(e,uh());a.Qb=c;oh(a,c.Yh());null!==a.qc&&(c=a.qc,d=c.Rl,c.uk(a.dj.x-(d.x+d.width/
2),a.dj.y-(d.y+d.height/2)))}}}$g.prototype.doSimulatedDragOut=function(){var a=this.g;null!==a&&(this.mayCopy()||this.mayMove()?a.Fb="":a.Fb="no-drop")};function vh(a){this.point=a;this.rD=Q.fj}vb("DraggingInfo",vh);function Rh(a,b,c){this.dc=a;this.info=b;this.sF=c}
function ei(){0<arguments.length&&Aa(ei);kg.call(this);this.LA=100;this.lA=!1;var a=new W,b=new X;b.Jf=!0;b.stroke="blue";a.add(b);b=new X;b.no="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.Ne="Tool";this.hB=a;a=new V;b=new X;b.cd="";b.jb="Rectangle";b.fill=null;b.stroke="magenta";b.Na=2;b.ka=Q.Ov;a.add(b);a.yk=!1;a.Ne="Tool";this.fB=a;this.gB=b;a=new V;b=new X;b.cd="";b.jb="Rectangle";b.fill=null;b.stroke="magenta";b.Na=2;b.ka=Q.Ov;a.add(b);a.yk=!1;a.Ne="Tool";this.iB=a;this.jB=b;this.HA=this.GA=
this.CA=this.BA=this.DA=null;this.gA=!0;this.nE=new Fb(U,"boolean");this.MA=this.Hj=this.bB=null}yb(ei,kg);vb("LinkingBaseTool",ei);ei.prototype.doStop=function(){var a=this.g;null!==a&&wh(a);this.tg=this.sg=this.rg=this.qg=this.Sb=null;this.Iv.clear();this.hf=null};G(ei,{PC:"portGravity"},function(){return this.LA},function(a){w(a,"number",ei,"portGravity");0<=a&&(this.LA=a)});
G(ei,{Ln:"isUnconnectedLinkValid"},function(){return this.lA},function(a){w(a,"boolean",ei,"isUnconnectedLinkValid");this.lA=a});G(ei,{Tf:"temporaryLink"},function(){return this.hB},function(a){ra(a,W,ei,"temporaryLink");this.hB=a});G(ei,{Kd:"temporaryFromNode"},function(){return this.fB},function(a){ra(a,V,ei,"temporaryFromNode");this.fB=a});G(ei,{Tl:"temporaryFromPort"},function(){return this.gB},function(a){ra(a,U,ei,"temporaryFromPort");this.gB=a});
G(ei,{Ld:"temporaryToNode"},function(){return this.iB},function(a){ra(a,V,ei,"temporaryToNode");this.iB=a});G(ei,{Ul:"temporaryToPort"},function(){return this.jB},function(a){ra(a,U,ei,"temporaryToPort");this.jB=a});G(ei,{Sb:"originalLink"},function(){return this.DA},function(a){null!==a&&ra(a,W,ei,"originalLink");this.DA=a});G(ei,{qg:"originalFromNode"},function(){return this.BA},function(a){null!==a&&ra(a,V,ei,"originalFromNode");this.BA=a});
G(ei,{rg:"originalFromPort"},function(){return this.CA},function(a){null!==a&&ra(a,U,ei,"originalFromPort");this.CA=a});G(ei,{sg:"originalToNode"},function(){return this.GA},function(a){null!==a&&ra(a,V,ei,"originalToNode");this.GA=a});G(ei,{tg:"originalToPort"},function(){return this.HA},function(a){null!==a&&ra(a,U,ei,"originalToPort");this.HA=a});G(ei,{sd:"isForwards"},function(){return this.gA},function(a){w(a,"boolean",ei,"isForwards");this.gA=a});H(ei,{Iv:"validPortsCache"},function(){return this.nE});
G(ei,{hf:"targetPort"},function(){return this.bB},function(a){null!==a&&ra(a,U,ei,"targetPort");this.bB=a});ei.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.ka=b.Q.size;e?(d.ab=b.ab,d.Dk=b.Dk):(d.Za=b.Za,d.gk=b.gk);c.qe=Dd;var f=Va();c.location=b.Ra(Dd,f);A(f);d.angle=b.hk();null!==this.rv&&this.rv(a,b,c,d,e)}};
ei.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.ka=Q.Ov,b.Za=td,b.ab=td);null!==a&&(a.location=this.g.C.S);null!==this.rv&&this.rv(null,null,a,b,c)};ei.prototype.doMouseDown=function(){this.ca&&this.doMouseMove()};
ei.prototype.doMouseMove=function(){if(this.ca){var a=this.g;if(null!==a){this.hf=this.findTargetPort(this.sd);if(null!==this.hf){var b=this.hf.J;if(b instanceof V){this.sd?this.copyPortProperties(b,this.hf,this.Ld,this.Ul,!0):this.copyPortProperties(b,this.hf,this.Kd,this.Tl,!1);return}}this.sd?this.setNoTargetPortProperties(this.Ld,this.Ul,!0):this.setNoTargetPortProperties(this.Kd,this.Tl,!1);(a.je||a.ke)&&Xh(a,a.C.xe)}}};
ei.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.J;if(!(c instanceof V))return null;for(;null!==a;){var d=b?a.xD:a.fC;if(!0===d&&(null!==a.cd||a instanceof V)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.I}return null};
ei.prototype.findTargetPort=function(a){var b=this.g,c=b.C.S,d=this.PC;0>=d&&(d=.1);for(var e=this,f=b.Fl(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,f=f.i;f.next();){var g=f.value,h=g.J;if(h instanceof V){var k=g.Ra(Dd,Va()),l=c.x-k.x,m=c.y-k.y;A(k);k=l*l+m*m;k<d&&(l=this.Iv.ha(g),null!==l?l&&(b=g,d=k):a&&this.isValidLink(this.qg,this.rg,h,g)||!a&&this.isValidLink(h,g,this.sg,this.tg)?(this.Iv.add(g,!0),b=g,d=k):this.Iv.add(g,!1))}}return null!==b&&(c=b.J,c instanceof
V&&(null===c.layer||c.layer.jr))?b:null};ei.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.Ln;if(this.g.Ea===this&&(null!==a.layer&&!a.layer.jr||!0!==b.fC))return!1;var c=b.kF;if(Infinity>c){if(null!==this.Sb&&a===this.qg&&b===this.rg)return!0;var d=b.cd;null===d&&(d="");if(a.Tu(d).count>=c)return!1}return!0};
ei.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.Ln;if(this.g.Ea===this&&(null!==a.layer&&!a.layer.jr||!0!==b.xD))return!1;var c=b.$G;if(Infinity>c){if(null!==this.Sb&&a===this.sg&&b===this.tg)return!0;var d=b.cd;null===d&&(d="");if(a.Ff(d).count>=c)return!1}return!0};ei.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.J,d=b.J;return null!==c&&c===d};
ei.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.J;if(!(c instanceof V))return!1;var d=a.cd;null===d&&(d="");var e=b.J;if(!(e instanceof V))return!1;var f=b.cd;null===f&&(f="");for(e=e.Ff(f);e.next();)if(f=e.value,f.M===c&&f.Gf===d)return!0;return!1};
ei.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.jF&&d.ZG||!this.isInSameNode(b,d))&&(b.iF&&d.YG||!this.isLinked(b,d)))||null!==this.Sb&&(null!==a&&this.isLabelDependentOnLink(a,this.Sb)||null!==c&&this.isLabelDependentOnLink(c,this.Sb))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.Sb))return!1;if(null!==a){var e=a.kv;if(null!==e&&!e(a,b,c,d,this.Sb))return!1}if(null!==
c&&(e=c.kv,null!==e&&!e(a,b,c,d,this.Sb)))return!1;e=this.kv;return null!==e?e(a,b,c,d,this.Sb):!0};ei.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.vd;if(null===c)return!1;if(c===b)return!0;var d=new Xb(V);d.add(a);return fi(this,c,b,d)};function fi(a,b,c,d){if(b===c)return!0;var e=b.M;if(null!==e&&e.Ke&&(d.add(e),fi(a,e.vd,c,d)))return!0;b=b.R;return null!==b&&b.Ke&&(d.add(b),fi(a,b.vd,c,d))?!0:!1}
ei.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.Ln;var d=this.g.eH;if(d!==gi){if(d===hi){if(null!==c&&!c.cc)return!0;for(d=b.Hd;d.next();){var e=d.value;if(e!==c&&e.cc&&e.R===b)return!1}return!ii(this,a,b,c,!0)}if(d===ji){if(null!==c&&!c.cc)return!0;for(d=a.Hd;d.next();)if(e=d.value,e!==c&&e.cc&&e.M===a)return!1;return!ii(this,a,b,c,!0)}if(d===ki)return a===b?a=!0:(d=new Xb(V),d.add(b),a=li(this,d,a,b,c)),!a;if(d===mi)return!ii(this,a,b,c,!1);if(d===
ni)return a===b?a=!0:(d=new Xb(V),d.add(b),a=oi(this,d,a,b,c)),!a}return!0};function ii(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var f=b.Hd;f.next();){var g=f.value;if(g!==d&&(!e||g.cc)&&g.R===b&&(g=g.M,g!==b&&ii(a,g,c,d,e)))return!0}return!1}function li(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.Hd;f.next();){var g=f.value;if(g!==e&&g.R===c&&(g=g.M,g!==c&&li(a,b,g,d,e)))return!0}return!1}
function oi(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.Hd;f.next();){var g=f.value;if(g!==e){var h=g.M,g=g.R,h=h===c?g:h;if(h!==c&&oi(a,b,h,d,e))return!0}}return!1}G(ei,{kv:"linkValidation"},function(){return this.Hj},function(a){null!==a&&w(a,"function",ei,"linkValidation");this.Hj=a});G(ei,{rv:"portTargeted"},function(){return this.MA},function(a){null!==a&&w(a,"function",ei,"portTargeted");this.MA=a});
function hc(){0<arguments.length&&Aa(hc);ei.call(this);this.name="Linking";this.Vv={};this.Uv=null;this.aa=pi;this.lx=this.YA=null}yb(hc,ei);vb("LinkingTool",hc);var pi;hc.Either=pi=I(hc,"Either",0);var qi;hc.ForwardsOnly=qi=I(hc,"ForwardsOnly",0);var ri;hc.BackwardsOnly=ri=I(hc,"BackwardsOnly",0);G(hc,{xE:"archetypeLinkData"},function(){return this.Vv},function(a){null!==a&&ra(a,Object,hc,"archetypeLinkData");a instanceof U&&ra(a,W,hc,"archetypeLinkData");this.Vv=a});
G(hc,{DB:"archetypeLabelNodeData"},function(){return this.Uv},function(a){null!==a&&ra(a,Object,hc,"archetypeLabelNodeData");a instanceof U&&ra(a,V,hc,"archetypeLabelNodeData");this.Uv=a});G(hc,{direction:"direction"},function(){return this.aa},function(a){va(a,hc,hc,"direction");this.aa=a});G(hc,{vD:"startObject"},function(){return this.YA},function(a){null!==a&&ra(a,U,hc,"startObject");this.YA=a});H(hc,{Fv:"startPort"},function(){return this.lx});
hc.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||a.Le||!a.jr)return!1;var b=a.U;return(b instanceof Xf||b instanceof Yf)&&a.C.left&&(a.Ea===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
hc.prototype.findLinkablePort=function(){var a=this.g;if(null===a)return null;var b=this.vD;null===b&&(b=a.Dd(a.Yb.S,null,null));if(null===b||!(b.J instanceof V))return null;a=this.direction;if(a===pi||a===qi){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.sd=!0,c}if(a===pi||a===ri)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.sd=!1,c;return null};
hc.prototype.doActivate=function(){var a=this.g;if(null!==a&&(null===this.Fv&&(this.lx=this.findLinkablePort()),null!==this.Fv)){this.Ab(this.name);a.Yd=!0;a.Fb="pointer";if(this.sd){this.rg=this.Fv;var b=this.rg.J;b instanceof V&&(this.qg=b);this.copyPortProperties(this.qg,this.rg,this.Kd,this.Tl,!1)}else this.tg=this.Fv,b=this.tg.J,b instanceof V&&(this.sg=b),this.copyPortProperties(this.sg,this.tg,this.Ld,this.Ul,!0);a.add(this.Kd);a.add(this.Ld);null!==this.Tf&&(null!==this.Kd&&(this.Tf.M=this.Kd),
null!==this.Ld&&(this.Tf.R=this.Ld),this.Tf.zb(),a.add(this.Tf));this.ca=!0}};hc.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&(a.remove(this.Tf),a.remove(this.Kd),a.remove(this.Ld),a.Yd=!1,a.Fb="",this.ej())};hc.prototype.doStop=function(){ei.prototype.doStop.call(this);this.vD=this.lx=null};
hc.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null===a)return;var b=this.Qe=null,c=null,d=null,e=null,f=this.hf=this.findTargetPort(this.sd);if(null!==f){var g=f.J;g instanceof V&&(this.sd?(null!==this.qg&&(b=this.qg,c=this.rg),d=g,e=f):(b=g,c=f,null!==this.sg&&(d=this.sg,e=this.tg)))}else this.sd?null!==this.qg&&this.Ln&&(b=this.qg,c=this.rg):null!==this.sg&&this.Ln&&(d=this.sg,e=this.tg);if(null!==b||null!==d)b=this.insertLink(b,c,d,e),null!==b?(null===f&&(this.sd?b.rm=a.C.S.copy():
b.nm=a.C.S.copy()),a.Fe&&a.select(b),this.Qe=this.name,a.ma("LinkDrawn",b)):a.U.JB()}this.stopTool()};
hc.prototype.insertLink=function(a,b,c,d){var e=this.g;if(null===e)return null;var f=e.U;if(f instanceof Yf){var g=a;b=c;e.Lc||(g=c,b=a);if(null!==g&&null!==b)return f.wg(b.data,f.$a(g.data)),b.Ar()}else if(f instanceof Xf)if(g="",null!==a&&(null===b&&(b=a),g=b.cd,null===g&&(g="")),b="",null!==c&&(null===d&&(d=c),b=d.cd,null===b&&(b="")),d=this.xE,d instanceof W){if(Yg(d),f=d.copy(),null!==f)return f.M=a,f.Gf=g,f.R=c,f.yg=b,e.add(f),a=this.DB,a instanceof V&&(Yg(a),a=a.copy(),null!==a&&(a.vd=f,e.add(a))),
f}else if(null!==d&&(d=f.RB(d),Ea(d)))return null!==a&&f.zv(d,f.$a(a.data)),f.Sy(d,g),null!==c&&f.Bv(d,f.$a(c.data)),f.Wy(d,b),f.vu(d),a=this.DB,null===a||a instanceof V||(a=f.copyNodeData(a),Ea(a)&&(f.rl(a),a=f.$a(a),void 0!==a&&f.Ax(d,a))),f=e.Ef(d);return null};
function sh(){0<arguments.length&&Aa(sh);ei.call(this);this.name="Relinking";var a=new X;a.jb="Diamond";a.ka=Q.Lv;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ff=0;this.Vz=a;a=new X;a.jb="Diamond";a.ka=Q.Lv;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ff=-1;this.kB=a;this.Cb=null;this.EA=new D}yb(sh,ei);vb("RelinkingTool",sh);
sh.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){var b="RelinkFrom",c=null;if(a.Ia&&!this.g.Ta){var d=a.ps;null!==d&&a.canRelinkFrom()&&a.Q.w()&&a.qa()&&d.Q.w()&&d.tk()&&(c=a.An(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.kc=b),a.Uj(b,c)))}null===c&&a.xk(b);b="RelinkTo";c=null;a.Ia&&!this.g.Ta&&(d=a.ps,null!==d&&a.canRelinkTo()&&a.Q.w()&&a.qa()&&d.Q.w()&&d.tk()&&(c=a.An(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.kc=b),a.Uj(b,c))));null===c&&a.xk(b)}};
sh.prototype.makeAdornment=function(a,b){var c=new Vg;c.type=si;var d=b?this.XG:this.hF;null!==d&&c.add(d.copy());c.Xb=a;return c};G(sh,{hF:"fromHandleArchetype"},function(){return this.Vz},function(a){null!==a&&ra(a,U,sh,"fromHandleArchetype");this.Vz=a});G(sh,{XG:"toHandleArchetype"},function(){return this.kB},function(a){null!==a&&ra(a,U,sh,"toHandleArchetype");this.kB=a});H(sh,{handle:"handle"},function(){return this.Cb});
sh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||a.Le||!a.tl)return!1;var b=a.U;if(!(b instanceof Xf||b instanceof Yf)||!a.C.left)return!1;b=this.findToolHandleAt(a.Yb.S,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Yb.S,"RelinkTo"));return null!==b};
sh.prototype.doActivate=function(){var a=this.g;if(null!==a){if(null===this.Sb){var b=this.findToolHandleAt(a.Yb.S,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Yb.S,"RelinkTo"));if(null===b)return;var c=b.J;if(!(c instanceof Vg&&c.Yg instanceof W))return;this.Cb=b;this.sd=null===c||"RelinkTo"===c.kc;this.Sb=c.Yg}this.Ab(this.name);a.Yd=!0;a.Fb="pointer";this.rg=this.Sb.Jc;this.qg=this.Sb.M;this.tg=this.Sb.yd;this.sg=this.Sb.R;this.EA.set(this.Sb.Q);null!==this.Sb&&0<this.Sb.Z&&(null===this.Sb.M&&
(null!==this.Tl&&(this.Tl.ka=Q.so),null!==this.Kd&&(this.Kd.location=this.Sb.j(0))),null===this.Sb.R&&(null!==this.Ul&&(this.Ul.ka=Q.so),null!==this.Ld&&(this.Ld.location=this.Sb.j(this.Sb.Z-1))));this.copyPortProperties(this.qg,this.rg,this.Kd,this.Tl,!1);this.copyPortProperties(this.sg,this.tg,this.Ld,this.Ul,!0);a.add(this.Kd);a.add(this.Ld);null!==this.Tf&&(null!==this.Kd&&(this.Tf.M=this.Kd),null!==this.Ld&&(this.Tf.R=this.Ld),this.copyLinkProperties(this.Sb,this.Tf),this.Tf.zb(),a.add(this.Tf));
this.ca=!0}};sh.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.hr=a.hr;b.Lx=a.Lx;var c=a.ne;if(c===ti||c===Di)c=Ei;b.ne=c;b.Lu=a.Lu;b.uv=a.uv;b.ko=a.ko;b.Za=a.Za;b.gk=a.gk;b.Er=a.Er;b.Fr=a.Fr;b.ab=a.ab;b.Dk=a.Dk;b.xs=a.xs;b.zs=a.zs}};sh.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&(a.remove(this.Tf),a.remove(this.Kd),a.remove(this.Ld),a.Yd=!1,a.Fb="",this.ej())};sh.prototype.doStop=function(){ei.prototype.doStop.call(this);this.Cb=null};
sh.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null===a)return;this.Qe=null;var b=this.qg,c=this.rg,d=this.sg,e=this.tg,f=this.Sb;this.hf=this.findTargetPort(this.sd);if(null!==this.hf){var g=this.hf.J;g instanceof V&&(this.sd?(d=g,e=this.hf):(b=g,c=this.hf))}else this.Ln?this.sd?e=d=null:c=b=null:f=null;null!==f&&(this.reconnectLink(f,this.sd?d:b,this.sd?e:c,this.sd),null===this.hf&&(this.sd?f.rm=a.C.S.copy():f.nm=a.C.S.copy(),f.zb()),a.Fe&&(f.Ia=!0),this.Qe=this.name,a.ma("LinkRelinked",
f,this.sd?this.tg:this.rg));Fi(this.Sb,this.EA)}this.stopTool()};sh.prototype.reconnectLink=function(a,b,c,d){if(null===this.g)return!1;c=null!==c&&null!==c.cd?c.cd:"";d?(a.R=b,a.yg=c):(a.M=b,a.Gf=c);return!0};function $h(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.Kd,a.Tl,!1),a.g.add(a.Kd)):a.g.remove(a.Kd);null!==d?(a.copyPortProperties(d,e,a.Ld,a.Ul,!0),a.g.add(a.Ld)):a.g.remove(a.Ld)}
function Gi(){0<arguments.length&&Aa(Gi);kg.call(this);this.name="LinkReshaping";var a=new X;a.jb="Rectangle";a.ka=Q.qo;a.fill="lightblue";a.stroke="dodgerblue";this.zj=a;a=new X;a.jb="Diamond";a.ka=Q.qo;a.fill="lightblue";a.stroke="dodgerblue";this.rA=a;this.NA=3;this.Sv=this.Cb=null;this.FA=new z;this.Yw=null}yb(Gi,kg);vb("LinkReshapingTool",Gi);var Hi;Gi.None=Hi=I(Gi,"None",0);var Ii;Gi.Horizontal=Ii=I(Gi,"Horizontal",1);var Ji;Gi.Vertical=Ji=I(Gi,"Vertical",2);var Ki;Gi.All=Ki=I(Gi,"All",3);
Gi.prototype.getReshapingBehavior=Gi.prototype.kC=function(a){return a&&a.OA?a.OA:Hi};Gi.prototype.setReshapingBehavior=Gi.prototype.rs=function(a,b){ra(a,U,Gi,"setReshapingBehavior:obj");va(b,Gi,Gi,"setReshapingBehavior:behavior");a.OA=b};
Gi.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){if(a.Ia&&!this.g.Ta){var b=a.path;if(null!==b&&a.canReshape()&&a.Q.w()&&a.qa()&&b.Q.w()&&b.tk()){var c=a.An(this.name);if(null===c||c.hE!==a.Z||c.pE!==a.ks)c=this.makeAdornment(b),null!==c&&(c.hE=a.Z,c.pE=a.ks,a.Uj(this.name,c));if(null!==c){c.location=a.position;return}}}a.xk(this.name)}};
Gi.prototype.makeAdornment=function(a){var b=a.J,c=b.Z,d=b.Ib,e=null;if(null!==b.points&&1<c){e=new Vg;e.type=si;var c=b.Br,f=b.gv,g=d?1:0;if(b.ks&&b.ne!==Li)for(var h=c+g;h<f-g;h++){var k=this.makeResegmentHandle(a,h);null!==k&&(k.ff=h,k.wv=.5,e.add(k))}for(h=c+1;h<f;h++)if(k=this.makeHandle(a,h),null!==k){k.ff=h;if(h!==c)if(h===c+1&&d){var g=b.j(c),l=b.j(c+1);Q.q(g.x,l.x)&&Q.q(g.y,l.y)&&(l=b.j(c-1));Q.q(g.x,l.x)?(this.rs(k,Ji),k.cursor="n-resize"):Q.q(g.y,l.y)&&(this.rs(k,Ii),k.cursor="w-resize")}else h===
f-1&&d?(g=b.j(f-1),l=b.j(f),Q.q(g.x,l.x)&&Q.q(g.y,l.y)&&(g=b.j(f+1)),Q.q(g.x,l.x)?(this.rs(k,Ji),k.cursor="n-resize"):Q.q(g.y,l.y)&&(this.rs(k,Ii),k.cursor="w-resize")):h!==f&&(this.rs(k,Ki),k.cursor="move");e.add(k)}e.kc=this.name;e.Xb=a}return e};Gi.prototype.makeHandle=function(){var a=this.Hr;return null===a?null:a.copy()};G(Gi,{Hr:"handleArchetype"},function(){return this.zj},function(a){null!==a&&ra(a,U,Gi,"handleArchetype");this.zj=a});
Gi.prototype.makeResegmentHandle=function(){var a=this.bG;return null===a?null:a.copy()};G(Gi,{bG:"midHandleArchetype"},function(){return this.rA},function(a){null!==a&&ra(a,U,Gi,"midHandleArchetype");this.rA=a});H(Gi,{handle:"handle"},function(){return this.Cb});H(Gi,{ir:"adornedLink"},function(){return this.Sv});Gi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.Au&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name):!1};
Gi.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Cb=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Cb)){var b=this.Cb.J.Yg;if(b instanceof W){this.Sv=b;a.Yd=!0;this.Ab(this.name);if(b.ks&&.5===this.Cb.wv){var c=b.points.copy(),d=this.Cb.Ra(Dd);c.qd(this.Cb.ff+1,d);b.Ib&&c.qd(this.Cb.ff+1,d);b.points=c;b.rd();this.Cb=this.findToolHandleAt(a.Yb.S,this.name)}this.FA=b.j(this.Cb.ff);this.Yw=b.points.copy();this.ca=!0}}};
Gi.prototype.doDeactivate=function(){this.ej();this.Sv=this.Cb=null;var a=this.g;null!==a&&(a.Yd=!1);this.ca=!1};Gi.prototype.doCancel=function(){var a=this.ir;null!==a&&(a.points=this.Yw);this.stopTool()};Gi.prototype.doMouseMove=function(){var a=this.g;this.ca&&null!==a&&(a=this.computeReshape(a.C.S),this.reshape(a))};
Gi.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){var b=this.computeReshape(a.C.S);this.reshape(b);b=this.ir;if(null!==b&&b.ks){var c=this.handle.ff,d=b.j(c-1),e=b.j(c),f=b.j(c+1);if(b.Ib){if(c>b.Br+1&&c<b.gv-1){var g=b.j(c-2);if(Math.abs(d.x-e.x)<this.ug&&Math.abs(d.y-e.y)<this.ug&&(Mi(this,g,d,e,f,!0)||Mi(this,g,d,e,f,!1))){var h=b.points.copy();Mi(this,g,d,e,f,!0)?(h.Rf(c-2,new z(g.x,(f.y+g.y)/2)),h.Rf(c+1,new z(f.x,(f.y+g.y)/2))):(h.Rf(c-2,new z((f.x+g.x)/2,g.y)),h.Rf(c+1,new z((f.x+
g.x)/2,f.y)));h.Dc(c);h.Dc(c-1);b.points=h;b.rd()}else g=b.j(c+2),Math.abs(e.x-f.x)<this.ug&&Math.abs(e.y-f.y)<this.ug&&(Mi(this,d,e,f,g,!0)||Mi(this,d,e,f,g,!1))&&(h=b.points.copy(),Mi(this,d,e,f,g,!0)?(h.Rf(c-1,new z(d.x,(d.y+g.y)/2)),h.Rf(c+2,new z(g.x,(d.y+g.y)/2))):(h.Rf(c-1,new z((d.x+g.x)/2,d.y)),h.Rf(c+2,new z((d.x+g.x)/2,g.y))),h.Dc(c+1),h.Dc(c),b.points=h,b.rd())}}else g=Va(),Q.Ml(d.x,d.y,f.x,f.y,e.x,e.y,g)&&g.Xi(e)<this.ug*this.ug&&(h=b.points.copy(),h.Dc(c),b.points=h,b.rd()),A(g)}a.Rb();
this.Qe=this.name;a.ma("LinkReshaped",this.ir)}this.stopTool()};function Mi(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.ug&&Math.abs(c.y-d.y)<a.ug&&Math.abs(d.y-e.y)<a.ug:Math.abs(b.x-c.x)<a.ug&&Math.abs(c.x-d.x)<a.ug&&Math.abs(d.x-e.x)<a.ug}G(Gi,{ug:"resegmentingDistance"},function(){return this.NA},function(a){w(a,"number",Gi,"resegmentingDistance");this.NA=a});
Gi.prototype.reshape=function(a){var b=this.ir;b.Ak();var c=this.handle.ff,d=this.kC(this.handle);if(b.Ib)if(c===b.Br+1)c=b.Br+1,d===Ji?(b.L(c,b.j(c-1).x,a.y),b.L(c+1,b.j(c+2).x,a.y)):d===Ii&&(b.L(c,a.x,b.j(c-1).y),b.L(c+1,a.x,b.j(c+2).y));else if(c===b.gv-1)c=b.gv-1,d===Ji?(b.L(c-1,b.j(c-2).x,a.y),b.L(c,b.j(c+1).x,a.y)):d===Ii&&(b.L(c-1,a.x,b.j(c-2).y),b.L(c,a.x,b.j(c+1).y));else{var d=c,e=b.j(d),f=b.j(d-1),g=b.j(d+1);Q.q(f.x,e.x)&&Q.q(e.y,g.y)?(Q.q(f.x,b.j(d-2).x)&&!Q.q(f.y,b.j(d-2).y)?(b.n(d,a.x,
f.y),c++,d++):b.L(d-1,a.x,f.y),Q.q(g.y,b.j(d+2).y)&&!Q.q(g.x,b.j(d+2).x)?b.n(d+1,g.x,a.y):b.L(d+1,g.x,a.y)):Q.q(f.y,e.y)&&Q.q(e.x,g.x)?(Q.q(f.y,b.j(d-2).y)&&!Q.q(f.x,b.j(d-2).x)?(b.n(d,f.x,a.y),c++,d++):b.L(d-1,f.x,a.y),Q.q(g.x,b.j(d+2).x)&&!Q.q(g.y,b.j(d+2).y)?b.n(d+1,a.x,g.y):b.L(d+1,a.x,g.y)):Q.q(f.x,e.x)&&Q.q(e.x,g.x)?(Q.q(f.x,b.j(d-2).x)&&!Q.q(f.y,b.j(d-2).y)?(b.n(d,a.x,f.y),c++,d++):b.L(d-1,a.x,f.y),Q.q(g.x,b.j(d+2).x)&&!Q.q(g.y,b.j(d+2).y)?b.n(d+1,a.x,g.y):b.L(d+1,a.x,g.y)):Q.q(f.y,e.y)&&Q.q(e.y,
g.y)&&(Q.q(f.y,b.j(d-2).y)&&!Q.q(f.x,b.j(d-2).x)?(b.n(d,f.x,a.y),c++,d++):b.L(d-1,f.x,a.y),Q.q(g.y,b.j(d+2).y)&&!Q.q(g.x,b.j(d+2).x)?b.n(d+1,g.x,a.y):b.L(d+1,g.x,a.y));b.L(c,a.x,a.y)}else b.L(c,a.x,a.y),1===c&&b.computeSpot(!0).Gd()&&(e=b.M,f=b.Jc,null===e||e.qa()||(e=e.findVisibleNode(),e!==b.M&&(f=e.fk(""))),d=f.Ra(Dd,Va()),e=b.getLinkPointFromPoint(e,f,d,a,!0,Va()),b.L(0,e.x,e.y),A(d),A(e)),c===b.Z-2&&b.computeSpot(!1).Gd()&&(c=b.R,e=b.yd,null===c||c.qa()||(c=c.findVisibleNode(),c!==b.R&&(e=c.fk(""))),
d=e.Ra(Dd,Va()),e=b.getLinkPointFromPoint(c,e,d,a,!1,Va()),b.L(b.Z-1,e.x,e.y),A(d),A(e));b.Mh()};Gi.prototype.computeReshape=function(a){var b=this.ir,c=this.handle.ff;switch(this.kC(this.handle)){case Ki:return a;case Ji:return b=b.j(c),new z(b.x,a.y);case Ii:return b=b.j(c),new z(a.x,b.y);default:case Hi:return b.j(c)}};H(Gi,{HI:"originalPoint"},function(){return this.FA});H(Gi,{II:"originalPoints"},function(){return this.Yw});
function Ni(){0<arguments.length&&Aa(Ni);kg.call(this);this.name="Resizing";this.yi=(new Za(1,1)).freeze();this.wi=(new Za(9999,9999)).freeze();this.di=(new Za(NaN,NaN)).freeze();this.lp=!1;this.lb=null;var a=new X;a.Ti=Dd;a.jb="Rectangle";a.ka=Q.qo;a.fill="lightblue";a.stroke="dodgerblue";a.Na=1;a.cursor="pointer";this.zj=a;this.Cb=null;this.Tt=new Za;this.Xw=new z;this.xw=new Za(0,0);this.ww=new Za(Infinity,Infinity);this.vw=new Za(1,1);this.yA=!0}yb(Ni,kg);vb("ResizingTool",Ni);
Ni.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.Ia&&!this.g.Ta){var b=a.bD;if(null!==b&&a.canResize()&&a.Q.w()&&a.qa()&&b.Q.w()&&b.tk()){var c=a.An(this.name);null===c&&(c=this.makeAdornment(b));if(null!==c){var d=b.hk();c.angle=d;var e=b.Ra(c.qe,Va()),f=b.Sh();c.location=e;A(e);e=c.placeholder;if(null!==e){var b=b.sa,g=Ya();g.k(b.width*f,b.height*f);e.ka=g;$a(g)}Oi(this,c,d);a.Uj(this.name,c);return}}}a.xk(this.name)}};
Ni.prototype.makeAdornment=function(a){var b=null,b=a.J.aD;if(null===b){b=new Vg;b.type=Pi;b.qe=Dd;var c=new Qi;c.Jf=!0;b.add(c);b.add(this.makeHandle(a,ud));b.add(this.makeHandle(a,Bd));b.add(this.makeHandle(a,Hd));b.add(this.makeHandle(a,Fd));b.add(this.makeHandle(a,fe));b.add(this.makeHandle(a,he));b.add(this.makeHandle(a,ie));b.add(this.makeHandle(a,ge))}else if(Yg(b),b=b.copy(),null===b)return null;b.kc=this.name;b.Xb=a;return b};
Ni.prototype.makeHandle=function(a,b){var c=this.Hr;if(null===c)return null;c=c.copy();c.alignment=b;return c};
function Oi(a,b,c){if(null!==b)if(!b.alignment.lc()&&""!==b.cursor)a:{a=b.alignment;a.Gd()&&(a=Dd);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof L)for(b=b.elements;b.next();)Oi(a,
b.value,c)}G(Ni,{Hr:"handleArchetype"},function(){return this.zj},function(a){null!==a&&ra(a,U,Ni,"handleArchetype");this.zj=a});H(Ni,{handle:"handle"},function(){return this.Cb});G(Ni,{Xb:"adornedObject"},function(){return this.lb},function(a){null!==a&&ra(a,U,Ni,"adornedObject");this.lb=a});Ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.kr&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name)?!0:!1:!1};
Ni.prototype.doActivate=function(){var a=this.g;null!==a&&(this.Cb=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Cb&&(this.lb=this.Cb.J.Xb,this.Xw.set(this.lb.J.location),this.Tt.set(this.lb.ka),this.vw=this.computeCellSize(),this.xw=this.computeMinSize(),this.ww=this.computeMaxSize(),a.Yd=!0,this.yA=a.qb.isEnabled,a.qb.isEnabled=!1,this.Ab(this.name),this.ca=!0))};Ni.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.ej(),this.lb=this.Cb=null,this.ca=a.Yd=!1,a.qb.isEnabled=this.yA)};
Ni.prototype.doCancel=function(){this.lb.ka=this.Tt;this.lb.J.location=this.Xw;this.stopTool()};Ni.prototype.doMouseMove=function(){var a=this.g;if(this.ca&&null!==a){var b=this.xw,c=this.ww,d=this.vw,e=this.lb.jC(a.C.S,Va()),f=Ri;this.lb instanceof X&&(f=Si(this.lb));b=this.computeResize(e,this.Cb.alignment,b,c,d,!(f===Ti||f===Ui||a.C.shift));this.resize(b);a.te();A(e)}};
Ni.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){var b=this.xw,c=this.ww,d=this.vw,e=this.lb.jC(a.C.S,Va()),f=Ri;this.lb instanceof X&&(f=Si(this.lb));b=this.computeResize(e,this.Cb.alignment,b,c,d,!(f===Ti||f===Ui||a.C.shift));this.resize(b);A(e);a.Rb();this.Qe=this.name;a.ma("PartResized",this.lb,this.Tt)}this.stopTool()};
Ni.prototype.resize=function(a){if(null!==this.g){var b=this.Xb,c=b.J,d=b.hk(),e=b.Sh(),f=Math.PI*d/180,g=Math.cos(f),f=Math.sin(f),h=0<d&&180>d?1:0,k=90<d&&270>d?1:0,d=180<d&&360>d?1:0,l=b.sa.width,m=b.sa.height;b.ka=a.size;var n=c.position.copy();c.Ge();l=b.sa.width-l;m=b.sa.height-m;if(0!==l||0!==m)0!==l&&(n.x+=e*((a.x+l*k)*g-(a.y+m*h)*f)),0!==m&&(n.y+=e*((a.x+l*d)*f+(a.y+m*k)*g)),c.move(n)}};
Ni.prototype.computeResize=function(a,b,c,d,e,f){b.Gd()&&(b=Dd);var g=this.Xb.sa,h=g.x,k=g.y,l=g.x+g.width,m=g.y+g.height,n=1;if(!f){var n=g.width,p=g.height;0>=n&&(n=1);0>=p&&(p=1);n=p/n}p=Va();Q.xr(a.x,a.y,h,k,e.width,e.height,p);a=g.copy();0>=b.x?0>=b.y?(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=Math.max(l-a.x,c.width),a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-c.height),a.height=Math.max(m-a.y,c.height),f||(b=a.height/a.width,n<b?(a.height=n*a.width,a.y=m-a.height):
(a.width=a.height/n,a.x=l-a.width))):1<=b.y?(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=Math.max(l-a.x,c.width),a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(b=a.height/a.width,n<b?a.height=n*a.width:(a.width=a.height/n,a.x=l-a.width))):(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=l-a.x,f||(a.height=n*a.width,a.y=k+.5*(m-k-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(p.x-h,d.width),c.width),a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-
c.height),a.height=Math.max(m-a.y,c.height),f||(b=a.height/a.width,n<b?(a.height=n*a.width,a.y=m-a.height):a.width=a.height/n)):1<=b.y?(a.width=Math.max(Math.min(p.x-h,d.width),c.width),a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(b=a.height/a.width,n<b?a.height=n*a.width:a.width=a.height/n)):(a.width=Math.max(Math.min(p.x-h,d.width),c.width),f||(a.height=n*a.width,a.y=k+.5*(m-k-a.height))):0>=b.y?(a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-c.height),a.height=m-a.y,f||(a.width=a.height/
n,a.x=h+.5*(l-h-a.width))):1<=b.y&&(a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(a.width=a.height/n,a.x=h+.5*(l-h-a.width)));A(p);return a};Ni.prototype.computeMinSize=function(){var a=this.Xb.Lf.copy(),b=this.Lf;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Ni.prototype.computeMaxSize=function(){var a=this.Xb.se.copy(),b=this.se;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Ni.prototype.computeCellSize=function(){var a=new Za(NaN,NaN),b=this.Xb.J;if(null!==b){var c=b.wG;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.tn;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.g;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.Xa.Zc,null!==c&&c.cv&&(c=c.nC,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.Gr,null!==b&&b.visible&&this.cv&&(c=b.Xu,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
G(Ni,{Lf:"minSize"},function(){return this.yi},function(a){ra(a,Za,Ni,"minSize");if(!this.yi.A(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.yi.k(b,a)}});G(Ni,{se:"maxSize"},function(){return this.wi},function(a){ra(a,Za,Ni,"maxSize");if(!this.wi.A(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.wi.k(b,a)}});G(Ni,{tn:"cellSize"},function(){return this.di},function(a){ra(a,Za,Ni,"cellSize");this.di.A(a)||this.di.assign(a)});
G(Ni,{cv:"isGridSnapEnabled"},function(){return this.lp},function(a){w(a,"boolean",Ni,"isGridSnapEnabled");this.lp=a});H(Ni,{FI:"originalDesiredSize"},function(){return this.Tt});H(Ni,{GI:"originalLocation"},function(){return this.Xw});function Vi(){0<arguments.length&&Aa(Vi);kg.call(this);this.name="Rotating";this.VA=45;this.UA=2;this.lb=null;var a=new X;a.jb="Ellipse";a.ka=Q.Lv;a.fill="lightblue";a.stroke="dodgerblue";a.Na=1;a.cursor="pointer";this.zj=a;this.Cb=null;this.St=0;this.PA=new z}
yb(Vi,kg);vb("RotatingTool",Vi);
Vi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.Ia&&!this.g.Ta){var b=a.eD;if(null!==b&&a.canRotate()&&a.Q.w()&&a.qa()&&b.Q.w()&&b.tk()){var c=a.An(this.name);null===c&&(c=this.makeAdornment(b));if(null!==c){c.angle=b.hk();var d=null,e=null;b===a||b===a.Jb?(d=a.Jb,e=a.qe):(d=b,e=Dd);for(var f=d.sa,e=Wa(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.Ka(e),d=d.I;var d=e.y,f=Math.max(e.x-b.sa.width,0),g=Va();c.location=b.Ra(new R(1,0,50+f,d),
g);A(g);A(e);a.Uj(this.name,c);return}}}a.xk(this.name)}};Vi.prototype.makeAdornment=function(a){var b=null,b=a.J.zG;if(null===b){b=new Vg;b.type=Wi;b.qe=Dd;var c=this.Hr;null!==c&&b.add(c.copy())}else if(Yg(b),b=b.copy(),null===b)return null;b.kc=this.name;b.Xb=a;return b};G(Vi,{Hr:"handleArchetype"},function(){return this.zj},function(a){null!==a&&ra(a,U,Vi,"handleArchetype");this.zj=a});H(Vi,{handle:"handle"},function(){return this.Cb});
G(Vi,{Xb:"adornedObject"},function(){return this.lb},function(a){null!==a&&ra(a,U,Vi,"adornedObject");this.lb=a});Vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.Bu&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name)?!0:!1:!1};
Vi.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Cb=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Cb)){this.lb=this.Cb.J.Xb;var b=this.lb.J,c=b.Jb;this.PA=this.lb===b||this.lb===c?c.Ra(b.qe):this.lb.Ra(Dd);this.St=this.lb.angle;a.Yd=!0;a.Ox=!0;this.Ab(this.name);this.ca=!0}};Vi.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.ej(),this.lb=this.Cb=null,this.ca=a.Yd=!1)};Vi.prototype.doCancel=function(){var a=this.g;null!==a&&(a.Ox=!1);this.rotate(this.St);this.stopTool()};
Vi.prototype.doMouseMove=function(){var a=this.g;this.ca&&null!==a&&(a=this.computeRotate(a.C.S),this.rotate(a))};Vi.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){a.Ox=!1;var b=this.computeRotate(a.C.S);this.rotate(b);a.Rb();this.Qe=this.name;a.ma("PartRotated",this.lb,this.St)}this.stopTool()};Vi.prototype.rotate=function(a){null!==this.lb&&(this.lb.angle=a)};
Vi.prototype.computeRotate=function(a){a=this.PA.Qh(a);var b=this.lb.I;null!==b&&(a-=b.hk(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.OG),180),c=Math.min(Math.abs(this.NG),b/2);!this.g.C.shift&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};G(Vi,{OG:"snapAngleMultiple"},function(){return this.VA},function(a){w(a,"number",Vi,"snapAngleMultiple");this.VA=a});
G(Vi,{NG:"snapAngleEpsilon"},function(){return this.UA},function(a){w(a,"number",Vi,"snapAngleEpsilon");this.UA=a});H(Vi,{EI:"originalAngle"},function(){return this.St});function Xi(){0<arguments.length&&Aa(Xi);kg.call(this);this.name="ClickSelecting"}yb(Xi,kg);vb("ClickSelectingTool",Xi);Xi.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0};Xi.prototype.doMouseUp=function(){this.ca&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};
function Yi(){0<arguments.length&&Aa(Yi);kg.call(this);this.name="Action";this.Zl=null}yb(Yi,kg);vb("ActionTool",Yi);Yi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a)return!1;var b=a.C,c=a.Dd(b.S,function(a){for(;null!==a.I&&!a.ey;)a=a.I;return a},function(a){return a.ey});return null!==c?(this.Zl=c,a.jm=a.Dd(b.S,null,null),!0):!1};
Yi.prototype.doMouseDown=function(){if(this.ca){var a=this.g.C,b=this.Zl;null!==b&&(a.Jd=b,null!==b.vB&&b.vB(a,b))}else this.canStart()&&this.doActivate()};Yi.prototype.doMouseMove=function(){if(this.ca){var a=this.g.C,b=this.Zl;null!==b&&(a.Jd=b,null!==b.wB&&b.wB(a,b))}};Yi.prototype.doMouseUp=function(){if(this.ca){var a=this.g,b=a.C,c=this.Zl;if(null===c)return;b.Jd=c;null!==c.xB&&c.xB(b,c);this.isBeyondDragSize()||eh(c,b,a)}this.stopTool()};
Yi.prototype.doCancel=function(){var a=this.g;if(null!==a){var a=a.C,b=this.Zl;if(null===b)return;a.Jd=b;null!==b.uB&&b.uB(a,b)}this.stopTool()};Yi.prototype.doStop=function(){this.Zl=null};function ic(){0<arguments.length&&Aa(ic);kg.call(this);this.name="ClickCreating";this.sj=null;this.eA=!0;this.Uz=new z(0,0)}yb(ic,kg);vb("ClickCreatingTool",ic);
ic.prototype.canStart=function(){if(!this.isEnabled||null===this.Dx)return!1;var a=this.g;if(null===a||a.Ta||a.Le||!a.on||!a.C.left||this.isBeyondDragSize())return!1;if(this.FF){if(1===a.C.le&&(this.Uz=a.C.xe.copy()),2!==a.C.le||this.isBeyondDragSize(this.Uz))return!1}else if(1!==a.C.le)return!1;return a.Ea!==this&&null!==a.zr(a.C.S,!0)?!1:!0};ic.prototype.doMouseUp=function(){var a=this.g;this.ca&&null!==a&&this.insertPart(a.C.S);this.stopTool()};
ic.prototype.insertPart=function(a){var b=this.g;if(null===b)return null;var c=this.Dx;if(null===c)return null;this.Ab(this.name);var d=null;c instanceof O?c.$c()&&(Yg(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.U.copyNodeData(c),Ea(c)&&(b.U.rl(c),d=b.$g(c)));null!==d&&(d.location=a,b.Fe&&b.select(d));b.Rb();this.Qe=this.name;b.ma("PartCreated",d);this.ej();return d};G(ic,{Dx:"archetypeNodeData"},function(){return this.sj},function(a){null!==a&&ra(a,Object,ic,"archetypeNodeData");this.sj=a});
G(ic,{FF:"isDoubleClick"},function(){return this.eA},function(a){w(a,"boolean",ic,"isDoubleClick");this.eA=a});function Zi(a,b,c){this.text=a;this.LB=b;this.visible=c}function $i(){0<arguments.length&&Aa($i);kg.call(this);this.name="ContextMenu";this.km=this.Cz=null;this.vA=new z;this.lw=this.sm=null;aj(this)}yb($i,kg);vb("ContextMenuTool",$i);var bj=!1,cj=null,dj=null;
function aj(a){a.sm=new Vg;a.lB=function(){a.stopTool()};if(!1===bj){var b=oa("div"),c=oa("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=oa("style");
window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("selectstart",
function(a){a.preventDefault();return!1},!1);c.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));dj=b;cj=c;bj=!0}}$i.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||this.isBeyondDragSize()||!a.C.right?!1:null!==this.sm&&a.C.sk||null!==this.findObjectWithContextMenu()?!0:!1};$i.prototype.doStart=function(){var a=this.g;null!==a&&this.vA.set(a.Yb.S)};
$i.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.km=null};$i.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return null;var c=b.C,d=null;a instanceof M||(d=a instanceof U?a:b.Dd(c.S,null,function(a){return!a.layer.bc}));if(null!==d){for(a=d;null!==a;){c=a.contextMenu;if(null!==c)return a;a=a.I}if(null!==this.sm&&b.C.sk)return d.J}else if(c=b.contextMenu,null!==c)return b;return null};$i.prototype.doActivate=function(){};
$i.prototype.doMouseUp=function(){var a=this.g;null!==a&&(this.ca?null!==this.Ye&&(a=a.Dd(a.C.S,null,null),null!==a&&a.pk(this.Ye)&&this.standardMouseClick(null,null),this.stopTool()):this.canStart()&&ch(this,!0))};
function ch(a,b,c){void 0===c&&(c=null);a.ca=!0;b&&a.standardMouseSelect();a.standardMouseClick();a.km=null;null===c&&(c=a.findObjectWithContextMenu());null!==c?(b=c.contextMenu,null!==b?(a.km=c instanceof U?c:null,a.showContextMenu(b,a.km)):a.showDefaultContextMenu()):a.showDefaultContextMenu()}$i.prototype.doMouseMove=function(){this.ca&&this.standardMouseOver()};
$i.prototype.showContextMenu=function(a,b){ra(a,Vg,$i,"showContextMenu:contextmenu");null!==b&&ra(b,U,$i,"showContextMenu:obj");var c=this.g;if(null!==c){a!==this.Ye&&this.hideContextMenu();a.Ne="Tool";a.yk=!1;a.scale=1/c.scale;a.kc=this.name;c.add(a);if(null!==b){var c=null,d=b.Cn();null!==d&&(c=d.data);a.Xb=b;a.data=c}else a.data=c.U;a.Ge();this.positionContextMenu(a,b);this.Ye=a}};
$i.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.C.S.copy(),d=a.oa,e=b.Va;b.C.sk&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};$i.prototype.hideContextMenu=function(){var a=this.g;null!==a&&null!==this.Ye&&(this.Ye.data=null,this.Ye.Xb=null,a.remove(this.Ye),this.Ye=null,this.standardMouseOver())};
$i.prototype.initializeDefaultButtons=function(){if(null===this.g)return null;var a=new N(Zi);a.add(new Zi("Copy",function(a){a.ib.copySelection()},function(a){return a.ib.canCopySelection()}));a.add(new Zi("Cut",function(a){a.ib.cutSelection()},function(a){return a.ib.canCutSelection()}));a.add(new Zi("Delete",function(a){a.ib.deleteSelection()},function(a){return a.ib.canDeleteSelection()}));a.add(new Zi("Paste",function(a){a.ib.pasteSelection(a.C.S)},function(a){return a.ib.canPasteSelection()}));
a.add(new Zi("Select All",function(a){a.ib.selectAll()},function(a){return a.ib.canSelectAll()}));a.add(new Zi("Undo",function(a){a.ib.undo()},function(a){return a.ib.canUndo()}));a.add(new Zi("Redo",function(a){a.ib.redo()},function(a){return a.ib.canRedo()}));a.add(new Zi("Zoom To Fit",function(a){a.ib.zoomToFit()},function(a){return a.ib.canZoomToFit()}));a.add(new Zi("Reset Zoom",function(a){a.ib.resetZoom()},function(a){return a.ib.canResetZoom()}));a.add(new Zi("Group Selection",function(a){a.ib.groupSelection()},
function(a){return a.ib.canGroupSelection()}));a.add(new Zi("Ungroup Selection",function(a){a.ib.ungroupSelection()},function(a){return a.ib.canUngroupSelection()}));a.add(new Zi("Edit Text",function(a){a.ib.editTextBlock()},function(a){return a.ib.canEditTextBlock()}));return a};
$i.prototype.showDefaultContextMenu=function(){var a=this.g;if(null!==a){null===this.lw&&(this.lw=this.initializeDefaultButtons());this.sm!==this.Ye&&this.hideContextMenu();dj.innerHTML="";cj.addEventListener("click",this.lB,!1);var b=this,c=oa("ul");c.className="defaultCXul";dj.appendChild(c);c.innerHTML="";for(var d=this.lw.i;d.next();){var e=d.value,f=e.text,g=e.visible;if("function"===typeof e.LB&&("function"!==typeof g||g(a))){g=oa("li");g.className="defaultCXli";var h=oa("a");h.className="defaultCXa";
h.href="#";h.YD=e.LB;h.addEventListener("click",function(c){this.YD(a);b.stopTool();c.preventDefault();return!1},!1);h.textContent=f;g.appendChild(h);c.appendChild(g)}}dj.style.display="block";cj.style.display="block";this.Ye=this.sm}};$i.prototype.hideDefaultContextMenu=function(){null!==this.Ye&&this.Ye===this.sm&&(dj.style.display="none",cj.style.display="none",cj.removeEventListener("click",this.lB,!1),this.Ye=null)};
G($i,{Ye:"currentContextMenu"},function(){return this.Cz},function(a){null!==a&&ra(a,Vg,$i,"currentContextMenu");this.Cz=a});G($i,{HH:"currentObject"},function(){return this.km},function(a){null!==a&&ra(a,U,$i,"currentObject");this.km=a});H($i,{zI:"mouseDownPoint"},function(){return this.vA});
function ej(){0<arguments.length&&Aa(ej);kg.call(this);this.name="DragSelecting";this.tm=175;this.jA=!1;var a=new O;a.Ne="Tool";a.yk=!1;var b=new X;b.name="SHAPE";b.jb="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.Gk=a}yb(ej,kg);vb("DragSelectingTool",ej);ej.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Fe)return!1;var b=a.C;return!b.left||a.Ea!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Yb.timestamp<this.TB||null!==a.zr(b.S,!0))?!1:!0};
ej.prototype.doActivate=function(){var a=this.g;null!==a&&(this.ca=!0,a.Yd=!0,a.Ma=!0,a.add(this.hg),this.doMouseMove())};ej.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.remove(this.hg),a.Ma=!1,this.ca=a.Yd=!1)};ej.prototype.doMouseMove=function(){if(null!==this.g&&this.ca&&null!==this.hg){var a=this.computeBoxBounds(),b=this.hg.Cd("SHAPE");null===b&&(b=this.hg.Ze());b.ka=a.size;this.hg.position=a.position}};
ej.prototype.doMouseUp=function(){if(this.ca){var a=this.g;a.remove(this.hg);try{a.Fb="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Fb=""}}this.stopTool()};ej.prototype.computeBoxBounds=function(){var a=this.g;return null===a?new D(0,0,0,0):new D(a.Yb.S,a.C.S)};
ej.prototype.selectInRect=function(a){var b=this.g;if(null!==b){var c=b.C;b.ma("ChangingSelection");a=b.Zi(a,null,function(a){return a instanceof O?a.canSelect():!1},this.KF);if(fa?c.Yr:c.control)if(c.shift)for(a=a.i;a.next();)c=a.value,c.Ia&&(c.Ia=!1);else for(a=a.i;a.next();)c=a.value,c.Ia=!c.Ia;else{if(!c.shift){for(var c=new N(O),d=b.selection.i;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.i;c.next();)c.value.Ia=!1}for(a=a.i;a.next();)c=a.value,c.Ia||(c.Ia=!0)}b.ma("ChangedSelection")}};
G(ej,{TB:"delay"},function(){return this.tm},function(a){w(a,"number",ej,"delay");this.tm=a});G(ej,{KF:"isPartialInclusion"},function(){return this.jA},function(a){w(a,"boolean",ej,"isPartialInclusion");this.jA=a});G(ej,{hg:"box"},function(){return this.Gk},function(a){null!==a&&ra(a,O,ej,"box");this.Gk=a});
function fj(){0<arguments.length&&Aa(fj);kg.call(this);this.name="Panning";this.Zw=new z;this.ci=!1;var a=this;this.$A=function(){window.document.removeEventListener("scroll",a.$A,!1);a.stopTool()}}yb(fj,kg);vb("PanningTool",fj);fj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||!a.je&&!a.ke||!a.C.left||a.Ea!==this&&!this.isBeyondDragSize()?!1:!0};
fj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.ci?(a.C.bubbles=!0,window.document.addEventListener("scroll",this.$A,!1)):(a.Fb="move",a.Yd=!0,this.Zw=a.position.copy()),this.ca=!0)};fj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.Fb="",this.ca=a.Yd=!1)};fj.prototype.doCancel=function(){var a=this.g;null!==a&&(a.position=this.Zw,a.Yd=!1);this.stopTool()};fj.prototype.doMouseMove=function(){this.move()};fj.prototype.doMouseUp=function(){this.move();this.stopTool()};
fj.prototype.move=function(){var a=this.g;if(this.ca&&a)if(this.ci)a.C.bubbles=!0;else{var b=a.position,c=a.Yb.S,d=a.C.S,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.je||(e=b.x);a.ke||(c=b.y);a.position=new z(e,c)}};G(fj,{bubbles:"bubbles"},function(){return this.ci},function(a){w(a,"boolean",fj,"bubbles");this.ci=a});H(fj,{JI:"originalPosition"},function(){return this.Zw});
function gj(){0<arguments.length&&Aa(gj);kg.call(this);this.name="TextEditing";this.dB=null;this.Ew=0;this.Fz=this.sx=null;this.ZA=hj;this.Rj=null;this.Ga=ij;this.Nj=null;this.sA=1;this.SA=!0;var a=oa("textarea");a.nz=!0;this.Kz=a;a.addEventListener("input",function(){var a=this.textEditingTool,c=a.dB;c.text=this.value;jj(c,a.Ew,Infinity);this.rows=c.RF},!1);a.addEventListener("keydown",function(a){var c=a.which,d=this.textEditingTool;if(null!==d)if(13===c)d.acceptText(kj);else{if(9===c)return d.acceptText(lj),
a.preventDefault(),!1;27===c&&(d.doCancel(),null!==d.g&&d.g.focus())}},!1);a.addEventListener("focus",function(){var a=this.textEditingTool;a.Ga===mj?a.Ga=nj:a.Ga===oj?a.Ga=pj:a.Ga===pj&&(a.Ga=nj);"function"===typeof this.select&&a.Ry&&this.select()},!1);a.addEventListener("blur",function(){"function"===typeof this.focus&&this.focus();var a=this.textEditingTool;"function"===typeof this.select&&a.Ry&&this.select()},!1)}vb("TextEditingTool",gj);yb(gj,kg);var qj;gj.LostFocus=qj=I(gj,"LostFocus",0);var rj;
gj.MouseDown=rj=I(gj,"MouseDown",1);var lj;gj.Tab=lj=I(gj,"Tab",2);var kj;gj.Enter=kj=I(gj,"Enter",3);gj.SingleClick=I(gj,"SingleClick",0);var hj;gj.SingleClickSelected=hj=I(gj,"SingleClickSelected",1);var ij=I(gj,"StateNone",0),mj=I(gj,"StateActive",1),nj=I(gj,"StateEditing",2),pj=I(gj,"StateEditing2",3),sj=I(gj,"StateValidating",4),oj=I(gj,"StateValidated",5);G(gj,{xg:"textBlock"},function(){return this.sx},function(a){null!==a&&ra(a,Zb,gj,"textBlock");this.sx=a});
G(gj,{Df:"currentTextEditor"},function(){return this.Fz},function(a){this.Fz=a});G(gj,{VE:"defaultTextEditor"},function(){return this.Kz},function(a){ra(a,Element,gj,"defaultTextEditor");this.Kz=a});G(gj,{RG:"starting"},function(){return this.ZA},function(a){va(a,gj,gj,"starting");this.ZA=a});
gj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||!a.C.left||this.isBeyondDragSize())return!1;a=a.Dd(a.C.S,null,function(a){return a instanceof Zb});if(null===a||!a.Px||!a.J.canEdit())return!1;a=a.J;return null===a||this.RG===hj&&!a.Ia?!1:!0};gj.prototype.doStart=function(){this.ca||null===this.xg||this.doActivate()};
gj.prototype.doActivate=function(){if(!this.ca){var a=this.g;if(null!==a){var b=this.xg;null===b&&(b=a.Dd(a.C.S,function(a){return a instanceof Zb?a:null}));if(null!==b){this.xg=b;var c=b.J;if(null!==c){this.ca=!0;this.Ga=mj;var d=this.VE,e=!1;null!==b.wD&&(d=b.wD);null===d||d.nz||(e=!0);this.dB=this.xg.copy();a.EG(c.Q);if(d.nz){var f=b.Ra(Dd),g=a.position,h=a.scale,k=b.Sh()*h;k<this.HC&&(k=this.HC);this.Ew=b.sa.width;var c=this.Ew*k,l=b.sa.height*k,m=(f.x-g.x)*h,f=(f.y-g.y)*h;d.value=b.text;a.dk.style.font=
b.font;d.style.font="inherit";d.style.fontSize=100*k+"%";d.style.lineHeight="normal";d.style.width=c+6+"px";d.style.height=l+2+"px";d.style.left=(m-c/2|0)-1+"px";d.style.top=(f-l/2|0)-1+"px";d.style.textAlign=b.textAlign;d.style.margin="0";d.style.padding="1px";d.style.border="0";d.style.outline="none";d.style["white-space"]="pre-wrap";d.style.overflow="hidden"}a.dk.appendChild(d);d.style.position="absolute";d.style.zIndex=100;d.className="start";d.textEditingTool=this;d.bJ=k;if(e&&"function"===typeof d.onActivate)d.onActivate();
this.Df=d;"function"===typeof d.focus&&d.focus();"function"===typeof d.select&&this.Ry&&d.select()}}}}};gj.prototype.doCancel=function(){null!==this.Nj&&(this.Df.style.border=this.Nj,this.Nj=null);this.stopTool()};gj.prototype.doMouseUp=function(){!this.ca&&this.canStart()&&this.doActivate()};gj.prototype.doMouseDown=function(){this.ca&&this.acceptText(rj)};
gj.prototype.acceptText=function(a){switch(a){case rj:if(this.Ga===oj||this.Ga===pj)"function"===typeof this.Df.focus&&this.Df.focus();else if(this.Ga===mj||this.Ga===nj)this.Ga=sj,tj(this);break;case qj:case kj:case lj:if(kj===a&&!0===this.sx.ly)break;if(this.Ga===mj||this.Ga===nj)this.Ga=sj,tj(this)}};
function tj(a){if(null!==a.xg&&null!==a.Df){var b=a.xg,c=a.xg.text,d=a.Df.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.xg,c,e)){a.Ga=nj;null!==b.Qx&&b.Qx(a,c,e);null===a.Nj&&(a.Nj=a.Df.style.border,a.Df.style.border="3px solid red");"function"===typeof a.Df.focus&&a.Df.focus();return}a.Ab(a.name);a.Ga=oj;c!==e&&(a.xg.text=e);a.Qe=a.name;b=a.g;null!==b&&b.ma("TextEdited",a.xg,c);a.ej();a.stopTool();null!==b&&b.focus()}null!==a.Nj&&(a.Df.style.border=a.Nj,a.Nj=null)}
gj.prototype.doDeactivate=function(){var a=this.g;if(null!==a){this.Ga=ij;this.xg=null;if(null!==this.Df){var b=this.Df;if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.dk.removeChild(b)}this.ca=!1}};gj.prototype.isValidText=function(a,b,c){ra(a,Zb,gj,"isValidText:textblock");var d=this.az;if(null!==d&&!d(a,b,c))return!1;d=a.az;return null===d||d(a,b,c)?!0:!1};
G(gj,{az:"textValidation"},function(){return this.Rj},function(a){null!==a&&w(a,"function",gj,"textValidation");this.Rj=a});G(gj,{HC:"minimumEditorScale"},function(){return this.sA},function(a){null!==a&&w(a,"number",gj,"minimumEditorScale");this.sA=a});G(gj,{Ry:"selectsTextOnActivate"},function(){return this.SA},function(a){null!==a&&w(a,"boolean",gj,"selectsTextOnActivate");this.SA=a});
function Tg(){kg.call(this);this.name="ToolManager";this.eE=new N(kg);this.fE=new N(kg);this.gE=new N(kg);this.Yz=this.Zz=1E3;this.Nz=(new Za(2,2)).va();this.bt=this.jw=null;this.wA=gh;this.Wz=uj}yb(Tg,kg);vb("ToolManager",Tg);var gh;Tg.WheelScroll=gh=I(Tg,"WheelScroll",0);var fh;Tg.WheelZoom=fh=I(Tg,"WheelZoom",1);Tg.WheelNone=I(Tg,"WheelNone",2);var uj;Tg.GestureZoom=uj=I(Tg,"GestureZoom",3);var vj;Tg.GestureCancel=vj=I(Tg,"GestureCancel",4);var wj;Tg.GestureNone=wj=I(Tg,"GestureNone",5);
G(Tg,{$r:"mouseWheelBehavior"},function(){return this.wA},function(a){va(a,Tg,Tg,"mouseWheelBehavior");this.wA=a});G(Tg,{En:"gestureBehavior"},function(){return this.Wz},function(a){va(a,Tg,Tg,"gestureBehavior");this.Wz=a});Tg.prototype.initializeStandardTools=function(){this.qE=new Yi;this.SC=new sh;this.UF=new Gi;this.dD=new Ni;this.BG=new Vi;this.CC=new hc;this.Zc=new $g;this.bF=new ej;this.lG=new fj;this.Ix=new $i;this.$y=new gj;this.EE=new ic;this.FE=new Xi};
Tg.prototype.doMouseDown=function(){var a=this.g;if(null!==a){var b=a.C;b.sk&&this.En===vj&&(b.bubbles=!1);if(b.Pr){if(this.En===wj){b.bubbles=!0;return}if(this.En===vj)return;if(a.Ea.canStartMultiTouch()){a.Ea.standardPinchZoomStart();return}}b=a.V;b.Ex&&0!==b.ce&&Da("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ue.length,c=0;c<b;c++){var d=this.ue.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ea=d;a.Ea===d&&(d.ca||d.doActivate(),d.doMouseDown());
return}}1===a.C.button&&(this.$r===gh?this.$r=fh:this.$r===fh&&(this.$r=gh));this.doActivate();this.standardWaitAfter(this.pC)}};
Tg.prototype.doMouseMove=function(){var a=this.g;if(null!==a){var b=a.C;if(b.Pr){if(this.En===wj){b.bubbles=!0;return}if(this.En===vj)return;if(a.Ea.canStartMultiTouch()){a.Ea.standardPinchZoomMove();return}}if(this.ca)for(var b=this.cf.length,c=0;c<b;c++){var d=this.cf.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ea=d;a.Ea===d&&(d.ca||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.ca?this.pC:this.wF)}};
Tg.prototype.doCurrentObjectChanged=function(a,b){var c=this.$j;null===c||null!==b&&(b===c||b.pk(c))||this.hideToolTip()};Tg.prototype.doWaitAfter=function(){var a=this.g;null!==a&&a.Oa&&(this.doMouseHover(),this.ca||this.doToolTip())};Tg.prototype.doMouseHover=function(){var a=this.g;if(null!==a){var b=a.C;null===b.Jd&&(b.Jd=a.Dd(b.S,null,null));var c=b.Jd;if(null!==c)for(b.rc=!1;null!==c;){a=this.ca?c.uy:c.vy;if(null!==a&&(a(b,c),b.rc))break;c=c.I}else a=this.ca?a.uy:a.vy,null!==a&&a(b)}};
Tg.prototype.doToolTip=function(){var a=this.g;if(null!==a){var b=a.C;null===b.Jd&&(b.Jd=a.Dd(b.S,null,null));b=b.Jd;if(null!==b){if(b!==this.$j&&!b.pk(this.$j)){for(;null!==b;){a=b.cz;if(null!==a){this.showToolTip(a,b);return}b=b.I}this.hideToolTip()}}else a=a.cz,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
Tg.prototype.showToolTip=function(a,b){ra(a,Vg,Tg,"showToolTip:tooltip");null!==b&&ra(b,U,Tg,"showToolTip:obj");var c=this.g;if(null!==c){a!==this.$j&&this.hideToolTip();a.Ne="Tool";a.yk=!1;a.scale=1/c.scale;c.add(a);if(null!==b&&b!==this.bt){var c=null,d=b.Cn();null!==d&&(c=d.data);a.Xb=b;a.data=c}else null===b&&(a.data=c.U);if(null===b||b!==this.bt)a.Ge(),this.positionToolTip(a,b);this.jw=a;this.bt=b}};
Tg.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.C.S.copy(),d=a.oa,e=b.Va;b.C.sk&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};Tg.prototype.hideToolTip=function(){if(null!==this.$j){var a=this.g;null!==a&&(this.$j.data=null,this.$j.Xb=null,a.remove(this.$j),this.bt=this.jw=null)}};H(Tg,{$j:"currentToolTip"},function(){return this.jw});
Tg.prototype.doMouseUp=function(){this.cancelWaitAfter();if(this.ca){var a=this.g;if(null===a)return;for(var b=this.df.length,c=0;c<b;c++){var d=this.df.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ea=d;a.Ea===d&&(d.ca||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};Tg.prototype.doMouseWheel=function(){this.standardMouseWheel()};Tg.prototype.doKeyDown=function(){var a=this.g;null!==a&&a.ib.doKeyDown()};Tg.prototype.doKeyUp=function(){var a=this.g;null!==a&&a.ib.doKeyUp()};
Tg.prototype.doCancel=function(){null!==qh&&qh.doCancel();kg.prototype.doCancel.call(this)};Tg.prototype.findTool=function(a){w(a,"string",Tg,"findTool:name");for(var b=this.ue.length,c=0;c<b;c++){var d=this.ue.Y(c);if(d.name===a)return d}b=this.cf.length;for(c=0;c<b;c++)if(d=this.cf.Y(c),d.name===a)return d;b=this.df.length;for(c=0;c<b;c++)if(d=this.df.Y(c),d.name===a)return d;return null};
Tg.prototype.replaceTool=function(a,b){w(a,"string",Tg,"replaceTool:name");null!==b&&(ra(b,kg,Tg,"replaceTool:newtool"),b.g&&b.g!==this.g&&u("Cannot share tools between Diagrams: "+b.toString()),b.fc(this.g));for(var c=this.ue.length,d=0;d<c;d++){var e=this.ue.Y(d);if(e.name===a)return null!==b?this.ue.Rf(d,b):this.ue.Dc(d),e}c=this.cf.length;for(d=0;d<c;d++)if(e=this.cf.Y(d),e.name===a)return null!==b?this.cf.Rf(d,b):this.cf.Dc(d),e;c=this.df.length;for(d=0;d<c;d++)if(e=this.df.Y(d),e.name===a)return null!==
b?this.df.Rf(d,b):this.df.Dc(d),e;return null};function xj(a,b,c,d){w(b,"string",Tg,"replaceStandardTool:name");ra(d,N,Tg,"replaceStandardTool:list");null!==c&&(ra(c,kg,Tg,"replaceStandardTool:newtool"),c.g&&c.g!==a.g&&u("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.fc(a.g));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}H(Tg,{ue:"mouseDownTools"},function(){return this.eE});H(Tg,{cf:"mouseMoveTools"},function(){return this.fE});H(Tg,{df:"mouseUpTools"},function(){return this.gE});
G(Tg,{wF:"hoverDelay"},function(){return this.Zz},function(a){w(a,"number",Tg,"hoverDelay");this.Zz=a});G(Tg,{pC:"holdDelay"},function(){return this.Yz},function(a){w(a,"number",Tg,"holdDelay");this.Yz=a});G(Tg,{cF:"dragSize"},function(){return this.Nz},function(a){ra(a,Za,Tg,"dragSize");this.Nz=a.O()});G(Tg,{qE:"actionTool"},function(){return this.findTool("Action")},function(a){xj(this,"Action",a,this.ue)});
G(Tg,{SC:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){xj(this,"Relinking",a,this.ue)});G(Tg,{UF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){xj(this,"LinkReshaping",a,this.ue)});G(Tg,{dD:"resizingTool"},function(){return this.findTool("Resizing")},function(a){xj(this,"Resizing",a,this.ue)});G(Tg,{BG:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){xj(this,"Rotating",a,this.ue)});
G(Tg,{CC:"linkingTool"},function(){return this.findTool("Linking")},function(a){xj(this,"Linking",a,this.cf)});G(Tg,{Zc:"draggingTool"},function(){return this.findTool("Dragging")},function(a){xj(this,"Dragging",a,this.cf)});G(Tg,{bF:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){xj(this,"DragSelecting",a,this.cf)});G(Tg,{lG:"panningTool"},function(){return this.findTool("Panning")},function(a){xj(this,"Panning",a,this.cf)});
G(Tg,{Ix:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){xj(this,"ContextMenu",a,this.df)});G(Tg,{$y:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){xj(this,"TextEditing",a,this.df)});G(Tg,{EE:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){xj(this,"ClickCreating",a,this.df)});G(Tg,{FE:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){xj(this,"ClickSelecting",a,this.df)});
function vg(){this.$D=yj;this.Mk=this.Nk=this.N=null;this.pz=this.Gc=this.Jm=this.oi=!1;this.ee=!0;this.at=this.$s=this.Dz=null;this.hw=0;this.sw=600;this.iE=new z(0,0);this.rz=this.qz=this.pB=!1;this.Wm=new Fb(U,zj)}vb("AnimationManager",vg);vg.prototype.fc=function(a){this.N=a};function yj(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}vg.prototype.prepareAnimation=vg.prototype.vk=function(){this.ee&&(this.oi&&this.Xh(),this.Gc=!0,this.pz=!1)};
function Aj(a){a.ee&&requestAnimationFrame(function(){!1===a.Gc||a.oi||(a.N.pl=1,Bj(a.N),a.Gc=!1,a.N.ma("AnimationStarting"),Oj(a))})}function Pj(a,b,c,d,e){if(a.Gc&&(!(b instanceof O)||b.sC)){var f=a.Wm;if(f.contains(b)){b=f.ha(b);a=b.start;var g=b.end;void 0===a[c]&&(a[c]=Qj(d));g[c]=Qj(e)}else a=new Sb,g=new Sb,a[c]=Qj(d),g[c]=Qj(e),f.add(b,new zj(a,g))}}function Qj(a){return a instanceof z?a.copy():a instanceof Za?a.copy():a}
function Oj(a){var b;void 0===b&&(b=new Sb);var c=a.N;if(null!==c)if(0===a.Wm.count)a.oi=!1,Rj(c,!1),c.te();else{a.oi=!0;var d=b.WH||a.$D,e=b.CI||null,f=b.DI||null,g=b.duration||a.sw;b=a.iE;for(var h=a.Wm.i;h.next();){var k=h.value.start.position;k instanceof z&&(k.w()||k.assign(b))}a.Dz=d;a.$s=e;a.at=f;a.hw=g;var l=a.ZD=a.Wm;Sj(a);Tj(a,c,l,d,0,g,null!==a.Nk&&null!==a.Mk);ci(a.N);Uj(a);requestAnimationFrame(function(b){var e=b||+new Date,f=e+g;(function s(b){if(!1!==a.oi){b=b||+new Date;var h=b>f?
g:b-e;Sj(a);Tj(a,c,l,d,h,g,null!==a.Nk&&null!==a.Mk);a.$s&&a.$s();ci(c);Uj(a);b>f?Vj(a):requestAnimationFrame(s)}})(e)})}}var Wj={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.pD(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new z(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==f?b:c}};
function Sj(a){if(!a.Jm){var b=a.N;a.pB=b.Ma;a.qz=b.Dv;a.rz=b.us;b.Ma=!0;b.Dv=!0;b.us=!0;a.Jm=!0}}function Uj(a){var b=a.N;b.Ma=a.pB;b.Dv=a.qz;b.us=a.rz;a.Jm=!1}function Tj(a,b,c,d,e,f,g){for(c=c.i;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(void 0!==Wj[m])Wj[m](h,l[m],k[m],d,e,f)}g&&(g=a.Nk,a=a.Mk,m=a.y-g.y,a=d(e,g.x,a.x-g.x,f),d=d(e,g.y,m,f),e=b.gy,b.gy=!0,b.position=new z(a,d),b.gy=e)}
vg.prototype.stopAnimation=vg.prototype.Xh=function(){!0===this.Gc&&(this.Gc=!1,this.pz&&this.N.wd());this.oi&&this.ee&&(Sj(this),Tj(this,this.N,this.ZD,this.Dz,this.hw,this.hw,null!==this.Nk&&null!==this.Mk),Uj(this),Vj(this))};function Vj(a){a.oi=!1;a.Nk=null;a.Mk=null;a.Wm=new Fb(U,zj);Sj(a);for(var b=a.N.links;b.next();){var c=b.value;null!==c.an&&(c.points=c.an,c.an=null)}b=a.N;Rj(b,!1);b.Rb();b.te();Xj(b);Uj(a);a.at&&a.at();a.at=null;a.$s=null;b.ma("AnimationFinished");b.wd()}
function Yj(a,b,c){var d=b.Q,e=c.Q,f=null;c instanceof Wg&&(f=c.placeholder);null!==f?(c=f.Ra(ud),c.x+=f.padding.left,c.y+=f.padding.top,Pj(a,b,"position",c,b.position)):Pj(a,b,"position",new z(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position);Pj(a,b,"opacity",.01,b.opacity)}function Zj(a,b,c){a.Gc&&(null===a.Nk&&b.w()&&null===a.Mk&&(a.Nk=b.copy()),a.Mk=c.copy())}G(vg,{isEnabled:"isEnabled"},function(){return this.ee},function(a){w(a,"boolean",vg,"isEnabled");this.ee=a});
G(vg,{duration:"duration"},function(){return this.sw},function(a){w(a,"number",vg,"duration");1>a&&za(a,">= 1",vg,"duration");this.sw=a});H(vg,{jg:"isAnimating"},function(){return this.oi});H(vg,{gI:"isTicking"},function(){return this.Jm});function zj(a,b){this.start=a;this.end=b}
function jg(){0<arguments.length&&Aa(jg);sb(this);this.N=null;this.hb=new N(O);this.yb="";this.ic=1;this.Kw=!1;this.Pj=this.xx=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.rj=this.ij=this.qj=this.hj=this.gj=!0;this.Fw=!1;this.Ut=[]}vb("Layer",jg);jg.prototype.fc=function(a){this.N=a};
jg.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,f=0,g=0,h=this.hb.i;h.next();){var k=h.value;k instanceof Wg?e++:k instanceof V?d++:k instanceof W?f++:k instanceof Vg?g++:c++}h="";0<c&&(h+=c+" Parts ");0<d&&(h+=d+" Nodes ");0<e&&(h+=e+" Groups ");0<f&&(h+=f+" Links ");0<g&&(h+=g+" Adornments ");if(1<a)for(a=this.hb.i;a.next();)c=a.value,h+="\n    "+c.toString(),d=c.data,null!==d&&ub(d)&&(h+=" #"+ub(d)),c instanceof V?h+=" "+Sf(d):
c instanceof W&&(h+=" "+Sf(c.M)+" "+Sf(c.R));return b+" "+this.hb.count+": "+h};jg.prototype.findObjectAt=jg.prototype.Dd=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.Pj)return null;var d=!1;this.g.Va.na(a)&&(d=!0);for(var e=Va(),f=this.hb.l,g=f.length;g--;){var h=f[g];if((!0!==d||!1!==ak(h))&&h.qa()&&(e.assign(a),Xc(e,h.We),h=h.Dd(e,b,c),null!==h&&(null!==b&&(h=b(h)),null!==h&&(null===c||c(h)))))return A(e),h}A(e);return null};
jg.prototype.findObjectsAt=jg.prototype.yr=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new Xb(U));if(!1===this.Pj)return d;var e=!1;this.g.Va.na(a)&&(e=!0);for(var f=Va(),g=this.hb.l,h=g.length;h--;){var k=g[h];!0===e&&!1===ak(k)||!k.qa()||(f.assign(a),Xc(f,k.We),k.yr(f,b,c,d)&&(null!==b&&(k=b(k)),null===k||null!==c&&!c(k)||d.add(k)))}A(f);return d};
jg.prototype.findObjectsIn=jg.prototype.Zi=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof N||e instanceof Xb||(e=new Xb(U));if(!1===this.Pj)return e;var f=!1;this.g.Va.Wi(a)&&(f=!0);for(var g=this.hb.l,h=g.length;h--;){var k=g[h];(!0!==f||!1!==ak(k))&&k.qa()&&k.Zi(a,b,c,d,e)&&(null!==b&&(k=b(k)),null===k||null!==c&&!c(k)||e.add(k))}return e};
jg.prototype.Rx=function(a,b,c,d,e,f,g){if(!1===this.Pj)return e;for(var h=this.hb.l,k=h.length;k--;){var l=h[k];(!0!==g||!1!==ak(l))&&f(l)&&l.qa()&&l.Zi(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
jg.prototype.findObjectsNear=jg.prototype.Fl=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof N||e instanceof Xb)f=e;e=!0}f instanceof N||f instanceof Xb||(f=new Xb(U));if(!1===this.Pj)return f;var g=!1;this.g.Va.na(a)&&(g=!0);for(var h=Va(),k=Va(),l=this.hb.l,m=l.length;m--;){var n=l[m];!0===g&&!1===ak(n)||!n.qa()||(h.assign(a),Xc(h,n.We),k.k(a.x+b,a.y),Xc(k,n.We),n.Fl(h,k,c,d,e,f)&&(null!==c&&(n=c(n)),null===n||null!==d&&!d(n)||
f.add(n)))}A(h);A(k);return f};r=jg.prototype;r.Oe=function(a,b){if(this.visible){var c;c=void 0===b?a.Va:b;for(var d=this.hb.l,e=d.length,f=0;f<e;f++){var g=d[f];g.pA=f;if(!(g instanceof W&&!1===g.yf)){if(g instanceof Vg){var h=g;if(null!==h.Yg)continue}if(hd(g.Q,c))for(g.Oe(!0),bk(g),g=g.xu;g.next();)h=g.value,jj(h,Infinity,Infinity),h.ac(),h.Oe(!0);else g.Oe(!1),null!==g.xu&&0<g.xu.count&&bk(g)}}}};
r.oe=function(a,b,c,d){if(this.visible&&0!==this.ic&&(void 0===d&&(d=!0),d||!this.bc)){1!==this.ic&&(a.globalAlpha=this.ic);c=this.Ut;c.length=0;d=b.scale;for(var e=this.hb.l,f=e.length,g=0;g<f;g++){var h=e[g];if(ak(h)||ck(h)){if(h instanceof W){var k=h;k.Ib&&c.push(k);if(!1===k.yf)continue}k=h.Q;1<k.width*d||1<k.height*d?h.oe(a,b):dk(h,a)}}a.globalAlpha=1}};
function ek(a,b,c,d){if(a.visible&&0!==a.ic){1!==a.ic&&(b.globalAlpha=a.ic);var e=a.Ut;e.length=0;var f=c.scale;a=a.hb.l;for(var g=a.length,h=d.length,k=0;k<g;k++){var l=a[k];if(ak(l)||ck(l)){if(l instanceof W){var m=l;m.Ib&&e.push(m);if(!1===m.yf)continue}var m=fk(l,l.Q),n;a:{n=m;for(var p=d,q=h,s=2/f,t=4/f,v=0;v<q;v++){var x=p[v];if(0!==x.width&&0!==x.height&&n.rC(x.x-s,x.y-s,x.width+t,x.height+t)){n=!0;break a}}n=!1}n&&(1<m.width*f||1<m.height*f?l.oe(b,c):dk(l,b))}}b.globalAlpha=1}}
r.h=function(a,b,c,d,e){var f=this.g;null!==f&&f.ec(If,a,this,b,c,d,e)};r.Hn=function(a,b,c){var d=this.hb;b.Ct=this;if(a>=d.count)a=d.count;else if(d.Y(a)===b)return-1;d.qd(a,b);b.Ir(c);d=this.g;null!==d&&(c?d.ba():d.Hn(b));b instanceof Wg&&this.Ev(b);return a};
r.Xd=function(a,b,c){if(!c&&b.layer!==this&&null!==b.layer)return b.layer.Xd(a,b,c);var d=this.hb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.Y(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Jr(c);d.Dc(a);d=this.g;null!==d&&(c?d.ba():d.Xd(b));b.Ct=null;return a};
r.Ev=function(a){for(;null!==a;){if(a.layer===this){var b=a;if(0!==b.mc.count){for(var c=-1,d=-1,e=this.hb.l,f=e.length,g=0;g<f;g++){var h=e[g];if(h===b&&(c=g,0<=d))break;if(0>d&&h.Ba===b&&(d=g,0<=c))break}!(0>d)&&d<c&&(e=this.hb,e.Dc(c),e.qd(d,b))}}a=a.Ba}};r.clear=function(){for(var a=this.hb.be(),b=a.length,c=0;c<b;c++)a[c].Oe(!1),this.Xd(-1,a[c],!1)};H(jg,{cj:"parts"},function(){return this.hb.i});H(jg,{MI:"partsBackwards"},function(){return this.hb.Kl});H(jg,{g:"diagram"},function(){return this.N});
G(jg,{name:"name"},function(){return this.yb},function(a){w(a,"string",jg,"name");var b=this.yb;if(b!==a){var c=this.g;if(null!==c)for(""===b&&u("Cannot rename default Layer to: "+a),c=c.hv;c.next();)c.value.name===a&&u("Layer.name is already present in this diagram: "+a);this.yb=a;this.h("name",b,a);for(a=this.hb.i;a.next();)a.value.Ne=this.yb}});
G(jg,{opacity:"opacity"},function(){return this.ic},function(a){var b=this.ic;b!==a&&(w(a,"number",jg,"opacity"),(0>a||1<a)&&za(a,"0 <= value <= 1",jg,"opacity"),this.ic=a,this.h("opacity",b,a),a=this.g,null!==a&&a.ba())});G(jg,{bc:"isTemporary"},function(){return this.Kw},function(a){var b=this.Kw;b!==a&&(w(a,"boolean",jg,"isTemporary"),this.Kw=a,this.h("isTemporary",b,a))});
G(jg,{visible:"visible"},function(){return this.xx},function(a){var b=this.xx;if(b!==a){w(a,"boolean",jg,"visible");this.xx=a;this.h("visible",b,a);for(b=this.hb.i;b.next();)b.value.Zd(a);a=this.g;null!==a&&a.ba()}});G(jg,{Qf:"pickable"},function(){return this.Pj},function(a){var b=this.Pj;b!==a&&(w(a,"boolean",jg,"pickable"),this.Pj=a,this.h("pickable",b,a))});G(jg,{tC:"isBoundsIncluded"},function(){return this.Fw},function(a){this.Fw!==a&&(this.Fw=a,null!==this.g&&this.g.Rb())});
G(jg,{Ui:"allowCopy"},function(){return this.gj},function(a){var b=this.gj;b!==a&&(w(a,"boolean",jg,"allowCopy"),this.gj=a,this.h("allowCopy",b,a))});G(jg,{sl:"allowDelete"},function(){return this.hj},function(a){var b=this.hj;b!==a&&(w(a,"boolean",jg,"allowDelete"),this.hj=a,this.h("allowDelete",b,a))});G(jg,{Cu:"allowTextEdit"},function(){return this.qj},function(a){var b=this.qj;b!==a&&(w(a,"boolean",jg,"allowTextEdit"),this.qj=a,this.h("allowTextEdit",b,a))});
G(jg,{zu:"allowGroup"},function(){return this.ij},function(a){var b=this.ij;b!==a&&(w(a,"boolean",jg,"allowGroup"),this.ij=a,this.h("allowGroup",b,a))});G(jg,{Du:"allowUngroup"},function(){return this.rj},function(a){var b=this.rj;b!==a&&(w(a,"boolean",jg,"allowUngroup"),this.rj=a,this.h("allowUngroup",b,a))});G(jg,{jr:"allowLink"},function(){return this.jj},function(a){var b=this.jj;b!==a&&(w(a,"boolean",jg,"allowLink"),this.jj=a,this.h("allowLink",b,a))});
G(jg,{tl:"allowRelink"},function(){return this.lj},function(a){var b=this.lj;b!==a&&(w(a,"boolean",jg,"allowRelink"),this.lj=a,this.h("allowRelink",b,a))});G(jg,{Xj:"allowMove"},function(){return this.kj},function(a){var b=this.kj;b!==a&&(w(a,"boolean",jg,"allowMove"),this.kj=a,this.h("allowMove",b,a))});G(jg,{Au:"allowReshape"},function(){return this.mj},function(a){var b=this.mj;b!==a&&(w(a,"boolean",jg,"allowReshape"),this.mj=a,this.h("allowReshape",b,a))});
G(jg,{kr:"allowResize"},function(){return this.nj},function(a){var b=this.nj;b!==a&&(w(a,"boolean",jg,"allowResize"),this.nj=a,this.h("allowResize",b,a))});G(jg,{Bu:"allowRotate"},function(){return this.oj},function(a){var b=this.oj;b!==a&&(w(a,"boolean",jg,"allowRotate"),this.oj=a,this.h("allowRotate",b,a))});G(jg,{Fe:"allowSelect"},function(){return this.pj},function(a){var b=this.pj;b!==a&&(w(a,"boolean",jg,"allowSelect"),this.pj=a,this.h("allowSelect",b,a))});
function M(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);gk(c)}1<arguments.length&&u("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");sb(this);hk=[];this.Ub=!0;this.hh=new vg;this.hh.fc(this);this.Uc=17;var c=this;null!==window.document.body?gk(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.kA=!1;this.Db=new N(jg);this.cb=this.eb=0;this.Pg=this.ob=this.Wf=this.Oa=null;this.$C();this.gp=null;this.ZC();this.xa=
(new z(NaN,NaN)).freeze();this.Eb=1;this.ut=(new z(NaN,NaN)).freeze();this.vt=NaN;this.Kt=1E-4;this.It=100;this.ld=new ib;this.uu=(new z(NaN,NaN)).freeze();this.lt=(new D(NaN,NaN,NaN,NaN)).freeze();this.ix=(new qd(0,0,0,0)).freeze();this.jx=ik;this.bx=this.$w=null;this.Ek=ah;this.im=ee;this.Dj=ah;this.Em=ee;this.wt=this.tt=ud;this.nf=new Xb(U);this.ed=!0;this.ip=!1;this.Lk=new Fb(W,D);this.um=!0;this.WD=250;this.dm=-1;this.Rs=(new qd(16,16,16,16)).freeze();this.et=this.Ve=!1;this.ym=!0;this.xj=new Ff;
this.jc=new Ff;this.sb=new Ff;this.ei=null;this.ku=-1;this.ju=!1;this.ow=this.pw=null;jk(this);this.Vm=new Xb(V);this.Sj=new Xb(Wg);this.Rm=new Xb(W);this.hb=new Xb(O);this.zt=!0;this.aA=!1;this.qu=gi;this.ri=10;this.iw=this.mw=this.ux=null;this.gw="";this.So="auto";this.mh=this.Hh=this.xh=this.Nt=this.yh=this.zh=this.Ah=this.lh=this.qh=this.jh=null;this.Cm=!0;this.Uw=!1;this.KA={};this.lq=0;this.Ue=[null,null];this.Yv=null;this.At=this.$l=this.nw=this.kx=this.TA=this.Eh=!1;this.mA=!0;this.Hw=this.Qc=
!1;this.gd=null;var d=this;this.tA=function(a){if(a.U===d.U&&d.ya){d.ya=!1;try{var b=a.Vc;""===a.bf&&b===If&&kk(d,a.object,a.propertyName)}finally{d.ya=!0}}};this.uA=function(a){lk(d,a)};this.rB=!0;this.Yf=-2;this.nh=new Fb(Object,O);this.vj=new Fb(Object,W);this.Tk=new Fb(Object,Array);this.Xm=new Fb("string",Array);this.JA=new N(mk);this.Fj=!1;this.hj=this.gj=this.Hs=this.ee=!0;this.Js=this.Is=!1;this.Os=this.Ms=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.Ls=this.rj=this.ij=this.qj=
!0;this.Qk=this.iA=!1;this.Ns=this.Ks=this.rt=this.qt=!0;this.au=this.$t=16;this.ex=this.Zt=!1;this.hx=this.gx=this.Gi=this.Fi=null;this.he=(new qd(5)).freeze();this.cu=(new Xb(O)).freeze();this.Jt=999999999;this.st=(new Xb(O)).freeze();this.Ej=this.Ok=this.sh=!0;this.Bj=this.Aj=!1;this.fd=null;this.Ps=!0;this.Ce=!1;this.Hc=null;this.AA=1;this.zw=!1;this.XA=0;this.qB=(new D(NaN,NaN,NaN,NaN)).freeze();this.ft=(new D(NaN,NaN,NaN,NaN)).freeze();this.al=new Xb(nk);ok(this);this.Et=this.nt=this.Pt=this.Hz=
this.Gz=this.Iz=this.si=this.yj=this.Bh=null;pk(this);this.wc=null;this.mt=!1;this.jm=null;this.Xa=new Tg;this.Xa.initializeStandardTools();this.Ea=this.Nx=this.Xa;this.ib=new ec;this.U=new Xf;this.Eh=!0;this.ub=new lg;this.Eh=!1;this.Sz=this.rw=null;this.Ee=1;this.pl=null;this.Cj=new qk;void 0!==a&&rk(this,a);this.Vk=1;this.Wk=0;this.oA=new z;this.nB=500;this.Qs=new z;this.Mq=null;this.Ub=this.Lw=!1}vb("Diagram",M);
function pk(a){a.Bh=new Fb("string",O);var b=new V,c=new Zb;c.bind(new yg("text","",Sf));b.add(c);a.Iz=b;a.Bh.add("",b);b=new V;c=new Zb;c.stroke="brown";c.bind(new yg("text","",Sf));b.add(c);a.Bh.add("Comment",b);b=new V;b.yk=!1;b.GB=!1;c=new X;c.jb="Ellipse";c.fill="black";c.stroke=null;c.ka=(new Za(3,3)).va();b.add(c);a.Bh.add("LinkLabel",b);a.yj=new Fb("string",Wg);b=new Wg;b.Qy="GROUPPANEL";b.type=sk;c=new Zb;c.font="bold 12pt sans-serif";c.bind(new yg("text","",Sf));b.add(c);c=new L(tk);c.name=
"GROUPPANEL";var d=new X;d.jb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Qi;d.padding=(new qd(5,5,5,5)).va();c.add(d);b.add(c);a.Gz=b;a.yj.add("",b);a.si=new Fb("string",W);b=new W;c=new X;c.Jf=!0;b.add(c);c=new X;c.no="Standard";c.fill="black";c.stroke=null;c.Na=0;b.add(c);a.Hz=b;a.si.add("",b);b=new W;c=new X;c.Jf=!0;c.stroke="brown";b.add(c);a.si.add("Comment",b);b=new Vg;b.type=tk;c=new X;c.fill=null;c.stroke="dodgerblue";c.Na=3;b.add(c);c=new Qi;c.margin=(new qd(1.5,
1.5,1.5,1.5)).va();b.add(c);a.Pt=b;a.nt=b;b=new Vg;b.type=si;c=new X;c.Jf=!0;c.fill=null;c.stroke="dodgerblue";c.Na=3;b.add(c);a.Et=b}
function gk(a){var b=oa("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=oa("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);a.Uc=d-b}
M.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.dk&&this.dk.id&&(b=this.dk.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Db.i;c.next();)b+="\n  "+c.value.toString(a-1);return b};M.prototype.checkProperties=function(){void 0===Ub?Ub=new Xb(Object):Ub.clear();Wb=new zc;Tb("",this);var a=Wb.toString();Wb=null;return a};
M.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.N instanceof M?b.N:null};
G(M,{dk:"div"},function(){return this.ob},function(a){null!==a&&ra(a,HTMLDivElement,M,"div");if(this.ob!==a){hk=[];var b=this.ob;null!==b?(b.N=void 0,b.innerHTML="",null!==this.Oa&&(this.Oa.removeEventListener("touchstart",this.BD,!1),this.Oa.removeEventListener("touchmove",this.AD,!1),this.Oa.removeEventListener("touchend",this.zD,!1),this.Oa.Yc.N=null),b=this.Xa,null!==b&&(b.ue.each(function(a){a.cancelWaitAfter()}),b.cf.each(function(a){a.cancelWaitAfter()}),b.df.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.Ea.doCancel(),this.Wf=this.Oa=null,window.removeEventListener("resize",this.LD,!1),window.removeEventListener("mousemove",this.Tn,!0),window.removeEventListener("mousedown",this.Sn,!0),window.removeEventListener("mouseup",this.Vn,!0),window.removeEventListener("mousewheel",this.ng,!0),window.removeEventListener("DOMMouseScroll",this.ng,!0),window.removeEventListener("mouseout",this.Un,!0)):this.Ce=!1;this.ob=null;if(null!==a){if(b=a.N)b.dk=null;rk(this,a);this.Jy()}}});
function uk(a){var b=a.Oa;b.addEventListener("touchstart",a.BD,!1);b.addEventListener("touchmove",a.AD,!1);b.addEventListener("touchend",a.zD,!1);b.addEventListener("mousemove",a.Tn,!1);b.addEventListener("mousedown",a.Sn,!1);b.addEventListener("mouseup",a.Vn,!1);b.addEventListener("mousewheel",a.ng,!1);b.addEventListener("DOMMouseScroll",a.ng,!1);b.addEventListener("mouseout",a.Un,!1);b.addEventListener("keydown",a.NF,!1);b.addEventListener("keyup",a.OF,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.Xa.En===vj&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.mG,!1);b.addEventListener("pointermove",a.oG,!1);b.addEventListener("pointerleave",a.nG,!1);window.addEventListener("resize",a.LD,!1)}function Rj(a,b){a.pl=null;b&&a.RC()}
M.prototype.computePixelRatio=function(){if(null!==this.pl)return this.pl;var a=this.Wf;return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};M.prototype.doMouseMove=function(){this.Ea.doMouseMove()};M.prototype.doMouseDown=function(){this.Ea.doMouseDown()};M.prototype.doMouseUp=function(){this.Ea.doMouseUp()};M.prototype.doMouseWheel=function(){this.Ea.doMouseWheel()};
M.prototype.doKeyDown=function(){this.Ea.doKeyDown()};M.prototype.doKeyUp=function(){this.Ea.doKeyUp()};function Bj(a){if(null!==a.Oa){var b=a.ob;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Bj?a.Uc:0,d=a.Aj?a.Uc:0,e=a.Ee;a.Ee=a.computePixelRatio();a.Ee!==e&&(a.ip=!0,a.wd());if(b.clientWidth!==a.eb+c||b.clientHeight!==a.cb+d)a.Ok=!0,a.ed=!0,b=a.ub,null!==b&&b.ev&&b.v(),a.Qc||a.wd()}}}M.prototype.focus=M.prototype.focus=function(){this.Oa&&this.Oa.focus()};
function vk(a,b,c){void 0===b&&(b=a.Wf);void 0===c&&(c=!0);c&&(b.Fs="");b.Yl="";b.Xl=""}function ok(a){var b=new jg;b.name="Background";a.fr(b);b=new jg;b.name="";a.fr(b);b=new jg;b.name="Foreground";a.fr(b);b=new jg;b.name="Adornment";b.bc=!0;a.fr(b);b=new jg;b.name="Tool";b.bc=!0;b.tC=!0;a.fr(b);b=new jg;b.name="Grid";b.Fe=!1;b.Qf=!1;b.bc=!0;a.uE(b,a.wr("Background"))}
function wk(a){a.wc=new L(xk);a.wc.name="GRID";var b=new X;b.jb="LineH";b.stroke="lightgray";b.Na=.5;b.interval=1;a.wc.add(b);b=new X;b.jb="LineH";b.stroke="gray";b.Na=.5;b.interval=5;a.wc.add(b);b=new X;b.jb="LineH";b.stroke="gray";b.Na=1;b.interval=10;a.wc.add(b);b=new X;b.jb="LineV";b.stroke="lightgray";b.Na=.5;b.interval=1;a.wc.add(b);b=new X;b.jb="LineV";b.stroke="gray";b.Na=.5;b.interval=5;a.wc.add(b);b=new X;b.jb="LineV";b.stroke="gray";b.Na=1;b.interval=10;a.wc.add(b);b=new O;b.add(a.wc);
b.Ne="Grid";b.jy=!1;b.sC=!1;b.Qf=!1;b.py="GRID";a.add(b);a.hb.remove(b);a.wc.visible=!1}
M.prototype.zA=function(){if(this.N.isEnabled){var a=this.N;if(a.ex&&null!==a.Oa){a.Zt=!0;var b=a.Xc,c=a.Va,d=b.width,e=c.width,f=b.height,g=c.height,h=b.right,k=c.right,l=b.bottom,m=c.bottom,n=b.x,p=c.x,b=b.y,c=c.y,q=a.scale;if(e<d||g<f){var s=Va();this.QA&&a.je?(s.k(this.scrollLeft/q+n,a.position.y),a.position=s):this.RA&&a.ke&&(s.k(a.position.x,this.scrollTop/q+b),a.position=s);A(s);a.Zt=!1;a.Ok=!1}else s=Va(),this.QA&&a.je&&(n<p&&(a.position=new z(this.scrollLeft+n,a.position.y)),h>k&&(a.position=
new z(-(a.Fi.scrollWidth-a.eb)+this.scrollLeft-a.eb/q+a.Xc.right,a.position.y))),this.RA&&a.ke&&(b<c&&(a.position=new z(a.position.x,this.scrollTop+b)),l>m&&(a.position=new z(a.position.x,-(a.Gi.scrollHeight-a.cb)+this.scrollTop-a.cb/q+a.Xc.bottom))),A(s),yk(a),a.Zt=!1,a.Ok=!1,b=a.Xc,c=a.Va,h=b.right,k=c.right,l=b.bottom,m=c.bottom,n=b.x,p=c.x,b=b.y,c=c.y,e>=d&&n>=p&&h<=k&&(a.gx.style.width="1px"),g>=f&&b>=c&&l<=m&&(a.hx.style.height="1px")}}else zk(this.N)};
M.prototype.Rt=function(){this.N.isEnabled?this.N.ex=!0:zk(this.N)};M.prototype.computeBounds=M.prototype.Bf=function(){0<this.nf.count&&Ak(this);return Bk(this)};function Bk(a){if(a.eC.w()){var b=a.eC.copy();b.wu(a.padding);return b}for(var c=!0,d=a.Db.l,e=d.length,f=0;f<e;f++){var g=d[f];if(g.visible&&(!g.bc||g.tC))for(var g=g.hb.l,h=g.length,k=0;k<h;k++){var l=g[k];l.jy&&l.qa()&&(l=l.Q,l.w()&&(c?(c=!1,b=l.copy()):b.fh(l)))}}c&&(b=new D(0,0,0,0));b.wu(a.padding);return b}
M.prototype.computePartsBounds=function(a){var b=null;for(a=a.i;a.next();){var c=a.value;c instanceof W||(c.Ge(),null===b?b=c.Q.copy():b.fh(c.Q))}return null===b?new D(NaN,NaN,0,0):b};
function Ck(a,b){if((b||a.Ce)&&!a.Ub&&null!==a.Oa&&!a.qb.jg&&a.Xc.w()){a.Ub=!0;var c=a.Ek;b&&a.Dj!==ah&&(c=a.Dj);var d=c!==ah?Dk(a,c):a.scale,c=a.Va.copy(),e=a.eb/d,f=a.cb/d,g=null,h=a.qb;h.Gc&&(g=a.xa.copy());a.position.wa();var k=a.im;b&&!k.Kc()&&a.Em.Kc()&&(k=a.Em);Ek(a,a.xa,a.Xc,e,f,k,b);a.position.freeze();null!==g&&Zj(h,g,a.xa);a.scale=d;a.Ub=!1;d=a.Va;d.Vd(c)||a.ds(c,d)}}
function Dk(a,b){var c=a.ib.Mu;if(null===a.Oa)return c;a.sh&&Fk(a,a.Bf());var d=a.Xc;if(!d.w())return c;var e=d.width,d=d.height,f=a.eb,g=a.cb,h=f/e,k=g/d;return b===Gk?(e=Math.min(k,h),e>c&&(e=c),e<a.mg&&(e=a.mg),e>a.lg&&(e=a.lg),e):b===Hk?(e=k>h?(g-a.Uc)/d:(f-a.Uc)/e,e>c&&(e=c),e<a.mg&&(e=a.mg),e>a.lg&&(e=a.lg),e):a.scale}M.prototype.zoomToFit=M.prototype.zoomToFit=function(){this.scale=Dk(this,Gk)};
M.prototype.zoomToRect=function(a,b){void 0===b&&(b=Gk);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Gk||b===Hk)if(isNaN(c))e=this.Va.height*this.scale/d;else if(isNaN(d))e=this.Va.width*this.scale/c;else var e=this.eb,f=this.cb,e=b===Hk?f/d>e/c?(f-(this.Aj?this.Uc:0))/d:(e-(this.Bj?this.Uc:0))/c:Math.min(f/d,e/c);this.scale=e;this.position=new z(a.x,a.y)}};G(M,{gy:null},function(){return this.Ub},function(a){this.Ub=a});
M.prototype.alignDocument=function(a,b){this.sh&&Fk(this,this.Bf());var c=this.Xc,d=this.Va,e=this.Ub;this.Ub=!0;this.position=new z(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.Ub=e;this.ba()};
function Ek(a,b,c,d,e,f,g){var h=b.x,k=b.y;if(g||a.hD===ik)f.Kc()&&(d>c.width&&(h=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(k=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),f=a.gD,g=d-c.width,d<c.width+f.left+f.right?(h=Math.min(h+d/2,c.right+Math.max(g,f.right)-d/2),h=Math.max(h,c.left-Math.max(g,f.left)+d/2),h-=d/2):h>c.left?h=c.left:h<c.right-d&&(h=c.right-d),d=e-c.height,e<c.height+f.top+f.bottom?(k=Math.min(k+e/2,c.bottom+Math.max(d,f.bottom)-e/2),k=Math.max(k,c.top-Math.max(d,
f.top)+e/2),k-=e/2):k>c.top?k=c.top:k<c.bottom-e&&(k=c.bottom-e);b.x=isFinite(h)?h:-a.padding.left;b.y=isFinite(k)?k:-a.padding.top;null!==a.QC&&(a=a.QC(a,b),b.x=a.x,b.y=a.y)}M.prototype.findPartAt=M.prototype.zr=function(a,b){var c=b?Wh(this,a,function(a){return a.J},function(a){return a.canSelect()}):Wh(this,a,function(a){return a.J});return c instanceof O?c:null};
M.prototype.findObjectAt=M.prototype.Dd=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);Ak(this);for(var d=this.Db.Kl;d.next();){var e=d.value;if(e.visible&&(e=e.Dd(a,b,c),null!==e))return e}return null};function Wh(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);Ak(a);for(a=a.Db.Kl;a.next();){var e=a.value;if(e.visible&&!e.bc&&(e=e.Dd(b,c,d),null!==e))return e}return null}
M.prototype.findObjectsAt=M.prototype.yr=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new Xb(U));Ak(this);for(var e=this.Db.Kl;e.next();){var f=e.value;f.visible&&f.yr(a,b,c,d)}return d};M.prototype.findObjectsIn=M.prototype.Zi=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof N||e instanceof Xb||(e=new Xb(U));Ak(this);for(var f=this.Db.Kl;f.next();){var g=f.value;g.visible&&g.Zi(a,b,c,d,e)}return e};
M.prototype.Rx=function(a,b,c,d,e,f){var g=new Xb(U);Ak(this);for(var h=this.Db.Kl;h.next();){var k=h.value;k.visible&&k.Rx(a,b,c,d,g,e,f)}return g};M.prototype.findObjectsNear=M.prototype.Fl=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof N||e instanceof Xb)f=e;e=!0}f instanceof N||f instanceof Xb||(f=new Xb(U));Ak(this);for(var g=this.Db.Kl;g.next();){var h=g.value;h.visible&&h.Fl(a,b,c,d,e,f)}return f};
function dh(a){-1!==a.ku&&(window.clearTimeout(a.ku),a.ku=-1)}function Ik(a,b){var c=b.copy();a.ku=ma(function(){c.button=2;a.C=c;a.ju=!0;a.doMouseUp()},850)}M.prototype.acceptEvent=function(a){var b=this.jc;this.jc=this.sb;this.sb=b;Jk(this,this,a,b,a instanceof MouseEvent);return b};
function Jk(a,b,c,d,e){d.g=b;e?Kk(a,c,d):(d.xe=b.sb.xe,d.S=b.sb.S);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.Cc=a;d.button=c.button;fa&&0===c.button&&c.ctrlKey&&(d.button=2);d.ek=!1;d.up=!1;d.le=1;d.ck=0;d.rc=!1;d.bubbles=!1;d.event=c;d.timestamp=Date.now();d.Pr=!1;d.Sf=c.target.N?c.target.N:null;d.Jd=null}
function Lk(a,b,c,d,e){d.g=a;Kk(a,c,d);d.Cc=0;d.button=0;d.ek=!0;d.up=!1;d.le=1;d.ck=0;d.rc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.Pr=e;d.Sf=b.target.N?b.target.N:null;d.Jd=null;a.xj=d.copy();qh=null}
function Mk(a,b,c,d,e){var f=null;d.g=a;if(null!==c){var f=window.document.elementFromPoint(c.clientX,c.clientY),g;f&&f.N?g=f.N:(c=b.changedTouches[0],g=a);Kk(a,c,d)}else null!==a.jc?(d.S=a.jc.S,d.xe=a.jc.xe,d.Sf=a.jc.Sf):null!==a.xj&&(d.S=a.xj.S,d.xe=a.xj.xe,d.Sf=a.xj.Sf);d.Cc=0;d.button=0;d.ek=!1;d.up=!1;d.le=1;d.ck=0;d.rc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.Pr=e;d.Sf=g;d.Jd=null}
function Nk(a,b){if(a.bubbles)return!0;void 0!==b.stopPropagation&&b.stopPropagation();(void 0===b.touches||2>b.touches.length)&&b.preventDefault();b.cancelBubble=!0;return!1}
M.prototype.NF=function(a){if(!this.N.isEnabled)return!1;var b=this.N.sb;Jk(this.N,this.N,a,b,!1);b.key=String.fromCharCode(a.which);b.ek=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.N.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?Nk(b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
M.prototype.OF=function(a){if(!this.N.isEnabled)return!1;var b=this.N.sb;Jk(this.N,this.N,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.N.doKeyUp();
return Nk(b,a)};M.prototype.cp=function(a){var b=this.Oa;if(null===b)return new z(0,0);var c=this.eb,d=this.cb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.ld?(a=new z(c,a),Xc(a,this.ld),a):new z(c,a)};function Kk(a,b,c){var d=a.Oa,e=a.eb,f=a.cb,g=0,h=0;null!==d&&(d=d.getBoundingClientRect(),g=b.clientX-e/d.width*d.left,h=b.clientY-f/d.height*d.top);c.xe.k(g,h);null!==a.ld?(b=Wa(g,h),a.ld.ah(b),c.S.assign(b),A(b)):c.S.k(g,h)}
M.prototype.invalidateDocumentBounds=M.prototype.Rb=function(){this.sh||(this.sh=!0,this.wd(!0))};function Xj(a){a.Qc||Ak(a);a.sh&&Fk(a,a.Bf());for(a=a.al.i;a.next();)Xj(a.value)}M.prototype.redraw=M.prototype.Jy=function(){this.Ub||this.Qc||(this.ba(),Ok(this),yk(this),this.Rb(),this.te())};M.prototype.isUpdateRequested=function(){return this.Ve};
M.prototype.delayInitialization=M.prototype.WE=function(a){void 0===a&&(a=null);var b=this.qb,c=b.isEnabled;b.Xh();b.isEnabled=!1;ci(this);this.Ce=!1;b.isEnabled=c;null!==a&&ma(a,1)};M.prototype.requestUpdate=M.prototype.wd=function(a){void 0===a&&(a=!1);if(!0!==this.Ve&&!(this.Ub||!1===a&&this.Qc)){this.Ve=!0;var b=this;requestAnimationFrame(function(){b.Ve&&b.te()})}};M.prototype.maybeUpdate=M.prototype.te=function(){if(!this.ym||this.Ve)this.ym&&(this.ym=!1),ci(this)};
function Pk(a,b){a.Ub||!a.Ok||zk(a)||(b&&Ak(a),Ck(a,!1))}
function ci(a){if(!a.Qc&&(a.Ve=!1,null!==a.ob)){a.Qc=!0;var b=a.hh,c=a.JA;if(!b.Jm&&0!==c.length){for(var d=c.l,e=d.length,f=0;f<e;f++){var g=d[f];Qk(g,!1);g.H()}c.clear()}d=c=!1;b.jg&&(d=!0,c=a.Ma,a.Ma=!0);b.Gc||Bj(a);Pk(a,!1);null!==a.wc&&(a.wc.visible&&!a.mt&&(Rk(a),a.mt=!0),!a.wc.visible&&a.mt&&(a.mt=!1));Ak(a);0!==a.Lk.count&&(Sk(a),Ak(a));e=!1;if(!a.Ce||a.Ps)a.Ce?Tk(a,!a.et):(a.Ab("Initial Layout"),!1===b.isEnabled&&b.Xh(),Tk(a,!1)),e=!0;a.et=!1;Ak(a);a.kx||b.jg||Xj(a);e&&(a.Ce||(b=a.Db.l,a.Oe(b,
b.length,a),Uk(a),Rk(a)),a.ma("LayoutCompleted"));Pk(a,!0);Ak(a);e&&!a.Ce&&(a.Ce=!0,a.pd("Initial Layout"),a.Ma||a.V.clear(),ma(function(){a.dh=!1},1));a.oe();d&&(a.Ma=c);a.Qc=!1}}
function Uk(a){if(a.Dj!==ah)a.scale=Dk(a,a.Dj);else if(a.Ek!==ah)a.scale=Dk(a,a.Ek);else{var b=a.AF;isFinite(b)&&0<b&&(a.scale=b)}a.sh&&Fk(a,a.Bf());b=a.zF;if(b.w())a.position=b;else{b=Va();b.qs(a.Xc,a.yF);var c=a.Va,c=db(0,0,c.width,c.height),d=Va();d.qs(c,a.BF);a.position=new z(b.x-d.x,b.y-d.y);fb(c);A(d);A(b);Ck(a,!0)}a.ma("InitialLayoutCompleted")}
function Ak(a){if((a.Qc||!a.qb.jg)&&0!==a.nf.count)for(var b=0;23>b;b++){var c=a.nf.i;if(null===c||0===a.nf.count)break;a.nf=new Xb(U);var d=a,e=a.nf;for(c.reset();c.next();){var f=c.value;!f.$c()||f instanceof Wg||!f.qa()||(f.qk()?(jj(f,Infinity,Infinity),f.ac()):e.add(f))}for(c.reset();c.next();)f=c.value,f instanceof Wg&&f.qa()&&Vk(d,f);for(c.reset();c.next();)f=c.value,f instanceof W&&(d=f,d.qa()&&(d.qk()?(jj(d,Infinity,Infinity),d.ac(),d.Xr()):e.add(d)));for(c.reset();c.next();)d=c.value,d instanceof
Vg&&d.qa()&&(d.qk()?(jj(d,Infinity,Infinity),d.ac()):e.add(d))}}function Vk(a,b){for(var c=ob(),d=ob(),e=b.mc;e.next();){var f=e.value;f.qa()&&(f instanceof Wg?(Wk(f)||Xk(f)||cl(f))&&Vk(a,f):f instanceof W?f.M==b||f.R==b?d.push(f):c.push(f):(jj(f,Infinity,Infinity),f.ac()))}for(var e=c.length,g=0;g<e;g++)f=c[g],jj(f,Infinity,Infinity),f.ac();pb(c);jj(b,Infinity,Infinity);b.ac();e=d.length;for(g=0;g<e;g++)f=d[g],jj(f,Infinity,Infinity),f.ac();pb(d)}
M.prototype.Oe=function(a,b,c,d){var e=this.hh;if(this.Ej||e.jg)for(e=0;e<b;e++)a[e].Oe(c,d)};
M.prototype.oe=function(a,b){void 0===a&&(a=this.Wf);void 0===b&&(b=null);null===this.ob&&u("No div specified");var c=this.Oa;null===c&&u("No canvas specified");if(this.hh.Gc)0===this.V.ce&&this.wd(!0);else{ll(this);var d=a!==this.Wf,e=this.Db.l,f=e.length,g=this;this.Oe(e,f,g);if(d)vk(this,a),yk(this);else if(!this.ed&&null===b)return;var h=this.xa,k=this.Eb,l=Math.round(h.x*k)/k,m=Math.round(h.y*k)/k,f=this.ld;f.reset();1!==k&&f.scale(k);0===h.x&&0===h.y||f.translate(-l,-m);h=this.Ee;ca?(c.width=
c.width,vk(this,a),a.scale(h,h)):(a.setTransform(1,0,0,1,0,0),a.scale(h,h),a.clearRect(0,0,this.eb,this.cb));a.miterLimit=9;a.setTransform(1,0,0,1,0,0);a.scale(h,h);a.transform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy);c=null!==b?function(c){var d=a,e=b;if(c.visible&&0!==c.ic){1!==c.ic&&(d.globalAlpha=c.ic);var f=c.Ut;f.length=0;var h=g.scale;c=c.hb.l;for(var k=c.length,l=0;l<k;l++){var m=c[l];if((ak(m)||ck(m))&&!e.contains(m)){if(m instanceof W){var y=m;y.Ib&&f.push(y);if(!1===y.yf)continue}y=m.Q;1<y.width*
h||1<y.height*h?m.oe(d,g):dk(m,d)}}d.globalAlpha=1}}:function(b){b.oe(a,g)};ml(this,a);f=e.length;for(h=0;h<f;h++)c(e[h]);this.Cj?nl(this.Cj,this)&&this.Rv():this.cp=function(){return new z(0,0)};d?(vk(this),yk(this)):this.ed=this.Ej=!1}};
function ol(a,b,c,d,e){null===a.ob&&u("No div specified");var f=a.Oa;null===f&&u("No canvas specified");var g=a.Wf;if(a.ed){ll(a);var h=a.Ee;ca?(f.width=f.width,vk(a,g)):(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,a.eb*h,a.cb*h));g.qC=!1;g.drawImage(a.rw.Yc,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.xa;var f=a.Eb,k=Math.round(e.x*f)/f,l=Math.round(e.y*f)/f;d=a.ld;d.reset();1!==f&&d.scale(f);0===e.x&&0===e.y||d.translate(-k,-l);g.save();g.beginPath();e=c.length;for(f=0;f<e;f++)k=c[f],0!==k.width&&
0!==k.height&&g.rect(Math.floor(k.x),Math.floor(k.y),Math.ceil(k.width),Math.ceil(k.height));g.clip();g.setTransform(1,0,0,1,0,0);g.scale(h,h);g.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=a.Db.l;e=c.length;a.Oe(c,e,a);ml(a,g);for(f=0;f<e;f++)ek(c[f],g,a,b);g.restore();vk(a);a.Cj?nl(a.Cj,a)&&a.Rv():a.cp=function(){return new z(0,0)};a.Ej=!1;a.ed=!1;a.RC()}}
function pl(a,b,c,d,e,f,g,h,k,l){null===a.ob&&u("No div specified");null===a.Oa&&u("No canvas specified");void 0===g&&(g=null);void 0===h&&(h=null);void 0===k&&(k=!1);void 0===l&&(l=!1);ll(a);vk(a);yk(a);a.Hw=!0;var m=new D(f.x,f.y,d.width/e,d.height/e),n=m.copy();n.wu(c);Rk(a,n);Ak(a);var n=a.Db.l,p=n.length;a.Oe(n,p,a,m);var q=a.Ee;b.setTransform(1,0,0,1,0,0);b.scale(q,q);b.clearRect(0,0,d.width,d.height);null!==h&&""!==h&&(b.fillStyle=h,b.fillRect(0,0,d.width,d.height));d=hb();d.reset();d.translate(c.left,
c.top);d.scale(e);0===f.x&&0===f.y||d.translate(-f.x,-f.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);jb(d);ml(a,b);if(null!==g){var s=new Xb(U);c=g.i;for(c.reset();c.next();)e=c.value,!1===l&&"Grid"===e.layer.name||null===e||s.add(e);c=function(c){var d=k;if(c.visible&&0!==c.ic&&(void 0===d&&(d=!0),d||!c.bc)){1!==c.ic&&(b.globalAlpha=c.ic);d=c.Ut;d.length=0;var e=a.scale;c=c.hb.l;for(var f=c.length,g=0;g<f;g++){var h=c[g];if((ak(h)||ck(h))&&s.contains(h)){if(h instanceof W){var l=h;l.Ib&&
d.push(l);if(!1===l.yf)continue}l=h.Q;1<l.width*e||1<l.height*e?h.oe(b,a):dk(h,b)}}b.globalAlpha=1}}}else if(!k&&l){var t=a.Gr.J,v=t.layer;c=function(c){c===v?t.oe(b,a):c.oe(b,a,m,k,l)}}else c=function(c){c.oe(b,a,m,k,l)};for(e=0;e<p;e++)c(n[e]);a.Hw=!1;a.Cj?nl(a.Cj,a)&&a.Rv():a.cp=function(){return new z(0,0)};vk(a);yk(a);a.Oe(n,p,a);Rk(a)}M.prototype.getRenderingHint=M.prototype.Wx=function(a){return this.Pg[a]};M.prototype.setRenderingHint=M.prototype.KG=function(a,b){this.Pg[a]=b;this.Jy()};
M.prototype.resetRenderingHints=M.prototype.$C=function(){this.Pg=new Sb;this.Pg.drawShadows=!0;this.Pg.textGreeking=!0;this.Pg.viewportOptimizations=ga?!1:!0;this.Pg.temporaryPixelRatio=!0};function ml(a,b){var c=a.Pg;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.qC=d;b.AI=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c,b.Fs=c)}}M.prototype.getInputOption=M.prototype.Ux=function(a){return this.gp[a]};M.prototype.setInputOption=function(a,b){this.gp[a]=b};
M.prototype.resetInputOptions=M.prototype.ZC=function(){this.gp=new Sb;this.gp.extraTouchArea=10;this.gp.extraTouchThreshold=10};M.prototype.setProperties=function(a){Ib(this,a)};function Sk(a){if(0===a.V.ce){for(var b=a.Lk.i;b.next();){var c=b.key,d=b.value;c.Ed();Fi(c,d)}a.Lk.clear()}}M.prototype.ba=function(a){void 0===a&&(a=null);if(null===a)this.ed=!0,this.wd();else{var b=this.Va;null!==a&&a.w()&&b.If(a)&&(this.ed=!0,this.wd())}for(b=this.al.i;b.next();)b.value.ba(a)};
M.prototype.ay=function(a,b){if(!0!==this.ed){this.ed=!0;var c=!0===this.Wx("temporaryPixelRatio");if(!0===this.Wx("viewportOptimizations")&&this.hD!==ql&&this.gD.Qu(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=bb(),f=Math.max(a.x,b.x),g=Math.max(a.y,b.y),h=Math.min(a.x+a.width,b.x+b.width),k=Math.min(a.y+a.height,b.y+b.height);e.x=f;e.y=g;e.width=Math.max(0,h-f)*d;e.height=Math.max(0,k-g)*d;if(0<e.width&&0<e.height){if(!this.Qc&&(this.Ve=!1,null!==this.ob)){this.Qc=!0;Ak(this);
0!==this.Lk.count&&(Sk(this),Ak(this));this.Xc.w()||Fk(this,this.Bf());var l=this.Oa;if(null!==l){var m=this.Ee,g=this.eb*m,h=this.cb*m,f=this.scale*m,d=Math.round(Math.round(b.x*f)-Math.round(a.x*f)),f=Math.round(Math.round(b.y*f)-Math.round(a.y*f)),k=this.rw,n=this.Sz;k.width!==g&&(k.width=g);k.height!==h&&(k.height=h);n.clearRect(0,0,g,h);var k=190*this.Ee,p=70*this.Ee,q=Math.max(d,0),s=Math.max(f,0),t=Math.floor(g-q),v=Math.floor(h-s);n.qC=!1;n.drawImage(l.Yc,q,s,t,v,0,0,t,v);nl(this.Cj,this)&&
n.clearRect(0,0,k,p);var l=ob(),n=ob(),v=Math.abs(d),t=Math.abs(f),x=0===q?0:g-v,q=Wa(x,0),v=Wa(v+x,h);n.push(new D(Math.min(q.x,v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y)));var B=this.ld;B.reset();B.scale(m,m);1!==this.Eb&&B.scale(this.Eb);m=this.xa;(0!==m.x||0!==m.y)&&isFinite(m.x)&&isFinite(m.y)&&B.translate(-m.x,-m.y);Xc(q,B);Xc(v,B);l.push(new D(Math.min(q.x,v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y)));x=0===s?0:h-t;q.k(0,x);v.k(g,t+x);n.push(new D(Math.min(q.x,
v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y)));Xc(q,B);Xc(v,B);l.push(new D(Math.min(q.x,v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y)));nl(this.Cj,this)&&(g=0<d?0:-d,h=0<f?0:-f,q.k(g,h),v.k(k+g,p+h),n.push(new D(Math.min(q.x,v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y))),Xc(q,B),Xc(v,B),l.push(new D(Math.min(q.x,v.x),Math.min(q.y,v.y),Math.abs(q.x-v.x),Math.abs(q.y-v.y))));A(q);A(v);Pk(this,!1);ol(this,l,n,d,f);pb(l);pb(n);this.Qc=!1}}}else this.te();fb(e);
c&&(this.pl=1,this.te(),Rj(this,!0))}else c?(this.pl=1,this.te(),Rj(this,!0)):this.te();for(c=this.al.i;c.next();)c.value.ay()}};function Ok(a){!1===a.Ok&&(a.Ok=!0)}function yk(a){!1===a.Ej&&(a.Ej=!0)}function ll(a){!1!==a.ip&&(a.ip=!1,rl(a,a.eb,a.cb))}function rl(a,b,c){var d=a.Oa,e=a.Ee,f=b*e,e=c*e;if(d.width!==f||d.height!==e)d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.ed=!0,vk(a)}
function zk(a){var b=a.Oa;if(null===b)return!0;var c=a.ob,d=a.eb,e=a.cb,f=a.qB.copy(),g=!1,h=a.Bj?a.Uc:0,k=a.Aj?a.Uc:0,l=c.clientWidth||d+h,c=c.clientHeight||e+k;if(l!==d+h||c!==e+k)a.Bj=!1,a.Aj=!1,k=h=0,a.eb=l,a.cb=c,g=a.ip=!0;a.Ok=!1;if(a.qb.jg)return g?(a.qb.Xh(),a.WE(),!1):!0;var m=a.Va,n=a.Xc,l=n.width,c=n.height,p=m.width,q=m.height,s=n.x,t=m.x,v=n.right,h=m.right+h,x=n.y,B=m.y,n=n.bottom,k=m.bottom+k,y=m="1px",C=a.scale;a.Yx&&a.je&&(m=1,s+1<t&&(m=Math.max((t-s)*C+a.eb,m)),v>h+1&&(m=Math.max((v-
h)*C+a.eb,m)),p+1<l&&(m=Math.max((l-p)*C+a.eb,m)),m+="px");a.Zx&&a.ke&&(y=1,x+1<B&&(y=Math.max((B-x)*C+a.cb,y)),n>k+1&&(y=Math.max((n-k)*C+a.cb,y)),q+1<c&&(y=Math.max((c-q)*C+a.cb,y)),y+="px");var K="1px"!==m,J="1px"!==y;if((!K||!J)&&K||J)J&&(h-=a.Uc),K&&(k-=a.Uc),a.Yx&&a.je&&(m=1,s+1<t&&(m=Math.max((t-s)*C+a.eb,m)),v>h+1&&(m=Math.max((v-h)*C+a.eb,m)),p+1<l&&(m=Math.max((l-p)*C+a.eb,m)),m+="px"),a.Zx&&a.ke&&(y=1,x+1<B&&(y=Math.max((B-x)*C+a.cb,y)),n>k+1&&(y=Math.max((n-k)*C+a.cb,y)),q+1<c&&(y=Math.max((c-
q)*C+a.cb,y)),y+="px"),K="1px"!==m,J="1px"!==y;if(a.Zt&&K===a.Aj&&J===a.Bj)return d===a.eb&&e===a.cb||a.te(),!1;K!==a.Aj&&(a.cb="1px"===m?a.cb+a.Uc:Math.max(a.cb-a.Uc,1),g=!0);a.Aj=K;a.gx.style.width=m;J!==a.Bj&&(a.eb="1px"===y?a.eb+a.Uc:Math.max(a.eb-a.Uc,1),g=!0,a.kA&&(J?(b.style.left=a.Uc+"px",a.position=new z(a.xa.x+a.Uc/a.scale,a.xa.y)):(b.style.left="0px",a.position=new z(a.xa.x-a.Uc/a.scale,a.xa.y))));a.Bj=J;a.hx.style.height=y;a.Yx&&a.je&&(p+1<l?a.Fi.scrollLeft=(a.position.x-s)*C:s+1<t?a.Fi.scrollLeft=
a.Fi.scrollWidth-a.Fi.clientWidth:v>h+1&&(a.Fi.scrollLeft=a.position.x*C));a.Zx&&a.ke&&(q+1<c?a.Gi.scrollTop=(a.position.y-x)*C:x+1<B?a.Gi.scrollTop=a.Gi.scrollHeight-a.Gi.clientHeight:n>k+1&&(a.Gi.scrollTop=a.position.y*C));g&&(a.ip=!0);l=a.eb;c=a.cb;a.Gi.style.height=c+"px";a.Gi.style.width=l+(a.Bj?a.Uc:0)+"px";a.Fi.style.width=l+"px";a.Fi.style.height=c+(a.Aj?a.Uc:0)+"px";a.ex=!1;return d!==l||e!==c||a.qb.Gc?(m=a.Va,a.ds(f,m,g),!1):!0}
M.prototype.add=M.prototype.add=function(a){ra(a,O,M,"add:part");var b=a.g;if(b!==this){null!==b&&u("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.$l&&(a.Gj="Tool");var c=a.Ne,b=this.wr(c);null===b&&(b=this.wr(""));null===b&&u('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.Hn(99999999,a,a.g===this),0<=c&&this.ec(Qf,"parts",b,null,a,null,c),b.bc||this.Rb(),a.v(sl),c=a.Rr,null!==c&&c(a,
null,b))}};
M.prototype.Hn=function(a){if(a instanceof V){if(this.Vm.add(a),a instanceof Wg){var b=a.Ba;null===b?this.Sj.add(a):b.Tm.add(a);b=a.ub;null!==b&&(b.g=this)}}else a instanceof W?this.Rm.add(a):a instanceof Vg||this.hb.add(a);var c=this;tl(a,function(a){ul(c,a)});a.tb&&a.H();b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.vj.add(b,a):this.nh.add(b,a)),tl(a,function(a){vl(c,a)}));!0!==Xk(a)&&!0!==cl(a)||this.nf.add(a);wl(a,!0,this);xl(a)?(a.Q.w()&&this.ba(fk(a,a.Q)),this.Rb()):a.qa()&&a.Q.w()&&
this.ba(fk(a,a.Q));this.wd()};
M.prototype.Xd=function(a){a.nr();if(a instanceof V){if(this.Vm.remove(a),a instanceof Wg){var b=a.Ba;null===b?this.Sj.remove(a):b.Tm.remove(a);b=a.ub;null!==b&&(b.g=null)}}else a instanceof W?this.Rm.remove(a):a instanceof Vg||this.hb.remove(a);var c=this;tl(a,function(a){yl(c,a)});b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.vj.remove(b):this.nh.remove(b)),tl(a,function(a){zl(c,a)}));this.nf.remove(a);xl(a)?(a.Q.w()&&this.ba(fk(a,a.Q)),this.Rb()):a.qa()&&a.Q.w()&&this.ba(fk(a,a.Q));
this.wd()};M.prototype.remove=M.prototype.remove=function(a){ra(a,O,M,"remove:part");a.Ia=!1;a.kg=!1;var b=a.layer;if(null!==b&&b.g===this){a.v(Al);a.El();var c=b.Xd(-1,a,!1);0<=c&&this.ec(Rf,"parts",b,a,null,c,null);c=a.Rr;null!==c&&c(a,b,null)}};M.prototype.removeParts=M.prototype.Ny=function(a,b){if(Fa(a))for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new Xb(O),e.md(a),c=e.i;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};
M.prototype.copyParts=M.prototype.wn=function(a,b,c){return this.ib.wn(a,b,c)};M.prototype.moveParts=M.prototype.moveParts=function(a,b,c){ra(b,z,M,"moveParts:offset");var d=this.Xa;if(null!==d){d=d.Zc;null===d&&(d=new $g,d.fc(this));var e=new Fb(O,Object);if(null!==a)a=a.i;else{for(a=this.cj;a.next();)th(d,e,a.value,c);for(a=this.Of;a.next();)th(d,e,a.value,c);a=this.links}for(;a.next();)th(d,e,a.value,c);d.moveParts(e,b,c)}};
function Bl(a,b,c){ra(b,jg,M,"addLayer:layer");null!==b.g&&b.g!==a&&u("Cannot share a Layer with another Diagram: "+b+" of "+b.g);null===c?null!==b.g&&u("Cannot add an existing Layer to this Diagram again: "+b):(ra(c,jg,M,"addLayer:existingLayer"),c.g!==a&&u("Existing Layer must be in this Diagram: "+c+" not in "+c.g),b===c&&u("Cannot move a Layer before or after itself: "+b));if(b.g!==a){b=b.name;a=a.Db;c=a.count;for(var d=0;d<c;d++)a.Y(d).name===b&&u("Cannot add Layer with the name '"+b+"'; a Layer with the same name is already present in this Diagram.")}}
M.prototype.addLayer=M.prototype.fr=function(a){Bl(this,a,null);a.fc(this);var b=this.Db,c=b.count-1;if(!a.bc)for(;0<=c&&b.Y(c).bc;)c--;b.qd(c+1,a);null!==this.gd&&this.ec(Qf,"layers",this,null,a,null,c+1);this.ba();this.Rb()};
M.prototype.addLayerBefore=M.prototype.uE=function(a,b){Bl(this,a,b);a.fc(this);var c=this.Db,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.gd&&this.ec(Rf,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.Y(f)===b){c.qd(f,a);break}null!==this.gd&&this.ec(Qf,"layers",this,null,a,null,f);this.ba();0>d&&this.Rb()};
M.prototype.addLayerAfter=function(a,b){Bl(this,a,b);a.fc(this);var c=this.Db,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.gd&&this.ec(Rf,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.Y(f)===b){c.qd(f+1,a);break}null!==this.gd&&this.ec(Qf,"layers",this,null,a,null,f+1);this.ba();0>d&&this.Rb()};
M.prototype.removeLayer=function(a){ra(a,jg,M,"removeLayer:layer");a.g!==this&&u("Cannot remove a Layer from another Diagram: "+a+" of "+a.g);if(""!==a.name){var b=this.Db,c=b.indexOf(a);if(b.remove(a)){for(b=a.hb.copy().i;b.next();){var d=b.value,e=d.Ne;d.Ne=e!==a.name?e:""}null!==this.gd&&this.ec(Rf,"layers",this,a,null,c,null);this.ba();this.Rb()}}};M.prototype.findLayer=M.prototype.wr=function(a){for(var b=this.hv;b.next();){var c=b.value;if(c.name===a)return c}return null};
M.prototype.addChangedListener=M.prototype.yx=function(a){w(a,"function",M,"addChangedListener:listener");null===this.ei&&(this.ei=new N("function"));this.ei.add(a)};M.prototype.removeChangedListener=M.prototype.Ky=function(a){w(a,"function",M,"removeChangedListener:listener");null!==this.ei&&(this.ei.remove(a),0===this.ei.count&&(this.ei=null))};
M.prototype.Hu=function(a){this.Ma||this.V.oC(a);a.Vc!==Pf&&(this.dh=!0);if(null!==this.ei){var b=this.ei,c=b.length;if(1===c)b=b.Y(0),b(a);else if(0!==c)for(var d=b.be(),e=0;e<c;e++)b=d[e],b(a)}};M.prototype.raiseChangedEvent=M.prototype.ec=function(a,b,c,d,e,f,g){void 0===f&&(f=null);void 0===g&&(g=null);var h=new Hf;h.g=this;h.Vc=a;h.propertyName=b;h.object=c;h.oldValue=d;h.Pf=f;h.newValue=e;h.Nf=g;this.Hu(h)};M.prototype.raiseChanged=M.prototype.h=function(a,b,c,d,e){this.ec(If,a,this,b,c,d,e)};
H(M,{qb:"animationManager"},function(){return this.hh});H(M,{V:"undoManager"},function(){return this.gd.V});G(M,{Ma:"skipsUndoManager"},function(){return this.Eh},function(a){w(a,"boolean",M,"skipsUndoManager");this.Eh=a;this.gd.Eh=a});G(M,{Ox:"delaysLayout"},function(){return this.nw},function(a){this.nw=a});
M.prototype.wl=function(a,b){if(null!==a&&a.g===this){var c=a.Vc;if(c===If){var d=a.object,c=a.propertyName,e=a.ha(b);Hb(d,c,e);d instanceof U&&(d=d.J,null!==d&&d.rd());this.dh=!0}else if(c===Qf){e=a.object;c=a.Nf;d=a.newValue;if(e instanceof L)if("number"===typeof c&&d instanceof U){var f=e;b?f.Xd(c):f.qd(c,d);d=e.J;null!==d&&d.rd()}else"number"===typeof c&&d instanceof ug&&(f=e,b?d.td?f.YC(c):f.UC(c):(c=d.td?f.Bc(d.index):f.Ac(d.index),c.qr(d)));else e instanceof jg?(f=!0===a.Pf,"number"===typeof c&&
d instanceof O&&(b?(d.rd(),e.Xd(f?c:-1,d,f)):e.Hn(c,d,f))):e instanceof M?"number"===typeof c&&d instanceof jg&&(e=d,b?this.Db.Dc(c):(e.fc(this),this.Db.qd(c,e))):u("unknown ChangedEvent.Insert object: "+a.toString());this.dh=!0}else c===Rf?(e=a.object,c=a.Pf,d=a.oldValue,e instanceof L?"number"===typeof c&&d instanceof U?(f=e,b?f.qd(c,d):f.Xd(c)):"number"===typeof c&&d instanceof ug&&(f=e,b?(c=d.td?f.Bc(d.index):f.Ac(d.index),c.qr(d)):d.td?f.YC(c):f.UC(c)):e instanceof jg?(f=!0===a.Nf,"number"===
typeof c&&d instanceof O&&(b?e.Hn(c,d,f):(d.rd(),e.Xd(f?c:-1,d,f)))):e instanceof M?"number"===typeof c&&d instanceof jg&&(e=d,b?(e.fc(this),this.Db.qd(c,e)):this.Db.Dc(c)):u("unknown ChangedEvent.Remove object: "+a.toString()),this.dh=!0):c!==Pf&&u("unknown ChangedEvent: "+a.toString())}};M.prototype.startTransaction=M.prototype.Ab=function(a){return this.V.Ab(a)};M.prototype.commitTransaction=M.prototype.pd=function(a){return this.V.pd(a)};M.prototype.rollbackTransaction=M.prototype.co=function(){return this.V.co()};
M.prototype.updateAllTargetBindings=M.prototype.dH=function(a){void 0===a&&(a="");for(var b=this.cj;b.next();)b.value.rb(a);for(b=this.Of;b.next();)b.value.rb(a);for(b=this.links;b.next();)b.value.rb(a)};M.prototype.updateAllRelationshipsFromData=function(){for(var a=this.cj;a.next();)a.value.updateRelationshipsFromData();for(a=this.Of;a.next();)a.value.updateRelationshipsFromData();for(a=this.links;a.next();)a.value.updateRelationshipsFromData()};
function Cl(a,b,c){if(a.Ub||a.Qc)a.Eb=c;else if(a.Ub=!0,null===a.Oa)a.Eb=c;else{var d=a.Va.copy(),e=a.eb,f=a.cb;d.width=a.eb/b;d.height=a.cb/b;var g=a.Wl.copy();if(isNaN(g.x))switch(a.Gx){case Jd:g.x=0;break;case Kd:g.x=e-1;break;case Dd:g.x=e/2;break;case ee:case de:g.x=e/2}if(isNaN(g.y))switch(a.Gx){case Id:g.y=0;break;case Ld:g.y=f-1;break;case Dd:g.y=f/2;break;case ee:case de:g.y=f/2}null!==a.fD&&(c=a.fD(a,c));c<a.mg&&(c=a.mg);c>a.lg&&(c=a.lg);a.position=new z(a.xa.x+g.x/b-g.x/c,a.xa.y+g.y/b-
g.y/c);a.Ub=!1;a.Eb=c;a.ds(d,a.Va);Ck(a,!1);a.ba();Ok(a)}}M.prototype.ds=function(a,b,c){void 0===c&&(c=!1);c||Ok(this);yk(this);var d=this.ub;null===d||!d.ev||c||a.width===b.width&&a.height===b.height||d.v();d=this.Ea;!0===this.Qk&&d instanceof Tg&&(this.C.S=this.GD(this.C.xe),d.doMouseMove());this.ay(a,b);Rk(this);this.ma("ViewportBoundsChanged",c?qb:null,a)};
function Rk(a,b){void 0===b&&(b=null);var c=a.wc;if(null!==c&&c.visible){for(var d=Ya(),e=1,f=1,g=c.la.l,h=g.length,k=0;k<h;k++){var l=g[k],m=l.interval;2>m||(Dl(l.jb)?f=f*m/Q.hC(f,m):e=e*m/Q.hC(e,m))}g=c.Xu;d.k(f*g.width,e*g.height);g=f=k=h=0;if(null!==b)h=b.width,k=b.height,f=b.x,g=b.y;else{e=bb();f=a.Va;e.k(f.x,f.y,f.width,f.height);for(g=a.al.i;g.next();)f=g.value.Va,f.w()&&id(e,f.x,f.y,f.width,f.height);h=e.width;k=e.height;f=e.x;g=e.y;if(!e.w())return}c.width=h+2*d.width;c.height=k+2*d.height;
e=Va();Q.xr(f,g,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);$a(d);c.J.location=e;A(e)}}M.prototype.clearSelection=M.prototype.Iu=function(){var a=0<this.selection.count;a&&this.ma("ChangingSelection");Zg(this);a&&this.ma("ChangedSelection")};function Zg(a){a=a.selection;if(0<a.count){for(var b=a.be(),c=b.length,d=0;d<c;d++)b[d].Ia=!1;a.wa();a.clear();a.freeze()}}
M.prototype.select=M.prototype.select=function(a){null!==a&&(ra(a,O,M,"select:part"),a.layer.g===this&&(!a.Ia||1<this.selection.count)&&(this.ma("ChangingSelection"),Zg(this),a.Ia=!0,this.ma("ChangedSelection")))};
M.prototype.selectCollection=M.prototype.lD=function(a){this.ma("ChangingSelection");Zg(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);d instanceof O||u("Diagram.selectCollection given something that is not a Part: "+d);d.Ia=!0}else for(a=a.i;a.next();)d=a.value,d instanceof O||u("Diagram.selectCollection given something that is not a Part: "+d),d.Ia=!0;this.ma("ChangedSelection")};
M.prototype.clearHighlighteds=M.prototype.IB=function(){var a=this.Yu;if(0<a.count){for(var b=a.be(),c=b.length,d=0;d<c;d++)b[d].kg=!1;a.wa();a.clear();a.freeze()}};M.prototype.highlight=function(a){null!==a&&a.layer.g===this&&(ra(a,O,M,"highlight:part"),!a.kg||1<this.Yu.count)&&(this.IB(),a.kg=!0)};
M.prototype.highlightCollection=function(a){this.IB();if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);d instanceof O||u("Diagram.highlightCollection given something that is not a Part: "+d);d.kg=!0}else for(a=a.i;a.next();)d=a.value,d instanceof O||u("Diagram.highlightCollection given something that is not a Part: "+d),d.kg=!0};
M.prototype.scroll=M.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;"pixel"===a?e=c:"line"===a?e=c*(d?this.os:this.ns):"page"===a?(a=d?this.Va.height:this.Va.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.os:this.ns),0),e*=c)):u("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:u("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};M.prototype.scrollToRect=M.prototype.EG=function(a){var b=this.Va;b.Wi(a)||(a=a.Yj,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};M.prototype.centerRect=function(a){var b=this.Va;a=a.Yj;a.x-=b.width/2;a.y-=b.height/2;this.position=a};M.prototype.transformDocToView=M.prototype.ED=function(a){var b=this.ld;b.reset();1!==this.Eb&&b.scale(this.Eb);var c=this.xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.ld)};
M.prototype.transformViewToDoc=M.prototype.GD=function(a){var b=this.ld;b.reset();1!==this.Eb&&b.scale(this.Eb);var c=this.xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return Xc(a.copy(),this.ld)};var ah;M.None=ah=I(M,"None",0);var Gk;M.Uniform=Gk=I(M,"Uniform",1);var Hk;M.UniformToFill=Hk=I(M,"UniformToFill",2);var gi;M.CycleAll=gi=I(M,"CycleAll",10);var ki;M.CycleNotDirected=ki=I(M,"CycleNotDirected",11);var mi;
M.CycleNotDirectedFast=mi=I(M,"CycleNotDirectedFast",12);var ni;M.CycleNotUndirected=ni=I(M,"CycleNotUndirected",13);var hi;M.CycleDestinationTree=hi=I(M,"CycleDestinationTree",14);var ji;M.CycleSourceTree=ji=I(M,"CycleSourceTree",15);var ik;M.DocumentScroll=ik=I(M,"DocumentScroll",1);var ql;M.InfiniteScroll=ql=I(M,"InfiniteScroll",2);G(M,{eH:"validCycle"},function(){return this.qu},function(a){var b=this.qu;b!==a&&(va(a,M,M,"validCycle"),this.qu=a,this.h("validCycle",b,a))});
G(M,{jv:"linkSpacing"},function(){return this.ri},function(a){var b=this.ri;b!==a&&(ua(a,M,"linkSpacing"),0>a&&za(a,">= zero",M,"linkSpacing"),this.ri=a,this.h("linkSpacing",b,a))});H(M,{hv:"layers"},function(){return this.Db.i});G(M,{Le:"isModelReadOnly"},function(){var a=this.gd;return null===a?!1:a.Ta},function(a){var b=this.gd;null!==b&&(b.Ta=a)});G(M,{Ta:"isReadOnly"},function(){return this.Fj},function(a){var b=this.Fj;b!==a&&(w(a,"boolean",M,"isReadOnly"),this.Fj=a,this.h("isReadOnly",b,a))});
G(M,{isEnabled:"isEnabled"},function(){return this.ee},function(a){var b=this.ee;b!==a&&(w(a,"boolean",M,"isEnabled"),this.ee=a,this.h("isEnabled",b,a))});G(M,{Bx:"allowClipboard"},function(){return this.Hs},function(a){var b=this.Hs;b!==a&&(w(a,"boolean",M,"allowClipboard"),this.Hs=a,this.h("allowClipboard",b,a))});G(M,{Ui:"allowCopy"},function(){return this.gj},function(a){var b=this.gj;b!==a&&(w(a,"boolean",M,"allowCopy"),this.gj=a,this.h("allowCopy",b,a))});
G(M,{sl:"allowDelete"},function(){return this.hj},function(a){var b=this.hj;b!==a&&(w(a,"boolean",M,"allowDelete"),this.hj=a,this.h("allowDelete",b,a))});G(M,{yu:"allowDragOut"},function(){return this.Is},function(a){var b=this.Is;b!==a&&(w(a,"boolean",M,"allowDragOut"),this.Is=a,this.h("allowDragOut",b,a))});G(M,{AB:"allowDrop"},function(){return this.Js},function(a){var b=this.Js;b!==a&&(w(a,"boolean",M,"allowDrop"),this.Js=a,this.h("allowDrop",b,a))});
G(M,{Cu:"allowTextEdit"},function(){return this.qj},function(a){var b=this.qj;b!==a&&(w(a,"boolean",M,"allowTextEdit"),this.qj=a,this.h("allowTextEdit",b,a))});G(M,{zu:"allowGroup"},function(){return this.ij},function(a){var b=this.ij;b!==a&&(w(a,"boolean",M,"allowGroup"),this.ij=a,this.h("allowGroup",b,a))});G(M,{Du:"allowUngroup"},function(){return this.rj},function(a){var b=this.rj;b!==a&&(w(a,"boolean",M,"allowUngroup"),this.rj=a,this.h("allowUngroup",b,a))});
G(M,{on:"allowInsert"},function(){return this.Ls},function(a){var b=this.Ls;b!==a&&(w(a,"boolean",M,"allowInsert"),this.Ls=a,this.h("allowInsert",b,a))});G(M,{jr:"allowLink"},function(){return this.jj},function(a){var b=this.jj;b!==a&&(w(a,"boolean",M,"allowLink"),this.jj=a,this.h("allowLink",b,a))});G(M,{tl:"allowRelink"},function(){return this.lj},function(a){var b=this.lj;b!==a&&(w(a,"boolean",M,"allowRelink"),this.lj=a,this.h("allowRelink",b,a))});
G(M,{Xj:"allowMove"},function(){return this.kj},function(a){var b=this.kj;b!==a&&(w(a,"boolean",M,"allowMove"),this.kj=a,this.h("allowMove",b,a))});G(M,{Au:"allowReshape"},function(){return this.mj},function(a){var b=this.mj;b!==a&&(w(a,"boolean",M,"allowReshape"),this.mj=a,this.h("allowReshape",b,a))});G(M,{kr:"allowResize"},function(){return this.nj},function(a){var b=this.nj;b!==a&&(w(a,"boolean",M,"allowResize"),this.nj=a,this.h("allowResize",b,a))});
G(M,{Bu:"allowRotate"},function(){return this.oj},function(a){var b=this.oj;b!==a&&(w(a,"boolean",M,"allowRotate"),this.oj=a,this.h("allowRotate",b,a))});G(M,{Fe:"allowSelect"},function(){return this.pj},function(a){var b=this.pj;b!==a&&(w(a,"boolean",M,"allowSelect"),this.pj=a,this.h("allowSelect",b,a))});G(M,{BB:"allowUndo"},function(){return this.Ms},function(a){var b=this.Ms;b!==a&&(w(a,"boolean",M,"allowUndo"),this.Ms=a,this.h("allowUndo",b,a))});
G(M,{Eu:"allowZoom"},function(){return this.Os},function(a){var b=this.Os;b!==a&&(w(a,"boolean",M,"allowZoom"),this.Os=a,this.h("allowZoom",b,a))});G(M,{Zx:"hasVerticalScrollbar"},function(){return this.rt},function(a){var b=this.rt;b!==a&&(w(a,"boolean",M,"hasVerticalScrollbar"),this.rt=a,Ok(this),this.ba(),this.h("hasVerticalScrollbar",b,a),Ck(this,!1))});
G(M,{Yx:"hasHorizontalScrollbar"},function(){return this.qt},function(a){var b=this.qt;b!==a&&(w(a,"boolean",M,"hasHorizontalScrollbar"),this.qt=a,Ok(this),this.ba(),this.h("hasHorizontalScrollbar",b,a),Ck(this,!1))});G(M,{je:"allowHorizontalScroll"},function(){return this.Ks},function(a){var b=this.Ks;b!==a&&(w(a,"boolean",M,"allowHorizontalScroll"),this.Ks=a,this.h("allowHorizontalScroll",b,a),Ck(this,!1))});
G(M,{ke:"allowVerticalScroll"},function(){return this.Ns},function(a){var b=this.Ns;b!==a&&(w(a,"boolean",M,"allowVerticalScroll"),this.Ns=a,this.h("allowVerticalScroll",b,a),Ck(this,!1))});G(M,{ns:"scrollHorizontalLineChange"},function(){return this.$t},function(a){var b=this.$t;b!==a&&(w(a,"number",M,"scrollHorizontalLineChange"),0>a&&za(a,">= 0",M,"scrollHorizontalLineChange"),this.$t=a,this.h("scrollHorizontalLineChange",b,a))});
G(M,{os:"scrollVerticalLineChange"},function(){return this.au},function(a){var b=this.au;b!==a&&(w(a,"number",M,"scrollVerticalLineChange"),0>a&&za(a,">= 0",M,"scrollVerticalLineChange"),this.au=a,this.h("scrollVerticalLineChange",b,a))});G(M,{C:"lastInput"},function(){return this.sb},function(a){this.sb=a});G(M,{Yb:"firstInput"},function(){return this.xj},function(a){this.xj=a});
G(M,{Fb:"currentCursor"},function(){return this.gw},function(a){""===a&&(a=this.So);this.gw!==a&&(w(a,"string",M,"currentCursor"),null!==this.Oa&&(this.gw=a,this.Oa.style.cursor=a,this.ob.style.cursor=a))});G(M,{LH:"defaultCursor"},function(){return this.So},function(a){""===a&&(a="auto");var b=this.So;b!==a&&(w(a,"string",M,"defaultCursor"),this.So=a,this.h("defaultCursor",b,a))});
G(M,{ZH:"hasGestureZoom"},function(){return this.Cm},function(a){var b=this.Cm;b!==a&&(w(a,"boolean",M,"hasGestureZoom"),this.Cm=a,this.h("hasGestureZoom",b,a))});G(M,{click:"click"},function(){return this.jh},function(a){var b=this.jh;b!==a&&(null!==a&&w(a,"function",M,"click"),this.jh=a,this.h("click",b,a))});G(M,{tr:"doubleClick"},function(){return this.qh},function(a){var b=this.qh;b!==a&&(null!==a&&w(a,"function",M,"doubleClick"),this.qh=a,this.h("doubleClick",b,a))});
G(M,{Hx:"contextClick"},function(){return this.lh},function(a){var b=this.lh;b!==a&&(null!==a&&w(a,"function",M,"contextClick"),this.lh=a,this.h("contextClick",b,a))});G(M,{wy:"mouseOver"},function(){return this.Ah},function(a){var b=this.Ah;b!==a&&(null!==a&&w(a,"function",M,"mouseOver"),this.Ah=a,this.h("mouseOver",b,a))});G(M,{vy:"mouseHover"},function(){return this.zh},function(a){var b=this.zh;b!==a&&(null!==a&&w(a,"function",M,"mouseHover"),this.zh=a,this.h("mouseHover",b,a))});
G(M,{uy:"mouseHold"},function(){return this.yh},function(a){var b=this.yh;b!==a&&(null!==a&&w(a,"function",M,"mouseHold"),this.yh=a,this.h("mouseHold",b,a))});G(M,{gG:"mouseDragOver"},function(){return this.Nt},function(a){var b=this.Nt;b!==a&&(null!==a&&w(a,"function",M,"mouseDragOver"),this.Nt=a,this.h("mouseDragOver",b,a))});G(M,{ty:"mouseDrop"},function(){return this.xh},function(a){var b=this.xh;b!==a&&(null!==a&&w(a,"function",M,"mouseDrop"),this.xh=a,this.h("mouseDrop",b,a))});
G(M,{cz:"toolTip"},function(){return this.Hh},function(a){var b=this.Hh;b!==a&&(null!==a&&ra(a,Vg,M,"toolTip"),this.Hh=a,this.h("toolTip",b,a))});G(M,{contextMenu:"contextMenu"},function(){return this.mh},function(a){var b=this.mh;b!==a&&(null!==a&&ra(a,Vg,M,"contextMenu"),this.mh=a,this.h("contextMenu",b,a))});
G(M,{ib:"commandHandler"},function(){return this.Yv},function(a){var b=this.Yv;b!==a&&(ra(a,ec,M,"commandHandler"),null!==a.g&&u("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.fc(null),this.Yv=a,a.fc(this))});G(M,{Xa:"toolManager"},function(){return this.ux},function(a){var b=this.ux;b!==a&&(ra(a,Tg,M,"toolManager"),null!==a.g&&u("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.fc(null),this.ux=a,a.fc(this))});
G(M,{Nx:"defaultTool"},function(){return this.mw},function(a){var b=this.mw;b!==a&&(ra(a,kg,M,"defaultTool"),this.mw=a,this.Ea===b&&(this.Ea=a))});G(M,{Ea:"currentTool"},function(){return this.iw},function(a){var b=this.iw;if(null!==b)for(b.ca&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop(),b=this.al.i;b.next();)b.value.ba();null===a&&(a=this.Nx);null!==a&&(ra(a,kg,M,"currentTool"),this.iw=a,a.fc(this),a.doStart())});H(M,{selection:"selection"},function(){return this.cu});
G(M,{ZF:"maxSelectionCount"},function(){return this.Jt},function(a){var b=this.Jt;if(b!==a)if(w(a,"number",M,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Jt=a,this.h("maxSelectionCount",b,a),!this.V.Ua&&(a=this.selection.count-a,0<a)){this.ma("ChangingSelection");for(var b=this.selection.be(),c=0;c<a;c++)b[c].Ia=!1;this.ma("ChangedSelection")}}else za(a,">= 0",M,"maxSelectionCount")});
G(M,{jG:"nodeSelectionAdornmentTemplate"},function(){return this.Pt},function(a){var b=this.Pt;b!==a&&(ra(a,Vg,M,"nodeSelectionAdornmentTemplate"),this.Pt=a,this.h("nodeSelectionAdornmentTemplate",b,a))});G(M,{tF:"groupSelectionAdornmentTemplate"},function(){return this.nt},function(a){var b=this.nt;b!==a&&(ra(a,Vg,M,"groupSelectionAdornmentTemplate"),this.nt=a,this.h("groupSelectionAdornmentTemplate",b,a))});
G(M,{VF:"linkSelectionAdornmentTemplate"},function(){return this.Et},function(a){var b=this.Et;b!==a&&(ra(a,Vg,M,"linkSelectionAdornmentTemplate"),this.Et=a,this.h("linkSelectionAdornmentTemplate",b,a))});H(M,{Yu:"highlighteds"},function(){return this.st});G(M,{dh:"isModified"},function(){var a=this.V;return a.isEnabled?null!==a.Oh?!0:this.Jw&&this.Yf!==a.Th:this.Jw},function(a){if(this.Jw!==a){w(a,"boolean",M,"isModified");this.Jw=a;var b=this.V;!a&&b.isEnabled&&(this.Yf=b.Th);a||El(this)}});
function El(a){var b=a.dh;a.rB!==b&&(a.rB=b,a.ma("Modified"))}
G(M,{U:"model"},function(){return this.gd},function(a){var b=this.gd;if(b!==a){ra(a,jc,M,"model");this.Ea.doCancel();null!==b&&b.V!==a.V&&b.V.wC&&u("Do not replace a Diagram.model while a transaction is in progress.");this.qb.Xh();this.Iu();this.Ce=!1;this.ym=!0;this.Yf=-2;this.Ve=!1;var c=this.Qc;this.Qc=!0;this.qb.vk();null!==b&&(b.Ky(this.uA),b instanceof Xf&&Fl(this,b.aj),Fl(this,b.pg));this.gd=a;a.yx(this.tA);Gl(this,a.pg);a instanceof Xf&&Hl(this,a.aj);a.Ky(this.tA);a.yx(this.uA);this.Qc=c;
this.Ub||this.ba();null!==b&&(a.V.isEnabled=b.V.isEnabled)}});G(M,{ya:null},function(){return this.mA},function(a){this.mA=a});
function lk(a,b){if(b.U===a.U){var c=b.Vc,d=b.propertyName;if(c===Pf&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.Xa,c.ue.each(function(b){b.fc(a)}),c.cf.each(function(b){b.fc(a)}),c.df.each(function(b){b.fc(a)}),a.Qc||a.Ce||(a.et=!0,a.ym&&(a.Ve=!0),a.hh.vk());else if("StartingUndo"===d||"StartingRedo"===d){var e=a.qb;e.jg&&!a.Ma&&e.Xh();a.ma("ChangingSelection")}else"StartedTransaction"===d&&(e=a.qb,e.jg&&!a.Ma&&e.Xh(),a.At&&e.vk());else if(a.ya){a.ya=!1;try{var f=b.bf;if(""!==f)if(c===If){if("linkFromKey"===
f){var g=b.object,h=a.Ef(g);if(null!==h){var k=b.newValue,l=a.pe(k);h.M=l}}else if("linkToKey"===f)g=b.object,h=a.Ef(g),null!==h&&(k=b.newValue,l=a.pe(k),h.R=l);else if("linkFromPortId"===f){if(g=b.object,h=a.Ef(g),null!==h){var m=b.newValue;"string"===typeof m&&(h.Gf=m)}}else if("linkToPortId"===f)g=b.object,h=a.Ef(g),null!==h&&(m=b.newValue,"string"===typeof m&&(h.yg=m));else if("nodeGroupKey"===f){var g=b.object,n=a.$g(g);if(null!==n){var p=b.newValue;if(void 0!==p){var q=a.pe(p);n.Ba=q instanceof
Wg?q:null}else n.Ba=null}}else if("linkLabelKeys"===f){if(g=b.object,h=a.Ef(g),null!==h){var s=b.oldValue,t=b.newValue;if(Fa(s))for(var v=Ia(s),x=0;x<v;x++){var B=La(s,x),l=a.pe(B);null!==l&&(l.vd=null)}if(Fa(t))for(v=Ia(t),x=0;x<v;x++)B=La(t,x),l=a.pe(B),null!==l&&(l.vd=h)}}else if("nodeParentKey"===f){var y=b.object,C=a.pe(b.newValue),K=a.Uu(y);if(null!==K){var J=K.Ar();null!==J?null===C?a.remove(J):a.Lc?J.M=C:J.R=C:Il(a,C,K)}}else if("parentLinkCategory"===f){var y=b.object,K=a.Uu(y),ba=b.newValue;
null!==K&&"string"===typeof ba&&(J=K.Ar(),null!==J&&(J.kc=ba))}else if("nodeCategory"===f){var g=b.object,ja=a.$g(g),ba=b.newValue;null!==ja&&"string"===typeof ba&&(ja.kc=ba)}else if("linkCategory"===f){var g=b.object,Y=a.Ef(g),ba=b.newValue;null!==Y&&"string"===typeof ba&&(Y.kc=ba)}else if("nodeDataArray"===f){var P=b.oldValue;Fl(a,P);var ha=b.newValue;Gl(a,ha)}else"linkDataArray"===f&&(P=b.oldValue,Fl(a,P),ha=b.newValue,Hl(a,ha));a.dh=!0}else c===Qf?(ha=b.newValue,"nodeDataArray"===f&&Ea(ha)?Jl(a,
ha):"linkDataArray"===f&&Ea(ha)?Kl(a,ha):"linkLabelKeys"===f&&pg(ha)&&(h=a.Ef(b.object),l=a.pe(ha),null!==h&&null!==l&&(l.vd=h)),a.dh=!0):c===Rf?(P=b.oldValue,"nodeDataArray"===f&&Ea(P)?Ll(a,P):"linkDataArray"===f&&Ea(P)?Ll(a,P):"linkLabelKeys"===f&&pg(P)&&(l=a.pe(P),null!==l&&(l.vd=null)),a.dh=!0):c===Pf&&("SourceChanged"===f?kk(a,b.object,b.propertyName):"ModelDisplaced"===f&&a.wk());else if(c===If){var Ra=b.propertyName,g=b.object;if(g===a.U){if("nodeKeyProperty"===Ra||"nodeCategoryProperty"===
Ra||"linkFromKeyProperty"===Ra||"linkToKeyProperty"===Ra||"linkFromPortIdProperty"===Ra||"linkToPortIdProperty"===Ra||"linkLabelKeysProperty"===Ra||"nodeIsGroupProperty"===Ra||"nodeGroupKeyProperty"===Ra||"nodeParentKeyProperty"===Ra||"linkCategoryProperty"===Ra)a.V.Ua||a.wk()}else kk(a,g,Ra);a.dh=!0}else if(c===Qf||c===Rf)Ml(a,b),a.dh=!0;else if(c===Pf){if("FinishedUndo"===d||"FinishedRedo"===d)a.V.th=!0,a.ma("ChangedSelection"),Ak(a),a.V.th=!1;a.et=!0;a.te();e=a.hh;e.Gc&&0===a.V.ce&&Aj(e);"CommittedTransaction"===
d&&a.V.Mw&&(a.Yf=Math.min(a.Yf,a.V.Th-1));El(a);a.Uw||"CommittedTransaction"!==d&&"FinishedUndo"!==d&&"FinishedRedo"!==d||(a.Uw=!0,ma(function(){a.Ea.standardMouseOver();a.Uw=!1},10))}}finally{a.ya=!0}}}}
function kk(a,b,c){if("string"===typeof c){var d=a.$g(b);if(null!==d)d.rb(c),a.U instanceof Yf&&(d=a.Ef(b),null!==d&&d.rb(c));else{for(var d=null,e=a.Tk.i;e.next();){for(var f=e.value,g=0;g<f.length;g++){var h=f[g];null!==h.of&&(h=h.of.ha(b),null!==h&&(null===d&&(d=ob()),d.push(h)))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].rb(c);pb(d)}}b===a.U.Zr&&a.dH(c)}}G(M,{Dv:"skipsModelSourceBindings"},function(){return this.TA},function(a){this.TA=a});
G(M,{us:null},function(){return this.kx},function(a){this.kx=a});function Ml(a,b){var c=b.Vc===Qf,d=c?b.Nf:b.Pf,e=c?b.newValue:b.oldValue,f=a.Tk.ha(b.object);if(Array.isArray(f))for(var g=0;g<f.length;g++){var h=f[g];if(c)Nl(h,e,d);else{var k=d;if(!(0>k)){var l=k;Ol(h)&&l++;h.Xd(l);Pl(h,l,k)}}}}function vl(a,b){var c=b.uh;if(Fa(c)){var d=a.Tk.ha(c);if(null===d)d=[],d.push(b),a.Tk.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function zl(a,b){var c=b.uh;if(Fa(c)){var d=a.Tk.ha(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Tk.remove(c);break}}}function ul(a,b){for(var c=b.la.l,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof mk&&Ql(a,f)}}function Ql(a,b){var c=b.element;if(null!==c){var c=c.src,d=a.Xm.ha(c);if(null===d)d=[],d.push(b),a.Xm.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function yl(a,b){for(var c=b.la.l,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof mk&&Rl(a,f)}}function Rl(a,b){var c=b.element;if(null!==c){var c=c.src,d=a.Xm.ha(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Xm.remove(c);break}}}
M.prototype.clear=M.prototype.clear=function(){var a=null;null!==this.wc&&(a=this.wc.J);this.U.clear();for(var b=this.Db.length,c=0;c<b;c++)this.Db.l[c].clear();this.nf.clear();this.Lk.clear();this.Vm.clear();this.Sj.clear();this.Rm.clear();this.hb.clear();this.nh.clear();this.vj.clear();this.Tk.clear();this.cu.wa();this.cu.clear();this.cu.freeze();this.st.wa();this.st.clear();this.st.freeze();Rg=this.jm=null;Sg="";this.ft=(new D(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.hb.remove(a));
this.ba()};
M.prototype.reset=M.prototype.reset=function(){this.Ub=!0;this.clear();this.Db=new N(jg);this.$C();this.ZC();this.xa=(new z(NaN,NaN)).freeze();this.Eb=1;this.ut=(new z(NaN,NaN)).freeze();this.vt=NaN;this.Kt=1E-4;this.It=100;this.uu=(new z(NaN,NaN)).freeze();this.lt=(new D(NaN,NaN,NaN,NaN)).freeze();this.Ek=ah;this.im=ee;this.Dj=ah;this.Em=ee;this.wt=this.tt=ud;this.Rs=(new qd(16,16,16,16)).freeze();this.zt=!0;this.qu=gi;this.So="auto";this.mh=this.Hh=this.xh=this.Nt=this.yh=this.zh=this.Ah=this.lh=
this.qh=this.jh=null;this.Fj=!1;this.hj=this.gj=this.Hs=this.ee=!0;this.Js=this.Is=!1;this.Ns=this.Ks=this.rt=this.qt=this.Os=this.Ms=this.pj=this.oj=this.nj=this.mj=this.kj=this.lj=this.jj=this.Ls=this.rj=this.ij=this.qj=!0;this.au=this.$t=16;this.he=(new qd(5)).freeze();this.Jt=999999999;this.fd=null;pk(this);this.wc=null;this.Eh=!0;ok(this);this.ub=new lg;this.Eh=!1;this.U=new Xf;this.Ce=!1;this.ym=!0;this.Ub=this.Ve=!1;this.ba()};
M.prototype.rebuildParts=M.prototype.wk=function(){for(var a=this.Ay.i;a.next();){var b=a.value,c=a.key;(!b.$c()||b instanceof Wg)&&u('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.Xx.i;a.next();)b=a.value,c=a.key,b instanceof Wg||u('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.ny.i;a.next();)b=a.value,c=a.key,b instanceof
W||u('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=ob();for(b=this.selection.i;b.next();)(c=b.value.data)&&a.push(c);for(var b=ob(),d=this.Yu.i;d.next();)(c=d.value.data)&&b.push(c);c=ob();for(d=this.Of.i;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.i;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.cj.i;d.next();)e=d.value,null!==e.data&&
(c.push(e.data),c.push(e.location));d=this.U;d instanceof Xf&&Fl(this,d.aj);Fl(this,d.pg);Gl(this,d.pg);d instanceof Xf&&Hl(this,d.aj);for(d=0;d<a.length;d++)e=this.$g(a[d]),null!==e&&(e.Ia=!0);for(d=0;d<b.length;d++)e=this.$g(b[d]),null!==e&&(e.kg=!0);for(d=0;d<c.length;d+=2)e=this.$g(c[d]),null!==e&&(e.location=c[d+1]);pb(a);pb(b);pb(c)};
function Gl(a,b){if(null!==b){for(var c=a.U,d=Ia(b),e=0;e<d;e++){var f=La(b,e);c.me(f)?Jl(a,f,!1):c instanceof Xf&&Kl(a,f)}if(c instanceof Xf||c instanceof Yf){for(e=0;e<d;e++)f=La(b,e),c.me(f)&&Sl(a,f);if(c instanceof Xf)for(c=a.links;c.next();)Tl(c.value)}Ul(a,!1)}}function Jl(a,b,c){if(void 0!==b&&null!==b&&!a.V.Ua&&!a.nh.contains(b)){void 0===c&&(c=!0);var d=a.Tx(b),e=Vl(a,b,d);null!==e&&(Yg(e),e=e.copy(),null!==e&&(e.ih=d,a.$l&&(e.Gj="Tool"),a.add(e),e.data=b,c&&Sl(a,b)))}}M.prototype.Tx=function(a){return this.U.Tx(a)};
var Wl=!1,Xl=!1;function Vl(a,b,c){var d=!1,e=a.U;e instanceof Xf&&(d=e.iy(b));d?(b=a.Xx.ha(c),null===b&&(b=a.Xx.ha(""),null===b&&(Xl||(Xl=!0,Da('No Group template found for category "'+c+'"'),Da("  Using default group template")),b=a.Gz))):(b=a.Ay.ha(c),null===b&&(b=a.Ay.ha(""),null===b&&(Wl||(Wl=!0,Da('No Node template found for category "'+c+'"'),Da("  Using default node template")),b=a.Iz)));return b}
function Sl(a,b){var c=a.U;if(c instanceof Xf||c instanceof Yf){var d=c.$a(b);if(void 0!==d){var e=qg(c,d),f=a.$g(b);if(null!==e&&null!==f){for(e=e.i;e.next();){var g=e.value;if(c instanceof Xf){var h=c;if(h.me(g)){if(f instanceof Wg&&h.Il(g)===d){var k=f,g=a.$g(g);null!==g&&(g.Ba=k)}}else{var l=a.Ef(g);if(null!==l&&f instanceof V&&(k=f,h.ik(g)===d&&(l.M=k),h.lk(g)===d&&(l.R=k),g=h.$i(g),Fa(g)))for(h=0;h<Ia(g);h++)if(La(g,h)===d){k.vd=l;break}}}else c instanceof Yf&&(l=c,l.me(g)&&f instanceof V&&
(k=f,l.Jl(g)===d&&(g=a.Uu(g),Il(a,k,g))))}sg(c,d)}c instanceof Xf?(c=c.Il(b),void 0!==c&&(c=a.pe(c),c instanceof Wg&&(f.Ba=c))):c instanceof Yf&&(c=c.Jl(b),void 0!==c&&f instanceof V&&(k=f,f=a.pe(c),Il(a,f,k)))}}}
function Il(a,b,c){if(null!==b&&null!==c){var d=a.Xa.CC,e=b,f=c;if(a.Lc)for(b=f.Hd;b.next();){if(b.value.R===f)return}else for(e=c,f=b,b=e.Hd;b.next();)if(b.value.M===e)return;null!==d&&ii(d,e,f,null,!0)||(d=a.Wu(c.data),b=Yl(a,d),null!==b&&(Yg(b),b=b.copy(),null!==b&&(b.ih=d,b.M=e,b.R=f,a.add(b),b.data=c.data)))}}function Hl(a,b){if(null!==b){for(var c=Ia(b),d=0;d<c;d++){var e=La(b,d);Kl(a,e)}Ul(a,!1)}}
function Kl(a,b){if(void 0!==b&&null!==b&&!a.V.Ua&&!a.vj.contains(b)){var c=a.Wu(b),d=Yl(a,c);if(null!==d&&(Yg(d),d=d.copy(),null!==d)){d.ih=c;var c=a.U,e=c.mF(b);""!==e&&(d.Gf=e);e=c.ik(b);void 0!==e&&(e=a.pe(e),e instanceof V&&(d.M=e));e=c.pF(b);""!==e&&(d.yg=e);e=c.lk(b);void 0!==e&&(e=a.pe(e),e instanceof V&&(d.R=e));c=c.$i(b);if(Fa(c))for(var e=Ia(c),f=0;f<e;f++){var g=La(c,f),g=a.pe(g);null!==g&&(g.vd=d)}a.add(d);d.data=b}}}
M.prototype.Wu=function(a){var b=this.U,c="";b instanceof Xf?c=b.Wu(a):b instanceof Yf&&(c=b.oF(a));return c};var Zl=!1;function Yl(a,b){var c=a.ny.ha(b);null===c&&(c=a.ny.ha(""),null===c&&(Zl||(Zl=!0,Da('No Link template found for category "'+b+'"'),Da("  Using default link template")),c=a.Hz));return c}function Fl(a,b){for(var c=Ia(b),d=0;d<c;d++){var e=La(b,d);Ll(a,e)}}
function Ll(a,b){if(void 0!==b&&null!==b){var c=a.$g(b);if(null!==c){c.Ia=!1;c.kg=!1;var d=c.layer;if(null!==d&&d.g===a){var e=a.U;if(e instanceof Xf&&c instanceof V){var f=c,g=e.$a(f.data);if(void 0!==g){for(var h=f.Hd;h.next();)rg(e,g,h.value.data);f.Ke&&(h=f.vd,null!==h&&rg(e,g,h.data));if(f instanceof Wg)for(f=f.mc;f.next();)h=f.value.data,e.me(h)&&rg(e,g,h)}}else if(e instanceof Yf&&c instanceof V){f=c;h=a.Ef(f.data);if(null!==h){h.Ia=!1;h.kg=!1;var k=h.layer;if(null!==k){var l=k.Xd(-1,h,!1);
0<=l&&a.ec(Rf,"parts",k,h,null,l,null);l=h.Rr;null!==l&&l(h,k,null)}}h=a.Lc;for(f=f.Hd;f.next();)k=f.value,k=(h?k.R:k.M).data,e.me(k)&&rg(e,g,k)}e=d.Xd(-1,c,!1);0<=e&&a.ec(Rf,"parts",d,c,null,e,null);e=c.Rr;null!==e&&e(c,d,null)}}}}M.prototype.findPartForKey=M.prototype.gF=function(a){if(null===a||void 0===a)return null;a=this.U.He(a);return null===a?null:this.nh.ha(a)};
M.prototype.findNodeForKey=M.prototype.pe=function(a){if(null===a||void 0===a)return null;a=this.U.He(a);if(null===a)return null;a=this.nh.ha(a);return a instanceof V?a:null};M.prototype.findPartForData=M.prototype.$g=function(a){if(null===a)return null;var b=this.nh.ha(a);return null!==b?b:b=this.vj.ha(a)};M.prototype.findNodeForData=M.prototype.Uu=function(a){if(null===a)return null;a=this.nh.ha(a);return a instanceof V?a:null};
M.prototype.findLinkForData=M.prototype.Ef=function(a){return null===a?null:this.vj.ha(a)};M.prototype.findNodesByExample=function(a){for(var b=new Xb,c=this.Vm.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var g=arguments[f];if(Ea(g)&&$l(this,e,g)){b.add(d);break}}}return b.i};
M.prototype.findLinksByExample=function(a){for(var b=new Xb,c=this.Rm.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var g=arguments[f];if(Ea(g)&&$l(this,e,g)){b.add(d);break}}}return b.i};function $l(a,b,c){for(var d in c){var e=b[d],f=c[d];if(Fa(f)){if(!Fa(e)||e.length>=f.length)return!1;for(var g=0;g<e.length;g++){var h=e[g],k=f[g];if(void 0!==k&&!am(a,h,k))return!1}}else if(!am(a,e,f))return!1}return!0}
function am(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(Ea(b)&&Ea(c)){if(!$l(a,b,c))return!1}else if(b!==c)return!1;return!0}G(M,{BI:"nodeTemplate"},function(){return this.Bh.ha("")},function(a){var b=this.Bh.ha("");b!==a&&(ra(a,O,M,"nodeTemplate"),this.Bh.add("",a),this.h("nodeTemplate",b,a),this.V.Ua||this.wk())});
G(M,{Ay:"nodeTemplateMap"},function(){return this.Bh},function(a){var b=this.Bh;b!==a&&(ra(a,Fb,M,"nodeTemplateMap"),this.Bh=a,this.h("nodeTemplateMap",b,a),this.V.Ua||this.wk())});G(M,{YH:"groupTemplate"},function(){return this.yj.ha("")},function(a){var b=this.yj.ha("");b!==a&&(ra(a,Wg,M,"groupTemplate"),this.yj.add("",a),this.h("groupTemplate",b,a),this.V.Ua||this.wk())});
G(M,{Xx:"groupTemplateMap"},function(){return this.yj},function(a){var b=this.yj;b!==a&&(ra(a,Fb,M,"groupTemplateMap"),this.yj=a,this.h("groupTemplateMap",b,a),this.V.Ua||this.wk())});G(M,{pI:"linkTemplate"},function(){return this.si.ha("")},function(a){var b=this.si.ha("");b!==a&&(ra(a,W,M,"linkTemplate"),this.si.add("",a),this.h("linkTemplate",b,a),this.V.Ua||this.wk())});
G(M,{ny:"linkTemplateMap"},function(){return this.si},function(a){var b=this.si;b!==a&&(ra(a,Fb,M,"linkTemplateMap"),this.si=a,this.h("linkTemplateMap",b,a),this.V.Ua||this.wk())});G(M,{IF:null},function(){return this.Qk},function(a){this.Qk=a});
G(M,{Yd:"isMouseCaptured"},function(){return this.iA},function(a){var b=this.Oa;null!==b&&(a?(this.C.bubbles=!1,b.removeEventListener("mousemove",this.Tn,!1),b.removeEventListener("mousedown",this.Sn,!1),b.removeEventListener("mouseup",this.Vn,!1),b.removeEventListener("mousewheel",this.ng,!1),b.removeEventListener("DOMMouseScroll",this.ng,!1),b.removeEventListener("mouseout",this.Un,!1),window.addEventListener("mousemove",this.Tn,!0),window.addEventListener("mousedown",this.Sn,!0),window.addEventListener("mouseup",
this.Vn,!0),window.addEventListener("mousewheel",this.ng,!0),window.addEventListener("DOMMouseScroll",this.ng,!0),window.addEventListener("mouseout",this.Un,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.Tn,!0),window.removeEventListener("mousedown",this.Sn,!0),window.removeEventListener("mouseup",this.Vn,!0),window.removeEventListener("mousewheel",this.ng,!0),window.removeEventListener("DOMMouseScroll",this.ng,!0),window.removeEventListener("mouseout",
this.Un,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.Tn,!1),b.addEventListener("mousedown",this.Sn,!1),b.addEventListener("mouseup",this.Vn,!1),b.addEventListener("mousewheel",this.ng,!1),b.addEventListener("DOMMouseScroll",this.ng,!1),b.addEventListener("mouseout",this.Un,!1)),this.iA=a)});
G(M,{position:"position"},function(){return this.xa},function(a){var b=this.xa;if(!b.A(a)){ra(a,z,M,"position");var c=this.Va.copy();a=a.copy();if(!this.Ub&&null!==this.Oa){this.Ub=!0;var d=this.scale;Ek(this,a,this.Xc,this.eb/d,this.cb/d,this.im,!1);this.Ub=!1}this.xa=a.O();a=this.qb;a.Gc&&Zj(a,b,this.xa);this.Ub||this.ds(c,this.Va)}});G(M,{zF:"initialPosition"},function(){return this.ut},function(a){this.ut.A(a)||(ra(a,z,M,"initialPosition"),this.ut=a.O())});
G(M,{AF:"initialScale"},function(){return this.vt},function(a){this.vt!==a&&(w(a,"number",M,"initialScale"),this.vt=a)});G(M,{Gr:"grid"},function(){null===this.wc&&wk(this);return this.wc},function(a){var b=this.wc;if(b!==a){null===b&&(wk(this),b=this.wc);ra(a,L,M,"grid");a.type!==xk&&u("Diagram.grid must be a Panel of type Panel.Grid");var c=b.I;null!==c&&c.remove(b);this.wc=a;a.name="GRID";null!==c&&c.add(a);Rk(this);this.ba();this.h("grid",b,a)}});
H(M,{Va:"viewportBounds"},function(){var a=this.qB;if(null===this.Oa)return a;var b=this.xa,c=this.Eb;a.k(b.x,b.y,Math.max(this.eb,0)/c,Math.max(this.cb,0)/c);return a});G(M,{eC:"fixedBounds"},function(){return this.lt},function(a){var b=this.lt;b.A(a)||(ra(a,D,M,"fixedBounds"),-Infinity!==a.width&&Infinity!==a.height&&-Infinity!==a.height||u("fixedBounds width/height must not be Infinity"),this.lt=a=a.O(),this.Rb(),this.h("fixedBounds",b,a))});
G(M,{gD:"scrollMargin"},function(){return this.ix},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"scrollMargin");var b=this.ix;b.A(a)||(this.ix=a=a.O(),this.Rb(),this.h("scrollMargin",b,a))});G(M,{hD:"scrollMode"},function(){return this.jx},function(a){var b=this.jx;b!==a&&(va(a,M,M,"scrollMode"),this.jx=a,a===ik&&Ck(this,!1),this.h("scrollMode",b,a))});
G(M,{QC:"positionComputation"},function(){return this.$w},function(a){var b=this.$w;b!==a&&(null!==a&&w(a,"function",M,"positionComputation"),this.$w=a,Ck(this,!1),this.h("positionComputation",b,a))});G(M,{fD:"scaleComputation"},function(){return this.bx},function(a){var b=this.bx;b!==a&&(null!==a&&w(a,"function",M,"scaleComputation"),this.bx=a,Cl(this,this.scale,this.scale),this.h("scaleComputation",b,a))});H(M,{Xc:"documentBounds"},function(){return this.ft});
function Fk(a,b){a.sh=!1;var c=a.ft;c.A(b)||(b=b.O(),a.ft=b,Ck(a,!1),a.ma("DocumentBoundsChanged",null,c.copy()),Ok(a))}G(M,{scale:"scale"},function(){return this.Eb},function(a){var b=this.Eb;ua(a,M,"scale");b!==a&&Cl(this,b,a)});G(M,{qn:"autoScale"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(va(a,M,M,"autoScale"),this.Ek=a,this.h("autoScale",b,a),a!==ah&&Ck(this,!1))});
G(M,{aI:"initialAutoScale"},function(){return this.Dj},function(a){var b=this.Dj;b!==a&&(va(a,M,M,"initialAutoScale"),this.Dj=a,this.h("initialAutoScale",b,a))});G(M,{BF:"initialViewportSpot"},function(){return this.wt},function(a){var b=this.wt;b!==a&&(ra(a,R,M,"initialViewportSpot"),a.Kc()||u("initialViewportSpot must be a real Spot: "+a),this.wt=a,this.h("initialViewportSpot",b,a))});
G(M,{yF:"initialDocumentSpot"},function(){return this.tt},function(a){var b=this.tt;b!==a&&(ra(a,R,M,"initialDocumentSpot"),a.Kc()||u("initialViewportSpot must be a real Spot: "+a),this.tt=a,this.h("initialDocumentSpot",b,a))});G(M,{mg:"minScale"},function(){return this.Kt},function(a){ua(a,M,"minScale");var b=this.Kt;b!==a&&(0<a?(this.Kt=a,this.h("minScale",b,a),a>this.scale&&(this.scale=a)):za(a,"> 0",M,"minScale"))});
G(M,{lg:"maxScale"},function(){return this.It},function(a){ua(a,M,"maxScale");var b=this.It;b!==a&&(0<a?(this.It=a,this.h("maxScale",b,a),a<this.scale&&(this.scale=a)):za(a,"> 0",M,"maxScale"))});G(M,{Wl:"zoomPoint"},function(){return this.uu},function(a){this.uu.A(a)||(ra(a,z,M,"zoomPoint"),this.uu=a=a.O())});G(M,{Gx:"contentAlignment"},function(){return this.im},function(a){var b=this.im;b.A(a)||(ra(a,R,M,"contentAlignment"),this.im=a=a.O(),this.h("contentAlignment",b,a),Ck(this,!1))});
G(M,{bI:"initialContentAlignment"},function(){return this.Em},function(a){var b=this.Em;b.A(a)||(ra(a,R,M,"initialContentAlignment"),this.Em=a=a.O(),this.h("initialContentAlignment",b,a))});G(M,{padding:"padding"},function(){return this.he},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"padding");var b=this.he;b.A(a)||(this.he=a=a.O(),this.Rb(),this.h("padding",b,a))});H(M,{Of:"nodes"},function(){return this.Vm.i});H(M,{links:"links"},function(){return this.Rm.i});H(M,{cj:"parts"},function(){return this.hb.i});
M.prototype.findTopLevelNodesAndLinks=function(){for(var a=new Xb(O),b=this.Vm.i;b.next();){var c=b.value;c.Kn&&a.add(c)}for(b=this.Rm.i;b.next();)c=b.value,c.Kn&&a.add(c);return a.i};M.prototype.findTopLevelGroups=function(){return this.Sj.i};G(M,{ub:"layout"},function(){return this.fd},function(a){var b=this.fd;b!==a&&(ra(a,lg,M,"layout"),null!==b&&(b.g=null,b.group=null),this.fd=a,a.g=this,a.group=null,this.Ps=!0,this.h("layout",b,a),this.wd())});
M.prototype.layoutDiagram=function(a){Ak(this);a&&Ul(this,!0);Tk(this,!1)};function Ul(a,b){for(var c=a.Sj.i;c.next();)bm(a,c.value,b);null!==a.ub&&(b?a.ub.Me=!1:a.ub.v())}function bm(a,b,c){if(null!==b){for(var d=b.Tm.i;d.next();)bm(a,d.value,c);null!==b.ub&&(c?b.ub.Me=!1:b.ub.v())}}
function Tk(a,b){if(!a.nw){var c=a.ub,d=a.At;a.At=!0;var e=a.ya;a.ya=!0;try{a.Ab("Layout");for(var f=a.Sj.i;f.next();)cm(a,f.value,b);c.Me||b&&!c.yC||(c.doLayout(a),Ak(a),c.Me=!0)}finally{a.pd("Layout"),a.Ps=!c.Me,a.At=d,a.ya=e}}}function cm(a,b,c){if(null!==b){for(var d=b.Tm.i;d.next();)cm(a,d.value,c);d=b.ub;null===d||d.Me||c&&!d.yC||(b.Vw=!b.location.w(),d.doLayout(b),b.v(dm),d.Me=!0,Vk(a,b))}}
G(M,{Lc:"isTreePathToChildren"},function(){return this.zt},function(a){var b=this.zt;if(b!==a&&(w(a,"boolean",M,"isTreePathToChildren"),this.zt=a,this.h("isTreePathToChildren",b,a),!this.V.Ua))for(a=this.Of;a.next();)em(a.value)});M.prototype.findTreeRoots=function(){for(var a=new N(V),b=this.Of;b.next();){var c=b.value;c.Kn&&null===c.Ar()&&a.add(c)}return a.i};G(M,{Fd:null},function(){return this.aA},function(a){this.aA=a});
function jk(a){function b(a){var b=a.toLowerCase(),g=new N("function");c.add(a,g);c.add(b,g);d.add(a,a);d.add(b,a)}var c=new Fb("string",N),d=new Fb("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.pw=c;a.ow=d}
function Pb(a,b){var c=a.ow.ha(b);return null!==c?c:a.ow.ha(b.toLowerCase())}function fm(a,b){var c=a.pw.ha(b);if(null!==c)return c;c=a.pw.ha(b.toLowerCase());if(null!==c)return c;u("Unknown DiagramEvent name: "+b);return null}M.prototype.addDiagramListener=M.prototype.zx=function(a,b){w(a,"string",M,"addDiagramListener:name");w(b,"function",M,"addDiagramListener:listener");var c=fm(this,a);null!==c&&c.add(b)};
M.prototype.removeDiagramListener=M.prototype.VC=function(a,b){w(a,"string",M,"removeDiagramListener:name");w(b,"function",M,"addDiagramListener:listener");var c=fm(this,a);null!==c&&c.remove(b)};M.prototype.raiseDiagramEvent=M.prototype.ma=function(a,b,c){var d=fm(this,a),e=new Gf;e.g=this;e.name=Pb(this,a);void 0!==b&&(e.Zy=b);void 0!==c&&(e.Dy=c);a=d.length;if(1===a)d=d.Y(0),d(e);else if(0!==a)for(b=d.be(),c=0;c<a;c++)d=b[c],d(e);return e.cancel};
function bi(a,b){var c=!1;a.Va.Wi(b)&&(c=!0);c=a.Rx(b,function(a){return a.J},function(a){return a instanceof W},!0,function(a){return a instanceof W},c);if(0!==c.count)for(c=c.i;c.next();){var d=c.value;d.nk&&d.zb()}}M.prototype.isUnoccupied=M.prototype.Mn=function(a,b){void 0===b&&(b=null);return gm(this,!1,null,b).Mn(a.x,a.y,a.width,a.height)};
function gm(a,b,c,d){null===a.Hc&&(a.Hc=new hm);if(a.Hc.Kr||a.Hc.group!==c||a.Hc.Xy!==d){if(null===c){b=a.sh?Bk(a):a.Xc.copy();b.$e(100,100);a.Hc.initialize(b);b=bb();for(var e=a.Of;e.next();){var f=e.value,g=f.layer;null!==g&&g.visible&&!g.bc&&im(a,f,d,b)}}else for(c.Q.w()||c.Ge(),b=c.Q.copy(),b.$e(20,20),a.Hc.initialize(b),b=bb(),e=c.mc;e.next();)f=e.value,f instanceof V&&im(a,f,d,b);fb(b);a.Hc.group=c;a.Hc.Xy=d;a.Hc.Kr=!1}else b&&jm(a.Hc);return a.Hc}
function im(a,b,c,d){if(b!==c)if(b.qa()&&b.canAvoid()){c=b.getAvoidableRect(d);d=a.Hc.un;b=a.Hc.sn;for(var e=c.x+c.width,f=c.y+c.height,g=c.x;g<e;g+=d){for(var h=c.y;h<f;h+=b)km(a.Hc,g,h);km(a.Hc,g,f)}for(h=c.y;h<f;h+=b)km(a.Hc,e,h);km(a.Hc,e,f)}else if(b instanceof Wg)for(b=b.mc;b.next();)e=b.value,e instanceof V&&im(a,e,c,d)}function lm(a,b){null===a.Hc||a.Hc.Kr||null!==b&&!b.canAvoid()||(a.Hc.Kr=!0)}
M.prototype.simulatedMouseMove=M.prototype.Cv=function(a,b,c){if(null!==qh){var d=qh.g;c instanceof M||(c=null);var e=rh;c!==e&&(null!==e&&e!==d&&null!==e.Xa.Zc&&(wh(e),qh.bv=!1,e.Xa.Zc.doSimulatedDragLeave()),rh=c,null!==c&&c!==d&&null!==c.Xa.Zc&&(Dh(),e=c.Xa.Zc,zh.contains(e)||zh.add(e),c.Xa.Zc.doSimulatedDragEnter()));if(null===c||c===d||!c.AB||c.Ta||!c.on)return!1;d=c.Xa.Zc;null!==d&&(null!==a?b=c.cp(a):null===b&&(b=new z),c.sb.S=b,c.sb.ek=!1,c.sb.up=!1,d.doSimulatedDragOver());return!0}return!1};
M.prototype.simulatedMouseUp=M.prototype.sD=function(a,b,c,d){if(null!==qh){null===d&&(d=b);b=rh;var e=qh.g;if(d!==b){if(null!==b&&b!==e&&null!==b.Xa.Zc)return wh(b),qh.bv=!1,b.Xa.Zc.doSimulatedDragLeave(),!1;rh=d;null!==d&&null!==d.Xa.Zc&&(Dh(),b=d.Xa.Zc,zh.contains(b)||zh.add(b),d.Xa.Zc.doSimulatedDragEnter())}if(null===d)return qh.doCancel(),!0;if(d!==this)return null!==a&&(c=d.cp(a)),d.sb.S=c,d.sb.ek=!1,d.sb.up=!0,a=d.Xa.Zc,null!==a&&a.doSimulatedDrop(),a=qh,null!==a&&(d=a.mayCopy(),a.Qe=d?"Copy":
"Move",a.stopTool()),!0}return!1};G(M,{FB:"autoScrollRegion"},function(){return this.Rs},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"autoScrollRegion");var b=this.Rs;b.A(a)||(this.Rs=a=a.O(),this.Rb(),this.h("autoScrollRegion",b,a))});function Xh(a,b){a.Qs.assign(b);mm(a,a.Qs).Vd(a.position)?wh(a):nm(a)}
function nm(a){-1===a.dm&&(a.dm=na(function(){if(-1!==a.dm){wh(a);var b=a.C.event;if(null!==b){var c=mm(a,a.Qs);c.Vd(a.position)||(a.position=c,a.C.S=a.GD(a.Qs),a.Cv(b,null,b.target.N)||a.doMouseMove(),a.sh=!0,Fk(a,a.Bf()),a.ed=!0,a.te(),nm(a))}}},a.WD))}function wh(a){-1!==a.dm&&(window.clearInterval(a.dm),a.dm=-1)}
function mm(a,b){var c=a.position,d=a.FB;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.Va,f=a.scale,e=db(0,0,e.width*f,e.height*f),g=Wa(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var h=Math.max(a.ns,1),h=h|0;g.x-=h;b.x<e.x+d.left/2&&(g.x-=h);b.x<e.x+d.left/4&&(g.x-=4*h)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(h=Math.max(a.ns,1),h|=0,g.x+=h,b.x>e.x+e.width-d.right/2&&(g.x+=h),b.x>e.x+e.width-d.right/4&&(g.x+=4*h));b.y>=e.y&&b.y<e.y+d.top?(h=Math.max(a.os,1),h|=0,g.y-=h,b.y<e.y+d.top/
2&&(g.y-=h),b.y<e.y+d.top/4&&(g.y-=4*h)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(h=Math.max(a.os,1),h|=0,g.y+=h,b.y>e.y+e.height-d.bottom/2&&(g.y+=h),b.y>e.y+e.height-d.bottom/4&&(g.y+=4*h));g.Vd(Q.fj)||(c=new z(c.x+g.x/f,c.y+g.y/f));fb(e);A(g);return c}M.prototype.makeSVG=M.prototype.makeSvg=function(a){void 0===a&&(a=new Sb);a.context="svg";a=om(this,a);return null!==a?a.Bk:null};
M.prototype.makeImage=function(a){void 0===a&&(a=new Sb);var b=(a.document||document).createElement("img");b.src=this.WF(a);return b};M.prototype.makeImageData=M.prototype.WF=function(a){void 0===a&&(a=new Sb);var b=om(this,a);return null!==b?b.toDataURL(a.type,a.details):""};var pm=!1;
function om(a,b){a.qb.Xh();a.te();if(null===a.Oa)return null;"object"!==typeof b&&u("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var f=b.maxSize;void 0===b.maxSize&&(c=!0,f="svg"===b.context?new Za(Infinity,Infinity):new Za(2E3,2E3));var g=b.position||null,h=b.parts||null,k=void 0===b.padding?1:b.padding,l=b.background||null,m=b.omitTemporary;void 0===m&&(m=!0);var n=b.document||document,p=b.elementFinished||null,q=b.showTemporary;
void 0===q&&(q=!m);m=b.showGrid;void 0===m&&(m=q);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof k?k=new qd(k):k instanceof qd||(k=new qd(0));k.left=Math.max(k.left,0);k.right=Math.max(k.right,0);k.top=Math.max(k.top,0);k.bottom=Math.max(k.bottom,0);a.um=!1;vk(a);var s=new Rb(null,n),t=s.getContext("2d"),v=s;if(!(d||e||h||g))return s.width=a.eb+Math.ceil(k.left+k.right),s.height=a.cb+Math.ceil(k.top+k.bottom),"svg"===b.context&&(t=v=new re(s.Yc,n,p),t instanceof re&&(a.um=!0)),
pl(a,t,k,new Za(s.width,s.height),a.Eb,a.xa,h,l,q,m),a.um=!0,v;var x=a.ib.Mu,B=new z(0,0),y=a.Xc.copy();y.VG(a.padding);if(q)for(var C=!0,C=a.Db.l,K=C.length,J=0;J<K;J++){var ba=C[J];if(ba.visible&&ba.bc)for(var ja=ba.hb.l,ba=ja.length,Y=0;Y<ba;Y++){var P=ja[Y];P.jy&&P.qa()&&(P=P.Q,P.w()&&y.fh(P))}}B.x=y.x;B.y=y.y;if(null!==h){var ha,C=!0,ja=h.i;for(ja.reset();ja.next();)K=ja.value,K instanceof O&&(P=K,ba=P.layer,null!==ba&&!ba.visible||null!==ba&&!q&&ba.bc||!P.qa()||(P=P.Q,P.w()&&(C?(C=!1,ha=P.copy()):
ha.fh(P))));C&&(ha=new D(0,0,0,0));y.width=ha.width;y.height=ha.height;B.x=ha.x;B.y=ha.y}null!==g&&g.w()&&(B=g,e||(e=x));C=ja=0;null!==k&&(ja=k.left+k.right,C=k.top+k.bottom);J=K=0;null!==d&&(K=d.width,J=d.height,isFinite(K)&&(K=Math.max(0,K-ja)),isFinite(J)&&(J=Math.max(0,J-C)));ha=g=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.w()?(g=K,ha=J):isNaN(J)?(g=K,ha=y.height*e):(g=y.width*e,ha=J)):null!==d?d.w()?(e=Math.min(K/y.width,J/y.height),g=K,ha=J):isNaN(J)?(e=K/y.width,g=K,ha=y.height*e):(e=J/y.height,
g=y.width*e,ha=J):null!==e?"NaN"===e&&f.w()?(e=Math.min((f.width-ja)/y.width,(f.height-C)/y.height),e>x?(e=x,g=y.width,ha=y.height):(g=f.width,ha=f.height)):(g=y.width*e,ha=y.height*e):(e=x,g=y.width,ha=y.height);null!==k?(g+=ja,ha+=C):k=new qd(0);null!==f&&(d=f.width,f=f.height,"svg"!==b.context&&c&&!pm&&(g>d||ha>f)&&(Da("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(g)+"x"+Math.ceil(ha)+" vs 2000x2000) Consider increasing the max size."),pm=!0),
isNaN(d)&&(d=2E3),isNaN(f)&&(f=2E3),isFinite(d)&&(g=Math.min(g,d)),isFinite(f)&&(ha=Math.min(ha,f)));s.width=Math.ceil(g);s.height=Math.ceil(ha);"svg"===b.context&&(t=v=new re(s.Yc,n,p),t instanceof re&&(a.um=!0));pl(a,t,k,new Za(Math.ceil(g),Math.ceil(ha)),e,B,h,l,q,m);a.um=!0;return v}M.inherit=function(a,b){w(a,"function",M,"inherit");w(b,"function",M,"inherit");b.Qg&&u("Cannot inherit from "+xa(b));yb(a,b)};
function qk(){this.mE="63ad05bbe23a1786468a4c741b6d2";this.mE===this._tk?this.Hg=!0:qm(this,!1)}
function qm(a,b){var c="p",d=window[tc("76a715b2f73f148a")][tc("72ba13b5")];if(tc("77bb5bb2f32603de")===window[tc("76a715b2f73f148a")][tc("6aba19a7ec351488")])try{a.Hg=!window[tc("4da118b7ec2108")]([tc("5bb806bfea351a904a84515e1b6d38b6")])([tc("49bc19a1e6")])([tc("59bd04a1e6380fa5539b")])([tc("7bb8069ae7")]===tc("7da71ca0ad381e90"));if(!1===a.Hg)return;a.Hg=!window[tc("4da118b7ec2108")]([tc("5bb806bfea351a904a84515e1b6d38b6")])([tc("49bc19a1e6")])([tc("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([tc("7bb8069ae7")]===tc("7da71ca0ad381e90"));
if(!1===a.Hg)return}catch(e){}for(var f=d[tc("76ad18b4f73e")],g=d[tc("73a612b6fb191d")](tc("35e7"))+2;g<f;g++)c+=d[g];d=c[tc("73a612b6fb191d")](tc("7da71ca0ad381e90"));0>=d&&tc("7da71ca0ad381e90")!==tc("7da71ca0ad381e90")&&(d=c[tc("73a612b6fb191d")](tc("76a715b2ef3e149757")));a.Hg=!(0<d&&d<c[tc("73a612b6fb191d")](tc("35")));a.Hg&&(c=window.document[tc("79ba13b2f7333e8846865a7d00")]("div"),d=tc("02cncncn"),"."===d[0]&&(d=d[tc("69bd14a0f724128a44")](1)),c[tc("79a417a0f0181a8946")]=d,window.document[tc("78a712aa")]?
(window.document[tc("78a712aa")][tc("7bb806b6ed32388c4a875b")](c),d=window[tc("7dad0290ec3b0b91578e5b40007031bf")](c)[tc("7dad0283f1390b81519f4645156528bf")](tc("78a704b7e62456904c9b12701b6532a8")),window.document[tc("78a712aa")][tc("68ad1bbcf533388c4a875b")](c),d&&-1!==d.indexOf(tc("@COLOR1"))&&-1!==d.indexOf(tc("@COLOR2"))&&(a.Hg=!1)):(a.Hg=null,b&&(a.Hg=!1)))}function nl(a,b){b.Wf.setTransform(b.Ee,0,0,b.Ee,0,0);null===a.Hg&&qm(a,!0);return 0<a.Hg&&a!==a.kE?!0:!1}
qk.prototype.t=function(){this.kE=null};
function rk(a,b){void 0!==b&&null!==b||u("Diagram setup requires an argument DIV.");null!==a.ob&&u("Diagram has already completed setup.");"string"===typeof b?a.ob=window.document.getElementById(b):b instanceof HTMLDivElement?a.ob=b:u("No DIV or DIV id supplied: "+b);null===a.ob&&u("Invalid DIV id; could not get element with id: "+b);void 0!==a.ob.N&&u("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.ob,null).position&&(a.ob.style.position="relative");
a.ob.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.ob.style["-ms-touch-action"]="none";a.ob.innerHTML="";a.ob.N=a;var c=new Rb(a);c.Yc.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.ob,null).getPropertyValue("direction")&&(a.kA=!0),c.style.zIndex="2",c.style.dJ="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.eb=a.ob.clientWidth||1;a.cb=a.ob.clientHeight||1;a.Oa=c;a.Wf=c.getContext("2d");var d=a.Wf;a.Ee=a.computePixelRatio();rl(a,a.eb,a.cb);a.Rv=d[tc("7eba17a4ca3b1a8346")][tc("78a118b7")](d,xc,4,4);a.ob.insertBefore(c.Yc,a.ob.firstChild);c=new Rb(null);c.width=1;c.height=1;a.rw=c;a.Sz=c.getContext("2d");var c=oa("div"),d=oa("div"),e=oa("div"),f=oa("div");c.style.position="absolute";c.style.overflow="auto";c.style.width=a.eb+"px";c.style.height=a.cb+"px";c.style.zIndex="1";d.style.position="absolute";
d.style.overflow="auto";d.style.width=a.eb+"px";d.style.height=a.cb+"px";d.style.zIndex="1";e.style.position="absolute";e.style.width="1px";e.style.height="1px";f.style.position="absolute";f.style.width="1px";f.style.height="1px";a.ob.appendChild(c);a.ob.appendChild(d);c.appendChild(e);d.appendChild(f);c.onscroll=a.zA;c.onmousedown=a.Rt;c.ontouchstart=a.Rt;c.N=a;c.QA=!0;d.onscroll=a.zA;d.onmousedown=a.Rt;d.ontouchstart=a.Rt;d.N=a;d.RA=!0;a.Fi=c;a.Gi=d;a.gx=e;a.hx=f;a.RC=ia(function(){a.pl=null;a.ba()},
300);a.LD=ia(function(){Bj(a)},250);a.preventDefault=function(a){a.preventDefault();return!1};a.Tn=function(b){if(a.isEnabled){a.Qk=!0;var c=a.jc;ca&&c.sk?(b.preventDefault(),b.simulated=!0,a.Mq=b):(a.jc=a.sb,a.sb=c,Jk(a,a,b,c,!0),a.Cv(b,null,b.target.N)||(a.doMouseMove(),a.Ea.isBeyondDragSize()&&(dh(a),a.Vk=0)))}};a.Sn=function(b){if(a.isEnabled){a.Qk=!0;var c=a.jc;if(ca&&null!==a.Mq)a.Mq=b,b.preventDefault();else if(ca&&400>b.timeStamp-a.Wk)b.preventDefault();else if(a.jc=a.sb,a.sb=c,Jk(a,a,b,c,
!0),c.ek=!0,c.le=b.detail,a.xj=c.copy(),!0===c.Yo.simulated)b.preventDefault(),b.simulated=!0;else if(qh=null,a.doMouseDown(),1===b.button)return b.preventDefault(),!1}};a.Vn=function(b){if(a.isEnabled){a.Qk=!0;var c=a.jc;if(ca){if(400>b.timeStamp-a.Wk){b.preventDefault();return}a.Wk=b.timeStamp}if(ca&&null!==a.Mq)a.Mq=null,b.preventDefault();else{a.jc=a.sb;a.sb=c;Jk(a,a,b,c,!0);c.up=!0;c.le=b.detail;if(da||ea)b.timeStamp-a.Wk<a.nB&&!a.Ea.isBeyondDragSize()?a.Vk++:a.Vk=1,a.Wk=b.timeStamp,c.le=a.Vk;
c.bubbles=b.bubbles;b.target.N&&(c.Sf=b.target.N);a.sD(b,null,new z,c.Sf)||(a.doMouseUp(),wh(a),Nk(c,b))}}};a.ng=function(b){if(a.isEnabled){var c=a.jc;a.jc=a.sb;a.sb=c;Jk(a,a,b,c,!0);c.bubbles=!0;c.ck=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();Nk(c,b)}};a.Un=function(){if(a.isEnabled){a.Qk=!1;var b=a.Ea;b.cancelWaitAfter();b instanceof Tg&&b.hideToolTip()}};a.BD=function(b){if(a.isEnabled){a.ju=!1;a.Lw=!0;var c=a.jc;a.jc=a.sb;a.sb=c;Lk(a,b,b.targetTouches[0],c,1<b.touches.length);
a.doMouseDown();2>b.touches.length&&Ik(a,c);Nk(c,b)}};a.AD=function(b){if(a.isEnabled){var c=a.jc;a.jc=a.sb;a.sb=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);Mk(a,b,d,c,1<b.touches.length);(a.Ea.isBeyondDragSize()||1<b.touches.length)&&dh(a);a.Cv(d?d:b,null,c.Sf)||(a.doMouseMove(),Nk(c,b))}};a.zD=function(b){if(a.isEnabled){dh(a);if(a.ju)return b.preventDefault(),!1;var c=a.jc;a.jc=a.sb;a.sb=c;if(1<b.touches.length)a.Cm&&(a.zw=!1);else{var d=
null,e=null;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);c.g=a;c.le=1;if(null!==e){var d=window.document.elementFromPoint(e.clientX,e.clientY),f,n;d&&d.N?(n=e,f=d.N):(n=b.changedTouches[0],f=a);Kk(f,n,c);f=e.screenX;n=e.screenY;var p=a.oA;b.timeStamp-a.Wk<a.nB&&!(25<Math.abs(p.x-f)||25<Math.abs(p.y-n))?a.Vk++:a.Vk=1;c.le=a.Vk;a.Wk=b.timeStamp;a.oA.k(f,n)}c.Cc=0;c.button=0;c.ek=!1;c.up=!0;c.ck=0;c.rc=!1;c.bubbles=!1;c.event=b;c.timestamp=Date.now();
c.Sf=null===d?b.target.N:d.N?d.N:null;c.Jd=null;a.sD(e?e:b,null,new z,c.Sf)||(a.doMouseUp(),Nk(c,b),a.Lw=!1)}}};a.mG=function(b){if("touch"===b.pointerType){var c=a.KA;void 0===c[b.pointerId]&&(a.lq++,c[b.pointerId]=b);a.Ue[0]=null;a.Ue[1]=null;for(var d in c)if(null===a.Ue[0])a.Ue[0]=c[d];else if(null===a.Ue[1]){a.Ue[1]=c[d];break}a.isEnabled&&(a.ju=!1,c=a.jc,a.jc=a.sb,a.sb=c,Lk(a,b,b,c,1<a.lq),a.doMouseDown(),2>a.lq&&Ik(a,c),Nk(c,b))}};a.oG=function(b){if("touch"===b.pointerType&&!(2>a.lq)){var c=
a.Ue;c[0].pointerId===b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.jc,a.jc=a.sb,a.sb=c,Mk(a,b,b,c,!0),dh(a),a.Cv(b,null,c.Sf)||(a.doMouseMove(),Nk(c,b)))}};a.nG=function(b){if("touch"===b.pointerType){var c=a.KA;void 0!==c[b.pointerId]&&(a.lq--,delete c[b.pointerId],c=a.Ue,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};vk(a);uk(a)}
function rm(a){1<arguments.length&&u("Palette constructor can only take one optional argument, the DIV HTML element or its id.");M.call(this,a);this.yu=!0;this.Xj=!1;this.Ta=!0;this.Gx=vd;this.ub=new sm}yb(rm,M);vb("Palette",rm);
function nk(a){1<arguments.length&&u("Overview constructor can only take one optional argument, the DIV HTML element or its id.");M.call(this,a);this.hh.isEnabled=!1;this.Ub=!0;this.Ci=null;this.bE=this.it=!0;this.KG("drawShadows",!1);var b=new O,c=new X;c.stroke="magenta";c.Na=2;c.fill="transparent";c.name="BOXSHAPE";b.yk=!0;b.Qy="BOXSHAPE";b.py="BOXSHAPE";b.cD="BOXSHAPE";b.cursor="move";b.add(c);this.Gk=b;c=new Vg;c.type=Pi;c.qe=Dd;var d=new Qi;d.Jf=!0;c.add(d);d=new X;d.Ti=Dd;d.jb="Rectangle";
d.ka=new Za(64,64);d.cursor="se-resize";d.alignment=Hd;c.add(d);b.aD=c;this.sl=this.Ui=!1;this.Fe=this.kr=!0;this.FB=0;this.px=oa("canvas");this.lE=this.px.getContext("2d");this.Xa.Zc=new tm;this.Xa.dD=new um;var e=this;this.click=function(){var a=e.Ci;if(null!==a){var b=a.Va,c=e.C.S;a.position=new z(c.x-b.width/2,c.y-b.height/2)}};this.NC=function(){vm(e)};this.MC=function(){null!==e.Ci&&(e.Rb(),e.ba())};this.qn=Gk;this.Ub=!1}yb(nk,M);vb("Overview",nk);
function wm(a){a.Ub||a.Qc||!1!==a.Ve||(a.Ve=!0,requestAnimationFrame(function(){if(a.Ve&&!a.Qc&&(a.Ve=!1,null!==a.ob)){a.Qc=!0;Ak(a);a.Xc.w()||Fk(a,a.Bf());null===a.ob&&u("No div specified");null===a.Oa&&u("No canvas specified");if(a.ed){var b=a.Ci;if(null!==b&&!b.qb.jg&&!b.qb.Gc){var b=a.Wf,c=a.px;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Oa.width,a.Oa.height);b.drawImage(c,0,0);c=a.ld;c.reset();1!==a.Eb&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.xa.x,-a.xa.y);b.setTransform(c.m11,
c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Db.l,d=c.length,e=0;e<d;e++)c[e].oe(b,a);a.Ej=!1;a.ed=!1}}a.Qc=!1}}))}nk.prototype.computePixelRatio=function(){return 1};
nk.prototype.oe=function(){null===this.ob&&u("No div specified");null===this.Oa&&u("No canvas specified");if(this.ed){var a=this.Ci;if(null!==a&&!a.qb.jg&&!a.qb.Gc){if(!this.bE){var b=a.Xa.Zc;if(null!==b&&b.ca)return}ll(this);b=a.Gr;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Rk(a);var c=this.Oa,b=this.Wf,d=this.px,e=this.lE;d.width=c.width;d.height=c.height;b.Fs="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.Oa.width,this.Oa.height);d=this.ld;d.reset();1!==this.Eb&&d.scale(this.scale);
0===this.position.x&&0===this.position.y||d.translate(-this.xa.x,-this.xa.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);for(var d=this.it,f=this.Va,g=a.Db.l,h=g.length,a=0;a<h;a++){var k=g[a],l=b,m=f,n=d;if(k.visible&&0!==k.ic&&(void 0===n&&(n=!0),n||!k.bc)){1!==k.ic&&(l.globalAlpha=k.ic);for(var n=this.scale,k=k.hb.l,p=k.length,q=0;q<p;q++){var s=k[q],t=s.Q;t.If(m)&&(1<t.width*n||1<t.height*n?s.oe(l,this):dk(s,l))}l.globalAlpha=1}}e.drawImage(c.Yc,0,0);c=this.Db.l;e=c.length;for(a=0;a<e;a++)c[a].oe(b,
this);this.ed=this.Ej=!1}}};
G(nk,{Cy:"observed"},function(){return this.Ci},function(a){var b=this.Ci;null!==a&&ra(a,M,nk,"observed");a instanceof nk&&u("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.hg),b.VC("ViewportBoundsChanged",this.NC),b.VC("DocumentBoundsChanged",this.MC),b.al.remove(this)),this.Ci=a,null!==a&&(a.zx("ViewportBoundsChanged",this.NC),a.zx("DocumentBoundsChanged",this.MC),a.al.add(this),this.add(this.hg),vm(this)),this.Rb(),this.h("observed",b,a))});
G(nk,{hg:"box"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(this.Gk=a,this.remove(b),this.add(this.Gk),vm(this),this.h("box",b,a))});G(nk,{VH:"drawsTemporaryLayers"},function(){return this.it},function(a){this.it!==a&&(this.it=a,this.Jy())});function vm(a){var b=a.hg;if(null!==b){var c=a.Ci;if(null!==c){a.ed=!0;var c=c.Va,d=b.ps,e=Ya();e.k(c.width,c.height);d.ka=e;$a(e);a=2/a.scale;d instanceof X&&(d.Na=a);b.location=new z(c.x-a/2,c.y-a/2)}}}
nk.prototype.Bf=function(){var a=this.Ci;return null===a?Q.VD:a.Xc};nk.prototype.ay=function(){!0!==this.ed&&(this.ed=!0,wm(this))};nk.prototype.ds=function(a){this.Ub||(yk(this),this.ba(),Ok(this),this.Rb(),vm(this),this.ma("ViewportBoundsChanged",null,a))};function tm(){$g.call(this);this.Mj=null}yb(tm,$g);
tm.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Xj||!a.Fe)return!1;var b=a.Cy;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.Va;this.Mj=new z(c.width/2,c.height/2);a=a.Yb.S;b.position=new z(a.x-this.Mj.x,a.y-this.Mj.y)}return!0};tm.prototype.doActivate=function(){this.Mj=null;$g.prototype.doActivate.call(this)};
tm.prototype.moveParts=function(){var a=this.g,b=a.Cy;if(null!==b){var c=a.hg;if(null!==c){if(null===this.Mj){var d=a.Yb.S,c=c.location;this.Mj=new z(d.x-c.x,d.y-c.y)}a=a.C.S;b.position=new z(a.x-this.Mj.x,a.y-this.Mj.y)}}};function um(){Ni.call(this)}yb(um,Ni);um.prototype.resize=function(a){var b=this.g.Cy;if(null!==b){var c=b.Va.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function $f(a){1<arguments.length&&u("Brush constructor can take at most one optional argument, the Brush type.");sb(this);this.pa=!1;void 0===a?(this.da=bg,this.hm="black"):"string"===typeof a?(this.da=bg,this.hm=a):(this.da=a,this.hm="black");var b=this.da;b===cg?(this.en=vd,this.wm=Gd):this.wm=b===dg?this.en=Dd:this.en=td;this.gu=0;this.jt=NaN;this.Vf=this.Wt=this.Uf=null;this.$v=this.aw=0}vb("Brush",$f);var bg;$f.Solid=bg=I($f,"Solid",0);var cg;$f.Linear=cg=I($f,"Linear",1);var dg;
$f.Radial=dg=I($f,"Radial",2);var xm;$f.Pattern=xm=I($f,"Pattern",4);$f.prototype.copy=function(){var a=new $f;a.da=this.da;a.hm=this.hm;a.en=this.en.O();a.wm=this.wm.O();a.gu=this.gu;a.jt=this.jt;null!==this.Uf&&(a.Uf=this.Uf.copy());a.Wt=this.Wt;return a};$f.prototype.va=function(){this.freeze();Object.freeze(this);return this};$f.prototype.freeze=function(){this.pa=!0;null!==this.Uf&&this.Uf.freeze();return this};
$f.prototype.wa=function(){Object.isFrozen(this)&&u("cannot thaw constant: "+this);this.pa=!1;null!==this.Uf&&this.Uf.wa();return this};$f.prototype.toString=function(){var a="Brush(";if(this.type===bg)a+=this.color;else if(a=this.type===cg?a+"Linear ":this.type===dg?a+"Radial ":this.type===xm?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.or)for(var b=this.or.i;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
$f.prototype.addColorStop=$f.prototype.addColorStop=function(a,b){pa(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&za(a,"0 <= loc <= 1",$f,"addColorStop:loc");w(b,"string",$f,"addColorStop:color");null===this.Uf&&(this.Uf=new Fb("number","string"));this.Uf.add(a,b);this.da===bg&&(this.type=cg);this.Vf=null};
G($f,{type:"type"},function(){return this.da},function(a){pa(this,a);va(a,$f,$f,"type");this.da=a;this.start.Gd()&&(a===cg?this.start=vd:a===dg&&(this.start=Dd));this.end.Gd()&&(a===cg?this.end=Gd:a===dg&&(this.end=Dd));this.Vf=null});G($f,{color:"color"},function(){return this.hm},function(a){pa(this,a);this.hm=a;this.Vf=null});G($f,{start:"start"},function(){return this.en},function(a){pa(this,a);ra(a,R,$f,"start");this.en=a.O();this.Vf=null});
G($f,{end:"end"},function(){return this.wm},function(a){pa(this,a);ra(a,R,$f,"end");this.wm=a.O();this.Vf=null});G($f,{vs:"startRadius"},function(){return this.gu},function(a){pa(this,a);ua(a,$f,"startRadius");0>a&&za(a,">= zero",$f,"startRadius");this.gu=a;this.Vf=null});G($f,{ur:"endRadius"},function(){return this.jt},function(a){pa(this,a);ua(a,$f,"endRadius");0>a&&za(a,">= zero",$f,"endRadius");this.jt=a;this.Vf=null});
G($f,{or:"colorStops"},function(){return this.Uf},function(a){pa(this,a);this.Uf=a;this.Vf=null});G($f,{pattern:"pattern"},function(){return this.Wt},function(a){pa(this,a);this.Wt=a;this.Vf=null});
$f.randomColor=function(a,b){void 0===a&&(a=128);void 0===b&&(b=Math.max(a,255));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};var ym=oa("canvas").getContext("2d");
$f.isValidColor=function(a){if("black"===a)return!0;if(""===a)return!1;ym.fillStyle="#000000";var b=ym.fillStyle;ym.fillStyle=a;if(ym.fillStyle!==b)return!0;ym.fillStyle="#FFFFFF";b=ym.fillStyle;ym.fillStyle=a;return ym.fillStyle!==b};
function U(){sb(this);this.T=30723;this.ic=1;this.eg=null;this.yb="";this.Nb=this.nb=null;this.xa=(new z(NaN,NaN)).freeze();this.Ae=(new Za(NaN,NaN)).freeze();this.yi=Q.so;this.wi=Q.UD;this.ld=new ib;this.bm=new ib;this.Ij=new ib;this.Eb=this.gt=1;this.cm=0;this.Vg=zm;this.Kp=Q.ro;this.nc=(new D(NaN,NaN,NaN,NaN)).freeze();this.Bb=(new D(NaN,NaN,NaN,NaN)).freeze();this.hc=(new D(0,0,NaN,NaN)).freeze();this.Vq=this.Zo=this.G=this.mq=this.nq=null;this.Wq=this.$o=Infinity;this.yo=this.Md=ee;this.Aq=0;
this.Ei=1;this.Fo=0;this.gi=1;this.Eq=-Infinity;this.Dq=0;this.Fq=Q.fj;this.Gq=Ei;this.Mo="";this.gc=this.F=null;this.em=-1;this.cl=this.kh=this.Ik=this.dn=null}U.Qg=!0;vb("GraphObject",U);
U.prototype.cloneProtected=function(a){a.T=this.T|6144;a.ic=this.ic;a.yb=this.yb;a.nb=this.nb;a.Nb=this.Nb;a.xa.assign(this.xa);a.Ae.assign(this.Ae);a.yi=this.yi.O();a.wi=this.wi.O();a.Ij=this.Ij.copy();a.Eb=this.Eb;a.cm=this.cm;a.Vg=this.Vg;a.Kp=this.Kp.O();a.nc.assign(this.nc);a.Bb.assign(this.Bb);a.hc.assign(this.hc);a.mq=this.mq;a.G=null!==this.G?this.G.copy():null;a.Zo=this.Zo;a.$o=this.$o;a.Vq=this.Vq;a.Wq=this.Wq;a.Md=this.Md.O();a.yo=this.yo.O();a.Aq=this.Aq;a.Ei=this.Ei;a.Fo=this.Fo;a.gi=
this.gi;a.Eq=this.Eq;a.Dq=this.Dq;a.Fq=this.Fq.O();a.Gq=this.Gq;a.Mo=this.Mo;a.F=null!==this.F?this.F.copy():null;a.gc=this.gc;a.em=this.em;if(null!==this.Ik){a.Ik=Ka(this.Ik);for(var b=0;b<this.Ik.length;b++){var c=this.Ik[b];a[c]=this[c]}}null!==this.kh&&(a.kh=this.kh.copy())};U.prototype.Zg=function(a){a.nq=null;a.cl=null;a.H()};U.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);return a};U.prototype.copy=function(){return this.clone()};
U.prototype.toString=function(){return xa(Object.getPrototypeOf(this))+"#"+ub(this)};var Ri;U.None=Ri=I(U,"None",0);var zm;U.Default=zm=I(U,"Default",0);var Am;U.Vertical=Am=I(U,"Vertical",4);var Bm;U.Horizontal=Bm=I(U,"Horizontal",5);var Ne;U.Fill=Ne=I(U,"Fill",3);var Ti;U.Uniform=Ti=I(U,"Uniform",1);var Ui;U.UniformToFill=Ui=I(U,"UniformToFill",2);function Cm(a){a.F=new Dm}U.prototype.Wd=function(){var a=new Em;a.ni=td;a.Pi=td;a.li=10;a.Ni=10;a.ki=Fm;a.Mi=Fm;a.mi=0;a.Oi=0;this.G=a};
function Gm(a,b,c,d,e,f,g){var h=.001,k=f.length;a.moveTo(b,c);d-=b;h=e-c;0===d&&(d=.001);e=h/d;for(var l=Math.sqrt(d*d+h*h),m=0,n=!0,p=0===g?!1:!0;.1<=l;){if(p){h=f[m++%k];for(h-=g;0>h;)h+=f[m++%k],n=!n;p=!1}else h=f[m++%k];h>l&&(h=l);var q=Math.sqrt(h*h/(1+e*e));0>d&&(q=-q);b+=q;c+=e*q;n?a.lineTo(b,c):a.moveTo(b,c);l-=h;n=!n}}U.prototype.raiseChangedEvent=U.prototype.ec=function(a,b,c,d,e,f,g){var h=this.J;null!==h&&(h.Ql(a,b,c,d,e,f,g),0!==(this.T&1024)&&c===this&&a===If&&Hm(this,h,b))};
function Hm(a,b,c){var d=a.Cn();if(null!==d)for(var e=a.gc.i;e.next();){var f=e.value,g=null;if(null!==f.Sl){g=Bg(f,d,a);if(null===g)continue;f.Hv(a,g,c,null)}else if(f.ys){var h=b.g;null!==h&&f.Hv(a,h.U.Zr,c,h)}else{var k=d.data;if(null===k)continue;h=b.g;null!==h&&h.Dv||f.Hv(a,k,c,h)}null!==g&&(h=d.Su(f.Ck),null!==h&&f.JD(h,g,c))}}U.prototype.Su=function(a){return this.em===a?this:null};U.prototype.raiseChanged=U.prototype.h=function(a,b,c){this.ec(If,a,this,b,c)};
function Im(a,b,c,d,e){var f=a.nc,g=a.Ij;g.reset();Jm(a,g,b,c,d,e);a.Ij=g;f.x=b;f.y=c;f.width=d;f.height=e;g.Nr()||g.FD(f)}function Km(a,b,c,d){if(!1===a.Qf)return!1;d.multiply(a.transform);return c?a.If(b,d):a.zl(b,d)}
U.prototype.cC=function(a,b,c){if(!1===this.Qf)return!1;var d=this.sa;b=a.Xi(b);var e=!1;c&&(e=Yc(a.x,a.y,0,0,0,d.height)<b||Yc(a.x,a.y,0,d.height,d.width,d.height)<b||Yc(a.x,a.y,d.width,d.height,d.width,0)<b||Yc(a.x,a.y,d.width,0,0,0)<b);c||(e=Yc(a.x,a.y,0,0,0,d.height)<b&&Yc(a.x,a.y,0,d.height,d.width,d.height)<b&&Yc(a.x,a.y,d.width,d.height,d.width,0)<b&&Yc(a.x,a.y,d.width,0,0,0)<b);return e};U.prototype.jf=function(){return!0};
U.prototype.containsPoint=U.prototype.na=function(a){var b=Va();b.assign(a);this.transform.Ka(b);var c=this.Q;if(!c.w())return!1;var d=this.g;if(null!==d&&d.Lw){var e=d.Ux("extraTouchThreshold"),f=d.Ux("extraTouchArea"),g=f/2,h=this.sa,d=this.Sh()*d.scale,k=1/d;if(h.width*d<e&&h.height*d<e)return a=jd(c.x-g*k,c.y-g*k,c.width+f*k,c.height+f*k,b.x,b.y),A(b),a}if(this instanceof Vg||this instanceof X?jd(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.na(b)){if(this.kh&&!this.kh.na(b))return!1;if(null!==
this.Nb&&c.na(b)||null!==this.nb&&this.hc.na(a))return!0;A(b);return this.Vi(a)}A(b);return!1};U.prototype.Vi=function(a){var b=this.sa;return jd(0,0,b.width,b.height,a.x,a.y)};U.prototype.containsRect=U.prototype.Wi=function(a){if(0===this.angle)return this.Q.Wi(a);var b=this.sa,b=db(0,0,b.width,b.height),c=this.transform,d=!1,e=Wa(a.x,a.y);b.na(c.ah(e))&&(e.k(a.x,a.bottom),b.na(c.ah(e))&&(e.k(a.right,a.bottom),b.na(c.ah(e))&&(e.k(a.right,a.y),b.na(c.ah(e))&&(d=!0))));A(e);fb(b);return d};
U.prototype.containedInRect=U.prototype.zl=function(a,b){if(void 0===b)return a.Wi(this.Q);var c=this.sa,d=!1,e=Wa(0,0);a.na(b.Ka(e))&&(e.k(0,c.height),a.na(b.Ka(e))&&(e.k(c.width,c.height),a.na(b.Ka(e))&&(e.k(c.width,0),a.na(b.Ka(e))&&(d=!0))));return d};
U.prototype.intersectsRect=U.prototype.If=function(a,b){if(void 0===b&&(b=this.transform,0===this.angle))return a.If(this.Q);var c=this.sa,d=b,e=Wa(0,0),f=Wa(0,c.height),g=Wa(c.width,c.height),h=Wa(c.width,0),k=!1;if(a.na(d.Ka(e))||a.na(d.Ka(f))||a.na(d.Ka(g))||a.na(d.Ka(h)))k=!0;else{var c=db(0,0,c.width,c.height),l=Wa(a.x,a.y);c.na(d.ah(l))?k=!0:(l.k(a.x,a.bottom),c.na(d.ah(l))?k=!0:(l.k(a.right,a.bottom),c.na(d.ah(l))?k=!0:(l.k(a.right,a.y),c.na(d.ah(l))&&(k=!0))));A(l);fb(c);!k&&(Q.$u(a,e,f)||
Q.$u(a,f,g)||Q.$u(a,g,h)||Q.$u(a,h,e))&&(k=!0)}A(e);A(f);A(g);A(h);return k};U.prototype.getDocumentPoint=U.prototype.Ra=function(a,b){void 0===b&&(b=new z);a.Gd()&&u("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.sa;b.k(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.We.Ka(b);return b};U.prototype.getDocumentAngle=U.prototype.hk=function(){var a;a=this.We;1===a.m11&&0===a.m12?a=0:(a=180*Math.atan2(a.m12,a.m11)/Math.PI,0>a&&(a+=360));return a};
U.prototype.getDocumentScale=U.prototype.Sh=function(){if(0!==(this.T&4096)===!1)return this.gt;var a=this.Eb;return null!==this.I?a*this.I.Sh():a};U.prototype.getLocalPoint=U.prototype.jC=function(a,b){void 0===b&&(b=new z);b.assign(a);this.We.ah(b);return b};U.prototype.getNearestIntersectionPoint=U.prototype.kk=function(a,b,c){return this.Fn(a.x,a.y,b.x,b.y,c)};r=U.prototype;
r.Fn=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,k=-f.m12*g,l=-f.m21*g,m=f.m11*g,n=g*(f.m21*f.dy-f.m22*f.dx),p=g*(f.m12*f.dx-f.m11*f.dy);if(null!==this.ul)return f=this.Q,Q.kk(f.left,f.top,f.right,f.bottom,a,b,c,d,e);g=a*h+b*l+n;a=a*k+b*m+p;b=c*h+d*l+n;c=c*k+d*m+p;e.k(0,0);d=this.sa;c=Q.kk(0,0,d.width,d.height,g,a,b,c,e);e.transform(f);return c};
function jj(a,b,c,d,e){if(!1!==Wk(a)){var f=a.margin,g=f.right+f.left,f=f.top+f.bottom;b=Math.max(b-g,0);c=Math.max(c-f,0);e=e||0;d=Math.max((d||0)-g,0);e=Math.max(e-f,0);var g=a.angle,f=0,f=a.ka,h=0;a.Na&&(h=a.Na);90===g||270===g?(b=isFinite(f.height)?f.height+h:b,c=isFinite(f.width)?f.width+h:c):(b=isFinite(f.width)?f.width+h:b,c=isFinite(f.height)?f.height+h:c);var f=d||0,h=e||0,k=a instanceof L;switch(Lm(a,!0)){case Ri:h=f=0;k&&(c=b=Infinity);break;case Ne:isFinite(b)&&b>d&&(f=b);isFinite(c)&&
c>e&&(h=c);break;case Bm:isFinite(b)&&b>d&&(f=b);h=0;k&&(c=Infinity);break;case Am:isFinite(c)&&c>e&&(h=c),f=0,k&&(b=Infinity)}var k=a.se,l=a.Lf;f>k.width&&l.width<k.width&&(f=k.width);h>k.height&&l.height<k.height&&(h=k.height);d=Math.max(f/a.scale,l.width);e=Math.max(h/a.scale,l.height);k.width<d&&(d=Math.min(l.width,d));k.height<e&&(e=Math.min(l.height,e));b=Math.min(k.width,b);c=Math.min(k.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===g||270===g)f=b,b=c,c=f,f=d,d=e,e=f;a.nc.wa();a.Rn(b,c,
d,e);a.nc.freeze();a.nc.w()||u("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.nc.toString());Qk(a,!1)}}
r.ac=function(a,b,c,d,e){this.Zf();var f=bb();f.assign(this.Bb);this.Bb.wa();if(!1===Xk(this)){var g=this.Bb;g.x=a;g.y=b;g.width=c;g.height=d}else this.Kh(a,b,c,d);this.Bb.freeze();this.kh=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.I&&(e=this.I.hc,d=this.oa,null!==this.ul&&(d=this.Bb),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof Zb&&(a=this.hc,this.Ht>a.height||this.pi.ge>a.width))&&(c=!0);this.T=c?this.T|256:this.T&-257;this.Bb.w()||u("Non-real actualBounds has been set. Object "+
this+", actualBounds: "+this.Bb.toString());this.nv(f,this.Bb);fb(f)};r.Kh=function(){};function Mm(a,b,c,d,e){var f=a.Q;f.x=b;f.y=c;f.width=d;f.height=e;if(!a.ka.w()){f=a.nc;c=a.margin;b=c.right+c.left;var g=c.top+c.bottom;c=f.width+b;f=f.height+g;d+=b;e+=g;b=Lm(a,!0);c===d&&f===e&&(b=Ri);switch(b){case Ri:if(c>d||f>e)Qk(a,!0),jj(a,c>d?d:c,f>e?e:f);break;case Ne:Qk(a,!0);jj(a,d,e,0,0);break;case Bm:Qk(a,!0);jj(a,d,f,0,0);break;case Am:Qk(a,!0),jj(a,c,e,0,0)}}}
r.nv=function(){Nm(this,!1);var a=this.J;null!==a&&null!==a.g&&(a.mk(),this.Qt(a),this.ba(),a=this.J,null!==a&&(a.ps!==this&&a.bD!==this&&a.eD!==this||Om(a,!0)))};r.Qt=function(a){null!==this.cd&&Om(a,!0)};
r.oe=function(a,b){if(this.visible){var c=this.opacity,d=1;if(1!==c){if(0===c)return;d=a.globalAlpha;a.globalAlpha=d*c}if(a instanceof re)a:{if(this.visible){var e=null,f=a.fv;if(this instanceof L&&(this.type===Pm||this.type===Qm))Rm(this,a,b);else{var g=this.Bb;if(0!==g.width&&0!==g.height&&!isNaN(g.x)&&!isNaN(g.y)){var h=this.transform,k=this.I;0!==(this.T&4096)===!0&&Sm(this);var l=0!==(this.T&256),m=!1;this instanceof Zb&&Tm(this,a);if(l){m=k.jf()?k.sa:k.Q;if(this.kh)var n=this.kh,p=n.x,q=n.y,
s=n.width,n=n.height;else p=Math.max(g.x,m.x),q=Math.max(g.y,m.y),s=Math.min(g.right,m.right)-p,n=Math.min(g.bottom,m.bottom)-q;if(p>g.width+g.x||g.x>m.width+m.x||q>g.height+g.y||g.y>m.height+m.y)break a;m=!0;te(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(p,q,s,n);a.clip()}p=!1;if(this instanceof O&&(p=!0,!this.qa()))break a;q=!1;s=b.Pg;this.J&&s.drawShadows&&(q=this.J.rk);a.Ph.re=[1,0,0,1,0,0];null!==this.Nb&&(Um(this,a,this.Nb,!0,!0),this.Nb instanceof $f&&this.Nb.type===dg?(a.beginPath(),a.rect(g.x,
g.y,g.width,g.height),Vm(a,this.Nb)):a.fillRect(g.x,g.y,g.width,g.height));p&&this.rk&&s.drawShadows&&(te(a,1,0,0,1,0,0),g=this.ll,a.shadowOffsetX=g.x,a.shadowOffsetY=g.y,a.shadowColor=this.kl,a.shadowBlur=this.jl/b.scale,a.Ja());this instanceof L?te(a,h.m11,h.m12,h.m21,h.m22,h.dx,h.dy):a.Ph.re=[h.m11,h.m12,h.m21,h.m22,h.dx,h.dy];if(null!==this.nb){var n=this.sa,g=h=0,s=n.width,n=n.height,t=0;this instanceof X&&(n=this.za.Qa,h=n.x,g=n.y,s=n.width,n=n.height,t=this.gg);Um(this,a,this.nb,!0,!1);this.nb instanceof
$f&&this.nb.type===dg?(a.beginPath(),a.rect(h-t/2,g-t/2,s+t,n+t),Vm(a,this.nb)):a.fillRect(h-t/2,g-t/2,s+t,n+t)}s=g=h=0;q&&(null!==this.nb||null!==this.Nb||null!==k&&0!==(k.T&512)||null!==k&&k.type===tk&&k.Ze()!==this)?(Wm(this,!0),h=a.shadowOffsetX,g=a.shadowOffsetY,s=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Wm(this,!1);this.Yi(a,b);q&&0!==(this.T&512)===!0&&(a.shadowOffsetX=h,a.shadowOffsetY=g,a.shadowBlur=s);p&&q&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);l&&
(a.restore(),m&&a.Ie.pop(),vk(b,a));this instanceof L&&(e=a.Ie.pop());p&&q&&a.Ie.pop();null!==a.YB&&(null===e&&(f===a.fv?(te(a,1,0,0,1,0,0),e=a.Ie.pop()):e=a.fv),a.YB(this,e))}}}}else{if(this instanceof L&&(this.type===Pm||this.type===Qm)){Rm(this,a,b);1!==c&&(a.globalAlpha=d);return}p=this.Bb;if(0!==p.width&&0!==p.height&&!isNaN(p.x)&&!isNaN(p.y)){e=this.transform;f=this.I;0!==(this.T&4096)===!0&&Sm(this);k=0!==(this.T&256);this instanceof Zb&&Tm(this,a);if(k){l=f.jf()?f.sa:f.Q;this.kh?(g=this.kh,
m=g.x,q=g.y,h=g.width,g=g.height):(m=Math.max(p.x,l.x),q=Math.max(p.y,l.y),h=Math.min(p.right,l.right)-m,g=Math.min(p.bottom,l.bottom)-q);if(m>p.width+p.x||p.x>l.width+l.x||q>p.height+p.y||p.y>l.height+l.y){1!==c&&(a.globalAlpha=d);return}a.save();a.beginPath();a.rect(m,q,h,g);a.clip()}q=b.Pg;l=!1;if(this instanceof O){l=!0;if(!this.qa()){1!==c&&(a.globalAlpha=d);return}this.rk&&q.drawShadows&&(m=this.ll,a.shadowOffsetX=m.x*b.scale*b.Ee,a.shadowOffsetY=m.y*b.scale*b.Ee,a.shadowColor=this.kl,a.shadowBlur=
this.jl)}m=!1;this.J&&q.drawShadows&&(m=this.J.rk);null!==this.Nb&&(Um(this,a,this.Nb,!0,!0),this.Nb instanceof $f&&this.Nb.type===dg?(a.beginPath(),a.rect(p.x,p.y,p.width,p.height),Vm(a,this.Nb)):a.fillRect(p.x,p.y,p.width,p.height));e.Nr()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);null!==this.nb&&(g=this.sa,q=p=0,h=g.width,g=g.height,s=0,this instanceof X&&(g=this.za.Qa,p=g.x,q=g.y,h=g.width,g=g.height,s=this.gg),Um(this,a,this.nb,!0,!1),this.nb instanceof $f&&this.nb.type===dg?(a.beginPath(),
a.rect(p-s/2,q-s/2,h+s,g+s),Vm(a,this.nb)):a.fillRect(p-s/2,q-s/2,h+s,g+s));h=q=p=0;m&&(null!==this.nb||null!==this.Nb||null!==f&&0!==(f.T&512)||null!==f&&(f.type===tk||f.type===Pi)&&f.Ze()!==this)?(Wm(this,!0),p=a.shadowOffsetX,q=a.shadowOffsetY,h=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Wm(this,!1);this.Yi(a,b);m&&0!==(this.T&512)===!0&&(a.shadowOffsetX=p,a.shadowOffsetY=q,a.shadowBlur=h);l&&m&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);k?(a.restore(),this instanceof
L?vk(b,a,!0):vk(b,a,!1)):e.Nr()||(f=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*f,-e.m12*f,-e.m21*f,e.m11*f,f*(e.m21*e.dy-e.m22*e.dx),f*(e.m12*e.dx-e.m11*e.dy)))}}1!==c&&(a.globalAlpha=d)}};
function Rm(a,b,c){var d=a.Bb;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.Nb&&(Um(a,b,a.Nb,!0,!0),a.Nb instanceof $f&&a.Nb.type===dg?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Vm(b,a.Nb)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.nb&&(Um(a,b,a.nb,!0,!1),a.nb instanceof $f&&a.nb.type===dg?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Vm(b,a.nb)):b.fillRect(d.x,d.y,d.width,d.height)),a.Yi(b,c))}r.Yi=function(){};
function Vm(a,b){if(b instanceof $f&&b.type===dg&&!(a instanceof re)){var c=b.aw,d=b.$v;d>c?(a.scale(c/d,1),a.translate((d-c)/2,0)):c>d&&(a.scale(1,d/c),a.translate(0,(c-d)/2));a.Gs?a.clip():a.fill();d>c?(a.translate(-(d-c)/2,0),a.scale(1/(c/d),1)):c>d&&(a.translate(0,-(c-d)/2),a.scale(1,1/(d/c)))}else a.Gs?a.clip():a.fill()}function Xm(a){a.Gs||a.stroke()}
function Um(a,b,c,d,e){if(null!==c){var f=1,g=1;if("string"===typeof c)d?b.Xl!==c&&(b.fillStyle=c,b.Xl=c):b.Yl!==c&&(b.strokeStyle=c,b.Yl=c);else if(c.type===bg)c=c.color,d?b.Xl!==c&&(b.fillStyle=c,b.Xl=c):b.Yl!==c&&(b.strokeStyle=c,b.Yl=c);else{var h,g=a.sa,f=g.width,g=g.height;if(e)var k=a.Q,f=k.width,g=k.height;var l=b instanceof CanvasRenderingContext2D;if(l&&(c.Vf&&c.type===xm||c.aw===f&&c.$v===g))h=c.Vf;else{var m=k=0,n=0,p=0,q=0,s=0,s=q=0;e&&(k=a.Q,f=k.width,g=k.height,q=k.x,s=k.y);k=c.start.x*
f+c.start.offsetX;m=c.start.y*g+c.start.offsetY;n=c.end.x*f+c.end.offsetX;p=c.end.y*g+c.end.offsetY;k+=q;n+=q;m+=s;p+=s;c.type===cg?h=b.createLinearGradient(k,m,n,p):c.type===dg?(s=isNaN(c.ur)?Math.max(f,g)/2:c.ur,isNaN(c.vs)?(q=0,s=Math.max(f,g)/2):q=c.vs,h=b.createRadialGradient(k,m,q,n,p,s)):c.type===xm?h=b.createPattern(c.pattern,"repeat"):ta(c.type,"Brush type");if(c.type!==xm&&(a=c.or,null!==a))for(a=a.i;a.next();)h.addColorStop(a.key,a.value);l&&(c.Vf=h,c.aw=f,c.$v=g)}d?b.Xl!==h&&(b.fillStyle=
h,b.Xl=h):b.Yl!==h&&(b.strokeStyle=h,b.Yl=h)}}}U.prototype.isContainedBy=U.prototype.pk=function(a){if(a instanceof L)a:{if(this!==a&&null!==a)for(var b=this.I;null!==b;){if(b===a){a=!0;break a}b=b.I}a=!1}else a=!1;return a};U.prototype.isVisibleObject=U.prototype.tk=function(){if(!this.visible)return!1;var a=this.I;return null!==a?a.tk():!0};
function Sm(a){if(0!==(a.T&2048)===!0){var b=a.ld;b.reset();if(!a.Bb.w()||!a.nc.w()){Ym(a,!1);return}b.translate(a.Bb.x,a.Bb.y);b.translate(-a.oa.x,-a.oa.y);var c=a.sa;Jm(a,b,c.x,c.y,c.width,c.height);Ym(a,!1);Zm(a,!0)}0!==(a.T&4096)===!0&&(b=a.I,null===b?(a.bm.set(a.ld),a.gt=a.scale,Zm(a,!1)):null!==b.We&&(c=a.bm,c.reset(),b.jf()?c.multiply(b.bm):null!==b.I&&c.multiply(b.I.bm),c.multiply(a.ld),a.gt=a.scale*b.gt,Zm(a,!1)))}
function Jm(a,b,c,d,e,f){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var g=Dd;a.qe&&a.qe.Kc()&&(g=a.qe);var h=Va();if(a instanceof O&&a.Jb!==a)for(c=a.Jb,d=c.sa,h.ss(d.x,d.y,d.width,d.height,g),c.Ij.Ka(h),h.offset(-c.oa.x,-c.oa.y),g=c.I;null!==g&&g!==a;)g.Ij.Ka(h),h.offset(-g.oa.x,-g.oa.y),g=g.I;else h.ss(c,d,e,f,g);b.rotate(a.angle,h.x,h.y);A(h)}}r=U.prototype;
r.H=function(a){void 0===a&&(a=!1);if(!0!==Wk(this)){Qk(this,!0);Nm(this,!0);var b=this.I;null!==b?a||b.H():(a=this.g,null!==a&&(a.nf.add(this),this instanceof V&&(a.V.Ua||this.Je(),null!==this.vd&&$m(this.vd)),a.wd(!0)));if(this instanceof L){if(this.da===tk||this.da===si)a=this.Ze(),null!==a&&a.H(!0);a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Wk(d)&&(d.ka.w()||(d instanceof Qi||d instanceof L||d instanceof Zb||Lm(d,!1)!==Ri)&&d.H(!0))}}}};
r.In=function(){!1===Wk(this)&&(Qk(this,!0),Nm(this,!0))};function $m(a){if(!1===Xk(a)){if(null!==a.I)a.I.H();else{var b=a.g;null!==b&&(b.nf.add(a),a instanceof V&&a.Je(),b.wd())}Nm(a,!0)}}r.Zf=function(){0!==(this.T&2048)===!1&&(Ym(this,!0),Zm(this,!0))};r.$x=function(){Zm(this,!0)};r.ba=function(){var a=this.J;null!==a&&a.ba()};
function Lm(a,b){var c=a.stretch,d=a.I;if(null!==d&&d.da===an)return bn(a,d.Bc(a.Tb),d.Ac(a.column),b);if(null!==d&&d.da===tk&&d.Ze()===a)return cn(a,Ne,b);if(c===zm){if(null!==d){if(d.da===Pi&&d.Ze()===a)return cn(a,Ne,b);c=d.Wc;return c===zm?cn(a,Ri,b):cn(a,c,b)}return cn(a,Ri,b)}return cn(a,c,b)}
function bn(a,b,c,d){var e=a.stretch;if(e!==zm)return cn(a,e,d);var f=e=null;switch(b.stretch){case Am:f=!0;break;case Ne:f=!0}switch(c.stretch){case Bm:e=!0;break;case Ne:e=!0}b=a.I.Wc;null===e&&(e=b===Bm||b===Ne);null===f&&(f=b===Am||b===Ne);return!0===e&&!0===f?cn(a,Ne,d):!0===e?cn(a,Bm,d):!0===f?cn(a,Am,d):cn(a,Ri,d)}
function cn(a,b,c){if(c)return b;if(b===Ri)return Ri;c=a.ka;if(c.w())return Ri;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===Bm)return Ri;if(b===Ne)return Am}else{if(b===Am)return Ri;if(b===Ne)return Bm}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===Am)return Ri;if(b===Ne)return Bm}else{if(b===Bm)return Ri;if(b===Ne)return Am}return b}G(U,{xv:"segmentOrientation"},function(){return this.Gq},function(a){var b=this.Gq;b!==a&&(this.Gq=a,this.H(),this.h("segmentOrientation",b,a))});
G(U,{ff:"segmentIndex"},function(){return this.Eq},function(a){a=Math.round(a);var b=this.Eq;b!==a&&(this.Eq=a,this.H(),this.h("segmentIndex",b,a))});G(U,{wv:"segmentFraction"},function(){return this.Dq},function(a){isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Dq;b!==a&&(this.Dq=a,this.H(),this.h("segmentFraction",b,a))});G(U,{kD:"segmentOffset"},function(){return this.Fq},function(a){var b=this.Fq;b.A(a)||(this.Fq=a=a.O(),this.H(),this.h("segmentOffset",b,a))});
G(U,{stretch:"stretch"},function(){return this.Vg},function(a){var b=this.Vg;b!==a&&(this.Vg=a,this.H(),this.h("stretch",b,a))});G(U,{name:"name"},function(){return this.yb},function(a){var b=this.yb;b!==a&&(this.yb=a,null!==this.J&&(this.J.Lj=null),this.h("name",b,a))});
G(U,{opacity:"opacity"},function(){return this.ic},function(a){var b=this.ic;b!==a&&(w(a,"number",U,"opacity"),(0>a||1<a)&&za(a,"0 <= value <= 1",U,"opacity"),this.ic=a,this.h("opacity",b,a),a=this.g,b=this.J,null!==a&&null!==b&&a.ba(fk(b,b.Q)))});G(U,{visible:"visible"},function(){return 0!==(this.T&1)},function(a){var b=0!==(this.T&1);b!==a&&(this.T^=1,this.h("visible",b,a),b=this.I,null!==b?b.H():this instanceof O&&(this.mk(),this.Zd(a)),this.ba(),dn(this))});
G(U,{Qf:"pickable"},function(){return 0!==(this.T&2)},function(a){var b=0!==(this.T&2);b!==a&&(this.T^=2,this.h("pickable",b,a))});G(U,{iF:"fromLinkableDuplicates"},function(){return 0!==(this.T&4)},function(a){var b=0!==(this.T&4);b!==a&&(this.T^=4,this.h("fromLinkableDuplicates",b,a))});G(U,{jF:"fromLinkableSelfNode"},function(){return 0!==(this.T&8)},function(a){var b=0!==(this.T&8);b!==a&&(this.T^=8,this.h("fromLinkableSelfNode",b,a))});
G(U,{YG:"toLinkableDuplicates"},function(){return 0!==(this.T&16)},function(a){var b=0!==(this.T&16);b!==a&&(this.T^=16,this.h("toLinkableDuplicates",b,a))});G(U,{ZG:"toLinkableSelfNode"},function(){return 0!==(this.T&32)},function(a){var b=0!==(this.T&32);b!==a&&(this.T^=32,this.h("toLinkableSelfNode",b,a))});G(U,{Jf:"isPanelMain"},function(){return 0!==(this.T&64)},function(a){var b=0!==(this.T&64);b!==a&&(this.T^=64,this.H(),this.h("isPanelMain",b,a))});
G(U,{ey:"isActionable"},function(){return 0!==(this.T&128)},function(a){var b=0!==(this.T&128);b!==a&&(this.T^=128,this.h("isActionable",b,a))});G(U,{ul:"areaBackground"},function(){return this.Nb},function(a){var b=this.Nb;b!==a&&(a instanceof $f&&a.freeze(),this.Nb=a,this.ba(),this.h("areaBackground",b,a))});G(U,{background:"background"},function(){return this.nb},function(a){var b=this.nb;b!==a&&(a instanceof $f&&a.freeze(),this.nb=a,this.ba(),this.h("background",b,a))});
function Wm(a,b){a.T=b?a.T|512:a.T&-513}function en(a,b){a.T=b?a.T|1024:a.T&-1025}function Ym(a,b){a.T=b?a.T|2048:a.T&-2049}function Zm(a,b){a.T=b?a.T|4096:a.T&-4097}function Wk(a){return 0!==(a.T&8192)}function Qk(a,b){a.T=b?a.T|8192:a.T&-8193}function Xk(a){return 0!==(a.T&16384)}function Nm(a,b){a.T=b?a.T|16384:a.T&-16385}H(U,{J:"part"},function(){if(this instanceof O)return this;if(this.cl)return this.cl;var a;for(a=this.I;a;){if(a instanceof O)return this.cl=a;a=a.I}return null});
H(U,{I:"panel"},function(){return this.eg});U.prototype.zk=function(a){this.eg=a};H(U,{layer:"layer"},function(){var a=this.J;return null!==a?a.layer:null});H(U,{g:"diagram"},function(){var a=this.J;return null!==a?a.g:null},{configurable:!0});G(U,{position:"position"},function(){return this.xa},function(a){var b=this.xa;b.A(a)||(a=a.O(),this.Vy(a,b)&&this.h("position",b,a))});U.prototype.Vy=function(a){this.xa=a;$m(this);this.Zf();return!0};
U.prototype.pD=function(a,b){this.xa.k(a,b);fn(this,!0);this.Zf()};H(U,{Q:"actualBounds"},function(){return this.Bb});G(U,{scale:"scale"},function(){return this.Eb},function(a){var b=this.Eb;b!==a&&(0>=a&&u("GraphObject.scale must be greater than zero"),this.Eb=a,this.Zf(),this.H(),this.h("scale",b,a))});G(U,{angle:"angle"},function(){return this.cm},function(a){var b=this.cm;b!==a&&(a%=360,0>a&&(a+=360),b!==a&&(this.cm=a,this.H(),this.Zf(),this.h("angle",b,a)))});
G(U,{ka:"desiredSize"},function(){return this.Ae},function(a){var b=this.Ae;b.A(a)||(this.Ae=a=a.O(),this.H(),this instanceof X&&this.Ed(),this.h("desiredSize",b,a),a=this.J,null!==a&&0!==(this.T&1024)&&(Hm(this,a,"width"),Hm(this,a,"height")))});
G(U,{width:"width"},function(){return this.Ae.width},function(a){if(this.Ae.width!==a){var b=this.Ae;this.Ae=a=(new Za(a,this.Ae.height)).freeze();this.H();this instanceof X&&this.Ed();this.h("desiredSize",b,a);b=this.J;null!==b&&0!==(this.T&1024)&&Hm(this,b,"width")}});
G(U,{height:"height"},function(){return this.Ae.height},function(a){if(this.Ae.height!==a){var b=this.Ae;this.Ae=a=(new Za(this.Ae.width,a)).freeze();this.H();this instanceof X&&this.Ed();this.h("desiredSize",b,a);b=this.J;null!==b&&0!==(this.T&1024)&&Hm(this,b,"height")}});G(U,{Lf:"minSize"},function(){return this.yi},function(a){var b=this.yi;b.A(a)||(a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.yi=a,this.H(),this.h("minSize",b,a))});
G(U,{se:"maxSize"},function(){return this.wi},function(a){var b=this.wi;b.A(a)||(a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.wi=a,this.H(),this.h("maxSize",b,a))});H(U,{oa:"measuredBounds"},function(){return this.nc});H(U,{sa:"naturalBounds"},function(){return this.hc},{configurable:!0});
G(U,{margin:"margin"},function(){return this.Kp},function(a){"number"===typeof a&&(a=new qd(a));var b=this.Kp;b.A(a)||(this.Kp=a=a.O(),this.H(),this.h("margin",b,a))});H(U,{transform:null},function(){0!==(this.T&2048)===!0&&Sm(this);return this.ld});H(U,{We:null},function(){0!==(this.T&4096)===!0&&Sm(this);return this.bm});
G(U,{alignment:"alignment"},function(){return this.Md},function(a){var b=this.Md;b.A(a)||(a.Gd()&&!a.lc()&&u("alignment must be a real Spot or Spot.Default"),this.Md=a=a.O(),$m(this),this.h("alignment",b,a))});G(U,{column:"column"},function(){return this.Fo},function(a){a=Math.round(a);var b=this.Fo;b!==a&&(0>a&&za(a,">= 0",U,"column"),this.Fo=a,this.H(),this.h("column",b,a))});
G(U,{HE:"columnSpan"},function(){return this.gi},function(a){a=Math.round(a);var b=this.gi;b!==a&&(1>a&&za(a,">= 1",U,"columnSpan"),this.gi=a,this.H(),this.h("columnSpan",b,a))});G(U,{Tb:"row"},function(){return this.Aq},function(a){a=Math.round(a);var b=this.Aq;b!==a&&(0>a&&za(a,">= 0",U,"row"),this.Aq=a,this.H(),this.h("row",b,a))});
G(U,{rowSpan:"rowSpan"},function(){return this.Ei},function(a){a=Math.round(a);var b=this.Ei;b!==a&&(1>a&&za(a,">= 1",U,"rowSpan"),this.Ei=a,this.H(),this.h("rowSpan",b,a))});G(U,{Ti:"alignmentFocus"},function(){return this.yo},function(a){var b=this.yo;b.A(a)||(a.Gd()&&!a.lc()&&u("alignmentFocus must be a real Spot or Spot.Default"),this.yo=a=a.O(),this.H(),this.h("alignmentFocus",b,a))});
G(U,{cd:"portId"},function(){return this.mq},function(a){var b=this.mq;if(b!==a){var c=this.J;null===c||c instanceof V||(u("portID being set on a Link: "+a),c=null);null!==b&&null!==c&&gn(c,this);this.mq=a;if(null!==a&&c){c.Jg=!0;null===c.jd&&hn(c);var d=this.cd;null!==d&&c.jd.add(d,this)}this.h("portId",b,a)}});function jn(a){var b={value:null};kn(a,b);return b.value}function kn(a,b){var c=a.I;return null===c||!kn(c,b)&&a.visible?(b.value=a,!1):!0}
function dn(a){var b=a.J;b instanceof V&&(a=a.g,null===a||a.V.Ua||b.Je())}G(U,{ab:"toSpot"},function(){return null!==this.G?this.G.Pi:td},function(a){null===this.G&&this.Wd();var b=this.G.Pi;b.A(a)||(a=a.O(),this.G.Pi=a,this.h("toSpot",b,a),dn(this))});G(U,{Dk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Ni:10},function(a){null===this.G&&this.Wd();var b=this.G.Ni;b!==a&&(0>a&&za(a,">= 0",U,"toEndSegmentLength"),this.G.Ni=a,this.h("toEndSegmentLength",b,a),dn(this))});
G(U,{xs:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Mi:Fm},function(a){null===this.G&&this.Wd();var b=this.G.Mi;b!==a&&(this.G.Mi=a,this.h("toEndSegmentDirection",b,a),dn(this))});G(U,{zs:"toShortLength"},function(){return null!==this.G?this.G.Oi:0},function(a){null===this.G&&this.Wd();var b=this.G.Oi;b!==a&&(this.G.Oi=a,this.h("toShortLength",b,a),dn(this))});G(U,{xD:"toLinkable"},function(){return this.Vq},function(a){var b=this.Vq;b!==a&&(this.Vq=a,this.h("toLinkable",b,a))});
G(U,{$G:"toMaxLinks"},function(){return this.Wq},function(a){var b=this.Wq;b!==a&&(0>a&&za(a,">= 0",U,"toMaxLinks"),this.Wq=a,this.h("toMaxLinks",b,a))});G(U,{Za:"fromSpot"},function(){return null!==this.G?this.G.ni:td},function(a){null===this.G&&this.Wd();var b=this.G.ni;b.A(a)||(a=a.O(),this.G.ni=a,this.h("fromSpot",b,a),dn(this))});
G(U,{gk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.li:10},function(a){null===this.G&&this.Wd();var b=this.G.li;b!==a&&(0>a&&za(a,">= 0",U,"fromEndSegmentLength"),this.G.li=a,this.h("fromEndSegmentLength",b,a),dn(this))});G(U,{Er:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.ki:Fm},function(a){null===this.G&&this.Wd();var b=this.G.ki;b!==a&&(this.G.ki=a,this.h("fromEndSegmentDirection",b,a),dn(this))});
G(U,{Fr:"fromShortLength"},function(){return null!==this.G?this.G.mi:0},function(a){null===this.G&&this.Wd();var b=this.G.mi;b!==a&&(this.G.mi=a,this.h("fromShortLength",b,a),dn(this))});G(U,{fC:"fromLinkable"},function(){return this.Zo},function(a){var b=this.Zo;b!==a&&(this.Zo=a,this.h("fromLinkable",b,a))});G(U,{kF:"fromMaxLinks"},function(){return this.$o},function(a){var b=this.$o;b!==a&&(0>a&&za(a,">= 0",U,"fromMaxLinks"),this.$o=a,this.h("fromMaxLinks",b,a))});
G(U,{cursor:"cursor"},function(){return this.Mo},function(a){var b=this.Mo;b!==a&&(w(a,"string",U,"cursor"),this.Mo=a,this.h("cursor",b,a))});G(U,{click:"click"},function(){return null!==this.F?this.F.jh:null},function(a){null===this.F&&Cm(this);var b=this.F.jh;b!==a&&(null!==a&&w(a,"function",U,"click"),this.F.jh=a,this.h("click",b,a))});
G(U,{tr:"doubleClick"},function(){return null!==this.F?this.F.qh:null},function(a){null===this.F&&Cm(this);var b=this.F.qh;b!==a&&(null!==a&&w(a,"function",U,"doubleClick"),this.F.qh=a,this.h("doubleClick",b,a))});G(U,{Hx:"contextClick"},function(){return null!==this.F?this.F.lh:null},function(a){null===this.F&&Cm(this);var b=this.F.lh;b!==a&&(null!==a&&w(a,"function",U,"contextClick"),this.F.lh=a,this.h("contextClick",b,a))});
G(U,{IC:"mouseEnter"},function(){return null!==this.F?this.F.Vp:null},function(a){null===this.F&&Cm(this);var b=this.F.Vp;b!==a&&(null!==a&&w(a,"function",U,"mouseEnter"),this.F.Vp=a,this.h("mouseEnter",b,a))});G(U,{JC:"mouseLeave"},function(){return null!==this.F?this.F.Wp:null},function(a){null===this.F&&Cm(this);var b=this.F.Wp;b!==a&&(null!==a&&w(a,"function",U,"mouseLeave"),this.F.Wp=a,this.h("mouseLeave",b,a))});
G(U,{wy:"mouseOver"},function(){return null!==this.F?this.F.Ah:null},function(a){null===this.F&&Cm(this);var b=this.F.Ah;b!==a&&(null!==a&&w(a,"function",U,"mouseOver"),this.F.Ah=a,this.h("mouseOver",b,a))});G(U,{vy:"mouseHover"},function(){return null!==this.F?this.F.zh:null},function(a){null===this.F&&Cm(this);var b=this.F.zh;b!==a&&(null!==a&&w(a,"function",U,"mouseHover"),this.F.zh=a,this.h("mouseHover",b,a))});
G(U,{uy:"mouseHold"},function(){return null!==this.F?this.F.yh:null},function(a){null===this.F&&Cm(this);var b=this.F.yh;b!==a&&(null!==a&&w(a,"function",U,"mouseHold"),this.F.yh=a,this.h("mouseHold",b,a))});G(U,{eG:"mouseDragEnter"},function(){return null!==this.F?this.F.Tp:null},function(a){null===this.F&&Cm(this);var b=this.F.Tp;b!==a&&(null!==a&&w(a,"function",U,"mouseDragEnter"),this.F.Tp=a,this.h("mouseDragEnter",b,a))});
G(U,{fG:"mouseDragLeave"},function(){return null!==this.F?this.F.Up:null},function(a){null===this.F&&Cm(this);var b=this.F.Up;b!==a&&(null!==a&&w(a,"function",U,"mouseDragLeave"),this.F.Up=a,this.h("mouseDragLeave",b,a))});G(U,{ty:"mouseDrop"},function(){return null!==this.F?this.F.xh:null},function(a){null===this.F&&Cm(this);var b=this.F.xh;b!==a&&(null!==a&&w(a,"function",U,"mouseDrop"),this.F.xh=a,this.h("mouseDrop",b,a))});
G(U,{vB:"actionDown"},function(){return null!==this.F?this.F.uo:null},function(a){null===this.F&&Cm(this);var b=this.F.uo;b!==a&&(null!==a&&w(a,"function",U,"actionDown"),this.F.uo=a,this.h("actionDown",b,a))});G(U,{wB:"actionMove"},function(){return null!==this.F?this.F.vo:null},function(a){null===this.F&&Cm(this);var b=this.F.vo;b!==a&&(null!==a&&w(a,"function",U,"actionMove"),this.F.vo=a,this.h("actionMove",b,a))});
G(U,{xB:"actionUp"},function(){return null!==this.F?this.F.wo:null},function(a){null===this.F&&Cm(this);var b=this.F.wo;b!==a&&(null!==a&&w(a,"function",U,"actionUp"),this.F.wo=a,this.h("actionUp",b,a))});G(U,{uB:"actionCancel"},function(){return null!==this.F?this.F.to:null},function(a){null===this.F&&Cm(this);var b=this.F.to;b!==a&&(null!==a&&w(a,"function",U,"actionCancel"),this.F.to=a,this.h("actionCancel",b,a))});
G(U,{cz:"toolTip"},function(){return null!==this.F?this.F.Hh:null},function(a){null===this.F&&Cm(this);var b=this.F.Hh;b!==a&&(null!==a&&ra(a,Vg,U,"toolTip"),this.F.Hh=a,this.h("toolTip",b,a))});G(U,{contextMenu:"contextMenu"},function(){return null!==this.F?this.F.mh:null},function(a){null===this.F&&Cm(this);var b=this.F.mh;b!==a&&(null!==a&&ra(a,Vg,U,"contextMenu"),this.F.mh=a,this.h("contextMenu",b,a))});
U.prototype.bind=U.prototype.bind=function(a){a.wf=this;var b=this.Cn();null!==b&&ln(b)&&u("Cannot add a Binding to a template that has already been copied: "+a);null===this.gc&&(this.gc=new N(yg));this.gc.add(a)};U.prototype.findTemplateBinder=U.prototype.Cn=function(){for(var a=this instanceof L?this:this.I;null!==a;){if(null!==a.Fk)return a;a=a.I}return null};U.fromSvg=U.fromSVG=function(a){return mn(a)};U.prototype.setProperties=function(a){Ib(this,a)};var nn;
U.make=nn=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var f=on.ha(a);"function"===typeof f?(c=Ka(arguments),d=f(c)):e=aa[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&u("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),u("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||u("GraphObject.make requires a class function or class name, not: "+
a),d=new e);f=1;if(d instanceof M&&1<c.length){var g=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)rk(g,e),f++}for(;f<c.length;f++)e=c[f],void 0===e?u("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):pn(d,e);return d};
function pn(a,b){if("string"===typeof b)if(a instanceof Zb)a.text=b;else if(a instanceof X)a.jb=b;else if(a instanceof mk)a.source=b;else if(a instanceof L){var c=yc(L,b);null!==c?a.type=c:u("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof $f?(c=yc($f,b),null!==c?a.type=c:u("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof Ke?(c=yc(Ke,b),null!==c?a.type=c:u("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof Cf?(c=yc(Cf,
b),null!==c?a.type=c:u("Unknown PathSegment type as an argument to GraphObject.make: "+b)):u("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof U)c=b,a instanceof L||u("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof ug){var d=b,c=a,e;d.td&&c.Bc?e=c.Bc(d.index):!d.td&&c.Ac?e=c.Ac(d.index):u("A RowColumnDefinition can only be added to a Panel, not to: "+a);e.qr(d)}else if(b instanceof wa)a instanceof W&&b.Sd===W?2===(b.value&
2)?a.uv=b:b===Li||b===Di||b===ti?a.ne=b:b===qn||b===rn||b===sn?a.hr=b:b!==tn&&b!==Ei&&u("Unknown Link enum value for a Link property: "+b):a instanceof L&&b.Sd===L?a.type=b:a instanceof Zb&&b.Sd===Zb?a.MD=b:a instanceof X&&(b===Ri||b===Ti||b===Ui||b===zm)?a.iC=b:a instanceof mk&&(b===Ri||b===Ti||b===Ui)?a.xF=b:a instanceof U&&b.Sd===W?(c=a,0===b.name.indexOf("Orient")?c.xv=b:u("Unknown Link enum value for GraphObject.segmentOrientation property: "+b)):a instanceof U&&b.Sd===U?a.stretch=b:a instanceof
ug&&b.Sd===ug?a.ts=b:a instanceof M&&b.Sd===M?a.qn=b:a instanceof $f&&b.Sd===$f?a.type=b:a instanceof Ke&&b.Sd===Ke?a.type=b:a instanceof Cf&&b.Sd===Cf?a.type=b:a instanceof yg&&b.Sd===yg?a.mode=b:a instanceof Hf&&b.Sd===Hf?a.Vc=b:a instanceof Z&&b.Sd===Z?0===b.name.indexOf("Alignment")?a.alignment=b:0===b.name.indexOf("Arrangement")?a.Xe=b:0===b.name.indexOf("Compaction")?a.compaction=b:0===b.name.indexOf("Path")?a.path=b:0===b.name.indexOf("Sorting")?a.sorting=b:0===b.name.indexOf("Style")?a.bH=
b:u("Unknown enum value: "+b):a instanceof un&&b.Sd===un?0===b.name.indexOf("Aggressive")?a.wE=b:0===b.name.indexOf("Cycle")?a.SE=b:0===b.name.indexOf("Init")?a.CF=b:0===b.name.indexOf("Layer")?a.PF=b:u("Unknown enum value: "+b):a instanceof sm&&b.Sd===sm?b===vn||b===wn||b===xn||b===yn?a.sorting=b:b===Gn||b===Hn?a.Xe=b:b===In||b===Jn?a.alignment=b:u("Unknown enum value: "+b):a instanceof Kn&&b.Sd===Kn?b===Ln||b===Mn||b===Nn||b===On||b===Pn?a.sorting=b:b===Qn||b===Rn||b===Sn||b===Tn?a.direction=b:
b===Un||b===Vn||b===Wn||b===Xn?a.Xe=b:b===Yn||b===Zn?a.lv=b:u("Unknown enum value: "+b):u("No property to set for this enum value: "+b);else if(b instanceof yg)a instanceof U?a.bind(b):a instanceof ug?a.bind(b):u("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Me)a instanceof Ke?a.Ya.add(b):u("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof Cf)a instanceof Me?a.ra.add(b):u("A PathSegment can only be added to a PathFigure, not to: "+
a);else if(b instanceof lg)a instanceof M?a.ub=b:a instanceof Wg?a.ub=b:u("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)pn(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof $f){e=new Sb;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);Ib(a,e)}else if(a instanceof ug){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&u("Must specify non-negative integer row for RowColumnDefinition "+
b),a.td=!0,a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&u("Must specify non-negative integer column for RowColumnDefinition "+b),a.td=!1,a.index=e);e=new Sb;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);Ib(a,e)}else Ib(a,b);else u('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}var on=new Fb("string","function");
U.getBuilders=function(){var a=new Fb("string","function"),b;for(b in on)if(b!==b.toLowerCase()){var c=on[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var $n;U.defineBuilder=$n=function(a,b){w(a,"string",U,"defineBuilder:name");w(b,"function",U,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||u("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);on.add(a,b)};var ao;
U.takeBuilderArgument=ao=function(a,b,c){void 0===c&&(c=null);var d=a[1];if("function"===typeof c?c(d):"string"===typeof d)return a.splice(1,1),d;if(void 0===b)throw Error("no "+("function"===typeof c?"satisfactory":"string")+" argument for GraphObject builder "+a[0]);return b};
$n("Button",function(){var a=new $f(cg);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new $f(cg);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=nn(L,tk,{ey:!0},{_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue"},nn(X,{name:"ButtonBorder",jb:"Rectangle",o:new R(0,0,2.761423749153968,2.761423749153968),p:new R(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.IC=function(a,b){var e=b.Cd("ButtonBorder");if(e instanceof
X){var f=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=f;f=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=f}};a.JC=function(a,b){var e=b.Cd("ButtonBorder");e instanceof X&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)};return a});
$n("TreeExpanderButton",function(){var a=nn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},nn(X,{name:"ButtonIcon",jb:"MinusLine",ka:Q.qo},(new yg("figure","isTreeExpanded",function(a,c){var d=c.I;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).mv()),{visible:!1},(new yg("visible","isTreeLeaf",function(a){return!a})).mv());a.click=function(a,c){var d=c.J;d instanceof Vg&&(d=d.Yg);if(d instanceof V){var e=d.g;if(null!==e){e=e.ib;if(d.sc){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.rc=!0;d.sc?e.collapseTree(d):e.expandTree(d)}}};return a});
$n("SubGraphExpanderButton",function(){var a=nn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},nn(X,{name:"ButtonIcon",jb:"MinusLine",ka:Q.qo},(new yg("figure","isSubGraphExpanded",function(a,c){var d=c.I;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).mv()));a.click=function(a,c){var d=c.J;d instanceof Vg&&(d=d.Yg);if(d instanceof Wg){var e=d.g;if(null!==e){e=e.ib;if(d.ud){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.rc=
!0;d.ud?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});$n("ContextMenuButton",function(){var a=nn("Button");a.stretch=Bm;var b=a.Cd("ButtonBorder");b instanceof X&&(b.jb="Rectangle",b.o=new R(0,0,2,3),b.p=new R(1,1,-2,-2));return a});
$n("PanelExpanderButton",function(a){var b=ao(a,"COLLAPSIBLE");a=nn("Button",nn(X,"TriangleUp",{ka:new Za(6,4)},(new yg("figure","visible",function(a){return a?"TriangleUp":"TriangleDown"})).mv(b)));var c=a.Cd("ButtonBorder");c instanceof X&&(c.stroke=null,c.fill="transparent");a.click=function(a,c){var f=c.g;if(null!==f){var g=c.J.Cd(b);null!==g&&(f.Ab("Collapse/Expand Panel"),g.visible=!g.visible,f.pd("Collapse/Expand Panel"))}};return a});
function Dm(){this.mh=this.Hh=this.to=this.wo=this.vo=this.uo=this.xh=this.Up=this.Tp=this.yh=this.zh=this.Ah=this.Wp=this.Vp=this.lh=this.qh=this.jh=null}Dm.prototype.copy=function(){var a=new Dm;a.jh=this.jh;a.qh=this.qh;a.lh=this.lh;a.Vp=this.Vp;a.Wp=this.Wp;a.Ah=this.Ah;a.zh=this.zh;a.yh=this.yh;a.Tp=this.Tp;a.Up=this.Up;a.xh=this.xh;a.uo=this.uo;a.vo=this.vo;a.wo=this.wo;a.to=this.to;a.Hh=this.Hh;a.mh=this.mh;return a};
function L(a){U.call(this);void 0===a?0===arguments.length?this.da=Wi:u("invalid argument to Panel constructor: undefined"):(va(a,L,L,"type"),this.da=a);this.la=new N(U);this.he=Q.ro;this.$f=!1;this.da===xk&&(this.$f=!0);this.jp=!1;this.Po=ee;this.ph=zm;this.da===an&&bo(this);this.mn=Ti;this.dp=(new Za(10,10)).freeze();this.ep=Q.fj;this.Fk=this.Cg=null;this.yp=NaN;this.pf=this.uh=null;this.Lm="category";this.of=null;this.Jh=new D(NaN,NaN,NaN,NaN);this.ol=null;this.Jg=!1;this.Bq=null}yb(L,U);
L.Qg=!0;vb("Panel",L);function bo(a){a.hi=Q.ro;a.Fg=1;a.oh=null;a.Kk=null;a.Eg=1;a.Dg=null;a.Jk=null;a.Tc=[];a.Mc=[];a.hl=co;a.Hk=co;a.Ih=0;a.vh=0}
L.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.da=this.da;a.he=this.he.O();a.$f=this.$f;a.jp=this.jp;a.Po=this.Po.O();a.ph=this.ph;if(a.da===an){a.hi=this.hi.O();a.Fg=this.Fg;a.oh=this.oh;a.Kk=this.Kk;a.Eg=this.Eg;a.Dg=this.Dg;a.Jk=this.Jk;var b=[];if(0<this.Tc.length)for(var c=this.Tc,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var f=c[e].copy();f.zk(a);b[e]=f}a.Tc=b;b=[];if(0<this.Mc.length)for(c=this.Mc,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(f=c[e].copy(),f.zk(a),
b[e]=f);a.Mc=b;a.hl=this.hl;a.Hk=this.Hk;a.Ih=this.Ih;a.vh=this.vh}a.mn=this.mn;a.dp.assign(this.dp);a.ep=this.ep.O();a.Cg=this.Cg;a.Fk=this.Fk;a.yp=this.yp;a.uh=this.uh;a.pf=this.pf;a.Lm=this.Lm;a.Jh.assign(this.Jh);a.Jg=this.Jg;null!==this.Bq&&(a.Bq=this.Bq)};L.prototype.Zg=function(a){U.prototype.Zg.call(this,a);a.la=this.la;for(var b=a.la.l,c=b.length,d=0;d<c;d++)b[d].eg=a;a.ol=null};
L.prototype.copy=function(){var a=U.prototype.copy.call(this);if(null!==a){for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d].copy(),f=a;e.zk(f);e.cl=null;var g=f.la,h=g.count;g.qd(h,e);g=f.J;if(null!==g){g.Lj=null;null!==e.cd&&g instanceof V&&(g.Jg=!0);var k=f.g;null!==k&&k.V.Ua||g.ec(Qf,"elements",f,null,e,null,h)}}return a}return null};L.prototype.toString=function(){return"Panel("+this.type+")#"+ub(this)};var Wi;L.Position=Wi=I(L,"Position",0);L.Horizontal=I(L,"Horizontal",1);var sk;
L.Vertical=sk=I(L,"Vertical",2);var Pi;L.Spot=Pi=I(L,"Spot",3);var tk;L.Auto=tk=I(L,"Auto",4);var an;L.Table=an=I(L,"Table",5);L.Viewbox=I(L,"Viewbox",6);var Pm;L.TableRow=Pm=I(L,"TableRow",7);var Qm;L.TableColumn=Qm=I(L,"TableColumn",8);var si;L.Link=si=I(L,"Link",9);var xk;L.Grid=xk=I(L,"Grid",10);
G(L,{type:"type"},function(){return this.da},function(a){var b=this.da;b!==a&&(b!==Pm&&b!==Qm||u("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.da=a,this.da===xk?this.$f=!0:this.da===an&&bo(this),this.H(),this.h("type",b,a))});H(L,{elements:"elements"},function(){return this.la.i});H(L,{sa:"naturalBounds"},function(){return this.hc});
G(L,{padding:"padding"},function(){return this.he},function(a){"number"===typeof a?(0>a&&za(a,">= 0",L,"padding"),a=new qd(a)):(ra(a,qd,L,"padding"),0>a.left&&za(a.left,">= 0",L,"padding:value.left"),0>a.right&&za(a.right,">= 0",L,"padding:value.right"),0>a.top&&za(a.top,">= 0",L,"padding:value.top"),0>a.bottom&&za(a.bottom,">= 0",L,"padding:value.bottom"));var b=this.he;b.A(a)||(this.he=a=a.O(),this.H(),this.h("padding",b,a))});
G(L,{bk:"defaultAlignment"},function(){return this.Po},function(a){var b=this.Po;b.A(a)||(this.Po=a=a.O(),this.H(),this.h("defaultAlignment",b,a))});G(L,{Wc:"defaultStretch"},function(){return this.ph},function(a){var b=this.ph;b!==a&&(va(a,U,L,"defaultStretch"),this.ph=a,this.H(),this.h("defaultStretch",b,a))});
G(L,{RH:"defaultSeparatorPadding"},function(){return void 0===this.hi?Q.ro:this.hi},function(a){if(void 0!==this.hi){"number"===typeof a&&(a=new qd(a));var b=this.hi;b.A(a)||(this.hi=a=a.O(),this.h("defaultSeparatorPadding",b,a))}});G(L,{PH:"defaultRowSeparatorStroke"},function(){return void 0===this.oh?null:this.oh},function(a){var b=this.oh;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.oh=a,this.h("defaultRowSeparatorStroke",b,a))});
G(L,{QH:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Fg?1:this.Fg},function(a){if(void 0!==this.Fg){var b=this.Fg;b!==a&&isFinite(a)&&0<=a&&(this.Fg=a,this.h("defaultRowSeparatorStrokeWidth",b,a))}});
G(L,{OH:"defaultRowSeparatorDashArray"},function(){return void 0===this.Kk?null:this.Kk},function(a){if(void 0!==this.Kk){var b=this.Kk;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",L,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||u("defaultRowSeparatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Kk=a;this.ba();this.h("defaultRowSeparatorDashArray",
b,a)}}});G(L,{JH:"defaultColumnSeparatorStroke"},function(){return void 0===this.Dg?null:this.Dg},function(a){if(void 0!==this.Dg){var b=this.Dg;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.Dg=a,this.h("defaultColumnSeparatorStroke",b,a))}});
G(L,{KH:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Eg?1:this.Eg},function(a){if(void 0!==this.Eg){var b=this.Eg;b!==a&&isFinite(a)&&0<=a&&(this.Eg=a,this.h("defaultColumnSeparatorStrokeWidth",b,a))}});
G(L,{IH:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Jk?null:this.Jk},function(a){if(void 0!==this.Jk){var b=this.Jk;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",L,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||u("defaultColumnSeparatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Jk=a;this.ba();this.h("defaultColumnSeparatorDashArray",
b,a)}}});G(L,{fJ:"viewboxStretch"},function(){return this.mn},function(a){var b=this.mn;b!==a&&(va(a,U,L,"viewboxStretch"),this.mn=a,this.h("viewboxStretch",b,a))});G(L,{Xu:"gridCellSize"},function(){return this.dp},function(a){var b=this.dp;b.A(a)||(ra(a,Za,L,"gridCellSize"),a.w()&&0!==a.width&&0!==a.height||u("Invalid Panel.gridCellSize: "+a),this.dp=a.O(),null!==this.g&&this===this.g.Gr&&Rk(this.g),this.ba(),this.h("gridCellSize",b,a))});
G(L,{mC:"gridOrigin"},function(){return this.ep},function(a){var b=this.ep;b.A(a)||(ra(a,z,L,"gridOrigin"),a.w()||u("Invalid Panel.gridOrigin: "+a),this.ep=a.O(),null!==this.g&&Rk(this.g),this.ba(),this.h("gridOrigin",b,a))});r=L.prototype;r.Qt=function(a){U.prototype.Qt.call(this,a);for(var b=this.la.l,c=b.length,d=0;d<c;d++)b[d].Qt(a)};
r.Yi=function(a,b){if(this.da===xk){var c=this.Sh()*b.scale;0>=c&&(c=1);var d=this.Xu,e=d.width,d=d.height,f=this.sa,g=f.width,f=f.height,h=Math.ceil(g/e),k=Math.ceil(f/d),l=this.mC;a.save();a.beginPath();a.rect(0,0,g,f);a.clip();for(var m=[],n=this.la.l,p=n.length,q=0;q<p;q++){var s=n[q],t=[];m.push(t);if(s.visible)for(var s=Dl(s.jb),v=q+1;v<p;v++){var x=n[v];x.visible&&Dl(x.jb)===s&&(x=x.interval,2<=x&&t.push(x))}}n=this.la.l;p=n.length;for(q=0;q<p;q++){var B=n[q];if(B.visible){var t=m[q],s=B.interval,
v=!1,y=!0,C=B.Yy;null!==C&&(v=!0,void 0!==a.setLineDash?(a.setLineDash(C),a.lineDashOffset=B.yc):void 0!==a.webkitLineDash?(a.webkitLineDash=C,a.webkitLineDashOffset=B.yc):void 0!==a.mozDash?(a.mozDash=C,a.mozDashOffset=B.yc):y=!1);if("LineV"===B.jb){a.lineWidth=B.Na;Um(this,a,B.stroke,!1,!1);a.beginPath();for(var K=x=Math.floor(-l.x/e);K<=x+h;K++){var J=K*e+l.x;if(0<=J&&J<g&&eo(K,s,t)&&(v&&!y?Gm(a,J,0,J,f,C,B.yc):(a.moveTo(J,0),a.lineTo(J,f)),2>e*s*c))break}a.stroke()}else if("LineH"===B.jb){a.lineWidth=
B.Na;Um(this,a,B.stroke,!1,!1);a.beginPath();for(K=x=Math.floor(-l.y/d);K<=x+k&&!(J=K*d+l.y,0<=J&&J<=f&&eo(K,s,t)&&(v&&!y?Gm(a,0,J,g,J,C,B.yc):(a.moveTo(0,J),a.lineTo(g,J)),2>d*s*c));K++);a.stroke()}else if("BarV"===B.jb)for(Um(this,a,B.fill,!0,!1),B=B.width,isNaN(B)&&(B=e),K=x=Math.floor(-l.x/e);K<=x+h&&!(J=K*e+l.x,0<=J&&J<g&&eo(K,s,t)&&(a.fillRect(J,0,B,f),2>e*s*c));K++);else if("BarH"===B.jb)for(Um(this,a,B.fill,!0,!1),B=B.height,isNaN(B)&&(B=d),K=x=Math.floor(-l.y/d);K<=x+k&&!(J=K*d+l.y,0<=J&&
J<=f&&eo(K,s,t)&&(a.fillRect(0,J,g,B),2>d*s*c));K++);v&&(void 0!==a.setLineDash?(a.setLineDash(qb),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=qb,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0))}}a.restore();vk(b,a,!1)}else{this.da===an&&(a.lineCap="butt",fo(this,a,!0,this.Tc,!0),fo(this,a,!1,this.Mc,!0),ho(this,a,!0,this.Tc),ho(this,a,!1,this.Mc),fo(this,a,!0,this.Tc,!1),fo(this,a,!1,this.Mc,!1));(c=this.uC)&&a.save();e=this.Ze();d=this.la.l;g=
d.length;for(f=0;f<g;f++)h=d[f],c&&h===e&&(a.Gs=!0),h.oe(a,b),c&&h===e&&(a.Gs=!1);c&&(a.restore(),vk(b,a,!1))}};
function ho(a,b,c,d){for(var e=d.length,f=a.Q,g=c?a.Bc(0):a.Ac(0),h=0;h<e;h++){var k=d[h];if(void 0!==k&&k!==g&&0!==k.Aa){var l=k.io;isNaN(l)&&(l=c?a.Fg:a.Eg);var m=k.ho;null===m&&(m=c?a.oh:a.Dg);if(0!==l&&null!==m){Um(a,b,m,!1,!1);var m=!1,n=!0,p=k.IG;null!==p&&(m=!0,void 0!==b.setLineDash?(b.setLineDash(p),b.lineDashOffset=a.yc):void 0!==b.webkitLineDash?(b.webkitLineDash=p,b.webkitLineDashOffset=a.yc):void 0!==b.mozDash?(b.mozDash=p,b.mozDashOffset=a.yc):n=!1);b.beginPath();var q=k.position+l;
c?q>f.height&&(l-=q-f.height):q>f.width&&(l-=q-f.width);k=k.position+l/2;b.lineWidth=l;q=a.padding;c?(k+=q.top,l=q.left,q=f.width-q.right,m&&!n?Gm(b,l,k,q,k,p,0):(b.moveTo(l,k),b.lineTo(q,k))):(k+=q.left,l=q.top,q=f.height-q.bottom,m&&!n?Gm(b,k,l,k,q,p,0):(b.moveTo(k,l),b.lineTo(k,q)));b.stroke();m&&(void 0!==b.setLineDash?(b.setLineDash(qb),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=qb,b.webkitLineDashOffset=0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function fo(a,b,c,d,e){for(var f=d.length,g=a.Q,h=0;h<f;h++){var k=d[h];if(void 0!==k&&null!==k.background&&k.Mx!==e&&0!==k.Aa){var l=c?g.height:g.width;if(!(k.position>l)){var m=k.Cf(),n=k.io;isNaN(n)&&(n=c?a.Fg:a.Eg);var p=k.ho;null===p&&(p=c?a.oh:a.Dg);null===p&&(n=0);m-=n;n=k.position+n;m+=k.Aa;n+m>l&&(m=l-n);0>=m||(l=a.padding,Um(a,b,k.background,!0,!1),c?b.fillRect(l.left,n+l.top,g.width-(l.left+l.right),m):b.fillRect(n+l.left,l.top,m,g.height-(l.top+l.bottom)))}}}}
function eo(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function Dl(a){return"LineV"===a||"BarV"===a}
r.Fn=function(a,b,c,d,e){var f=this.jf(),g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.ul)return g=this.Q,Q.kk(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(null!==this.background)f=a*k+b*m+p,h=a*l+b*n+q,a=c*k+d*m+p,c=c*l+d*n+q,e.k(0,0),d=this.sa,c=Q.kk(0,0,d.width,d.height,f,h,a,c,e),e.transform(g);else{f||(k=1,m=l=0,n=1,q=p=0);h=a*k+b*m+p;a=a*l+b*n+q;k=c*k+d*m+p;d=c*l+d*n+q;e.k(k,d);l=
(k-h)*(k-h)+(d-a)*(d-a);c=!1;n=this.la.l;q=n.length;m=Va();for(p=0;p<q;p++)b=n[p],b.visible&&b.Fn(h,a,k,d,m)&&(c=!0,b=(h-m.x)*(h-m.x)+(a-m.y)*(a-m.y),b<l&&(l=b,e.set(m)));A(m);f&&e.transform(g)}return c};r.H=function(a){U.prototype.H.call(this,a);this.da===tk&&(a=this.Ze(),null!==a&&a.H(!0));a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Wk(d)&&(d.ka.w()||(d instanceof Qi||d instanceof L||d instanceof Zb||Lm(d,!1)!==Ri)&&d.H(!0))}};
r.In=function(){if(!1===Wk(this)){Qk(this,!0);Nm(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].In()}};r.Zf=function(){if(0!==(this.T&2048)===!1){Ym(this,!0);Zm(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].$x()}};r.$x=function(){Zm(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].$x()};
r.Rn=function(a,b,c,d){var e=this.Jh;e.width=0;e.height=0;var f=this.ka,g=this.Lf;void 0===c&&(c=g.width,d=g.height);c=Math.max(c,g.width);d=Math.max(d,g.height);var h=this.se;isNaN(f.width)||(a=Math.min(f.width,h.width));isNaN(f.height)||(b=Math.min(f.height,h.height));a=Math.max(c,a);b=Math.max(d,b);var k=this.padding;a=Math.max(a-k.left-k.right,0);b=Math.max(b-k.top-k.bottom,0);var l=this.la.l;if(0!==l.length){var m=this.da.yb;switch(m){case "Position":var n=a,p=b,q=c,s=d,t=l.length;e.x=0;e.y=
0;e.width=0;for(var v=e.height=0;v<t;v++){var x=l[v];if(x.visible||x===this.Jb){var B=x.margin,y=B.right+B.left,C=B.top+B.bottom;jj(x,n,p,q,s);var K=x.oa,J=Math.max(K.width+y,0),ba=Math.max(K.height+C,0),ja=x.position.x,Y=x.position.y;isFinite(ja)||(ja=0);isFinite(Y)||(Y=0);if(x instanceof X){var P=x;if(P.hy)var ha=P.Na/2,ja=ja-ha,Y=Y-ha}id(e,ja,Y,J,ba)}}break;case "Vertical":for(var Ra=a,Ha=c,eb=l.length,ya=ob(),Pa=0;Pa<eb;Pa++){var Ca=l[Pa];if(Ca.visible||Ca===this.Jb){var Hc=Lm(Ca,!1);if(Hc!==
Ri&&Hc!==Am)ya.push(Ca);else{var Nd=Ca.margin,Cg=Nd.right+Nd.left,Ic=Nd.top+Nd.bottom;jj(Ca,Ra,Infinity,Ha,0);var Jf=Ca.oa,Dg=Math.max(Jf.width+Cg,0),lb=Math.max(Jf.height+Ic,0);e.width=Math.max(e.width,Dg);e.height+=lb}}}var Bb=ya.length;if(0!==Bb){this.ka.width?Ra=Math.min(this.ka.width,this.se.width):0!==e.width&&(Ra=Math.min(e.width,this.se.width));for(Pa=0;Pa<Bb;Pa++)if(Ca=ya[Pa],Ca.visible||Ca===this.Jb)Nd=Ca.margin,Cg=Nd.right+Nd.left,Ic=Nd.top+Nd.bottom,jj(Ca,Ra,Infinity,Ha,0),Jf=Ca.oa,Dg=
Math.max(Jf.width+Cg,0),lb=Math.max(Jf.height+Ic,0),e.width=Math.max(e.width,Dg),e.height+=lb;pb(ya)}break;case "Horizontal":for(var Ja=b,Ma=d,Jb=l.length,fc=ob(),wb=0;wb<Jb;wb++){var Nc=l[wb];if(Nc.visible||Nc===this.Jb){var Re=Lm(Nc,!1);if(Re!==Ri&&Re!==Bm)fc.push(Nc);else{var Sc=Nc.margin,xe=Sc.right+Sc.left,Se=Sc.top+Sc.bottom;jj(Nc,Infinity,Ja,0,Ma);var Kf=Nc.oa,eg=Math.max(Kf.width+xe,0),ye=Math.max(Kf.height+Se,0);e.width+=eg;e.height=Math.max(e.height,ye)}}}var gc=fc.length;if(0!==gc){this.ka.height?
Ja=Math.min(this.ka.height,this.se.height):0!==e.height&&(Ja=Math.min(e.height,this.se.height));for(wb=0;wb<gc;wb++)if(Nc=fc[wb],Nc.visible||Nc===this.Jb)Sc=Nc.margin,xe=Sc.right+Sc.left,Se=Sc.top+Sc.bottom,jj(Nc,Infinity,Ja,0,Ma),Kf=Nc.oa,eg=Math.max(Kf.width+xe,0),ye=Math.max(Kf.height+Se,0),e.width+=eg,e.height=Math.max(e.height,ye);pb(fc)}break;case "Spot":a:{var mc=a,kd=b,Hh=c,nc=d,$b=l.length,Jc=this.Ze(),Kb=Jc.margin,kf=0,ze=0,hh=Kb.right+Kb.left,Eg=Kb.top+Kb.bottom;jj(Jc,mc,kd,Hh,nc);var ac=
Jc.oa,Od=ac.width,Tc=ac.height,Yb=Math.max(Od+hh,0),ld=Math.max(Tc+Eg,0);e.x=-Kb.left;e.y=-Kb.top;e.width=Yb;e.height=ld;for(var oc=0;oc<$b;oc++){var cb=l[oc];if(cb!==Jc&&(cb.visible||cb===this.Jb)){Kb=cb.margin;kf=Kb.right+Kb.left;ze=Kb.top+Kb.bottom;jj(cb,mc,kd,0,0);var ac=cb.oa,Yb=Math.max(ac.width+kf,0),ld=Math.max(ac.height+ze,0),Cb=cb.alignment;Cb.lc()&&(Cb=this.bk);Cb.Kc()||(Cb=Dd);var bc=cb.Ti;bc.lc()&&(bc=Dd);id(e,Cb.x*Od+Cb.offsetX-(bc.x*ac.width-bc.offsetX)-Kb.left,Cb.y*Tc+Cb.offsetY-(bc.y*
ac.height-bc.offsetY)-Kb.top,Yb,ld)}}var Kc=Jc.stretch;Kc===zm&&(Kc=Lm(Jc,!1));switch(Kc){case Ri:break a;case Ne:if(!isFinite(mc)&&!isFinite(kd))break a;break;case Bm:if(!isFinite(mc))break a;break;case Am:if(!isFinite(kd))break a}ac=Jc.oa;Od=ac.width;Tc=ac.height;Yb=Math.max(Od+hh,0);ld=Math.max(Tc+Eg,0);Kb=Jc.margin;e.x=-Kb.left;e.y=-Kb.top;e.width=Yb;e.height=ld;for(oc=0;oc<$b;oc++)cb=l[oc],cb===Jc||!cb.visible&&cb!==this.Jb||(Kb=cb.margin,kf=Kb.right+Kb.left,ze=Kb.top+Kb.bottom,ac=cb.oa,Yb=Math.max(ac.width+
kf,0),ld=Math.max(ac.height+ze,0),Cb=cb.alignment,Cb.lc()&&(Cb=this.bk),Cb.Kc()||(Cb=Dd),bc=cb.Ti,bc.lc()&&(bc=Dd),id(e,Cb.x*Od+Cb.offsetX-(bc.x*ac.width-bc.offsetX)-Kb.left,Cb.y*Tc+Cb.offsetY-(bc.y*ac.height-bc.offsetY)-Kb.top,Yb,ld))}break;case "Auto":var Ae=a,Be=b,fg=c,lf=d,gg=l.length,uc=this.Ze(),Ab=uc.margin,Uc=Ab.right+Ab.left,wd=Ab.top+Ab.bottom;jj(uc,Ae,Be,fg,lf);var Pd=uc.oa,xb=Math.max(Pd.width+Uc,0),Vb=Math.max(Pd.height+wd,0),Oc=io(uc),Qd=Oc.x*xb+Oc.offsetX,Ih=Oc.y*Vb+Oc.offsetY,Oc=jo(uc),
Jh=Oc.x*xb+Oc.offsetX,Kh=Oc.y*Vb+Oc.offsetY,Fg=Ae,md=Be;isFinite(Ae)&&(Fg=Math.abs(Qd-Jh));isFinite(Be)&&(md=Math.abs(Ih-Kh));var xd=Ya();xd.k(0,0);for(var nd=0;nd<gg;nd++){var Lb=l[nd];if(Lb!==uc&&(Lb.visible||Lb===this.Jb)){var Ab=Lb.margin,Te=Ab.right+Ab.left,Mb=Ab.top+Ab.bottom;jj(Lb,Fg,md,0,0);Pd=Lb.oa;xb=Math.max(Pd.width+Te,0);Vb=Math.max(Pd.height+Mb,0);xd.k(Math.max(xb,xd.width),Math.max(Vb,xd.height))}}if(1===gg)e.width=xb,e.height=Vb,$a(xd);else{var dd=io(uc),mf=jo(uc),cc=0,dc=0;mf.x!==
dd.x&&mf.y!==dd.y&&(cc=xd.width/Math.abs(mf.x-dd.x),dc=xd.height/Math.abs(mf.y-dd.y));$a(xd);var Rd=0;if(uc instanceof X){var yd=uc,Rd=yd.Na*yd.scale;Si(yd)===Ti&&(cc=dc=Math.max(cc,dc))}var cc=cc+(Math.abs(dd.offsetX)+Math.abs(mf.offsetX)+Rd),dc=dc+(Math.abs(dd.offsetY)+Math.abs(mf.offsetY)+Rd),Ce=uc.stretch;Ce===zm&&(Ce=Lm(uc,!1));switch(Ce){case Ri:lf=fg=0;break;case Ne:isFinite(Ae)&&(cc=Ae);isFinite(Be)&&(dc=Be);break;case Bm:isFinite(Ae)&&(cc=Ae);lf=0;break;case Am:fg=0,isFinite(Be)&&(dc=Be)}uc instanceof
X&&!uc.ka.w()&&(yd=uc,yd.fg?yd.tj=null:yd.za=null);uc.In();jj(uc,cc,dc,fg,lf);e.width=uc.oa.width+Uc;e.height=uc.oa.height+wd}break;case "Table":for(var De=a,Lf=b,zn=c,Cj=d,Sa=l.length,nf=ob(),Ee=ob(),la=0;la<Sa;la++){var qa=l[la],ih=qa instanceof L?qa:null;if(null===ih||ih.type!==Pm&&ih.type!==Qm||!qa.visible)nf.push(qa);else{Ee.push(qa);for(var Lh=ih.la.l,ui=Lh.length,zd=0;zd<ui;zd++){var vi=Lh[zd];ih.type===Pm?vi.Tb=qa.Tb:ih.type===Qm&&(vi.column=qa.column);nf.push(vi)}}}Sa=nf.length;0===Sa&&(this.Bc(0),
this.Ac(0));for(var vc=[],la=0;la<Sa;la++)qa=nf[la],Qk(qa,!0),Nm(qa,!0),vc[qa.Tb]||(vc[qa.Tb]=[]),vc[qa.Tb][qa.column]||(vc[qa.Tb][qa.column]=[]),vc[qa.Tb][qa.column].push(qa);pb(nf);for(var Mh=ob(),Ad=ob(),Ue=ob(),od={count:0},Sd={count:0},ed=De,Td=Lf,Gg=this.Tc,Sa=Gg.length,la=0;la<Sa;la++){var ka=Gg[la];void 0!==ka&&(ka.Aa=0)}Gg=this.Mc;Sa=Gg.length;for(la=0;la<Sa;la++)ka=Gg[la],void 0!==ka&&(ka.Aa=0);for(var Ve=vc.length,of=0,la=0;la<Ve;la++)vc[la]&&(of=Math.max(of,vc[la].length));for(var Yk=
Math.min(this.Ih,Ve-1),Zk=Math.min(this.vh,of-1),fd=0,Ve=vc.length,la=Yk;la<Ve;la++)if(vc[la]){var of=vc[la].length,Db=this.Bc(la);Db.Aa=0;for(zd=Zk;zd<of;zd++)if(vc[la][zd]){var Eb=this.Ac(zd);void 0===Mh[zd]&&(Eb.Aa=0,Mh[zd]=!0);for(var $k=vc[la][zd],Hg=$k.length,jh=0;jh<Hg;jh++)if(qa=$k[jh],qa.visible||qa===this.Jb){var kh=1<qa.Ei||1<qa.gi;kh&&Ad.push(qa);var pc=qa.margin,Ig=pc.right+pc.left,Jg=pc.top+pc.bottom,Fe=bn(qa,Db,Eb,!1),We=qa.ka,An=!isNaN(We.height),wi=!isNaN(We.width)&&An;kh||Fe===Ri||
wi||(void 0===od[zd]&&(od[zd]=-1,od.count++),void 0===Sd[la]&&(Sd[la]=-1,Sd.count++),Ue.push(qa));jj(qa,Infinity,Infinity,0,0);var pf=qa.oa,Mf=Math.max(pf.width+Ig,0),ke=Math.max(pf.height+Jg,0);1!==qa.Ei||Fe!==Ri&&Fe!==Bm||(ka=this.Bc(la),fd=Math.max(ke-ka.Aa,0),fd>Td&&(fd=Td),ka.Aa+=fd,Td=Math.max(Td-fd,0));1!==qa.gi||Fe!==Ri&&Fe!==Am||(ka=this.Ac(zd),fd=Math.max(Mf-ka.Aa,0),fd>ed&&(fd=ed),ka.Aa+=fd,ed=Math.max(ed-fd,0));kh&&qa.In()}}}pb(Mh);for(var Vc=0,Ge=0,Sa=this.pr,la=0;la<Sa;la++)void 0!==
this.Mc[la]&&(Vc+=this.Ac(la).bb);Sa=this.ms;for(la=0;la<Sa;la++)void 0!==this.Tc[la]&&(Ge+=this.Bc(la).bb);for(var ed=Math.max(De-Vc,0),al=Td=Math.max(Lf-Ge,0),bl=ed,Sa=Ue.length,la=0;la<Sa;la++){var qa=Ue[la],Db=this.Bc(qa.Tb),Eb=this.Ac(qa.column),Dj=qa.oa,pc=qa.margin,Ig=pc.right+pc.left,Jg=pc.top+pc.bottom;od[qa.column]=0===Eb.Aa?Math.max(Dj.width+Ig,od[qa.column]):null;Sd[qa.Tb]=0===Db.Aa?Math.max(Dj.height+Jg,Sd[qa.Tb]):null}var Nh=0,gd=0;for(la in Sd)"count"!==la&&(Nh+=Sd[la]);for(la in od)"count"!==
la&&(gd+=od[la]);for(var Nb=Ya(),la=0;la<Sa;la++)if(qa=Ue[la],qa.visible||qa===this.Jb){var Db=this.Bc(qa.Tb),Eb=this.Ac(qa.column),Xe=0;isFinite(Eb.width)?Xe=Eb.width:(Xe=isFinite(ed)&&null!==od[qa.column]?0===gd?Eb.Aa+ed:od[qa.column]/gd*bl:null!==od[qa.column]?ed:Eb.Aa||ed,Xe=Math.max(0,Xe-Eb.Cf()));var pd=0;isFinite(Db.height)?pd=Db.height:(pd=isFinite(Td)&&null!==Sd[qa.Tb]?0===Nh?Db.Aa+Td:Sd[qa.Tb]/Nh*al:null!==Sd[qa.Tb]?Td:Db.Aa||Td,pd=Math.max(0,pd-Db.Cf()));Nb.k(Math.max(Eb.Vh,Math.min(Xe,
Eb.af)),Math.max(Db.Vh,Math.min(pd,Db.af)));Fe=bn(qa,Db,Eb,!1);switch(Fe){case Bm:Nb.height=Infinity;break;case Am:Nb.width=Infinity}pc=qa.margin;Ig=pc.right+pc.left;Jg=pc.top+pc.bottom;qa.In();jj(qa,Nb.width,Nb.height,Eb.Vh,Db.Vh);pf=qa.oa;Mf=Math.max(pf.width+Ig,0);ke=Math.max(pf.height+Jg,0);isFinite(ed)&&(Mf=Math.min(Mf,Nb.width));isFinite(Td)&&(ke=Math.min(ke,Nb.height));var Oh=0,Oh=Db.Aa;Db.Aa=Math.max(Db.Aa,ke);fd=Db.Aa-Oh;Td=Math.max(Td-fd,0);Oh=Eb.Aa;Eb.Aa=Math.max(Eb.Aa,Mf);fd=Eb.Aa-Oh;
ed=Math.max(ed-fd,0)}pb(Ue);for(var qf=Ya(),Sa=Ad.length,la=0;la<Sa;la++)if(qa=Ad[la],qa.visible||qa===this.Jb){Db=this.Bc(qa.Tb);Eb=this.Ac(qa.column);Nb.k(Math.max(Eb.Vh,Math.min(De,Eb.af)),Math.max(Db.Vh,Math.min(Lf,Db.af)));Fe=bn(qa,Db,Eb,!1);switch(Fe){case Ne:0!==Eb.Aa&&(Nb.width=Math.min(Nb.width,Eb.Aa));0!==Db.Aa&&(Nb.height=Math.min(Nb.height,Db.Aa));break;case Bm:0!==Eb.Aa&&(Nb.width=Math.min(Nb.width,Eb.Aa));break;case Am:0!==Db.Aa&&(Nb.height=Math.min(Nb.height,Db.Aa))}isFinite(Eb.width)&&
(Nb.width=Eb.width);isFinite(Db.height)&&(Nb.height=Db.height);qf.k(0,0);for(var qc=1;qc<qa.Ei&&!(qa.Tb+qc>=this.ms);qc++)ka=this.Bc(qa.Tb+qc),qf.height+=Math.max(ka.Vh,isNaN(ka.ie)?ka.af:Math.min(ka.ie,ka.af));for(qc=1;qc<qa.gi&&!(qa.column+qc>=this.pr);qc++)ka=this.Ac(qa.column+qc),qf.width+=Math.max(ka.Vh,isNaN(ka.ie)?ka.af:Math.min(ka.ie,ka.af));Nb.width+=qf.width;Nb.height+=qf.height;pc=qa.margin;Ig=pc.right+pc.left;Jg=pc.top+pc.bottom;jj(qa,Nb.width,Nb.height,zn,Cj);for(var pf=qa.oa,Mf=Math.max(pf.width+
Ig,0),ke=Math.max(pf.height+Jg,0),xi=0,qc=0;qc<qa.Ei&&!(qa.Tb+qc>=this.ms);qc++)ka=this.Bc(qa.Tb+qc),xi+=ka.total||0;if(xi<ke)for(var le=ke-xi;0<le;){var me=ka.bb||0;isNaN(ka.height)&&ka.af>me&&(ka.Aa=Math.min(ka.af,me+le),ka.bb!==me&&(le-=ka.bb-me));if(-1===ka.index-1)break;ka=this.Bc(ka.index-1)}for(var Kg=0,qc=0;qc<qa.gi&&!(qa.column+qc>=this.pr);qc++)ka=this.Ac(qa.column+qc),Kg+=ka.total||0;if(Kg<Mf)for(le=Mf-Kg;0<le;){me=ka.bb||0;isNaN(ka.width)&&ka.af>me&&(ka.Aa=Math.min(ka.af,me+le),ka.bb!==
me&&(le-=ka.bb-me));if(-1===ka.index-1)break;ka=this.Ac(ka.index-1)}}pb(Ad);$a(qf);$a(Nb);for(var Lg=0,Nf=0,Fe=Lm(this,!0),ne=this.ka,Mg=this.se,Ye=Ge=Vc=0,Ud=0,Sa=this.pr,la=0;la<Sa;la++)void 0!==this.Mc[la]&&(ka=this.Ac(la),isFinite(ka.width)?(Ye+=ka.width,Ye+=ka.Cf()):ko(ka)===lo?(Ye+=ka.bb,Ye+=ka.Cf()):0!==ka.bb&&(Vc+=ka.bb,Vc+=ka.Cf()));var Lg=isFinite(ne.width)?Math.min(ne.width,Mg.width):Fe!==Ri&&isFinite(De)?De:Vc,Lg=Math.max(Lg,this.Lf.width),Lg=Math.max(Lg-Ye,0),yi=Math.max(Lg/Vc,1);isFinite(yi)||
(yi=1);for(la=0;la<Sa;la++)void 0!==this.Mc[la]&&(ka=this.Ac(la),isFinite(ka.width)||ko(ka)===lo||(ka.Aa=ka.bb*yi),ka.position=e.width,0!==ka.bb&&(e.width+=ka.bb,e.width+=ka.Cf()));Sa=this.ms;for(la=0;la<Sa;la++)void 0!==this.Tc[la]&&(ka=this.Bc(la),isFinite(ka.height)?(Ud+=ka.height,Ud+=ka.Cf()):ko(ka)===lo?(Ud+=ka.bb,Ud+=ka.Cf()):0!==ka.bb&&(Ge+=ka.bb,Ge+=ka.Cf()));var Nf=isFinite(ne.height)?Math.min(ne.height,Mg.height):Fe!==Ri&&isFinite(Lf)?Lf:Ge,Nf=Math.max(Nf,this.Lf.height),Nf=Math.max(Nf-
Ud,0),Ng=Math.max(Nf/Ge,1);isFinite(Ng)||(Ng=1);for(la=0;la<Sa;la++)void 0!==this.Tc[la]&&(ka=this.Bc(la),isFinite(ka.height)||ko(ka)===lo||(ka.Aa=ka.bb*Ng),ka.position=e.height,0!==ka.bb&&(e.height+=ka.bb,e.height+=ka.Cf()));Sa=Ee.length;for(la=0;la<Sa;la++){var wc=Ee[la];wc.type===Pm?(Xe=e.width,ka=this.Bc(wc.Tb),pd=ka.Aa):(ka=this.Ac(wc.column),Xe=ka.Aa,pd=e.height);wc.nc.k(0,0,Xe,pd);Qk(wc,!1);vc[wc.Tb]||(vc[wc.Tb]=[]);vc[wc.Tb][wc.column]||(vc[wc.Tb][wc.column]=[]);vc[wc.Tb][wc.column].push(wc)}pb(Ee);
this.Bq=vc;break;case "Viewbox":var lh=a,mh=b,hg=c,Ej=d;1<l.length&&u("Viewbox Panel cannot contain more than one GraphObject.");var rf=l[0];rf.Eb=1;rf.In();jj(rf,Infinity,Infinity,hg,Ej);var Fj=rf.oa,dl=rf.margin,ar=dl.right+dl.left,br=dl.top+dl.bottom;if(isFinite(lh)||isFinite(mh)){var mt=rf.scale,el=Fj.width,fl=Fj.height,cr=Math.max(lh-ar,0),dr=Math.max(mh-br,0),Gj=1;this.mn===Ti?0!==el&&0!==fl&&(Gj=Math.min(cr/el,dr/fl)):0!==el&&0!==fl&&(Gj=Math.max(cr/el,dr/fl));0===Gj&&(Gj=1E-4);rf.Eb*=Gj;mt!==
rf.scale&&(Qk(rf,!0),jj(rf,Infinity,Infinity,hg,Ej))}Fj=rf.oa;e.width=isFinite(lh)?lh:Math.max(Fj.width+ar,0);e.height=isFinite(mh)?mh:Math.max(Fj.height+br,0);break;case "Link":var er=l.length,nh=this instanceof Vg?this.Yg:this;if(nh instanceof W)if(0===er){var gl=this.hc;ad(gl,0,0);var He=this.oa;He.k(0,0,0,0)}else{var hl=this instanceof Vg?null:nh.path,Of=nh.Rl,sf=this.Jh;sf.assign(Of);sf.x=0;var zi=sf.y=0,Hj=nh.points,zi=void 0!==this.Z?this.Z:Hj.count;this.bg.k(Of.x,Of.y);this.fi.clear();null!==
hl&&(mo(hl,Of.width,Of.height),He=hl.oa,sf.fh(He),this.fi.add(He));for(var Ai=hb(),Ij=Va(),Og=Va(),Bn=0;Bn<er;Bn++){var rc=l[Bn];if(rc!==hl)if(rc.Jf&&rc instanceof X)mo(rc,Of.width,Of.height),He=rc.oa,sf.fh(He),this.fi.add(He);else if(2>zi)jj(rc,Infinity,Infinity),He=rc.oa,sf.fh(He),this.fi.add(He);else{var Pg=rc.ff,gr=rc.wv,Cn=rc.Ti;Cn.Gd()&&(Cn=Dd);var Jj=rc.xv,nt=rc.kD,Kj=0,Lj=0,il=0;if(Pg<-zi||Pg>=zi){var hr=nh.GC,Mj=nh.FC;Jj!==Ei&&(il=nh.computeAngle(rc,Jj,Mj),rc.angle=il);Kj=hr.x-Of.x;Lj=hr.y-
Of.y}else{var ig,Bi;if(0<=Pg)ig=Hj.Y(Pg),Bi=Pg<zi-1?Hj.Y(Pg+1):ig;else{var Dn=zi+Pg;ig=Hj.Y(Dn);Bi=0<Dn?Hj.Y(Dn-1):ig}Mj=0<=Pg?ig.Qh(Bi):Bi.Qh(ig);Jj!==Ei&&(il=nh.computeAngle(rc,Jj,Mj),rc.cm=il);Kj=ig.x+(Bi.x-ig.x)*gr-Of.x;Lj=ig.y+(Bi.y-ig.y)*gr-Of.y}jj(rc,Infinity,Infinity);var He=rc.oa,gl=rc.sa,Nj=0;rc instanceof X&&(Nj=rc.Na);var jl=gl.width+Nj,En=gl.height+Nj;Ai.reset();Ai.translate(-He.x,-He.y);Ai.scale(rc.scale,rc.scale);Ai.rotate(Jj===Ei?rc.angle:Mj,jl/2,En/2);var Ci=new D(0,0,jl,En);Ij.qs(Ci,
Cn);Ai.Ka(Ij);var ot=-Ij.x+Nj/2,pt=-Ij.y+Nj/2;Og.assign(nt);isNaN(Og.x)&&(Og.x=0<=Pg?jl/2+3:-(jl/2+3));isNaN(Og.y)&&(Og.y=-(En/2+3));Og.rotate(Mj);Kj+=Og.x;Lj+=Og.y;Ci.set(He);Ci.x=Kj+ot;Ci.y=Lj+pt;this.fi.add(Ci);sf.fh(Ci)}}if(this.Od)for(var ir=this.Kf;ir.next();)jj(ir.value,Infinity,Infinity);this.Jh=sf;var Fn=this.bg;Fn.k(Fn.x+sf.x,Fn.y+sf.y);ad(e,sf.width||0,sf.height||0);jb(Ai);A(Ij);A(Og)}break;case "Grid":break;case "TableRow":case "TableColumn":u(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
break;default:u("Unknown panel type: "+m)}}var tf=e.width,uf=e.height,kl=this.padding,qt=kl.top+kl.bottom,tf=tf+(kl.left+kl.right),uf=uf+qt;isFinite(f.width)&&(tf=f.width);isFinite(f.height)&&(uf=f.height);tf=Math.min(h.width,tf);uf=Math.min(h.height,uf);tf=Math.max(g.width,tf);uf=Math.max(g.height,uf);tf=Math.max(c,tf);uf=Math.max(d,uf);e.width=tf;e.height=uf;ad(this.hc,tf,uf);Im(this,0,0,tf,uf)};
L.prototype.findMainElement=L.prototype.Ze=function(){if(null===this.ol){var a=this.la.l,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.Jf)return this.ol=d}this.ol=a[0]}return this.ol};
L.prototype.Kh=function(a,b,c,d){var e=this.Jh,f=this.la.l,g=db(0,0,0,0);if(0===f.length){var h=this.Q;h.x=a;h.y=b;h.width=c;h.height=d}else{if(!this.ka.w()){var k=Lm(this,!0),l=this.nc,m=l.width,n=l.height,p=this.margin,q=p.left+p.right,s=p.top+p.bottom;m===c&&n===d&&(k=Ri);switch(k){case Ri:if(m>c||n>d)this.H(),jj(this,m>c?c:m,n>d?d:n);break;case Ne:this.H(!0);jj(this,c+q,d+s,0,0);break;case Bm:this.H(!0);jj(this,c+q,n+s,0,0);break;case Am:this.H(!0),jj(this,m+q,d+s,0,0)}}h=this.Q;h.x=a;h.y=b;h.width=
c;h.height=d;var t=this.da.yb;switch(t){case "Position":for(var v=f.length,x=e.x-this.padding.left,B=e.y-this.padding.top,y=0;y<v;y++){var C=f[y],K=C.oa,J=C.margin,ba=C.position.x,ja=C.position.y;g.x=isNaN(ba)?-x:ba-x;g.y=isNaN(ja)?-B:ja-B;if(C instanceof X){var Y=C;if(Y.hy){var P=Y.Na/2;g.x-=P;g.y-=P}}g.x+=J.left;g.y+=J.top;g.width=K.width;g.height=K.height;C.visible&&C.ac(g.x,g.y,g.width,g.height)}break;case "Vertical":for(var ha=f.length,Ra=this.padding.left,Ha=this.padding.top,eb=0;eb<ha;eb++){var ya=
Ra,Pa=f[eb];if(Pa.visible){var Ca=Pa.oa,Hc=Pa.margin,Nd=Hc.left+Hc.right,Cg=Ra+this.padding.right,Ic=Ca.width,Jf=Lm(Pa,!1);if(isNaN(Pa.ka.width)&&Jf===Ne||Jf===Bm)Ic=Math.max(e.width-Nd-Cg,0);var Dg=Ic+Nd+Cg,lb=Pa.alignment;lb.lc()&&(lb=this.bk);lb.Kc()||(lb=Dd);Pa.ac(ya+lb.offsetX+Hc.left+(e.width*lb.x-Dg*lb.x),Ha+lb.offsetY+Hc.top,Ic,Ca.height);Ha+=Ca.height+Hc.bottom+Hc.top}}break;case "Horizontal":for(var Bb=f.length,Ja=this.padding.top,Ma=this.padding.left,Jb=0;Jb<Bb;Jb++){var fc=Ja,wb=f[Jb];
if(wb.visible){var Nc=wb.oa,Re=wb.margin,Sc=Re.top+Re.bottom,xe=Ja+this.padding.bottom,Se=Nc.height,Kf=Lm(wb,!1);if(isNaN(wb.ka.height)&&Kf===Ne||Kf===Am)Se=Math.max(e.height-Sc-xe,0);var eg=Se+Sc+xe,ye=wb.alignment;ye.lc()&&(ye=this.bk);ye.Kc()||(ye=Dd);wb.ac(Ma+ye.offsetX+Re.left,fc+ye.offsetY+Re.top+(e.height*ye.y-eg*ye.y),Nc.width,Se);Ma+=Nc.width+Re.left+Re.right}}break;case "Spot":var gc=f.length,mc=this.Ze(),kd=mc.oa,Hh=kd.width,nc=kd.height,$b=this.padding,Jc=$b.left,Kb=$b.top;g.x=Jc-e.x;
g.y=Kb-e.y;mc.ac(g.x,g.y,Hh,nc);for(var kf=0;kf<gc;kf++){var ze=f[kf];if(ze!==mc){var hh=ze.oa,Eg=hh.width,ac=hh.height,Od=ze.alignment;Od.lc()&&(Od=this.bk);Od.Kc()||(Od=Dd);var Tc=ze.Ti;Tc.lc()&&(Tc=Dd);g.x=Od.x*Hh+Od.offsetX-(Tc.x*Eg-Tc.offsetX);g.y=Od.y*nc+Od.offsetY-(Tc.y*ac-Tc.offsetY);g.x-=e.x;g.y-=e.y;ze.visible&&ze.ac(Jc+g.x,Kb+g.y,Eg,ac)}}break;case "Auto":var Yb=f.length,ld=this.Ze(),oc=ld.oa,cb=bb();cb.k(0,0,1,1);var Cb=ld.margin,bc=Cb.left,Kc=Cb.top,Ae=this.padding,Be=Ae.left,fg=Ae.top;
g.x=bc;g.y=Kc;g.width=oc.width;g.height=oc.height;ld.ac(Be+g.x,fg+g.y,g.width,g.height);var lf=io(ld),gg=jo(ld),uc=0+lf.y*oc.height+lf.offsetY,Ab=0+gg.x*oc.width+gg.offsetX,Uc=0+gg.y*oc.height+gg.offsetY;cb.x=0+lf.x*oc.width+lf.offsetX;cb.y=uc;id(cb,Ab,Uc,0,0);cb.x+=bc+Be;cb.y+=Kc+fg;for(var wd=0;wd<Yb;wd++){var Pd=f[wd];if(Pd!==ld){var xb=Pd.oa,Cb=Pd.margin,Vb=Math.max(xb.width+Cb.right+Cb.left,0),Oc=Math.max(xb.height+Cb.top+Cb.bottom,0),Qd=Pd.alignment;Qd.lc()&&(Qd=this.bk);Qd.Kc()||(Qd=Dd);g.x=
cb.width*Qd.x+Qd.offsetX-Vb*Qd.x+Cb.left+cb.x;g.y=cb.height*Qd.y+Qd.offsetY-Oc*Qd.y+Cb.top+cb.y;g.width=cb.width;g.height=cb.height;Pd.visible&&(jd(cb.x,cb.y,cb.width,cb.height,g.x,g.y,xb.width,xb.height)?Pd.ac(g.x,g.y,xb.width,xb.height):Pd.ac(g.x,g.y,xb.width,xb.height,new D(cb.x,cb.y,cb.width,cb.height)))}}fb(cb);break;case "Table":for(var Ih=f.length,Jh=this.padding,Kh=Jh.left,Fg=Jh.top,md=this.Bq,xd=0,nd=0,Lb=md.length,Te=0,Mb=0;Mb<Lb;Mb++)md[Mb]&&(Te=Math.max(Te,md[Mb].length));for(var dd=Math.min(this.Ih,
Lb-1);dd!==Lb&&(void 0===this.Tc[dd]||0===this.Tc[dd].bb);)dd++;for(var dd=Math.min(dd,Lb-1),mf=-this.Tc[dd].xa,cc=Math.min(this.vh,Te-1);cc!==Te&&(void 0===this.Mc[cc]||0===this.Mc[cc].bb);)cc++;for(var cc=Math.min(cc,Te-1),dc=-this.Mc[cc].xa,Rd=Ya(),Mb=0;Mb<Lb;Mb++)if(md[Mb])for(var Te=md[Mb].length,yd=this.Bc(Mb),nd=yd.xa+mf+Fg+yd.MB(),Ce=0;Ce<Te;Ce++)if(md[Mb][Ce])for(var De=this.Ac(Ce),xd=De.xa+dc+Kh+De.MB(),Lf=md[Mb][Ce],zn=Lf.length,Cj=0;Cj<zn;Cj++){var Sa=Lf[Cj],nf=Sa.oa,Ee=Sa instanceof L?
Sa:null;if(null===Ee||Ee.type!==Pm&&Ee.type!==Qm){Rd.k(0,0);for(var la=1;la<Sa.rowSpan&&!(Mb+la>=this.ms);la++){var qa=this.Bc(Mb+la);Rd.height+=qa.total}for(la=1;la<Sa.HE&&!(Ce+la>=this.pr);la++){var ih=this.Ac(Ce+la);Rd.width+=ih.total}var Lh=De.bb+Rd.width,ui=yd.bb+Rd.height;g.x=xd;g.y=nd;g.width=Lh;g.height=ui;var zd=xd,vi=nd,vc=Lh,Mh=ui;xd+Lh>e.width&&(vc=Math.max(e.width-xd,0));nd+ui>e.height&&(Mh=Math.max(e.height-nd,0));var Ad=Sa.alignment,Ue=0,od=0,Sd=0,ed=0;if(Ad.lc()){Ad=this.bk;Ad.Kc()||
(Ad=Dd);var Ue=Ad.x,od=Ad.y,Sd=Ad.offsetX,ed=Ad.offsetY,Td=De.alignment,Gg=yd.alignment;Td.Kc()&&(Ue=Td.x,Sd=Td.offsetX);Gg.Kc()&&(od=Gg.y,ed=Gg.offsetY)}else Ue=Ad.x,od=Ad.y,Sd=Ad.offsetX,ed=Ad.offsetY;if(isNaN(Ue)||isNaN(od))od=Ue=.5,ed=Sd=0;var ka=nf.width,Ve=nf.height,of=Sa.margin,Yk=of.left+of.right,Zk=of.top+of.bottom,fd=bn(Sa,yd,De,!1);!isNaN(Sa.ka.width)||fd!==Ne&&fd!==Bm||(ka=Math.max(Lh-Yk,0));!isNaN(Sa.ka.height)||fd!==Ne&&fd!==Am||(Ve=Math.max(ui-Zk,0));var Db=Sa.se,Eb=Sa.Lf,ka=Math.min(Db.width,
ka),Ve=Math.min(Db.height,Ve),ka=Math.max(Eb.width,ka),Ve=Math.max(Eb.height,Ve),$k=Ve+Zk;g.x+=g.width*Ue-(ka+Yk)*Ue+Sd+of.left;g.y+=g.height*od-$k*od+ed+of.top;Sa.visible&&(jd(zd,vi,vc,Mh,g.x,g.y,nf.width,nf.height)?Sa.ac(g.x,g.y,ka,Ve):Sa.ac(g.x,g.y,ka,Ve,new D(zd,vi,vc,Mh)))}else{Sa.Zf();Sa.Bb.wa();var Hg=Sa.Bb;Hg.x=Ee.type===Pm?Kh:xd;Hg.y=Ee.type===Qm?Fg:nd;Hg.width=nf.width;Hg.height=nf.height;Sa.Bb.freeze();Nm(Sa,!1)}}$a(Rd);for(Mb=0;Mb<Ih;Mb++)Sa=f[Mb],Ee=Sa instanceof L?Sa:null,null===Ee||
Ee.type!==Pm&&Ee.type!==Qm||(Hg=Sa.Bb,Sa.hc.wa(),Sa.hc.k(0,0,Hg.width,Hg.height),Sa.hc.freeze());break;case "Viewbox":var jh=f[0],kh=jh.oa,pc=jh.margin,Ig=pc.top+pc.bottom,Jg=Math.max(kh.width+(pc.right+pc.left),0),Fe=Math.max(kh.height+Ig,0),We=jh.alignment;We.lc()&&(We=this.bk);We.Kc()||(We=Dd);g.x=e.width*We.x-Jg*We.x+We.offsetX;g.y=e.height*We.y-Fe*We.y+We.offsetY;g.width=kh.width;g.height=kh.height;jh.ac(g.x,g.y,g.width,g.height);break;case "Link":var An=f.length,wi=this instanceof Vg?this.Yg:
this;if(wi instanceof W){var pf=this instanceof Vg?null:wi.path,Mf=this.fi.l,ke=0;if(null!==pf&&ke<this.fi.count){var Vc=Mf[ke];ke++;pf.ac(Vc.x-this.Jh.x,Vc.y-this.Jh.y,Vc.width,Vc.height)}for(var Ge=0;Ge<An;Ge++){var al=f[Ge];al!==pf&&ke<this.fi.count&&(Vc=Mf[ke],ke++,al.ac(Vc.x-this.Jh.x,Vc.y-this.Jh.y,Vc.width,Vc.height))}var bl=wi.points,Dj=bl.count;if(2<=Dj&&this.Od)for(var Nh=this.Kf;Nh.next();){var gd=Nh.value,Nb=Dj,Xe=bl,pd=gd.ff,Oh=gd.wv,qf=gd.Ti;qf.Gd()&&(qf=Dd);var qc=gd.xv,xi=gd.kD,le=
0,me=0,Kg=0;if(pd<-Nb||pd>=Nb){var Lg=this.GC,Nf=this.FC;qc!==Ei&&(Kg=this.computeAngle(gd,qc,Nf),gd.angle=Kg);le=Lg.x;me=Lg.y}else{var ne=void 0,Mg=void 0;if(0<=pd)ne=Xe.l[pd],Mg=pd<Nb-1?Xe.l[pd+1]:ne;else var Ye=Nb+pd,ne=Xe.l[Ye],Mg=0<Ye?Xe.l[Ye-1]:ne;Nf=0<=pd?ne.Qh(Mg):Mg.Qh(ne);qc!==Ei&&(Kg=this.computeAngle(gd,qc,Nf),gd.angle=Kg);le=ne.x+(Mg.x-ne.x)*Oh;me=ne.y+(Mg.y-ne.y)*Oh}var Ud=hb();Ud.reset();Ud.scale(gd.scale,gd.scale);Ud.rotate(gd.angle,0,0);var yi=gd.sa,Ng=db(0,0,yi.width,yi.height),
wc=Va();wc.qs(Ng,qf);Ud.Ka(wc);var lh=-wc.x,mh=-wc.y,hg=xi.copy();isNaN(hg.x)&&(hg.x=0<=pd?wc.x+3:-(wc.x+3));isNaN(hg.y)&&(hg.y=-(wc.y+3));hg.rotate(Nf);le+=hg.x;me+=hg.y;Ud.FD(Ng);var lh=lh+Ng.x,mh=mh+Ng.y,Ej=Wa(le+lh,me+mh);gd.move(Ej);A(Ej);A(wc);fb(Ng);jb(Ud)}this instanceof Vg?this.Xr():wi.Xr()}break;case "Grid":break;case "TableRow":case "TableColumn":u(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:u("Unknown panel type: "+
t)}fb(g)}};L.prototype.Vi=function(a){var b=this.sa;if(jd(0,0,b.width,b.height,a.x,a.y)){for(var b=this.la.l,c=b.length,d=Wa(0,0);c--;){var e=b[c];if(e.visible||e===this.Jb)if(Xc(d.set(a),e.transform),e.na(d))return A(d),!0}A(d);return null===this.nb&&null===this.Nb?!1:!0}return!1};L.prototype.Su=function(a){if(this.em===a)return this;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d].Su(a);if(null!==e)return e}return null};
function no(a,b,c){c(a,b);if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++)no(a,b[e],c)}}function tl(a,b){oo(a,a,b)}function oo(a,b,c){c(b);b=b.la.l;for(var d=b.length,e=0;e<d;e++){var f=b[e];f instanceof L&&oo(a,f,c)}}L.prototype.walkVisualTree=function(a){po(this,this,a)};function po(a,b,c){c(b);if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++)po(a,b[e],c)}}L.prototype.findInVisualTree=L.prototype.vr=function(a){return qo(this,this,a)};
function qo(a,b,c){if(c(b))return b;if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++){var f=qo(a,b[e],c);if(null!==f)return f}}return null}L.prototype.findObject=L.prototype.Cd=function(a){if(this.name===a)return this;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof L)if(null===e.uh&&null===e.pf){if(e=e.Cd(a),null!==e)return e}else if(Ol(e)&&(e=e.la.first(),null!==e&&(e=e.Cd(a),null!==e)))return e}return null};
function ro(a){a=a.la.l;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof L)c=Math.max(c,ro(e));else if(e instanceof X){a:{if(!e.fg)switch(e.xm){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.gg/2*e.nl*e.Sh()}c=Math.max(c,e)}}return c}r=L.prototype;r.jf=function(){return!(this.type===Pm||this.type===Qm)};
r.Dd=function(a,b,c){if(!1===this.Qf)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(Xk(this))return null;var d=this.sa,e=1/this.Sh(),f=this.jf(),g=f?a:Xc(Wa(a.x,a.y),this.transform),h=this.g,k=10,l=5;null!==h&&(k=h.Ux("extraTouchArea"),l=k/2);if(jd(-(l*e),-(l*e),d.width+k*e,d.height+k*e,g.x,g.y)){if(!this.$f){var e=this.la.l,m=e.length,h=Va(),l=(k=this.uC)?this.Ze():null;if(k&&(l.jf()?Xc(h.set(a),l.transform):h.set(a),!l.na(h)))return A(h),f||A(g),null;for(;m--;){var n=e[m];if(n.visible||
n===this.Jb)if(n.jf()?Xc(h.set(a),n.transform):h.set(a),!k||n!==l){var p=null;n instanceof L?p=n.Dd(h,b,c):!0===n.Qf&&n.na(h)&&(p=n);if(null!==p&&(null!==b&&(p=b(p)),null!==p&&(null===c||c(p))))return A(h),f||A(g),p}}A(h)}if(null===this.background&&null===this.ul)return f||A(g),null;a=jd(0,0,d.width,d.height,g.x,g.y)?this:null;f||A(g);return a}f||A(g);return null};
r.yr=function(a,b,c,d){if(!1===this.Qf)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new N(U));var e=this.sa,f=this.jf(),g=f?a:Xc(Wa(a.x,a.y),this.transform);if(jd(0,0,e.width,e.height,g.x,g.y)){if(!this.$f){for(var e=this.la.l,h=e.length,k=Va();h--;){var l=e[h];if(l.visible||l===this.Jb){l.jf()?Xc(k.set(a),l.transform):k.set(a);var m=l,l=l instanceof L?l:null;(null!==l?l.yr(k,b,c,d):m.na(k))&&!1!==m.Qf&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||d.add(m))}}A(k)}f||
A(g);return null!==this.background||null!==this.ul}f||A(g);return!1};
r.Zi=function(a,b,c,d,e,f){if(!1===this.Qf)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var g=f;void 0===f&&(g=hb(),g.reset());g.multiply(this.transform);if(this.zl(a,g))return so(this,b,c,e),void 0===f&&jb(g),!0;if(this.If(a,g)){if(!this.$f)for(var h=this.la.l,k=h.length;k--;){var l=h[k];if(l.visible||l===this.Jb){var m=l.Q,n=this.sa;if(!(m.x>n.width||m.y>n.height||0>m.x+m.width||0>m.y+m.height)){m=l;l=l instanceof L?l:null;n=hb();n.set(g);if(null!==l?l.Zi(a,b,c,d,e,n):Km(m,a,d,n))null!==b&&
(m=b(m)),null===m||null!==c&&!c(m)||e.add(m);jb(n)}}}void 0===f&&jb(g);return d}void 0===f&&jb(g);return!1};function so(a,b,c,d){for(var e=a.la.l,f=e.length;f--;){var g=e[f];if(g.visible){var h=g.Q,k=a.sa;h.x>k.width||h.y>k.height||0>h.x+h.width||0>h.y+h.height||(g instanceof L&&so(g,b,c,d),null!==b&&(g=b(g)),null===g||null!==c&&!c(g)||d.add(g))}}}
r.Fl=function(a,b,c,d,e,f){if(!1===this.Qf)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var g=this.sa,h=this.jf(),k=h?a:Xc(Wa(a.x,a.y),this.transform),l=h?b:Xc(Wa(b.x,b.y),this.transform),m=k.Xi(l),n=0<k.x&&k.x<g.width&&0<k.y&&k.y<g.height||Yc(k.x,k.y,0,0,0,g.height)<m||Yc(k.x,k.y,0,g.height,g.width,g.height)<m||Yc(k.x,k.y,g.width,g.height,g.width,0)<m||Yc(k.x,k.y,g.width,0,0,0)<m,g=0<k.x&&k.x<g.width&&0<k.y&&k.y<g.height&&Yc(k.x,k.y,0,0,0,g.height)<m&&Yc(k.x,k.y,0,g.height,g.width,g.height)<
m&&Yc(k.x,k.y,g.width,g.height,g.width,0)<m&&Yc(k.x,k.y,g.width,0,0,0)<m;h||(A(k),A(l));if(n){if(!this.$f){h=Va();k=Va();l=this.la.l;for(m=l.length;m--;){var p=l[m];if(p.visible||p===this.Jb){var q=p.Q,s=this.sa;q.x>s.width||q.y>s.height||0>q.x+q.width||0>q.y+q.height||(p.jf()?(q=p.transform,Xc(h.set(a),q),Xc(k.set(b),q)):(h.set(a),k.set(b)),q=p,p=p instanceof L?p:null,null!==p?!p.Fl(h,k,c,d,e,f):!q.cC(h,k,e))||(null!==c&&(q=c(q)),null===q||null!==d&&!d(q)||f.add(q))}}A(h);A(k)}return e?n:g}return!1};
function io(a){var b=a.o;if(void 0===b||b===ee)b=null;null===b&&a instanceof X&&(a=a.za,null!==a&&(b=a.o));null===b&&(b=ud);return b}function jo(a){var b=a.p;if(void 0===b||b===ee)b=null;null===b&&a instanceof X&&(a=a.za,null!==a&&(b=a.p));null===b&&(b=Hd);return b}L.prototype.add=L.prototype.add=function(a){ra(a,U,L,"add:element");this.qd(this.la.count,a)};L.prototype.elt=L.prototype.Y=function(a){return this.la.Y(a)};
L.prototype.insertAt=L.prototype.qd=function(a,b){b instanceof O&&u("Cannot add a Part to a Panel: "+b);if(this===b||this.pk(b))this===b&&u("Cannot make a Panel contain itself: "+this.toString()),u("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.I;null!==c&&c!==this&&u("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.da!==xk||b instanceof X||u("Can only add Shapes to a Grid Panel, not: "+b);b.zk(this);b.cl=null;if(null!==this.zC){var d=b.data;null!==d&&"object"===typeof d&&(null===this.of&&(this.of=new Fb(Object,L)),this.of.add(d,b))}var e=this.la,d=-1;if(c===this){for(var f=-1,g=this.la.l,h=g.length,k=0;k<h;k++)if(g[k]===b){f=k;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.Dc(f);d=f}else u("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>
a||a>e.count)a=e.count;e.qd(a,b);this.H();b.H();null!==b.cd?this.Jg=!0:b instanceof L&&!0===b.Jg&&(this.Jg=!0);c=this.J;null!==c&&(c.Lj=null,c.vi=NaN,this.Jg&&c instanceof V&&(c.Jg=!0),c.Jg&&(c.jd=null),e=this.g,null!==e&&e.V.Ua||(-1!==d&&c.ec(Rf,"elements",this,b,null,d,null),c.ec(Qf,"elements",this,null,b,null,a)))};L.prototype.remove=L.prototype.remove=function(a){ra(a,U,L,"remove:element");for(var b=this.la.l,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.Xd(d)};
L.prototype.removeAt=L.prototype.Dc=function(a){0<=a&&this.Xd(a)};L.prototype.Xd=function(a){var b=this.la,c=b.Y(a);c.cl=null;c.zk(null);if(null!==this.of){var d=c.data;"object"===typeof d&&this.of.remove(d)}b.Dc(a);Qk(this,!1);this.H();this.ol===c&&(this.ol=null);b=this.J;null!==b&&(b.Lj=null,b.vi=NaN,d=this.g,null!==d&&d.V.Ua||b.ec(Rf,"elements",this,c,null,a,null))};H(L,{ms:"rowCount"},function(){return void 0===this.Tc?0:this.Tc.length});
L.prototype.getRowDefinition=L.prototype.Bc=function(a){0>a&&za(a,">= 0",L,"getRowDefinition:idx");a=Math.round(a);var b=this.Tc;if(void 0===b[a]){var c=new ug;c.zk(this);c.td=!0;c.index=a;b[a]=c}return b[a]};L.prototype.removeRowDefinition=L.prototype.YC=function(a){0>a&&za(a,">= 0",L,"removeRowDefinition:idx");a=Math.round(a);var b=this.Tc;this.ec(Rf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.H()};H(L,{pr:"columnCount"},function(){return void 0===this.Mc?0:this.Mc.length});
L.prototype.getColumnDefinition=L.prototype.Ac=function(a){0>a&&za(a,">= 0",L,"getColumnDefinition:idx");a=Math.round(a);var b=this.Mc;if(void 0===b[a]){var c=new ug;c.zk(this);c.td=!1;c.index=a;b[a]=c}return b[a]};L.prototype.removeColumnDefinition=L.prototype.UC=function(a){0>a&&za(a,">= 0",L,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Mc;this.ec(Rf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.H()};
G(L,{DG:"rowSizing"},function(){return void 0===this.hl?co:this.hl},function(a){if(void 0!==this.hl){var b=this.hl;b!==a&&(a!==co&&a!==lo&&u("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.hl=a,this.H(),this.h("rowSizing",b,a))}});
G(L,{GE:"columnSizing"},function(){return void 0===this.Hk?co:this.Hk},function(a){if(void 0!==this.Hk){var b=this.Hk;b!==a&&(a!==co&&a!==lo&&u("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Hk=a,this.H(),this.h("columnSizing",b,a))}});
G(L,{cJ:"topIndex"},function(){return void 0===this.Ih?0:this.Ih},function(a){if(void 0!==this.Ih){var b=this.Ih;b!==a&&((!isFinite(a)||0>a)&&u("topIndex must be greater than zero and a real number. Was "+a),this.Ih=a,this.H(),this.h("topIndex",b,a))}});
G(L,{nI:"leftIndex"},function(){return void 0===this.vh?0:this.vh},function(a){if(void 0!==this.vh){var b=this.vh;b!==a&&((!isFinite(a)||0>a)&&u("leftIndex must be greater than zero and a real number. Was "+a),this.vh=a,this.H(),this.h("leftIndex",b,a))}});L.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==an)return NaN;for(var b=0,c=this.Tc,d=c.length,e=this.Ih;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
L.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==an)return NaN;for(var b=0,c=this.Mc,d=c.length,e=this.vh;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
G(L,{data:"data"},function(){return this.Cg},function(a){var b=this.Cg;if(b!==a){var c=this instanceof O&&!(this instanceof Vg);c&&w(a,"object",L,"data");Yg(this);this.Cg=a;var d=this.g;null!==d&&(c?this instanceof W?(null!==b&&d.vj.remove(b),null!==a&&d.vj.add(a,this)):(null!==b&&d.nh.remove(b),null!==a&&d.nh.add(a,this)):(c=this.I,null!==c&&null!==c.of&&(null!==b&&c.of.remove(b),null!==a&&c.of.add(a,this))));this.h("data",b,a);null!==d&&d.V.Ua||null!==a&&this.rb()}});
G(L,{LF:"itemIndex"},function(){return this.yp},function(a){var b=this.yp;b!==a&&(this.yp=a,this.h("itemIndex",b,a))});function ln(a){a=a.Fk;return null!==a&&a.pa}
function Yg(a){var b=a.Fk;if(null===b)null!==a.data&&u("Template cannot have .data be non-null: "+a),a.Fk=b=new N(yg);else if(b.pa)return;var c=new N(U);no(a,a,function(a,d){var e=d.gc;if(null!==e)for(en(d,!1),e=e.i;e.next();){var f=e.value;f.mode===Ag&&en(d,!0);if(null!==f.Sl){var g=Bg(f,a,d);null!==g&&(c.add(g),null===g.dn&&(g.dn=new N(yg)),g.dn.add(f))}b.add(f)}if(d instanceof L&&d.type===an){if(0<d.Tc.length)for(e=d.Tc,f=e.length,g=0;g<f;g++){var h=e[g];if(void 0!==h&&null!==h.gc)for(var k=h.gc.i;k.next();){var v=
k.value;v.wf=h;v.nx=2;v.lu=h.index;b.add(v)}}if(0<d.Mc.length)for(e=d.Mc,f=e.length,g=0;g<f;g++)if(h=e[g],void 0!==h&&null!==h.gc)for(k=h.gc.i;k.next();)v=k.value,v.wf=h,v.nx=1,v.lu=h.index,b.add(v)}});for(var d=c.i;d.next();){var e=d.value;if(null!==e.dn){en(e,!0);for(var f=e.dn.i;f.next();){var g=f.value;null===e.gc&&(e.gc=new N(yg));e.gc.add(g)}}e.dn=null}for(d=b.i;d.next();)if(e=d.value,f=e.wf,null!==f){e.wf=null;var h=e.Gv,k=h.indexOf(".");0<k&&f instanceof L&&(g=h.substring(0,k),h=h.substr(k+
1),k=f.Cd(g),null!==k?(f=k,e.Gv=h):Da('Warning: unable to find GraphObject named "'+g+'" for Binding: '+e.toString()));f instanceof ug?(e.Ck=ub(f.I),f.I.em=e.Ck):(e.Ck=ub(f),f.em=e.Ck)}b.freeze();a instanceof O&&a.$c()&&(jj(a,Infinity,Infinity),a.ac())}
L.prototype.updateTargetBindings=L.prototype.rb=function(a){var b=this.Fk;if(null!==b)for(void 0===a&&(a=""),b=b.i;b.next();){var c=b.value,d=c.uD;if(""===a||""===d||d===a)if(d=c.Gv,null!==c.ME||""!==d){var d=this.data,e=c.Sl;if(null!==e)d=""===e?this:"."===e?this:".."===e?this:this.Cd(e);else{var f=this.g;null!==f&&c.ys&&(d=f.U.Zr)}if(null!==d){var f=this,g=c.Ck;if(-1!==g){if(f=this.Su(g),null===f)continue}else null!==c.wf&&(f=c.wf);"."===e?d=f:".."===e&&(d=f.I);e=c.nx;if(0!==e){if(!(f instanceof
L))continue;g=f;1===e?f=g.Ac(c.lu):2===e&&(f=g.Bc(c.lu))}void 0!==f&&c.JD(f,d)}}}};G(L,{zC:"itemArray"},function(){return this.uh},function(a){var b=this.uh;if(b!==a){var c=this.g;null!==c&&null!==b&&zl(c,this);this.uh=a;null!==c&&null!==a&&vl(c,this);this.h("itemArray",b,a);null!==c&&c.V.Ua||this.Iy()}});function Ol(a){return a.type===Pi||a.type===tk||a.type===si||a.type===an&&0<a.la.length&&(a=a.la.Y(0),a.Jf&&a instanceof L&&(a.type===Pm||a.type===Qm))?!0:!1}
L.prototype.rebuildItemElements=L.prototype.Iy=function(){var a=0;for(Ol(this)&&(a=1);this.la.length>a;)this.Xd(a);a=this.zC;if(null!==a)for(var b=Ia(a),c=0;c<b;c++)Nl(this,La(a,c),c)};function Nl(a,b,c){if(!(void 0===b||null===b||0>c)){var d=a.getCategoryForItemData(b,c),d=a.findTemplateForItemData(b,c,d);if(null!==d){Yg(d);d=d.copy();"object"===typeof b&&(null===a.of&&(a.of=new Fb(Object,L)),a.of.add(b,d));var e=c;Ol(a)&&e++;a.qd(e,d);Pl(a,e,c);d.data=b}}}
function Pl(a,b,c){for(a=a.la;b<a.length;){var d=a.Y(b);if(d instanceof L){var e=b,f=c;d.type===Pm?d.Tb=e:d.type===Qm&&(d.column=e);d.LF=f}b++;c++}}function ck(a){a=a.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];if(d instanceof to||d instanceof L&&ck(d))return!0}return!1}
G(L,{kI:"itemTemplate"},function(){return null===this.pf?null:this.pf.ha("")},function(a){if(null===this.pf){if(null===a)return;this.pf=new Fb("string",L)}var b=this.pf.ha("");b!==a&&(ra(a,L,L,"itemTemplate"),(a instanceof O||a.Jf)&&u("itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.pf.add("",a),this.h("itemTemplate",b,a),a=this.g,null!==a&&a.V.Ua||this.Iy())});
G(L,{MF:"itemTemplateMap"},function(){return this.pf},function(a){var b=this.pf;if(b!==a){ra(a,Fb,L,"itemTemplateMap");for(var c=a.i;c.next();){var d=c.value;(d instanceof O||d.Jf)&&u("Template in itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.pf=a;this.h("itemTemplateMap",b,a);a=this.g;null!==a&&a.V.Ua||this.Iy()}});
G(L,{jI:"itemCategoryProperty"},function(){return this.Lm},function(a){var b=this.Lm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&ta(a,"string or function",L,"itemCategoryProperty"),this.Lm=a,this.h("itemCategoryProperty",b,a))});
L.prototype.getCategoryForItemData=function(a){if(null===a)return"";var b=this.Lm,c="";if("function"===typeof b)c=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";c=Gb(a,b)}else return"";if(void 0===c)return"";if("string"===typeof c)return c;u("Panel.getCategoryForItemData found a non-string category for "+a+": "+c);return""};var uo=!1,vo=null;
L.prototype.findTemplateForItemData=function(a,b,c){a=this.MF;b=null;null!==a&&(b=a.ha(c));null===b&&(uo||(uo=!0,Da('No item template Panel found for category "'+c+'" on '+this),Da("  Using default item template."),c=new L,a=new Zb,a.bind(new yg("text","",Sf)),c.add(a),vo=c),b=vo);return b};G(L,{cI:"isAtomic"},function(){return this.$f},function(a){var b=this.$f;b!==a&&(w(a,"boolean",L,"isAtomic"),this.$f=a,this.h("isAtomic",b,a))});
G(L,{uC:"isClipping"},function(){return this.jp},function(a){var b=this.jp;b!==a&&(w(a,"boolean",L,"isClipping"),this.jp=a,this.h("isClipping",b,a))});function ug(){sb(this);this.eg=null;this.yt=!0;this.Pc=0;this.ie=NaN;this.zi=0;this.xi=Infinity;this.Md=ee;this.xa=this.bb=0;this.gc=null;this.Nq=wo;this.Vg=zm;this.Kq=this.Hi=null;this.Lq=NaN;this.nb=this.Rg=null;this.Lo=!1}vb("RowColumnDefinition",ug);
ug.prototype.copy=function(){var a=new ug;a.yt=this.yt;a.Pc=this.Pc;a.ie=this.ie;a.zi=this.zi;a.xi=this.xi;a.Md=this.Md;a.bb=this.bb;a.xa=this.xa;a.Vg=this.Vg;a.Nq=this.Nq;a.Hi=null===this.Hi?null:this.Hi.O();a.Kq=this.Kq;a.Lq=this.Lq;a.Rg=null;null!==this.Rg&&(a.Rg=Ka(this.Rg));a.nb=this.nb;a.Lo=this.Lo;a.gc=this.gc;return a};
ug.prototype.qr=function(a){ra(a,ug,ug,"copyFrom:pd");a.td?this.height=a.height:this.width=a.width;this.Vh=a.Vh;this.af=a.af;this.alignment=a.alignment;this.stretch=a.stretch;this.ts=a.ts;this.Hi=null===a.Hi?null:a.Hi.O();this.ho=a.ho;this.io=a.io;this.Rg=null;a.Rg&&(this.Rg=Ka(a.Rg));this.background=a.background;this.Mx=a.Mx;this.gc=a.gc};ug.prototype.toString=function(){return"RowColumnDefinition "+(this.td?"(Row ":"(Column ")+this.index+") #"+ub(this)};var wo;ug.Default=wo=I(ug,"Default",0);var lo;
ug.None=lo=I(ug,"None",1);var co;ug.ProportionalExtra=co=I(ug,"ProportionalExtra",2);ug.prototype.zk=function(a){this.eg=a};ug.prototype.computeEffectiveSpacingTop=ug.prototype.MB=function(){var a=0;if(0!==this.index){var b=this.eg,c=this.ho;null===c&&null!==b&&(c=this.td?b.oh:b.Dg);null!==c&&(a=this.io,isNaN(a)&&(a=null!==b?this.td?b.Fg:b.Eg:0))}b=this.mD;if(null===b)if(b=this.eg,null!==b)b=b.hi;else return a;return a+(this.td?b.top:b.left)};
ug.prototype.computeEffectiveSpacing=ug.prototype.Cf=function(){var a=0;if(0!==this.index){var b=this.eg,c=this.ho;null===c&&null!==b&&(c=this.td?b.oh:b.Dg);null!==c&&(a=this.io,isNaN(a)&&(a=null!==b?this.td?b.Fg:b.Eg:0))}b=this.mD;if(null===b)if(b=this.eg,null!==b)b=b.hi;else return a;return a+(this.td?b.top+b.bottom:b.left+b.right)};
ug.prototype.pc=function(a,b,c,d,e){var f=this.eg;if(null!==f&&(f.ec(If,a,this,b,c,d,e),null!==this.gc&&(b=f.Cn(),null!==b&&(b=b.data,null!==b))))for(c=this.gc.i;c.next();)c.value.Hv(this,b,a,null)};H(ug,{I:"panel"},function(){return this.eg});G(ug,{td:"isRow"},function(){return this.yt},function(a){this.yt=a});G(ug,{index:"index"},function(){return this.Pc},function(a){this.Pc=a});
G(ug,{height:"height"},function(){return this.ie},function(a){var b=this.ie;b!==a&&(0>a&&za(a,">= 0",ug,"height"),this.ie=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("height",b,a))});G(ug,{width:"width"},function(){return this.ie},function(a){var b=this.ie;b!==a&&(0>a&&za(a,">= 0",ug,"width"),this.ie=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("width",b,a))});
G(ug,{Vh:"minimum"},function(){return this.zi},function(a){var b=this.zi;b!==a&&((0>a||!isFinite(a))&&za(a,">= 0",ug,"minimum"),this.zi=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("minimum",b,a))});G(ug,{af:"maximum"},function(){return this.xi},function(a){var b=this.xi;b!==a&&(0>a&&za(a,">= 0",ug,"maximum"),this.xi=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.pc("maximum",b,a))});
G(ug,{alignment:"alignment"},function(){return this.Md},function(a){var b=this.Md;b.A(a)||(this.Md=a.O(),null!==this.I&&this.I.H(),this.pc("alignment",b,a))});G(ug,{stretch:"stretch"},function(){return this.Vg},function(a){var b=this.Vg;b!==a&&(this.Vg=a,null!==this.I&&this.I.H(),this.pc("stretch",b,a))});
G(ug,{mD:"separatorPadding"},function(){return this.Hi},function(a){"number"===typeof a&&(a=new qd(a));var b=this.Hi;null!==a&&null!==b&&b.A(a)||(null!==a&&(a=a.O()),this.Hi=a,null!==this.I&&this.I.H(),this.pc("separatorPadding",b,a))});G(ug,{ho:"separatorStroke"},function(){return this.Kq},function(a){var b=this.Kq;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.Kq=a,null!==this.I&&this.I.H(),this.pc("separatorStroke",b,a))});
G(ug,{io:"separatorStrokeWidth"},function(){return this.Lq},function(a){var b=this.Lq;b!==a&&(this.Lq=a,null!==this.I&&this.I.H(),this.pc("separatorStrokeWidth",b,a))});
G(ug,{IG:"separatorDashArray"},function(){return this.Rg},function(a){var b=this.Rg;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",ug,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||u("separatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Rg=a;null!==this.I&&this.I.ba();this.pc("separatorDashArray",b,a)}});
G(ug,{background:"background"},function(){return this.nb},function(a){var b=this.nb;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.nb=a,null!==this.I&&this.I.ba(),this.pc("background",b,a))});G(ug,{Mx:"coversSeparators"},function(){return this.Lo},function(a){var b=this.Lo;b!==a&&(w(a,"boolean",ug,"coversSeparators"),this.Lo=a,null!==this.I&&this.I.ba(),this.pc("coversSeparators",b,a))});
G(ug,{ts:"sizing"},function(){return this.Nq},function(a){var b=this.Nq;b!==a&&(this.Nq=a,null!==this.I&&this.I.H(),this.pc("sizing",b,a))});function ko(a){if(a.ts===wo){var b=a.eg;return a.td?b.DG:b.GE}return a.ts}G(ug,{Aa:"actual"},function(){return this.bb},function(a){this.bb=isNaN(this.ie)?Math.max(Math.min(this.xi,a),this.zi):Math.max(Math.min(this.xi,this.ie),this.zi)});
G(ug,{total:"total"},function(){return this.bb+this.Cf()},function(a){this.bb=isNaN(this.ie)?Math.max(Math.min(this.xi,a),this.zi):Math.max(Math.min(this.xi,this.ie),this.zi);this.bb=Math.max(0,this.bb-this.Cf())});G(ug,{position:"position"},function(){return this.xa},function(a){this.xa=a});
ug.prototype.bind=ug.prototype.bind=function(a){a.wf=this;var b=this.I;null!==b&&(b=b.Cn(),null!==b&&ln(b)&&u("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));null===this.gc&&(this.gc=new N(yg));this.gc.add(a)};
function X(){U.call(this);this.za=null;this.xm="None";this.fg=!1;this.bp=zm;this.tj=null;this.$b=this.Ec="black";this.gg=1;this.gn="butt";this.hn="miter";this.nl=10;this.ml=null;this.yc=0;this.Gh=this.Fh=ee;this.hq=this.gq=NaN;this.kp=!1;this.qp=!0;this.kq=null;this.Am=this.jn="None";this.hp=1}yb(X,U);vb("Shape",X);
X.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.za=this.za;a.xm=this.xm;a.fg=this.fg;a.bp=this.bp;a.tj=this.tj;a.Ec=this.Ec;a.$b=this.$b;a.gg=this.gg;a.gn=this.gn;a.hn=this.hn;a.nl=this.nl;a.ml=null;null!==this.ml&&(a.ml=Ka(this.ml));a.yc=this.yc;a.Fh=this.Fh.O();a.Gh=this.Gh.O();a.gq=this.gq;a.hq=this.hq;a.kp=this.kp;a.qp=this.qp;a.kq=this.kq;a.jn=this.jn;a.Am=this.Am;a.hp=this.hp};
X.prototype.toString=function(){return"Shape("+("None"!==this.jb?this.jb:"None"!==this.no?this.no:this.Sx)+")#"+ub(this)};
function xo(a,b,c,d){var e=.001,f=d.oa,g=f.width,f=f.height,h=0,k=0,l=0,m=0,e=c.length;if(!(4>e)){for(var h=c[0],k=c[1],n=0,p=0,q=0,s=l=0,t=p=0,v=ob(),x=2;x<e;x+=2)l=c[x],m=c[x+1],n=l-h,p=m-k,0===n&&(n=.001),q=p/n,s=Math.atan2(p,n),p=Math.sqrt(n*n+p*p),h=[],h[0]=n,h[1]=s,h[2]=q,h[3]=p,v.push(h),t+=p,h=l,k=m;h=c[0];k=c[1];c=0;for(var e=g,m=g/2,x=0===m?!1:!0,p=0,l=v[p],n=l[0],s=l[1],q=l[2],l=l[3],B=0;.1<=t;){0===B&&(x?(e=g,c++,e-=m,t-=m,x=!1):(e=g,c++),0===e&&(e=1));if(e>t){pb(v);return}e>l?(B=e-l,
e=l):B=0;var y=Math.sqrt(e*e/(1+q*q));0>n&&(y=-y);h+=y;k+=q*y;a.translate(h,k);a.rotate(s);a.translate(-(g/2),-(f/2));0===B&&d.Yi(a,b);a.translate(g/2,f/2);a.rotate(-s);a.translate(-h,-k);t-=e;l-=e;if(0!==B){p++;if(p===v.length){pb(v);return}l=v[p];n=l[0];s=l[1];q=l[2];l=l[3];e=B}}pb(v)}}
X.prototype.Yi=function(a,b){if(null!==this.$b||null!==this.Ec){null!==this.Ec&&Um(this,a,this.Ec,!0,!1);null!==this.$b&&Um(this,a,this.$b,!1,!1);var c=this.gg;if(0===c){var d=this.J;d instanceof Vg&&d.type===si&&d.Xb instanceof X&&(c=d.Xb.Na)}a.lineWidth=c;a.lineJoin=this.hn;a.lineCap=this.gn;a.miterLimit=this.nl;var e=!1;this.J&&b.Pg.drawShadows&&(e=this.J.rk);var f=!0;null!==this.$b&&null===this.Ec&&(f=!1);var d=!1,g=!0,h=this.Yy;null!==h&&(d=!0,void 0!==a.setLineDash?(a.setLineDash(h),a.lineDashOffset=
this.yc):void 0!==a.webkitLineDash?(a.webkitLineDash=h,a.webkitLineDashOffset=this.yc):void 0!==a.mozDash?(a.mozDash=h,a.mozDashOffset=this.yc):g=!1);var k=this.za;if(null!==k){if(k.da===Oe)a.beginPath(),d&&!g?Gm(a,k.Pb,k.Wb,k.Wa,k.fb,h,this.yc):(a.moveTo(k.Pb,k.Wb),a.lineTo(k.Wa,k.fb)),null!==this.Ec&&Vm(a,this.Ec),0!==c&&null!==this.$b&&Xm(a);else if(k.da===Pe){var l=k.Pb,m=k.Wb,n=k.Wa,p=k.fb,k=Math.min(l,n),q=Math.min(m,p),l=Math.abs(n-l),m=Math.abs(p-m);null!==this.Ec&&(a.beginPath(),a.rect(k,
q,l,m),Vm(a,this.Ec));if(null!==this.$b){var s=n=0,t=0;f&&e&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);d&&!g?(g=ob(),g.push(k),g.push(q),g.push(k+l),g.push(q),g.push(k+l),g.push(q+m),g.push(k),g.push(q+m),g.push(k),g.push(q),a.beginPath(),yo(a,g,h,this.yc),Xm(a),pb(g)):0!==c&&(a.beginPath(),a.rect(k,q,l,m),Xm(a));f&&e&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t)}}else if(k.da===Qe)l=k.Pb,m=k.Wb,n=k.Wa,p=k.fb,k=Math.abs(n-l)/2,
q=Math.abs(p-m)/2,l=Math.min(l,n)+k,m=Math.min(m,p)+q,a.beginPath(),a.moveTo(l,m-q),a.bezierCurveTo(l+Q.ga*k,m-q,l+k,m-Q.ga*q,l+k,m),a.bezierCurveTo(l+k,m+Q.ga*q,l+Q.ga*k,m+q,l,m+q),a.bezierCurveTo(l-Q.ga*k,m+q,l-k,m+Q.ga*q,l-k,m),a.bezierCurveTo(l-k,m-Q.ga*q,l-Q.ga*k,m-q,l,m-q),a.closePath(),null!==this.Ec&&Vm(a,this.Ec),d&&!g&&(g=ob(),Q.Rd(l,m-q,l+Q.ga*k,m-q,l+k,m-Q.ga*q,l+k,m,.5,g),Q.Rd(l+k,m,l+k,m+Q.ga*q,l+Q.ga*k,m+q,l,m+q,.5,g),Q.Rd(l,m+q,l-Q.ga*k,m+q,l-k,m+Q.ga*q,l-k,m,.5,g),Q.Rd(l-k,m,l-k,
m-Q.ga*q,l-Q.ga*k,m-q,l,m-q,.5,g),a.beginPath(),yo(a,g,h,this.yc),pb(g)),0!==c&&null!==this.$b&&(t=s=n=0,f&&e&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Xm(a),f&&e&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t));else if(k.da===Le){q=k.ji;m=q.length;for(p=0;p<m;p++){l=q.l[p];a.beginPath();a.moveTo(l.ia,l.ja);for(var n=l.ra.l,s=n.length,v=null,t=0;t<s;t++){var x=n[t];switch(x.da){case vf:a.moveTo(x.s,x.u);break;case $e:a.lineTo(x.s,
x.u);break;case wf:a.bezierCurveTo(x.xc,x.Qd,x.uf,x.vf,x.Wa,x.fb);break;case xf:a.quadraticCurveTo(x.xc,x.Qd,x.Wa,x.fb);break;case yf:if(x.radiusX===x.radiusY)v=Math.PI/180,a.arc(x.xc,x.Qd,x.radiusX,x.ae*v,(x.ae+x.gf)*v,0>x.gf);else for(var v=Af(x,l),B=v.length,y=0;y<B;y++){var C=v[y];0===y&&a.lineTo(C[0],C[1]);a.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}break;case zf:y=B=0;null!==v&&v.type===yf?(v=Af(v,l),v=v[v.length-1]||null,null!==v&&(B=v[6],y=v[7])):(B=null!==v?v.s:l.ia,y=null!==v?v.u:l.ja);
v=Bf(x,l,B,y);B=v.length;for(y=0;y<B;y++)C=v[y],a.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]);break;default:u("Segment not of valid type")}x.Lg&&a.closePath();v=x}e?(t=s=n=0,l.Im?(!0===l.Pk&&null!==this.Ec?(Vm(a,this.Ec),f=!0):f=!1,0!==c&&null!==this.$b&&(f&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!g||Xm(a),f&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t))):(f&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=
0,a.shadowOffsetY=0,a.shadowBlur=0),!0===l.Pk&&null!==this.Ec&&Vm(a,this.Ec),0!==c&&null!==this.$b&&(d&&!g||Xm(a)),f&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t))):(!0===l.Pk&&null!==this.Ec&&Vm(a,this.Ec),0===c||null===this.$b||d&&!g||Xm(a))}if(d&&!g)for(c=f,f=k.ji,g=f.length,k=0;k<g;k++){q=f.l[k];a.beginPath();m=ob();m.push(q.ia);m.push(q.ja);p=q.ia;l=q.ja;n=p;s=l;t=q.ra.l;x=t.length;for(v=0;v<x;v++){B=t[v];switch(B.da){case vf:yo(a,m,h,this.yc);m.length=0;m.push(B.s);m.push(B.u);p=B.s;
l=B.u;n=p;s=l;break;case $e:m.push(B.s);m.push(B.u);p=B.s;l=B.u;break;case wf:Q.Rd(p,l,B.xc,B.Qd,B.uf,B.vf,B.Wa,B.fb,.5,m);p=B.s;l=B.u;break;case xf:Q.$n(p,l,B.xc,B.Qd,B.Wa,B.fb,.5,m);p=B.s;l=B.u;break;case yf:for(var y=Af(B,q),C=y.length,K=0;K<C;K++){var J=y[K];Q.Rd(p,l,J[2],J[3],J[4],J[5],J[6],J[7],.5,m);p=J[6];l=J[7]}break;case zf:y=Bf(B,q,p,l);C=y.length;for(K=0;K<C;K++)J=y[K],Q.Rd(p,l,J[2],J[3],J[4],J[5],J[6],J[7],.5,m),p=J[6],l=J[7];break;default:u("Segment not of valid type")}B.Lg&&(m.push(n),
m.push(s),yo(a,m,h,this.yc))}yo(a,m,h,this.yc);pb(m);null!==this.$b&&(p=m=q=0,c&&e&&(q=a.shadowOffsetX,m=a.shadowOffsetY,p=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Xm(a),c&&e&&(a.shadowOffsetX=q,a.shadowOffsetY=m,a.shadowBlur=p))}}d&&(void 0!==a.setLineDash?(a.setLineDash(qb),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=qb,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0));if(null!==this.OC){d=this.OC;jj(d,Infinity,Infinity);
h=d.oa;d.ac(0,0,h.width,h.height);a.save();h=this.zc.Ya.first();a.beginPath();c=ob();c.push(h.ia);c.push(h.ja);e=h.ia;f=h.ja;g=e;k=f;q=h.ra.l;m=q.length;for(p=0;p<m;p++){l=q[p];switch(l.da){case vf:xo(a,b,c,d);c.length=0;c.push(l.s);c.push(l.u);e=l.s;f=l.u;g=e;k=f;break;case $e:c.push(l.s);c.push(l.u);e=l.s;f=l.u;break;case wf:Q.Rd(e,f,l.xc,l.Qd,l.uf,l.vf,l.Wa,l.fb,.5,c);e=l.s;f=l.u;break;case xf:Q.$n(e,f,l.xc,l.Qd,l.Wa,l.fb,.5,c);e=l.s;f=l.u;break;case yf:n=Af(l,h);s=n.length;for(t=0;t<s;t++)x=n[t],
Q.Rd(e,f,x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;case zf:n=Bf(l,h,e,f);s=n.length;for(t=0;t<s;t++)x=n[t],Q.Rd(e,f,x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;default:u("Segment not of valid type")}l.Lg&&(c.push(g),c.push(k),xo(a,b,c,d))}xo(a,b,c,d);pb(c);a.restore()}}}};
function yo(a,b,c,d){var e=.001,f=c.length,g=0,h=0,k=0,l=0,e=b.length;if(!(4>e))if(g=b[0],h=b[1],4===e)Gm(a,g,h,b[2],b[3],c,d);else{a.moveTo(g,h);for(var m=0,n=0,p=0,q=n=k=0,s=ob(),t=2;t<e;t+=2)k=b[t],l=b[t+1],m=k-g,n=l-h,0===m&&(m=.001),p=n/m,n=Math.sqrt(m*m+n*n),g=[],g[0]=m,g[1]=p,g[2]=n,s.push(g),q+=n,g=k,h=l;g=b[0];h=b[1];b=0;for(var l=!0,e=c[b%f],t=0!==d,n=0,k=s[n],m=k[0],p=k[1],k=k[2],v=0;.1<=q;){0===v&&(e=c[b%f],b++,t&&(d%=e,e-=d,t=!1));e>q&&(e=q);e>k?(v=e-k,e=k):v=0;var x=Math.sqrt(e*e/(1+
p*p));0>m&&(x=-x);g+=x;h+=p*x;l?a.lineTo(g,h):a.moveTo(g,h);q-=e;k-=e;if(0!==v){n++;if(n===s.length){pb(s);return}k=s[n];m=k[0];p=k[1];k=k[2];e=v}else l=!l}pb(s)}}X.prototype.getDocumentPoint=X.prototype.Ra=function(a,b){void 0===b&&(b=new z);a.Gd()&&u("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.sa,d=this.Na;b.k(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.We.Ka(b);return b};
X.prototype.Vi=function(a,b){var c=this.za;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.Qa,e=this.Na/2;c.type!==Oe||b||(e+=2);var f=bb();f.assign(d);f.$e(e+2,e+2);if(!f.na(a))return fb(f),!1;d=e+1E-4;if(c.type===Oe){if(null===this.stroke)return!1;d=(c.s-c.ia)*(a.x-c.ia)+(c.u-c.ja)*(a.y-c.ja);if(0>(c.ia-c.s)*(a.x-c.s)+(c.ja-c.u)*(a.y-c.u)||0>d)return!1;fb(f);return Q.bd(c.ia,c.ja,c.s,c.u,e,a.x,a.y)}if(c.type===Pe){var g=c.ia,h=c.ja,k=c.s,l=c.u,c=Math.min(g,k),m=Math.min(h,l),
g=Math.abs(k-g),h=Math.abs(l-h);f.x=c;f.y=m;f.width=g;f.height=h;if(null===this.fill){f.$e(-d,-d);if(f.na(a))return fb(f),!1;f.$e(d,d)}null!==this.stroke&&f.$e(e,e);e=f.na(a);fb(f);return e}if(c.type===Qe){g=c.ia;h=c.ja;k=c.s;l=c.u;c=Math.min(g,k);m=Math.min(h,l);g=Math.abs(k-g);h=Math.abs(l-h);g/=2;h/=2;c=a.x-(c+g);m=a.y-(m+h);if(null===this.fill){g-=d;h-=d;if(0>=g||0>=h||1>=c*c/(g*g)+m*m/(h*h))return fb(f),!1;g+=d;h+=d}null!==this.stroke&&(g+=e,h+=e);fb(f);return 0>=g||0>=h?!1:1>=c*c/(g*g)+m*m/
(h*h)}if(c.type===Le)return fb(f),null===this.fill?Ef(c,a.x,a.y,e):c.na(a,e,1<this.Na,b);u("Unknown Geometry type");return!1};
X.prototype.Rn=function(a,b,c,d){var e=this.ka,f=this.gg;a=Math.max(a,0);b=Math.max(b,0);var g;if(this.fg)g=this.za.Qa;else{var h=this.jb,k=Q.Pv[h];if(void 0===k){var l=Q.Hf[h];"string"===typeof l&&(l=Q.Hf[l]);"function"===typeof l?(k=l(null,100,100),Q.Pv[h]=k):u("Unsupported Figure:"+h)}g=k.Qa}var h=g.width,k=g.height,l=g.width,m=g.height;switch(Lm(this,!0)){case Ri:d=c=0;break;case Ne:l=Math.max(a-f,0);m=Math.max(b-f,0);break;case Bm:l=Math.max(a-f,0);d=0;break;case Am:c=0,m=Math.max(b-f,0)}isFinite(e.width)&&
(l=e.width);isFinite(e.height)&&(m=e.height);e=this.se;g=this.Lf;c=Math.max(c,g.width)-f;d=Math.max(d,g.height)-f;l=Math.min(e.width,l);m=Math.min(e.height,m);l=isFinite(l)?Math.max(c,l):Math.max(h,c);m=isFinite(m)?Math.max(d,m):Math.max(k,d);c=Si(this);switch(c){case Ri:break;case Ne:h=l;k=m;break;case Ti:c=Math.min(l/h,m/k);isFinite(c)||(c=1);h*=c;k*=c;break;default:u(c+" is not a valid geometryStretch.")}if(this.fg)g=this.zc,e=h,d=k,c=g.copy(),g=g.Qa,e/=g.width,d/=g.height,isFinite(e)||(e=1),isFinite(d)||
(d=1),1===e&&1===d||c.scale(e,d),this.za=c;else if(null===this.za||this.za.Hm!==a-f||this.za.Gm!==b-f)this.za=Q.makeGeometry(this,h,k);g=this.za.Qa;Infinity===a||Infinity===b?Im(this,g.x-f/2,g.y-f/2,0===a&&0===h?0:g.width+f,0===b&&0===k?0:g.height+f):Im(this,-(f/2),-(f/2),l+f,m+f)};
function mo(a,b,c){if(!1!==Wk(a)){a.nc.wa();var d=a.gg;if(0===d){var e=a.J;e instanceof Vg&&e.type===si&&e.Xb instanceof X&&(d=e.Xb.Na)}d*=a.Eb;Im(a,-(d/2),-(d/2),b+d,c+d);b=a.nc;c=a.se;d=a.Lf;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.nc.freeze();a.nc.w()||u("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.nc.toString());Qk(a,!1)}}
function Si(a){var b=a.iC;return a.fg?b===zm?Ne:b:b===zm?Q.Pv[a.jb].Wc:b}X.prototype.Kh=function(a,b,c,d){Mm(this,a,b,c,d)};X.prototype.getNearestIntersectionPoint=X.prototype.kk=function(a,b,c){return this.Fn(a.x,a.y,b.x,b.y,c)};
X.prototype.Fn=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,k=-f.m12*g,l=-f.m21*g,m=f.m11*g,n=g*(f.m21*f.dy-f.m22*f.dx),p=g*(f.m12*f.dx-f.m11*f.dy),f=a*h+b*l+n,g=a*k+b*m+p,h=c*h+d*l+n,k=c*k+d*m+p,l=this.Na/2,n=this.za;null===n&&(jj(this,Infinity,Infinity),n=this.za);p=n.Qa;m=!1;if(n.type===Oe)if(1.5>=this.Na)m=Q.og(n.Pb,n.Wb,n.Wa,n.fb,f,g,h,k,e);else{var q=0,s=0;n.Pb===n.Wa?(q=l,s=0):(b=(n.fb-n.Wb)/(n.Wa-n.Pb),s=l/Math.sqrt(1+b*b),q=s*b);d=ob();b=new z;Q.og(n.Pb+
q,n.Wb+s,n.Wa+q,n.fb+s,f,g,h,k,b)&&d.push(b);b=new z;Q.og(n.Pb-q,n.Wb-s,n.Wa-q,n.fb-s,f,g,h,k,b)&&d.push(b);b=new z;Q.og(n.Pb+q,n.Wb+s,n.Pb-q,n.Wb-s,f,g,h,k,b)&&d.push(b);b=new z;Q.og(n.Wa+q,n.fb+s,n.Wa-q,n.fb-s,f,g,h,k,b)&&d.push(b);b=d.length;if(0===b)return pb(d),!1;m=!0;s=Infinity;for(q=0;q<b;q++){var h=d[q],t=(h.x-f)*(h.x-f)+(h.y-g)*(h.y-g);t<s&&(s=t,e.x=h.x,e.y=h.y)}pb(d)}else if(n.type===Pe)b=p.x-l,m=Q.kk(b,p.y-l,p.x+p.width+l,p.y+p.height+l,f,g,h,k,e);else if(n.type===Qe)a:if(b=p.copy().$e(l,
l),0===b.width)m=Q.og(b.x,b.y,b.x,b.y+b.height,f,g,h,k,e);else if(0===b.height)m=Q.og(b.x,b.y,b.x+b.width,b.y,f,g,h,k,e);else{a=b.width/2;var v=b.height/2;d=b.x+a;b=b.y+v;c=9999;f!==h&&(c=(g-k)/(f-h));if(9999>Math.abs(c)){m=g-b-c*(f-d);if(0>a*a*c*c+v*v-m*m){e.x=NaN;e.y=NaN;m=!1;break a}l=Math.sqrt(a*a*c*c+v*v-m*m);h=(-(a*a*c*m)+a*v*l)/(v*v+a*a*c*c)+d;a=(-(a*a*c*m)-a*v*l)/(v*v+a*a*c*c)+d;k=c*(h-d)+m+b;b=c*(a-d)+m+b;d=Math.abs((f-h)*(f-h))+Math.abs((g-k)*(g-k));g=Math.abs((f-a)*(f-a))+Math.abs((g-b)*
(g-b));d<g?(e.x=h,e.y=k):(e.x=a,e.y=b)}else{h=v*v;k=f-d;h-=h/(a*a)*k*k;if(0>h){e.x=NaN;e.y=NaN;m=!1;break a}l=Math.sqrt(h);k=b+l;b-=l;d=Math.abs(k-g);g=Math.abs(b-g);d<g?(e.x=f,e.y=k):(e.x=f,e.y=b)}m=!0}else if(n.type===Le){var x=0,B=0,y=t=0,p=Va(),q=h-f,s=k-g,s=q*q+s*s;e.x=h;e.y=k;for(q=0;q<n.Ya.count;q++)for(var C=n.Ya.l[q],K=C.ra,x=C.ia,B=C.ja,J=x,ba=B,ja=0;ja<K.count;ja++){var Y=K.l[ja],P=Y.type,t=Y.s,y=Y.u,ha=!1;switch(P){case vf:J=t;ba=y;break;case $e:ha=zo(x,B,t,y,f,g,h,k,p);break;case wf:var ha=
Y.vb,P=Y.Lb,Ra=Y.ve,Ha=Y.we,ha=Q.lr(x,B,ha,P,Ra,Ha,t,y,f,g,h,k,.5,p);break;case xf:ha=(x+2*Y.vb)/3;P=(B+2*Y.Lb)/3;Ra=(2*Y.vb+t)/3;Ha=(2*Y.vb+t)/3;ha=Q.lr(x,B,ha,P,Ra,Ha,t,y,f,g,h,k,.5,p);break;case yf:case zf:y=Y.type===yf?Af(Y,C):Bf(Y,C,x,B);P=y.length;for(Ra=0;Ra<P;Ra++)v=y[Ra],0===Ra&&zo(x,B,v[0],v[1],f,g,h,k,p)&&(t=Ao(f,g,p,s,e),t<s&&(s=t,m=!0)),Q.lr(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],f,g,h,k,.5,p)&&(t=Ao(f,g,p,s,e),t<s&&(s=t,m=!0));t=v[6];y=v[7];break;default:u("Unknown Segment type: "+
Y.type)}x=t;B=y;ha&&(t=Ao(f,g,p,s,e),t<s&&(s=t,m=!0));Y.av&&(t=J,y=ba,zo(x,B,t,y,f,g,h,k,p)&&(t=Ao(f,g,p,s,e),t<s&&(s=t,m=!0)))}f=c-a;g=d-b;b=Math.sqrt(f*f+g*g);0!==b&&(f/=b,g/=b);e.x-=f*l;e.y-=g*l;A(p)}else u("Invalid Geometry type");if(!m)return!1;this.transform.Ka(e);return!0};function Ao(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function zo(a,b,c,d,e,f,g,h,k){var l=!1,m=(e-g)*(b-d)-(f-h)*(a-c);if(0===m)return!1;k.x=((e*h-f*g)*(a-c)-(e-g)*(a*d-b*c))/m;k.y=((e*h-f*g)*(b-d)-(f-h)*(a*d-b*c))/m;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(k.y>e||Q.Sa(k.y,e))&&(k.y<a||Q.Sa(k.y,a))&&(l=!0)):(e=a<c?a:c,a=a<c?c:a,(k.x>e||Q.Sa(k.x,e))&&(k.x<a||Q.Sa(k.x,a))&&(l=!0));return l}
X.prototype.containedInRect=X.prototype.zl=function(a,b){if(void 0===b)return a.Wi(this.Q);var c=this.za;null===c&&(jj(this,Infinity,Infinity),c=this.za);var c=c.Qa,d=this.Na/2,e=!1,f=Va();f.k(c.x-d,c.y-d);a.na(b.Ka(f))&&(f.k(c.x-d,c.bottom+d),a.na(b.Ka(f))&&(f.k(c.right+d,c.bottom+d),a.na(b.Ka(f))&&(f.k(c.right+d,c.y-d),a.na(b.Ka(f))&&(e=!0))));A(f);return e};
X.prototype.intersectsRect=X.prototype.If=function(a,b){if(this.zl(a,b)||void 0===b&&(b=this.transform,a.Wi(this.Q)))return!0;var c=hb();c.set(b);c.by();var d=a.left,e=a.right,f=a.top,g=a.bottom,h=Va();h.k(d,f);c.Ka(h);if(this.Vi(h,!0))return A(h),!0;h.k(e,f);c.Ka(h);if(this.Vi(h,!0))return A(h),!0;h.k(d,g);c.Ka(h);if(this.Vi(h,!0))return A(h),!0;h.k(e,g);c.Ka(h);if(this.Vi(h,!0))return A(h),!0;var k=Va(),l=Va();c.set(b);c.KC(this.transform);c.by();k.x=e;k.y=f;k.transform(c);h.x=d;h.y=f;h.transform(c);
var m=!1;Bo(this,h,k,l)?m=!0:(h.x=e,h.y=g,h.transform(c),Bo(this,h,k,l)?m=!0:(k.x=d,k.y=g,k.transform(c),Bo(this,h,k,l)?m=!0:(h.x=d,h.y=f,h.transform(c),Bo(this,h,k,l)&&(m=!0))));A(h);jb(c);A(k);A(l);return m};function Bo(a,b,c,d){if(!a.kk(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var f=d.x;d=d.y;if(a===e){var g=0;a=0;b<c?(g=b,a=c):(g=c,a=b);return d>=g&&d<=a}a<e?(g=a,a=e):g=e;return f>=g&&f<=a}
X.prototype.cC=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.sr(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.Vi(a,!0))return!0;var e=a.Xi(b);b=e;1.5<this.Na&&(e=this.Na/2+Math.sqrt(e),e*=e);var f=this.za;null===f&&(jj(this,Infinity,Infinity),f=this.za);if(!c){var g=f.Qa,h=g.x,k=g.y,l=g.x+g.width,g=g.y+g.height;if(Zc(a.x,a.y,h,k)<=e&&Zc(a.x,a.y,l,k)<=e&&Zc(a.x,a.y,h,g)<=e&&Zc(a.x,a.y,l,g)<=e)return!0}h=f.Pb;k=f.Wb;l=f.Wa;g=f.fb;if(f.type===Oe){if(c=Yc(a.x,a.y,
h,k,l,g),f=(h-l)*(a.x-l)+(k-g)*(a.y-g),c<=(0<=(l-h)*(a.x-h)+(g-k)*(a.y-k)&&0<=f?e:b))return!0}else{if(f.type===Pe)return b=!1,c&&(b=Yc(a.x,a.y,h,k,h,g)<=e||Yc(a.x,a.y,h,k,l,k)<=e||Yc(a.x,a.y,l,k,l,g)<=e||Yc(a.x,a.y,h,g,l,g)<=e),b;if(f.type===Qe){b=a.x-(h+l)/2;var f=a.y-(k+g)/2,m=Math.abs(l-h)/2,n=Math.abs(g-k)/2;if(0===m||0===n)return c=Yc(a.x,a.y,h,k,l,g),c<=e?!0:!1;if(c){if(a=Q.$E(m,n,b,f),a*a<=e)return!0}else return Zc(b,f,-m,0)>=e||Zc(b,f,0,-n)>=e||Zc(b,f,0,n)>=e||Zc(b,f,m,0)>=e?!1:!0}else if(f.type===
Le){g=f.Qa;h=g.x;k=g.y;l=g.x+g.width;g=g.y+g.height;if(a.x>l&&a.x<h&&a.y>g&&a.y<k&&Yc(a.x,a.y,h,k,h,g)>e&&Yc(a.x,a.y,h,k,l,k)>e&&Yc(a.x,a.y,l,g,h,g)>e&&Yc(a.x,a.y,l,g,l,k)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?Ef(f,a.x,a.y,b):f.na(a,b,!0))return!0}else{c=f.Ya;for(b=0;b<c.count;b++){h=c.l[b];m=h.ia;n=h.ja;if(a.sr(m,n)>e)return!1;k=h.ra.l;l=k.length;for(g=0;g<l;g++){var p=k[g];switch(p.type){case vf:case $e:m=p.s;n=p.u;if(a.sr(m,n)>e)return!1;break;case wf:f=ob();Q.Rd(m,n,p.vb,p.Lb,p.ve,
p.we,p.s,p.u,.8,f);m=d(f,a);pb(f);if(m)return!1;m=p.s;n=p.u;if(a.sr(m,n)>e)return!1;break;case xf:f=ob();Q.$n(m,n,p.vb,p.Lb,p.s,p.u,.8,f);m=d(f,a);pb(f);if(m)return!1;m=p.s;n=p.u;if(a.sr(m,n)>e)return!1;break;case yf:case zf:var p=p.type===yf?Af(p,h):Bf(p,h,m,n),q=p.length,s=null,f=ob();for(b=0;b<q;b++)if(s=p[b],f.length=0,Q.Rd(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],.8,f),d(f,a))return pb(f),!1;pb(f);null!==s&&(m=s[6],n=s[7]);break;default:u("Unknown Segment type: "+p.type)}}}return!0}}}return!1};
G(X,{zc:"geometry"},function(){return this.tj?this.tj:this.za},function(a){var b=this.za;if(b!==a){this.tj=null!==a?this.za=a.freeze():this.za=null;var c=this.J;null!==c&&(c.vi=NaN);this.fg=!0;this.H();this.h("geometry",b,a);a=this.J;null!==a&&0!==(this.T&1024)&&Hm(this,a,"geometryString")}});
G(X,{lF:"geometryString"},function(){return null===this.zc?"":this.zc.toString()},function(a){var b=cf(a);a=b.normalize();this.zc=b;var b=Va(),c=this.position;c.w()?b.k(c.x-a.x,c.y-a.y):b.k(-a.x,-a.y);this.position=b;A(b)});G(X,{hy:"isGeometryPositioned"},function(){return this.kp},function(a){var b=this.kp;b!==a&&(this.kp=a,this.H(),this.h("isGeometryPositioned",b,a))});X.prototype.Ed=function(){this.fg?this.tj=null:this.za=null;this.H()};
G(X,{fill:"fill"},function(){return this.Ec},function(a){var b=this.Ec;b!==a&&(a instanceof $f&&a.freeze(),this.Ec=a,this.ba(),this.h("fill",b,a))});G(X,{stroke:"stroke"},function(){return this.$b},function(a){var b=this.$b;b!==a&&(a instanceof $f&&a.freeze(),this.$b=a,this.ba(),this.h("stroke",b,a))});
G(X,{Na:"strokeWidth"},function(){return this.gg},function(a){var b=this.gg;if(b!==a)if(0<=a){this.gg=a;this.H();var c=this.J;null!==c&&(c.vi=NaN);this.h("strokeWidth",b,a)}else za(a,"value >= 0",X,"strokeWidth:value")});G(X,{SG:"strokeCap"},function(){return this.gn},function(a){var b=this.gn;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?za(a,'"butt", "round", or "square"',X,"strokeCap"):(this.gn=a,this.ba(),this.h("strokeCap",b,a)))});
G(X,{XI:"strokeJoin"},function(){return this.hn},function(a){var b=this.hn;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?za(a,'"miter", "bevel", or "round"',X,"strokeJoin"):(this.hn=a,this.ba(),this.h("strokeJoin",b,a)))});G(X,{YI:"strokeMiterLimit"},function(){return this.nl},function(a){var b=this.nl;if(b!==a)if(0<a){this.nl=a;this.ba();var c=this.J;null!==c&&(c.vi=NaN);this.h("strokeMiterLimit",b,a)}else za(a,"value > 0",X,"strokeWidth:value")});
G(X,{Yy:"strokeDashArray"},function(){return this.ml},function(a){var b=this.ml;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",X,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||u("strokeDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.ml=a;this.ba();this.h("strokeDashArray",b,a)}});
G(X,{TG:"strokeDashOffset"},function(){return this.yc},function(a){var b=this.yc;b!==a&&0<=a&&(this.yc=a,this.ba(),this.h("strokeDashOffset",b,a))});G(X,{jb:"figure"},function(){return this.xm},function(a){var b=this.xm;if(b!==a){var c=Q.Hf[a];"function"===typeof c?c=a:(c=Q.Hf[a.toLowerCase()])||u("Unknown Shape.figure: "+a);b!==c&&(a=this.J,null!==a&&(a.vi=NaN),this.xm=c,this.fg=!1,this.Ed(),this.h("figure",b,c))}});
G(X,{no:"toArrow"},function(){return this.jn},function(a){var b=this.jn;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=Q.HB(a);null===c?u("Unknown Shape.toArrow: "+a):b!==c&&(this.jn=c,this.fg=!1,this.Ed(),Co(this),this.h("toArrow",b,c))}});G(X,{Sx:"fromArrow"},function(){return this.Am},function(a){var b=this.Am;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=Q.HB(a);null===c?u("Unknown Shape.fromArrow: "+a):b!==c&&(this.Am=c,this.fg=!1,this.Ed(),Co(this),this.h("fromArrow",b,c))}});
function Co(a){var b=a.g;null!==b&&b.V.Ua||(a.xv=Do,"None"!==a.jn?(a.ff=-1,a.Ti=he):"None"!==a.Am&&(a.ff=0,a.Ti=new R(1-he.x,he.y)))}G(X,{o:"spot1"},function(){return this.Fh},function(a){ra(a,R,X,"spot1");var b=this.Fh;b.A(a)||(this.Fh=a=a.O(),this.H(),this.h("spot1",b,a))});G(X,{p:"spot2"},function(){return this.Gh},function(a){ra(a,R,X,"spot2");var b=this.Gh;b.A(a)||(this.Gh=a=a.O(),this.H(),this.h("spot2",b,a))});
G(X,{Zb:"parameter1"},function(){return this.gq},function(a){var b=this.gq;b!==a&&(this.gq=a,this.Ed(),this.h("parameter1",b,a))});G(X,{es:"parameter2"},function(){return this.hq},function(a){var b=this.hq;b!==a&&(this.hq=a,this.Ed(),this.h("parameter2",b,a))});H(X,{sa:"naturalBounds"},function(){if(null!==this.za)return this.hc.assign(this.za.Qa),this.hc;var a=this.ka;return new D(0,0,a.width,a.height)});
G(X,{eI:"isRectangular"},function(){return this.qp},function(a){var b=this.qp;b!==a&&(this.qp=a,this.H(),this.h("isRectangular",b,a))});G(X,{OC:"pathObject"},function(){return this.kq},function(a){var b=this.kq;b!==a&&(this.kq=a,this.ba(),this.h("pathObject",b,a))});G(X,{iC:"geometryStretch"},function(){return this.bp},function(a){var b=this.bp;b!==a&&(va(a,U,X,"geometryStretch"),this.bp=a,this.h("geometryStretch",b,a))});
G(X,{interval:"interval"},function(){return this.hp},function(a){var b=this.hp;a=Math.floor(a);b!==a&&0<=a&&(this.hp=a,null!==this.g&&Rk(this.g),this.H(),this.h("interval",b,a))});X.getFigureGenerators=function(){var a=new Fb("string","function"),b;for(b in Q.Hf)if(b!==b.toLowerCase()){var c=Q.Hf[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
X.defineFigureGenerator=function(a,b){w(a,"string",X,"defineFigureGenerator:name");"string"===typeof b?""!==b&&Q.Hf[b]||u("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):w(b,"function",X,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||u("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);var d=Q.Hf;d[a]=b;d[c]=a};
X.getArrowheadGeometries=function(){var a=new Fb("string",Ke),b;for(b in Q.ai)if(b!==b.toLowerCase()){var c=Q.ai[b];c instanceof Ke&&a.add(b,c)}a.freeze();return a};
X.defineArrowheadGeometry=function(a,b){w(a,"string",X,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(w(b,"string",X,"defineArrowheadGeometry:pathstr"),c=cf(b,!1)):(ra(b,Ke,X,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||u("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);var e=Q.ai;e[a]=c;e[d]=a};
function Zb(){U.call(this);this.Bd="";this.$b="black";this.Xf="13px sans-serif";this.kd="start";this.np=!0;this.Rk=this.Sk=!1;this.Oj=Eo;this.ql=Fo;this.Ht=this.fe=0;this.zm=this.Pw=this.Qw=null;this.pi=new Go;this.Wo=!1;this.Be=this.Rj=this.Uq=null;this.Ki=this.Ji=0;this.wh=Infinity}yb(Zb,U);vb("TextBlock",Zb);var Ho=new Sb,Io=0,Jo=new Sb,Ko=0,Lo="...",Mo="",No=oa("canvas").getContext("2d");Zb.getEllipsis=function(){return Lo};Zb.setEllipsis=function(a){Lo=a;Jo=new Sb;Ko=0};
Zb.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.Bd=this.Bd;a.$b=this.$b;a.Xf=this.Xf;a.kd=this.kd;a.np=this.np;a.Sk=this.Sk;a.Rk=this.Rk;a.ql=this.ql;a.Oj=this.Oj;a.fe=this.fe;a.Ht=this.Ht;a.Qw=this.Qw;a.Pw=this.Pw;a.zm=this.zm;a.pi.qr(this.pi);a.Wo=this.Wo;a.Uq=this.Uq;a.Rj=this.Rj;a.Be=this.Be;a.Ji=this.Ji;a.Ki=this.Ki;a.wh=this.wh};Zb.prototype.toString=function(){return 22<this.Bd.length?'TextBlock("'+this.Bd.substring(0,20)+'"...)':'TextBlock("'+this.Bd+'")'};
var Oo;Zb.None=Oo=I(Zb,"None",0);var Po;Zb.WrapFit=Po=I(Zb,"WrapFit",1);var Fo;Zb.WrapDesiredSize=Fo=I(Zb,"WrapDesiredSize",2);var Eo;Zb.OverflowClip=Eo=I(Zb,"OverflowClip",0);var Qo;Zb.OverflowEllipsis=Qo=I(Zb,"OverflowEllipsis",1);Zb.prototype.H=function(){U.prototype.H.call(this);this.Pw=this.Qw=null};G(Zb,{font:"font"},function(){return this.Xf},function(a){var b=this.Xf;b!==a&&(this.Xf=a,this.zm=null,this.H(),this.h("font",b,a))});
Zb.isValidFont=function(a){var b=No.font;if(a===b||"10px sans-serif"===a)return!0;No.font="10px sans-serif";var c;No.font=a;var d=No.font;if("10px sans-serif"!==d)return No.font=b,!0;No.font="19px serif";c=No.font;No.font=a;d=No.font;No.font=b;return d!==c};G(Zb,{text:"text"},function(){return this.Bd},function(a){var b=this.Bd;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.Bd=a,this.H(),this.h("text",b,a))});
G(Zb,{textAlign:"textAlign"},function(){return this.kd},function(a){var b=this.kd;b!==a&&("start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.kd=a,this.ba(),this.h("textAlign",b,a)):za(a,'"start", "end", "left", "right", or "center"',Zb,"textAlign"))});H(Zb,{sa:"naturalBounds"},function(){if(!this.hc.w()){var a=Ro(this,this.Bd,this.pi,999999).width,b=So(this,a,this.pi),c=this.ka;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);ad(this.hc,a,b)}return this.hc});
G(Zb,{ly:"isMultiline"},function(){return this.np},function(a){var b=this.np;b!==a&&(this.np=a,this.H(),this.h("isMultiline",b,a))});G(Zb,{iI:"isUnderline"},function(){return this.Sk},function(a){var b=this.Sk;b!==a&&(this.Sk=a,this.ba(),this.h("isUnderline",b,a))});G(Zb,{fI:"isStrikethrough"},function(){return this.Rk},function(a){var b=this.Rk;b!==a&&(this.Rk=a,this.ba(),this.h("isStrikethrough",b,a))});
G(Zb,{MD:"wrap"},function(){return this.ql},function(a){var b=this.ql;b!==a&&(this.ql=a,this.H(),this.h("wrap",b,a))});G(Zb,{overflow:"overflow"},function(){return this.Oj},function(a){var b=this.Oj;b!==a&&(this.Oj=a,this.H(),this.h("overflow",b,a))});G(Zb,{stroke:"stroke"},function(){return this.$b},function(a){var b=this.$b;b!==a&&(a instanceof $f&&a.freeze(),this.$b=a,this.ba(),this.h("stroke",b,a))});H(Zb,{RF:"lineCount"},function(){return this.fe});
G(Zb,{Px:"editable"},function(){return this.Wo},function(a){var b=this.Wo;b!==a&&(this.Wo=a,this.h("editable",b,a))});G(Zb,{wD:"textEditor"},function(){return this.Uq},function(a){var b=this.Uq;b!==a&&(a instanceof HTMLElement||u("textEditor must be an HTMLElement"),this.Uq=a,this.h("textEditor",b,a))});G(Zb,{Qx:"errorFunction"},function(){return this.Be},function(a){var b=this.Be;b!==a&&(null!==a&&w(a,"function",Zb,"errorFunction"),this.Be=a,this.h("errorFunction",b,a))});
function Tm(a,b){var c=a.Xf;null!==c&&b.Fs!==c&&(b.font=c,b.Fs=c)}
Zb.prototype.Yi=function(a,b){if(null!==this.$b&&0!==this.Bd.length&&null!==this.Xf){var c=this.sa.width,d=To(this);a.textAlign=this.kd;Um(this,a,this.$b,!0,!1);(this.Sk||this.Rk)&&Um(this,a,this.$b,!1,!1);var e=this.pi,f=0,g=!1,h=Wa(0,0);this.We.Ka(h);var k=Wa(0,d);this.We.Ka(k);var l=h.Xi(k);A(h);A(k);h=b.scale;8>l*h*h&&(g=!0);b.Wf!==a&&(g=!1);!1===b.Wx("textGreeking")&&(g=!1);for(var l=this.Ji,h=this.Ki,k=this.fe,m=0;m<k;m++){var n=e.ye[m],p=e.Nd[m];n>c&&(n=c);var f=f+l,q=p,p=a,s=f,t=c,v=d,x=0;
g?("start"===this.kd||"left"===this.kd?x=0:"end"===this.kd||"right"===this.kd?x=t-n:"center"===this.kd?x=(t-n)/2:u("textAlign must be start, end, left, right, or center"),p.fillRect(0+x,s+.25*v,n,1)):("start"===this.kd||"left"===this.kd?x=0:"end"===this.kd||"right"===this.kd?x=t:"center"===this.kd?x=t/2:u("textAlign must be start, end, left, right, or center"),p.fillText(q,0+x,s+v-.25*v),q=v/20|0,0===q&&(q=1),"end"===this.kd||"right"===this.kd?x-=n:"center"===this.kd&&(x-=n/2),this.Sk&&(p.beginPath(),
p.lineWidth=q,p.moveTo(0+x,s+v-.2*v),p.lineTo(0+x+n,s+v-.2*v),p.stroke()),this.Rk&&(p.beginPath(),p.lineWidth=q,s=s+v-v/2.2|0,0!==q%2&&(s+=.5),p.moveTo(0+x,s),p.lineTo(0+x+n,s),p.stroke()));f+=d+h}}};
Zb.prototype.Rn=function(a,b,c,d){var e=this.pi;e.reset();var f=0,g=0;if(isNaN(this.ka.width)){f=this.Bd.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===f.length)f=0;else if(this.ly){for(var h=g=0,k=!1;!k;){var l=f.indexOf("\n",h);-1===l&&(l=f.length,k=!0);h=Uo(f.substr(h,l-h).replace(/^\s+|\s+$/g,""),this.Xf);h>g&&(g=h);h=l+1}f=g}else g=f.indexOf("\n",0),0<=g&&(f=f.substr(0,g)),f=h=Uo(f,this.Xf);f=Math.min(f,a/this.scale);f=Math.max(8,f)}else f=this.ka.width;null!==this.I&&(f=Math.min(f,this.I.se.width),
f=Math.max(f,this.I.Lf.width));g=So(this,f,e);l=g=isNaN(this.ka.height)?Math.min(g,b/this.scale):this.ka.height;if(0!==e.ge&&1!==e.Nd.length&&this.Oj===Qo&&(b=this.Xf,k=this.Oj===Qo?Vo(b):0,h=this.Ji+this.Ki,h=Math.max(0,To(this)+h),l=Math.max(Math.floor(l/h)-1,0),!(l+1>=e.Nd.length))){h=e.Nd[l];for(a=Math.max(1,a-k);Uo(h,b)>a&&1<h.length;)h=h.substr(0,h.length-1);h+=Lo;a=Uo(h,b);e.Nd[l]=h;e.Nd=e.Nd.slice(0,l+1);e.ye[l]=a;e.ye=e.ye.slice(0,l+1);e.Ri=e.Nd.length;e.ge=Math.max(e.ge,a)}if(this.MD===
Po||isNaN(this.ka.width))f=e.ge,isNaN(this.ka.width)&&(f=Math.max(8,f));f=Math.max(c,f);g=Math.max(d,g);ad(this.hc,f,g);Im(this,0,0,f,g)};Zb.prototype.Kh=function(a,b,c,d){Mm(this,a,b,c,d)};
function Ro(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,f=0,g=0,h=a.Xf,f=a.Ji+a.Ki,k=Math.max(0,To(a)+f),g=a.Oj===Qo?Vo(h):0;if(a.fe>=a.wh)return new Za(0,k);if(a.ql===Oo){c.Ri=1;f=Uo(b,h);if(0===g||f<=d)return c.ge=f,c.ye.push(c.ge),c.Nd.push(b),new Za(f,k);var l=Wo(b);b=b.substr(l.length);for(var m=Wo(b),f=Uo(l+m,h);0<m.length&&f<=d;)l+=m,b=b.substr(m.length),m=Wo(b),f=Uo((l+m).replace(/^\s+|\s+$/g,""),h);l+=m.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-g);Uo(l,h)>d&&1<l.length;)l=l.substr(0,
l.length-1);l+=Lo;g=Uo(l,h);c.ye.push(g);c.ge=g;c.Nd.push(l);return new Za(g,k)}var n=0;0===b.length&&(n=1,c.ye.push(0),c.Nd.push(b));for(;0<b.length;){l=Wo(b);for(b=b.substr(l.length);Uo(l,h)>d;){m=1;f=Uo(l.substr(0,m),h);for(g=0;f<=d;)m++,g=f,f=Uo(l.substr(0,m),h);1===m?(c.ye[a.fe+n]=f,e=Math.max(e,f)):(c.ye[a.fe+n]=g,e=Math.max(e,g));m--;1>m&&(m=1);c.Nd[a.fe+n]=l.substr(0,m);n++;l=l.substr(m);if(a.fe+n>a.wh)break}m=Wo(b);for(f=Uo(l+m,h);0<m.length&&f<=d;)l+=m,b=b.substr(m.length),m=Wo(b),f=Uo((l+
m).replace(/^\s+|\s+$/g,""),h);l=l.replace(/^\s+|\s+$/g,"");if(""!==l&&(0===m.length?(c.ye.push(f),e=Math.max(e,f)):(g=Uo(l,h),c.ye.push(g),e=Math.max(e,g)),c.Nd.push(l),n++,a.fe+n>a.wh))break}c.Ri=Math.min(a.wh,n);c.ge=Math.max(c.ge,e);return new Za(c.ge,k*c.Ri)}function Wo(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function Uo(a,b){Mo!==b&&(Mo=No.font=b);return No.measureText(a).width}
function To(a){if(null!==a.zm)return a.zm;var b=a.Xf;Mo!==b&&(Mo=No.font=b);var c=0;void 0!==Ho[b]&&5E3>Io?c=Ho[b]:(c=1.3*No.measureText("M").width,Ho[b]=c,Io++);return a.zm=c}function Vo(a){Mo!==a&&(Mo=No.font=a);var b=0;void 0!==Jo[a]&&5E3>Ko?b=Jo[a]:(b=No.measureText(Lo).width,Jo[a]=b,Ko++);return b}
function So(a,b,c){var d=a.Bd.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.Ji+a.Ki,e=Math.max(0,To(a)+e);if(0===d.length)return c.ge=0,a.fe=1,e;if(!a.ly){var f=d.indexOf("\n",0);0<=f&&(d=d.substr(0,f))}for(var f=0,g=a.fe=0,h=-1,k=!1;!k;)h=d.indexOf("\n",g),-1===h&&(h=d.length,k=!0),g<=h&&(g=d.substr(g,h-g),a.ql!==Oo?(c.Ri=0,g=Ro(a,g,c,b),f+=g.height,a.fe+=c.Ri):(Ro(a,g,c,b),f+=e,a.fe++),a.fe===a.wh&&(k=!0)),g=h+1;return a.Ht=f}
G(Zb,{az:"textValidation"},function(){return this.Rj},function(a){var b=this.Rj;b!==a&&(null!==a&&w(a,"function",Zb,"textValidation"),this.Rj=a,this.h("textValidation",b,a))});G(Zb,{UI:"spacingAbove"},function(){return this.Ji},function(a){var b=this.Ji;b!==a&&(this.Ji=a,this.h("spacingAbove",b,a))});G(Zb,{VI:"spacingBelow"},function(){return this.Ki},function(a){var b=this.Ki;b!==a&&(this.Ki=a,this.h("spacingBelow",b,a))});
G(Zb,{vI:"maxLines"},function(){return this.wh},function(a){var b=this.wh;b!==a&&(a=Math.floor(a),0>=a&&za(a,"> 0",Zb,"maxLines"),this.wh=a,this.h("maxLines",b,a),this.H())});H(Zb,{wI:"metrics"},function(){return this.pi});function Go(){this.ge=this.Ri=0;this.ye=[];this.Nd=[]}Go.prototype.reset=function(){this.ge=this.Ri=0;this.ye=[];this.Nd=[]};Go.prototype.qr=function(a){this.Ri=a.Ri;this.ge=a.ge;this.ye=Ka(a.ye);this.Nd=Ka(a.Nd)};H(Go,{BH:"arrSize"},function(){return this.ye});
H(Go,{CH:"arrText"},function(){return this.Nd});H(Go,{uI:"maxLineWidth"},function(){return this.ge});function mk(){U.call(this);this.de=null;this.Pq="";this.Ii=(new D(NaN,NaN,NaN,NaN)).freeze();this.Dm=Ne;this.Tq=this.Li=this.Be=null;this.Gw=!1;this.cn=null;this.xA=0}yb(mk,U);vb("Picture",mk);var Xo=new Sb,Yo=0,hk=[];
function Zo(){var a=hk;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.N&&a.push(e.parentElement.N)}return a}var $o;mk.clearCache=$o=function(a){void 0===a&&(a="");w(a,"string",mk,"clearCache:url");""!==a?Xo[a]&&(delete Xo[a],Yo--):(Xo=new Sb,Yo=0)};
mk.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.element=this.de;a.Pq=this.Pq;a.Ii.assign(this.Ii);a.Dm=this.Dm;a.Be=this.Be;a.Li=this.Li;a.cn=this.cn};mk.prototype.toString=function(){return"Picture("+this.source+")#"+ub(this)};
G(mk,{element:"element"},function(){return this.de},function(a){var b=this.de;b!==a&&(a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||u("Picture.element must be an instance of Image, Canvas, or Video."),this.Gw=a instanceof HTMLCanvasElement,this.de=a,!0===a.complete||void 0===a.complete?(a.pt instanceof Event&&null!==this.Be&&this.Be(this,a.pt),!0===a.Iw&&null!==this.Li&&this.Li(this,null),a.Iw=!0,this.ka.w()||(Qk(this,!1),this.H())):a.Xz||(a.addEventListener("load",
function(b){ap(a,b)}),a.addEventListener("error",function(b){bp(a,b)}),a.Xz=!0),this.h("element",b,a),this.ba())});
G(mk,{source:"source"},function(){return this.Pq},function(a){var b=this.Pq;if(b!==a){w(a,"string",mk,"source");this.Pq=a;var c=Xo,d=this.g;if(void 0!==c[a])var e=c[a].pn[0].source;else{30<Yo&&($o(),c=Xo);e=oa("img");e.addEventListener("load",function(a){ap(e,a)});e.addEventListener("error",function(a){bp(e,a)});e.Xz=!0;e.src=a;var f=this.cn;null!==f&&(e.crossOrigin=f(this));c[a]=new cp(e);Yo++}null!==d&&Rl(d,this);this.element=e;null!==d&&Ql(d,this);this.ba();this.h("source",b,a)}});
function ap(a,b){a.Iw=!0;a.pt=!1;for(var c=null,d=Zo(),e=d.length,f=0;f<e;f++){var g=d[f],h=g.Xm.ha(a.src);if(null!==h){e=h.length;for(f=0;f<e;f++)c=h[f],c.ka.w()||(g.JA.add(c),g.wd()),null!==c.Li&&c.Li(c,b);g.ba()}}}function bp(a,b){a.pt=b;for(var c=null,d=Zo(),e=d.length,f=0;f<e;f++)if(c=d[f].Xm.ha(a.src),null!==c){for(var e=c.length,g=ob(),f=0;f<e;f++)g.push(c[f]);for(f=0;f<e;f++)c=g[f],null!==c.Be&&c.Be(c,b);pb(g)}}
G(mk,{TI:"sourceCrossOrigin"},function(){return this.cn},function(a){if(this.cn!==a&&(null!==a&&w(a,"function",mk,"sourceCrossOrigin"),this.cn=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this))}});G(mk,{Wh:"sourceRect"},function(){return this.Ii},function(a){var b=this.Ii;b.A(a)||(ra(a,D,mk,"sourceRect"),this.Ii=a=a.O(),this.ba(),this.h("sourceRect",b,a))});
G(mk,{xF:"imageStretch"},function(){return this.Dm},function(a){var b=this.Dm;b!==a&&(va(a,U,mk,"imageStretch"),this.Dm=a,this.ba(),this.h("imageStretch",b,a))});G(mk,{Qx:"errorFunction"},function(){return this.Be},function(a){var b=this.Be;b!==a&&(null!==a&&w(a,"function",mk,"errorFunction"),this.Be=a,this.h("errorFunction",b,a))});
G(mk,{aJ:"successFunction"},function(){return this.Li},function(a){var b=this.Li;b!==a&&(null!==a&&w(a,"function",mk,"successFunction"),this.Li=a,this.h("successFunction",b,a))});
mk.prototype.Yi=function(a,b){var c=this.de;if(null!==c){var d=c.src;null!==d&&""!==d||u("Element has no source attribute: "+c);if(!(c.pt instanceof Event)&&!0===c.Iw){var d=this.sa,e=0,f=0,g=this.Gw,h=g?+c.width:c.naturalWidth,g=g?+c.height:c.naturalHeight;void 0===h&&c.videoWidth&&(h=c.videoWidth);void 0===g&&c.videoHeight&&(g=c.videoHeight);h=h||d.width;g=g||d.height;if(0!==h&&0!==g){this.Wh.w()&&(e=this.Ii.x,f=this.Ii.y,h=this.Ii.width,g=this.Ii.height);var k=h,l=g,m=this.Dm;switch(m){case Ri:if(this.Wh.w())break;
e+=Math.max((k-d.width)/2,0);f+=Math.max((l-d.height)/2,0);h=Math.min(d.width,k);g=Math.min(d.height,l);break;case Ne:k=d.width;l=d.height;break;case Ti:case Ui:var n=0;m===Ti?(n=Math.min(d.height/l,d.width/k),k*=n,l*=n):m===Ui&&(n=Math.max(d.height/l,d.width/k),k*=n,l*=n,e+=(k-d.width)/2,f+=(l-d.height)/2,h*=1/(k/d.width),g*=1/(l/d.height),k=d.width,l=d.height)}this.xA=h*g;var m=this.Sh()*b.scale,p=this.xA/(k*m*l*m),m=Xo[this.source],n=null;if(void 0!==m&&16<p){2>m.pn.length&&(dp(m,4,h,g),dp(m,16,
h,g));for(var q=m.pn,s=q.length,n=q[0],t=0;t<s;t++)if(q[t].fs*q[t].fs<p)n=q[t];else break}if(!b.um){if(null===this.Tq)if(null===this.de)this.Tq=!1;else{p=oa("canvas").getContext("2d");p.drawImage(this.de,0,0);try{p.getImageData(0,0,1,1),this.Tq=!1}catch(v){this.Tq=!0}}if(this.Tq)return}if(b.Hw||void 0===m||null===n||1===n.fs)try{a.drawImage(c,e,f,h,g,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}catch(x){}else{a.save();try{a.drawImage(n.source,Math.max((d.width-
k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}catch(B){}a.restore()}}}}};H(mk,{sa:"naturalBounds"},function(){return this.hc});
mk.prototype.Rn=function(a,b,c,d){var e=this.ka,f=Lm(this,!0),g=this.de,h=this.Gw;if(h||!this.Ow&&g&&g.complete)this.Ow=!0;null===g&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||f===Ne||f===Bm?(isFinite(a)||(a=this.Wh.w()?this.Wh.width:h?+g.width:g.naturalWidth),c=0):null!==g&&!1!==this.Ow&&(a=this.Wh.w()?this.Wh.width:h?+g.width:g.naturalWidth);isFinite(e.height)||f===Ne||f===Am?(isFinite(b)||(b=this.Wh.w()?this.Wh.height:h?+g.height:g.naturalHeight),d=0):null!==g&&!1!==this.Ow&&(b=
this.Wh.w()?this.Wh.height:h?+g.height:g.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.se;f=this.Lf;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===g||g.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));ad(this.hc,a,b);Im(this,0,0,a,b)};mk.prototype.Kh=function(a,b,c,d){Mm(this,a,b,c,d)};function cp(a){this.pn=[new ep(a,1)]}
function dp(a,b,c,d){var e=new Rb(null),f=e.getContext("2d"),g=1/b;e.width=c/b;e.height=d/b;b=new ep(e.Yc,b);c=a.pn[a.pn.length-1];f.setTransform(g*c.fs,0,0,g*c.fs,0,0);f.drawImage(c.source,0,0);a.pn.push(b)}function ep(a,b){this.source=a;this.fs=b}function mb(){this.m=new Ke;this.xb=null}r=mb.prototype;r.reset=function(){this.m=new Ke;this.xb=null};
function S(a,b,c,d,e,f){null===a.m&&u("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.xb&&u("Need to call beginFigure first"),d=new Cf(vf),d.s=b,d.u=c,a.xb.ra.add(d)):(a.xb=new Me,a.xb.ia=b,a.xb.ja=c,a.xb.Mr=d,a.m.Ya.add(a.xb));void 0!==f&&(a.xb.Im=f)}function ff(a){null===a.m&&u("StreamGeometryContext has been closed");null===a.xb&&u("Need to call beginFigure first");var b=a.xb.ra.length;0<b&&a.xb.ra.Y(b-1).close()}
function gf(a){null===a.m&&u("StreamGeometryContext has been closed");null===a.xb&&u("Need to call beginFigure first");0<a.xb.ra.length&&(a.xb.Mr=!0)}r.Ja=function(a){null===this.m&&u("StreamGeometryContext has been closed");null===this.xb&&u("Need to call beginFigure first");this.xb.rk=a};r.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.m&&u("StreamGeometryContext has been closed");null===this.xb&&u("Need to call beginFigure first");var d=new Cf(vf);d.s=a;d.u=b;c&&d.close();this.xb.ra.add(d)};
r.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.m&&u("StreamGeometryContext has been closed");null===this.xb&&u("Need to call beginFigure first");var d=new Cf($e);d.s=a;d.u=b;c&&d.close();this.xb.ra.add(d)};function T(a,b,c,d,e,f,g,h){void 0===h&&(h=!1);null===a.m&&u("StreamGeometryContext has been closed");null===a.xb&&u("Need to call beginFigure first");var k=new Cf(wf);k.vb=b;k.Lb=c;k.ve=d;k.we=e;k.s=f;k.u=g;h&&k.close();a.xb.ra.add(k)}
function df(a,b,c,d,e){var f;void 0===f&&(f=!1);null===a.m&&u("StreamGeometryContext has been closed");null===a.xb&&u("Need to call beginFigure first");var g=new Cf(xf);g.vb=b;g.Lb=c;g.s=d;g.u=e;f&&g.close();a.xb.ra.add(g)}r.arcTo=function(a,b,c,d,e,f,g){void 0===f&&(f=0);void 0===g&&(g=!1);null===this.m&&u("StreamGeometryContext has been closed");null===this.xb&&u("Need to call beginFigure first");var h=new Cf(yf);h.ae=a;h.gf=b;h.ua=c;h.Da=d;h.radiusX=e;h.radiusY=0!==f?f:e;g&&h.close();this.xb.ra.add(h)};
function ef(a,b,c,d,e,f,g,h){var k;void 0===k&&(k=!1);null===a.m&&u("StreamGeometryContext has been closed");null===a.xb&&u("Need to call beginFigure first");b=new Cf(zf,g,h,b,c,d,e,f);k&&b.close();a.xb.ra.add(b)}
Q.makeGeometry=function(a,b,c){var d=a.ka,e=d.width,d=d.height;void 0!==b&&!isNaN(b)&&isFinite(b)&&(e=b);void 0!==c&&!isNaN(c)&&isFinite(c)&&(d=c);isFinite(e)||(e=100);isFinite(d)||(d=100);b=null;"None"!==a.no?b=Q.ai[a.no]:"None"!==a.Sx?b=Q.ai[a.Sx]:(c=Q.Hf[a.jb],"string"===typeof c&&(c=Q.Hf[c]),void 0===c&&u("Unknown Shape.figure: "+a.jb),b=c(a,e,d),b.Hm=e,b.Gm=d);null===b&&(c=Q.Hf.Rectangle,"function"===typeof c&&(b=c(a,e,d)));return b};
Q.Lh=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q){var s=1-k;a=a*s+c*k;b=b*s+d*k;c=c*s+e*k;d=d*s+f*k;e=e*s+g*k;f=f*s+h*k;h=a*s+c*k;g=b*s+d*k;c=c*s+e*k;d=d*s+f*k;l.x=a;l.y=b;m.x=h;m.y=g;n.x=h*s+c*k;n.y=g*s+d*k;p.x=c;p.y=d;q.x=e;q.y=f};Q.xn=function(a){a=Q.Dl(a);var b=ob();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;pb(a);return b};
Q.Dl=function(a){var b=Q.Zj(a),c=ob(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var f=0;f<e;f++){var g=b[f],h=b[f+1],k=b[(d+f-1)%e],l=b[(d+f+a)%e];c[2*f]=g;c[2*f+1]=Q.jk(g.x,g.y,k.x,k.y,h.x,h.y,l.x,l.y,new z)}c[c.length]=c[0];pb(b);return c};Q.jk=function(a,b,c,d,e,f,g,h,k){c=a-c;var l=e-g,m=g=0;0===c||0===l?0===c?(h=(f-h)/l,g=a,m=h*g+(f-h*e)):(d=(b-d)/c,g=e,m=d*g+(b-d*a)):(d=(b-d)/c,h=(f-h)/l,a=b-d*a,g=(f-h*e-a)/(d-h),m=d*g+a);k.k(g,m);return k};
Q.Zj=function(a){for(var b=ob(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new z(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b};Q.jz=(new R(.156,.156)).va();Q.kz=(new R(.844,.844)).va();
Q.Hf={None:"Rectangle",Rectangle:function(a,b,c){a=new Ke;a.type=Pe;a.ia=0;a.ja=0;a.s=b;a.u=c;return a},Square:function(a,b,c){a=new Ke;a.Wc=Ti;a.type=Pe;a.ia=0;a.ja=0;a.s=Math.min(b,c);a.u=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new Ke;a.type=Qe;a.ia=0;a.ja=0;a.s=b;a.u=c;a.o=Q.jz;a.p=Q.kz;return a},Circle:function(a,b,c){a=new Ke;a.Wc=Ti;a.type=Qe;a.ia=0;a.ja=0;a.s=Math.min(b,c);a.u=Math.min(b,c);a.o=Q.jz;a.p=Q.kz;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Ke;var d=
new Me,e=new Cf;e.s=b;e.u=.5*c;d.ra.add(e);b=new Cf;b.s=0;b.u=c;d.ra.add(b.close());a.Ya.add(d);a.o=new R(0,.25);a.p=new R(.5,.75);return a},TriangleDown:function(a,b,c){a=new Ke;var d=new Me,e=new Cf;e.s=b;e.u=0;d.ra.add(e);e=new Cf;e.s=.5*b;e.u=c;d.ra.add(e.close());a.Ya.add(d);a.o=new R(.25,0);a.p=new R(.75,.5);return a},TriangleLeft:function(a,b,c){a=new Ke;var d=new Me;d.ia=b;d.ja=c;var e=new Cf;e.s=0;e.u=.5*c;d.ra.add(e);c=new Cf;c.s=b;c.u=0;d.ra.add(c.close());a.Ya.add(d);a.o=new R(.5,.25);
a.p=new R(1,.75);return a},TriangleUp:function(a,b,c){a=new Ke;var d=new Me;d.ia=b;d.ja=c;var e=new Cf;e.s=0;e.u=c;d.ra.add(e);c=new Cf;c.s=.5*b;c.u=0;d.ra.add(c.close());a.Ya.add(d);a.o=new R(.25,.5);a.p=new R(.75,1);return a},Line1:function(a,b,c){a=new Ke;a.type=Oe;a.ia=0;a.ja=0;a.s=b;a.u=c;return a},Line2:function(a,b,c){a=new Ke;a.type=Oe;a.ia=b;a.ja=0;a.s=0;a.u=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Ke;a.type=Oe;a.ia=0;a.ja=c/2;a.s=b;a.u=c/2;return a},LineV:function(a,b,c){a=
new Ke;a.type=Oe;a.ia=b/2;a.ja=0;a.s=b/2;a.u=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){var d=Q.ga;a=E();S(a,0,0,!1);T(a,d*b,0,1*b,(1-d)*c,b,c);b=a.m;F(a);return b},Curve2:function(a,b,c){var d=Q.ga;a=E();S(a,0,0,!1);T(a,0,d*c,(1-d)*b,c,b,c);b=a.m;F(a);return b},Curve3:function(a,b,c){var d=Q.ga;a=E();S(a,1*b,0,!1);T(a,1*b,d*c,d*b,1*c,0,1*c);b=a.m;F(a);return b},Curve4:function(a,b,c){var d=Q.ga;a=E();S(a,1*b,0,!1);T(a,(1-d)*b,0,0,(1-d)*c,0,1*c);b=a.m;F(a);return b},Alternative:"Triangle",
Merge:"Triangle",Triangle:function(a,b,c){a=E();S(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,1);F(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.75);F(a);return b},Pentagon:function(a,b,c){var d=Q.Zj(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.2,.22);b.p=new R(.8,
.9);F(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=Q.Zj(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.07,.25);b.p=new R(.93,.75);F(a);return b},Heptagon:function(a,b,c){var d=Q.Zj(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.2,.15);b.p=new R(.8,.85);F(a);return b},Octagon:function(a,b,c){var d=Q.Zj(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=
1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.15,.15);b.p=new R(.85,.85);F(a);return b},Nonagon:function(a,b,c){var d=Q.Zj(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.17,.13);b.p=new R(.82,.82);F(a);return b},Decagon:function(a,b,c){var d=Q.Zj(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.16,.16);b.p=new R(.84,.84);F(a);return b},Dodecagon:function(a,
b,c){var d=Q.Zj(12);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.16,.16);b.p=new R(.84,.84);F(a);return b},FivePointedStar:function(a,b,c){var d=Q.Dl(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.312,.383);b.p=new R(.693,.765);F(a);return b},SixPointedStar:function(a,b,c){var d=Q.Dl(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);
ff(a);b=a.m;b.o=new R(.17,.251);b.p=new R(.833,.755);F(a);return b},SevenPointedStar:function(a,b,c){var d=Q.Dl(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.363,.361);b.p=new R(.641,.709);F(a);return b},EightPointedStar:function(a,b,c){var d=Q.Dl(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.252,.255);b.p=new R(.75,.75);F(a);return b},NinePointedStar:function(a,b,
c){var d=Q.Dl(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.355,.361);b.p=new R(.645,.651);F(a);return b},TenPointedStar:function(a,b,c){var d=Q.Dl(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.281,.261);b.p=new R(.723,.748);F(a);return b},FivePointedBurst:function(a,b,c){var d=Q.xn(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*
c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.312,.383);b.p=new R(.693,.765);F(a);return b},SixPointedBurst:function(a,b,c){var d=Q.xn(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.17,.251);b.p=new R(.833,.755);F(a);return b},SevenPointedBurst:function(a,b,c){var d=Q.xn(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+
1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.363,.361);b.p=new R(.641,.709);F(a);return b},EightPointedBurst:function(a,b,c){var d=Q.xn(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.252,.255);b.p=new R(.75,.75);F(a);return b},NinePointedBurst:function(a,b,c){var d=Q.xn(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*
b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.355,.361);b.p=new R(.645,.651);F(a);return b},TenPointedBurst:function(a,b,c){var d=Q.xn(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.281,.261);b.p=new R(.723,.748);F(a);return b},Cloud:function(a,b,c){a=E();S(a,.08034461*b,.1944299*c,!0);T(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c);T(a,.2450511*
b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);T(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);T(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);T(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);T(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);T(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c);T(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c);T(a,.7431877*b,1.009325*
c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);T(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);T(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);T(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);T(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);T(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c);ff(a);b=a.m;b.o=new R(.1,.1);b.p=new R(.9,.9);F(a);return b},Gate:"Crescent",Crescent:function(a,
b,c){a=E();S(a,0,0,!0);T(a,1*b,0,1*b,1*c,0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.511,.19);b.p=new R(.776,.76);F(a);return b},FramedRectangle:function(a,b,c){var d=E(),e=a?a.Zb:NaN;a=a?a.es:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);S(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.m;b.o=new R(e,a);b.p=new R(1-e,1-a);F(d);return b},Delay:"HalfEllipse",HalfEllipse:function(a,
b,c){var d=Q.ga;a=E();S(a,0,0,!0);T(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c);T(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c);ff(a);b=a.m;b.o=new R(0,.2);b.p=new R(.75,.8);F(a);return b},Heart:function(a,b,c){a=E();S(a,.5*b,1*c,!0);T(a,.1*b,.8*c,0,.5*c,0*b,.3*c);T(a,0*b,0,.45*b,0,.5*b,.3*c);T(a,.55*b,0,1*b,0,1*b,.3*c);T(a,b,.5*c,.9*b,.8*c,.5*b,1*c);ff(a);b=a.m;b.o=new R(.15,.29);b.p=new R(.86,.68);F(a);return b},Spade:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);T(a,.6*b,.2*c,b,.25*c,b,.5*c);T(a,b,.8*c,.6*
b,.8*c,.55*b,.7*c);T(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);T(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);T(a,.4*b,.8*c,0,.8*c,0,.5*c);T(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);ff(a);b=a.m;b.o=new R(.19,.26);b.p=new R(.8,.68);F(a);return b},Club:function(a,b,c){a=E();S(a,.4*b,.6*c,!0);T(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);T(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,g=4*(Math.SQRT2-1)/3*d;T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*
b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-g+f-.02)*c,.65*b,.36771243*c);d=.2;e=0;f=-.3;g=4*(Math.SQRT2-1)/3*d;T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,.35*b,.36771243*
c);d=.2;e=-.3;f=0;g=4*(Math.SQRT2-1)/3*d;T(a,(.5+d+e-.05)*b,(.5-g+f-.02)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,.4*b,.6*c);ff(a);b=a.m;b.o=new R(.06,.39);b.p=new R(.93,.58);F(a);return b},Ring:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*c,!0);T(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);T(a,(.5-d)*b,0,0,
(.5-d)*c,0,.5*c);T(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);T(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;S(a,.5*b,.1*c,!0,!0);T(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);T(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);T(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);T(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Wc=Ti;F(a);return b},YinYang:function(a,b,c){var d=.5;a=E();d=.5;S(a,.5*b,0,!0);a.arcTo(270,180,.5*b,.5*b,.5*b);T(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,
e=.25;S(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);ff(a);S(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.Ja(!1);e=.75;S(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);ff(a);b=a.m;b.Wc=Ti;F(a);return b},Peace:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*c,!0);T(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);T(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);T(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);T(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;S(a,.5*b,.1*c,!0,!0);T(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,
.5*c);T(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);T(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);T(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,f=-.707*.11,g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=-.707*
.11;f=.707*.11;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=.707*.11;f=.707*.11;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*
b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Wc=Ti;F(a);return b},NotAllowed:function(a,b,c){var d=Q.ga,e=.5*d,f=.5;a=E();S(a,.5*b,(.5-f)*c,!0);T(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,
.5*c);T(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);var f=.4,e=.4*d,d=Va(),g=Va(),h=Va(),k=Va();Q.Lh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,g,h,k,k);var l=Va(),m=Va(),n=Va();Q.Lh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,k,k,n,l,m);var p=Va(),q=Va(),s=Va();Q.Lh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,p,q,s,k,k);var t=Va(),v=Va(),x=Va();Q.Lh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,k,k,x,t,v);S(a,x.x*b,x.y*c,!0,!0);T(a,t.x*b,t.y*c,v.x*b,v.y*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,
(.5-f)*c,.5*b,(.5-f)*c);T(a,d.x*b,d.y*c,g.x*b,g.y*c,h.x*b,h.y*c);a.lineTo(x.x*b,x.y*c);ff(a);S(a,s.x*b,s.y*c,!0,!0);a.lineTo(n.x*b,n.y*c);T(a,l.x*b,l.y*c,m.x*b,m.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,p.x*b,p.y*c,q.x*b,q.y*c,s.x*b,s.y*c);ff(a);A(d);A(g);A(h);A(k);A(l);A(m);A(n);A(p);A(q);A(s);A(t);A(v);A(x);b=a.m;F(a);b.Wc=Ti;return b},Fragile:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);
a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);T(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);T(a,.25*b,.5*c,0,.25*c,0,0);ff(a);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.4);F(a);return b},HourGlass:function(a,b,c){a=E();S(a,.65*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);ff(a);b=a.m;F(a);return b},
Lightning:function(a,b,c){a=E();S(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);ff(a);b=a.m;F(a);return b},Parallelogram1:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},Input:"Output",Output:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);ff(a);b=a.m;b.o=
new R(.1,0);b.p=new R(.9,1);F(a);return b},Parallelogram2:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},ThickCross:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-
a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);ff(d);b=d.m;b.o=new R(.5-a/2,.5-a/2);b.p=new R(.5+a/2,.5+a/2);F(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=E();S(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);ff(d);b=d.m;b.o=new R(.5-a,.5-
a);b.p=new R(.5+a,.5+a);F(d);return b},ThinCross:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.1);a=E();S(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-d/2)*b,(.5-d/2)*c);ff(a);b=a.m;F(a);return b},ThinX:function(a,b,c){a=E();S(a,.1*b,0,!0);a.lineTo(.5*
b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);ff(a);return a.m},RightTriangle:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.5);b.p=new R(.5,1);F(a);return b},RoundedIBeam:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,0);T(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);
b=a.m;F(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*Q.ga;var e=E();S(e,d,0,!0);e.lineTo(b-d,0);T(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);T(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);T(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);T(e,0,a,a,0,d,0);ff(e);b=e.m;1<a?(b.o=new R(0,0,a,a),b.p=new R(1,1,-a,-a)):(b.o=ud,b.p=Hd);F(e);return b},Border:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=E();S(a,d,0,!0);a.lineTo(b-
d,0);T(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);T(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);T(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);T(a,0,0,0,0,d,0);ff(a);b=a.m;b.o=ud;b.p=Hd;F(a);return b},SquareIBeam:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);ff(a);b=a.m;F(a);
return b},Trapezoid:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.2);var d=E();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=0);a=E();S(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);ff(a);b=a.m;b.o=new R(.1,0);b.p=new R(.9,1);F(a);return b},GenderMale:function(a,b,c){a=E();var d=Q.ga,e=.4*d,f=.4,g=Va(),
h=Va(),k=Va(),l=Va();S(a,(.5-f)*b,.5*c,!0);T(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c);Q.Lh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,k,l,h,g,g);T(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);var m=Wa(h.x,h.y);Q.Lh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,g,g,h,k,l);var n=Wa(h.x,h.y);a.lineTo((.1*m.x+.855)*b,.1*m.y*c);a.lineTo(.85*b,.1*m.y*c);a.lineTo(.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*n.x+.9)*b,.15*c);a.lineTo((.1*n.x+.9)*b,(.1*n.y+.05*.9)*c);a.lineTo(n.x*b,n.y*c);T(a,k.x*
b,k.y*c,l.x*b,l.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);f=.35;e=.35*d;S(a,.5*b,(.5-f)*c,!0,!0);T(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);S(a,(.5-f)*b,.5*c,!0);A(g);A(h);A(k);A(l);A(m);A(n);b=a.m;b.o=new R(.202,.257);b.p=new R(.692,.839);
b.Wc=Ti;F(a);return b},GenderFemale:function(a,b,c){a=E();var d=.375,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d;S(a,(.525+e)*b,(.5+d+f)*c,!0);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);
a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);ff(a);d=.325;e=0;f=-.125;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0,!0);T(a,(.5+d+e)*b,(.5+g+f)*c,(.5+g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5-g+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5-g+f)*c,(.5-g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5+g+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-g+f)*c,(.5+d+e)*b,(.5+f)*c);S(a,(.525+e)*b,
(.5+d+f)*c,!0);b=a.m;b.o=new R(.232,.136);b.p=new R(.782,.611);b.Wc=Ti;F(a);return b},PlusLine:function(a,b,c){a=E();S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},XLine:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},AsteriskLine:function(a,b,c){a=E();var d=.2/Math.SQRT2;S(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*
b,0*c);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},CircleLine:function(a,b,c){var d=.5*Q.ga;a=E();S(a,1*b,.5*c,!1);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Wc=Ti;F(a);return b},Pie:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);T(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);T(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*
c,0*b,.5*c);T(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);T(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},PiePiece:function(a,b,c){var d=Q.ga/Math.SQRT2*.5,e=Math.SQRT2/2,f=1-Math.SQRT2/2;a=E();S(a,b,c,!0);T(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c);a.lineTo(0,c);ff(a);b=a.m;F(a);return b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=E();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,
(1-a)*c);d.lineTo(0,a*c);ff(d);b=d.m;b.o=new R(a/2,a/2);b.p=new R(1-a/2,1-a/2);F(d);return b},LogicImplies:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.m;b.o=ud;b.p=new R(.8,.5);F(a);return b},LogicIff:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*
b,c);b=a.m;b.o=new R(.2,0);b.p=new R(.8,.5);F(a);return b},LogicNot:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},LogicAnd:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,1);F(a);return b},LogicOr:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.m;b.o=new R(.219,0);b.p=new R(.78,.409);F(a);return b},LogicXor:function(a,b,c){a=E();S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,
.5*c);a.lineTo(1*b,.5*c);var d=.5*Q.ga;T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.Wc=Ti;F(a);return b},LogicTruth:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},LogicFalsity:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.m;F(a);return b},LogicThereExists:function(a,b,c){a=E();S(a,
0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.m;F(a);return b},LogicForAll:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.5);F(a);return b},LogicIsDefinedAs:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.m;b.o=new R(.01,.01);b.p=new R(.99,.49);F(a);return b},LogicIntersect:function(a,
b,c){var d=.5*Q.ga;a=E();S(a,0,1*c,!1);a.lineTo(0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=a.m;b.o=new R(0,.5);b.p=Hd;F(a);return b},LogicUnion:function(a,b,c){var d=.5*Q.ga;a=E();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.m;b.o=ud;b.p=new R(1,.5);F(a);return b},Arrow:function(a,b,c){var d=a?a.Zb:NaN,e=a?a.es:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=E();S(a,0,
(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,(.5+e/2)*c);ff(a);b=a.m;b.o=new R(0,.5-e/2);d=Q.jk(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,Va());b.p=new R(d.x,d.y);A(d);F(a);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},DoubleArrow:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.3*
b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);ff(a);S(a,.3*b,.214*c,!1);a.lineTo(.3*b,.786*c);a.Ja(!1);b=a.m;F(a);return b},DoubleEndArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;c=Q.jk(0,.5,.3,0,0,.3,.3,.3,Va());b.o=new R(c.x,c.y);c=Q.jk(.7,1,1,.5,.7,.7,1,.7,c);b.p=
new R(c.x,c.y);A(c);F(a);return b},IBeamArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=new R(0,.3);c=Q.jk(.7,1,1,.5,.7,.7,1,.7,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},Pointer:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);ff(a);b=a.m;b.o=new R(.2,.35);c=Q.jk(.2,
.65,1,.65,0,1,1,.5,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},RoundedPointer:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.4,.35);c=Q.jk(.2,.65,1,.65,0,1,1,.5,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},SplitEndArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=new R(.2,.3);c=Q.jk(.7,1,1,.5,.7,
.7,1,.7,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=ud;b.p=new R(.7,1);F(a);return b},Cone1:function(a,b,c){var d=Q.ga;a=.5*d;var e=.1*d,d=E();S(d,0,.9*c,!0);d.lineTo(.5*b,0);d.lineTo(1*b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);ff(d);b=d.m;b.o=new R(.25,.5);b.p=new R(.75,.97);F(d);return b},Cone2:function(a,
b,c){a=E();S(a,0,.9*c,!0);T(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,0);a.lineTo(0,.9*c);ff(a);S(a,0,.9*c,!1);T(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,.82);F(a);return b},Cube1:function(a,b,c){a=E();S(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);ff(a);S(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.Ja(!1);b=a.m;b.o=
new R(0,.3);b.p=new R(.5,.85);F(a);return b},Cube2:function(a,b,c){a=E();S(a,0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);ff(a);S(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.Ja(!1);b=a.m;b.o=new R(0,.3);b.p=new R(.7,1);F(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=Q.ga;a=.5*d;var e=.1*d,d=E();S(d,0,.1*c,!0);T(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);T(d,(.5+a)*b,0,1*b,(.1-e)*c,
1*b,.1*c);d.lineTo(b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);d.lineTo(0,.1*c);S(d,0,.1*c,!1);T(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c);T(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);d.Ja(!1);b=d.m;b.o=new R(0,.2);b.p=new R(1,.9);F(d);return b},Cylinder2:function(a,b,c){var d=Q.ga;a=.5*d;var e=.1*d,d=E();S(d,0,.9*c,!0);d.lineTo(0,.1*c);T(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);T(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c);d.lineTo(1*b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);
T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);S(d,0,.9*c,!1);T(d,0,(.9-e)*c,(.5-a)*b,.8*c,.5*b,.8*c);T(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);d.Ja(!1);b=d.m;b.o=new R(0,.1);b.p=new R(1,.8);F(d);return b},Cylinder3:function(a,b,c){var d=Q.ga;a=.1*d;var e=.5*d,d=E();S(d,.1*b,0,!0);d.lineTo(.9*b,0);T(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);T(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);T(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);T(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);S(d,.1*b,0,!1);T(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*
b,.5*c);T(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c);d.Ja(!1);b=d.m;b.o=new R(.2,0);b.p=new R(.9,1);F(d);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=Q.ga;a=.1*d;var e=.5*d,d=E();S(d,.9*b,0,!0);T(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);T(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);T(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);T(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);d.lineTo(.9*b,0);S(d,.9*b,0,!1);T(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);T(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c);d.Ja(!1);b=
d.m;b.o=new R(.1,0);b.p=new R(.8,1);F(d);return b},Prism1:function(a,b,c){a=E();S(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);ff(a);S(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.Ja(!1);b=a.m;b.o=new R(.408,.172);b.p=new R(.833,.662);F(a);return b},Prism2:function(a,b,c){a=E();S(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);ff(a);S(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.Ja(!1);
b=a.m;b.o=new R(.25,.5);b.p=new R(.75,.75);F(a);return b},Pyramid1:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);ff(a);S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.Ja(!1);b=a.m;b.o=new R(.25,.367);b.p=new R(.75,.875);F(a);return b},Pyramid2:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);ff(a);S(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.Ja(!1);b=a.m;b.o=new R(.25,.367);
b.p=new R(.75,.875);F(a);return b},Actor:function(a,b,c){var d=Q.ga,e=.2*d,f=.1*d,g=.5,h=.1;a=E();S(a,g*b,(h+.1)*c,!0);T(a,(g-e)*b,(h+.1)*c,(g-.2)*b,(h+f)*c,(g-.2)*b,h*c);T(a,(g-.2)*b,(h-f)*c,(g-e)*b,(h-.1)*c,g*b,(h-.1)*c);T(a,(g+e)*b,(h-.1)*c,(g+.2)*b,(h-f)*c,(g+.2)*b,h*c);T(a,(g+.2)*b,(h+f)*c,(g+e)*b,(h+.1)*c,g*b,(h+.1)*c);e=.05;f=d*e;S(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);g=.95;h=.25;T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);
e=.025;f=d*e;g=.825;h=.35;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);e=.05;f=d*e;g=.5;h=.7;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);e=.025;f=d*e;g=.175;h=.35;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.15*
b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);e=.05;f=d*e;g=.05;h=.25;T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);a.lineTo(.5*b,.2*c);b=a.m;b.o=new R(.2,.2);b.p=new R(.8,.65);F(a);return b},Card:function(a,b,c){a=E();S(a,1*b,0*c,!0);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);ff(a);b=a.m;b.o=new R(0,.2);b.p=Hd;F(a);return b},Collate:function(a,b,c){a=E();S(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);S(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,
1*c);a.lineTo(.5*b,.5*c);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.25);F(a);return b},CreateRequest:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.Ja(!1);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},Database:function(a,b,c){a=E();var d=Q.ga,e=.5*d,d=.1*d;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);T(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);T(a,(.5-e)*b,
1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);T(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);T(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);S(a,1*b,.1*c,!1);T(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);T(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c);a.moveTo(1*b,.2*c);T(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);T(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.moveTo(1*b,.3*c);T(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c);T(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c);a.Ja(!1);b=a.m;b.o=new R(0,.4);b.p=new R(1,.9);F(a);return b},StoredData:"DataStorage",DataStorage:function(a,
b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);T(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);T(a,.25*b,.9*c,.25*b,.1*c,0,0);ff(a);b=a.m;b.o=new R(.226,0);b.p=new R(.81,1);F(a);return b},DiskStorage:function(a,b,c){a=E();var d=Q.ga,e=.5*d,d=.1*d;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);T(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);T(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);T(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);T(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);S(a,1*b,.1*c,!1);T(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);T(a,
(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c);a.moveTo(1*b,.2*c);T(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);T(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.Ja(!1);b=a.m;b.o=new R(0,.3);b.p=new R(1,.9);F(a);return b},Display:function(a,b,c){a=E();S(a,.25*b,0,!0);a.lineTo(.75*b,0);T(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);ff(a);b=a.m;b.o=new R(.25,0);b.p=new R(.75,1);F(a);return b},DividedEvent:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=E(),e=.2*Q.ga;S(d,0,.2*c,!0);T(d,0,(.2-e)*
c,(.2-e)*b,0,.2*b,0);d.lineTo(.8*b,0);T(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);T(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);T(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ja(!1);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},DividedProcess:function(a,b,c){a=a?a.Zb:NaN;if(isNaN(a)||.1>a)a=.1;var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ja(!1);b=d.m;b.o=new R(0,
a);b.p=Hd;F(d);return b},Document:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);b=a.m;b.o=ud;b.p=new R(1,.6);F(a);return b},ExternalOrganization:function(a,b,c){a=a?a.Zb:NaN;if(isNaN(a)||.2>a)a=.2;var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-
a)*c);d.Ja(!1);b=d.m;b.o=new R(a/2,a/2);b.p=new R(1-a/2,1-a/2);F(d);return b},ExternalProcess:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);ff(a);S(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.75);F(a);return b},File:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);ff(a);S(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.Ja(!1);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},Interrupt:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.m;b.o=new R(0,.25);b.p=new R(.5,.75);F(a);return b},InternalStorage:function(a,b,c){var d=a?a.Zb:NaN;a=a?a.es:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);ff(e);S(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.Ja(!1);b=e.m;b.o=new R(d,a);b.p=Hd;F(e);return b},Junction:function(a,b,c){a=E();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*Q.ga;S(a,1*b,.5*c,!0);T(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c);T(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c);T(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0);T(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c);S(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.Ja(!1);b=a.m;b.Wc=Ti;
F(a);return b},LinedDocument:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);S(a,.1*b,0,!1);a.lineTo(.1*b,.75*c);a.Ja(!1);b=a.m;b.o=new R(.1,0);b.p=new R(1,.6);F(a);return b},LoopLimit:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,
c){a=E();var d=.5*Q.ga;S(a,.5*b,1*c,!0);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.m;b.o=new R(.15,.15);b.p=new R(.85,.8);F(a);return b},ManualInput:function(a,b,c){a=E();S(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},MessageFromUser:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&
(a=.7);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=ud;b.p=new R(a,1);F(d);return b},MicroformProcessing:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},MicroformRecording:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*c);a.lineTo(1*b,.85*c);
a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=new R(1,.75);F(a);return b},MultiDocument:function(a,b,c){c/=.8;a=E();S(a,b,0,!0);a.lineTo(b,.5*c);T(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);T(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);T(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);ff(a);S(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*c);a.moveTo(.2*b,.1*c);a.lineTo(.9*
b,.1*c);a.lineTo(.9*b,.44*c);a.Ja(!1);b=a.m;b.o=new R(0,.25);b.p=new R(.8,.77);F(a);return b},MultiProcess:function(a,b,c){a=E();S(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);ff(a);S(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(0,
.2);b.p=new R(.8,1);F(a);return b},OfflineStorage:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=1-a,e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(.5*b,1*c);ff(e);S(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.Ja(!1);b=e.m;b.o=new R(d/4+.5*a,a);b.p=new R(3*d/4+.5*a,a+.5*d);F(e);return b},OffPageConnector:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=ud;b.p=new R(.75,1);F(a);return b},Or:function(a,b,c){a=E();var d=.5*Q.ga;
S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.Ja(!1);b=a.m;b.Wc=Ti;F(a);return b},PaperTape:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,.3*c);T(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);b=a.m;b.o=new R(0,.49);b.p=new R(1,.75);F(a);return b},PrimitiveFromCall:function(a,
b,c){var d=a?a.Zb:NaN;a=a?a.es:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);ff(e);b=e.m;b.o=new R(d,0);b.p=new R(1-a,1);F(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Zb:NaN;a=a?a.es:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=E();S(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);ff(e);b=e.m;b.o=new R(d,0);b.p=new R(1-a,1);F(e);return b},Subroutine:"Procedure",Procedure:function(a,
b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.Ja(!1);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},Process:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,a*b,0,!1);d.lineTo(a*b,1*c);d.Ja(!1);b=d.m;b.o=new R(a,0);b.p=Hd;F(d);return b},Sort:function(a,b,c){a=E();S(a,.5*b,
0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);ff(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.Ja(!1);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.5);F(a);return b},Start:function(a,b,c){a=E();S(a,.25*b,0,!0);S(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);S(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.Ja(!1);b=a.m;b.o=new R(.25,0);b.p=new R(.75,1);F(a);return b},Terminator:function(a,b,c){a=E();S(a,.25*b,0,!0);a.arcTo(270,
180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.m;b.o=new R(.23,0);b.p=new R(.77,1);F(a);return b},TransmittalTape:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);ff(d);b=d.m;b.o=ud;b.p=new R(1,1-a);F(d);return b},AndGate:function(a,b,c){a=E();var d=.5*Q.ga;S(a,0,0,!0);a.lineTo(.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);ff(a);
b=a.m;b.o=ud;b.p=new R(.55,1);F(a);return b},Buffer:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=new R(.5,.75);F(a);return b},Clock:function(a,b,c){a=E();var d=.5*Q.ga;S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);S(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,
.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*b,.75*c);a.Ja(!1);b=a.m;b.Wc=Ti;F(a);return b},Ground:function(a,b,c){a=E();S(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.m;F(a);return b},Inverter:function(a,b,c){a=E();var d=.1*Q.ga;S(a,.8*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*
c);T(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);T(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);T(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(0,.25);b.p=new R(.4,.75);F(a);return b},NandGate:function(a,b,c){a=E();var d=Q.ga,e=.5*d,f=.4*d,d=.1*d;S(a,.8*b,.5*c,!0);T(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);T(a,(.4+e)*b,0,.8*b,(.5-f)*c,.8*b,.5*c);S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);T(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);T(a,
.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);T(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(0,.05);b.p=new R(.55,.95);F(a);return b},NorGate:function(a,b,c){a=E();var d=Q.ga,e=.5,f=d*e,g=0,h=.5;S(a,.8*b,.5*c,!0);T(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,0,1*c);T(a,.25*b,.75*c,.25*b,.25*c,0,0);T(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c);e=.1;f=.1*d;g=.9;h=.5;S(a,(g-e)*b,h*c,!0);T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);T(a,(g+e)*b,(h+f)*c,(g+f)*b,
(h+e)*c,g*b,(h+e)*c);T(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c);b=a.m;b.o=new R(.2,.25);b.p=new R(.6,.75);F(a);return b},OrGate:function(a,b,c){a=E();var d=.5*Q.ga;S(a,0,0,!0);T(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);T(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);T(a,.25*b,.75*c,.25*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.2,.25);b.p=new R(.75,.75);F(a);return b},XnorGate:function(a,b,c){a=E();var d=Q.ga,e=.5,f=d*e,g=.2,h=.5;S(a,.1*b,0,!1);T(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);S(a,.8*b,.5*c,!0);T(a,.7*
b,(h+f)*c,(g+f)*b,(h+e)*c,.2*b,1*c);T(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);T(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c);e=.1;f=.1*d;g=.9;h=.5;S(a,(g-e)*b,h*c,!0);T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);T(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c);T(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c);b=a.m;b.o=new R(.4,.25);b.p=new R(.65,.75);F(a);return b},XorGate:function(a,b,c){a=E();var d=.5*Q.ga;S(a,.1*b,0,!1);T(a,.35*b,.25*c,.35*b,.75*c,.1*
b,1*c);S(a,.2*b,0,!0);T(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);T(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c);T(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);ff(a);b=a.m;b.o=new R(.4,.25);b.p=new R(.8,.75);F(a);return b},Capacitor:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},Resistor:function(a,b,c){a=E();S(a,0,.5*c,!1);a.lineTo(.1*b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.m;F(a);
return b},Inductor:function(a,b,c){a=E();var d=.1*Q.ga,e=.1;S(a,(e-.5*d)*b,c,!1);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;T(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c);b=a.m;F(a);return b},ACvoltageSource:function(a,b,c){a=E();var d=.5*Q.ga;S(a,0*b,.5*c,!1);T(a,0*b,(.5-d)*c,(.5-d)*b,0*
c,.5*b,0*c);T(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);T(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.m;b.Wc=Ti;F(a);return b},DCvoltageSource:function(a,b,c){a=E();S(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},Diode:function(a,b,c){a=E();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.m;b.o=new R(0,.25);b.p=new R(.5,
.75);F(a);return b},Wifi:function(a,b,c){var d=b,e=c;b*=.38;c*=.6;a=E();var f=Q.ga,g=.8*f,h=.8,k=0,l=.5,d=(d-b)/2,e=(e-c)/2;S(a,k*b+d,(l+h)*c+e,!0);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);T(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);ff(a);g=.4*f;h=.4;k=.2;l=.5;S(a,k*b+d,(l+h)*c+e,!0);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*
b+d,l*c+e);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);T(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);ff(a);g=.2*f;h=.2;l=k=.5;S(a,(k-h)*b+d,l*c+e,!0);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);g=.4*f;
h=.4;k=.8;l=.5;S(a,k*b+d,(l-h)*c+e,!0);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);T(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);ff(a);g=.8*f;h=.8;k=1;l=.5;S(a,k*b+d,(l-h)*c+e,!0);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+
g)*c+e,(k+h-.5*g)*b+d,l*c+e);T(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);ff(a);b=a.m;F(a);return b},Email:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);ff(a);S(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.Ja(!1);b=a.m;F(a);return b},Ethernet:function(a,b,c){a=E();S(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*
b,0);ff(a);S(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);ff(a);S(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);ff(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*b,.6*c);a.Ja(!1);b=a.m;F(a);return b},Power:function(a,b,c){a=E();var d=Q.ga,e=.4*d,f=.4,g=Va(),h=Va(),k=Va(),l=Va();Q.Lh(.5,.5-f,.5+
e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,k,l);var m=Wa(h.x,h.y);S(a,h.x*b,h.y*c,!0);T(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);Q.Lh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,k,l,h,g,g);T(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);e=.3*d;f=.3;Q.Lh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,k,l,h,g,g);a.lineTo(h.x*b,h.y*c);T(a,l.x*b,l.y*c,k.x*b,k.y*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*
b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);Q.Lh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,k,l);T(a,l.x*b,l.y*c,k.x*b,k.y*c,h.x*b,h.y*c);ff(a);S(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);ff(a);A(g);A(h);A(k);A(l);A(m);b=a.m;b.o=new R(.25,.55);b.p=new R(.75,.8);F(a);return b},Fallout:function(a,b,c){a=E();var d=.5*Q.ga;S(a,0*b,.5*c,!0);T(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);T(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,
1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);var e=d=0;S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;ff(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;ff(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);ff(a);b=a.m;b.Wc=Ti;F(a);return b},IrritationHazard:function(a,b,c){a=
E();S(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);ff(a);b=a.m;b.o=new R(.3,.3);b.p=new R(.7,.7);F(a);return b},ElectricalHazard:function(a,b,c){a=E();S(a,.37*b,0*c,!0);a.lineTo(.5*b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);
a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*b,.56*c);a.lineTo(0*b,.68*c);ff(a);b=a.m;F(a);return b},FireHazard:function(a,b,c){a=E();S(a,.1*b,1*c,!0);T(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);T(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);T(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);T(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);T(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c);T(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);ff(a);b=a.m;b.o=new R(.05,.645);b.p=new R(.884,.908);F(a);return b},BpmnActivityLoop:function(a,b,c){a=
E();var d=4*(Math.SQRT2-1)/3*.5;S(a,.65*b,1*c,!1);T(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);T(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);T(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);T(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.m;F(a);return b},BpmnActivityParallel:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},BpmnActivitySequential:function(a,
b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.m;F(a);return b},BpmnActivityAdHoc:function(a,b,c){a=E();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,0,.5*c,!1);T(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);T(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.m;F(a);return b},BpmnActivityCompensation:function(a,b,c){a=E();S(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);ff(a);b=a.m;F(a);return b},
BpmnTaskMessage:function(a,b,c){a=E();S(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);ff(a);S(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.Ja(!1);b=a.m;F(a);return b},BpmnTaskScript:function(a,b,c){a=E();S(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);T(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,0);T(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);ff(a);S(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.Ja(!1);
b=a.m;F(a);return b},BpmnTaskUser:function(a,b,c){a=E();S(a,0,0,!1);S(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);T(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);T(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;T(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c);T(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-
d)*c,.5*b,(d-d)*c);T(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c);T(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);S(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);S(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.m;F(a);return b},BpmnEventConditional:function(a,b,c){a=E();S(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);ff(a);S(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,
.4*c);a.lineTo(.8*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.Ja(!1);b=a.m;F(a);return b},BpmnEventError:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);ff(a);b=a.m;F(a);return b},BpmnEventEscalation:function(a,b,c){a=E();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},BpmnEventTimer:function(a,
b,c){a=E();var d=.5*Q.ga;S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.Ja(!1);b=a.m;b.Wc=Ti;F(a);return b}};
for(var fp in Q.Hf)Q.Hf[fp.toLowerCase()]=fp;
Q.Fu={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};Q.LG=function(){if(null!==Q.Fu){for(var a in Q.Fu){var b=cf(Q.Fu[a],!1);Q.ai[a]=b;a.toLowerCase()!==a&&(Q.ai[a.toLowerCase()]=a)}Q.Fu=null}};
Q.HB=function(a){Q.LG();var b=Q.ai[a];if(void 0===b){b=a.toLowerCase();if("none"===b)return"None";b=Q.ai[b]}return"string"===typeof b?b:b instanceof Ke?a:null};
function O(a){0===arguments.length?L.call(this):L.call(this,a);this.D=311807;this.Gj=this.ih="";this.yq=this.vq=this.Hq=this.Bp=null;this.Jq="";this.gh=this.Iq=this.il=null;this.xq="";this.Zm=null;this.wq=(new Za(NaN,NaN)).freeze();this.zq="";this.$m=null;this.Bd="";this.Ct=this.Jo=this.uj=null;this.bg=(new z(NaN,NaN)).freeze();this.Ip="";this.Jj=null;this.Jp=ud;this.Sp=Q.QD;this.Lp=Q.PD;this.To=null;this.Cp=gp;this.ll=(new z(6,6)).freeze();this.kl="gray";this.jl=4;this.pA=-1;this.aE=new D;this.Lj=
null;this.vi=NaN}yb(O,L);vb("Part",O);O.prototype.cloneProtected=function(a){L.prototype.cloneProtected.call(this,a);a.D=this.D&-4097|49152;a.ih=this.ih;a.Gj=this.Gj;a.Bp=this.Bp;a.Hq=this.Hq;a.vq=this.vq;a.yq=this.yq;a.Jq=this.Jq;a.Iq=this.Iq;a.gh=null;a.xq=this.xq;a.wq.assign(this.wq);a.zq=this.zq;a.Bd=this.Bd;a.Jo=this.Jo;a.bg.assign(this.bg);a.Ip=this.Ip;a.Jp=this.Jp.O();a.Sp=this.Sp.O();a.Lp=this.Lp.O();a.To=this.To;a.Cp=this.Cp;a.ll.assign(this.ll);a.kl=this.kl;a.jl=this.jl};
O.prototype.Zg=function(a){L.prototype.Zg.call(this,a);a.mk();a.il=null;a.Zm=null;a.$m=null;a.Jj=null;a.Lj=null};O.prototype.toString=function(){var a=xa(Object.getPrototypeOf(this))+"#"+ub(this);null!==this.data&&(a+="("+Sf(this.data)+")");return a};O.LayoutNone=0;var sl;O.LayoutAdded=sl=1;var Al;O.LayoutRemoved=Al=2;O.LayoutShown=4;O.LayoutHidden=8;O.LayoutNodeSized=16;var dm;O.LayoutGroupLayout=dm=32;O.LayoutNodeReplaced=64;var gp;O.LayoutStandard=gp=sl|Al|28|dm|64;O.LayoutAll=16777215;
O.prototype.Ql=function(a,b,c,d,e,f,g){var h=this.g;null!==h&&(a===Qf&&"elements"===b?e instanceof L?tl(e,function(a){vl(h,a);ul(h,a)}):e instanceof mk&&Ql(h,e):a===Rf&&"elements"===b&&(e instanceof L?tl(e,function(a){zl(h,a);yl(h,a)}):e instanceof mk&&Rl(h,e)),h.ec(a,b,c,d,e,f,g))};O.prototype.updateTargetBindings=O.prototype.rb=function(a){L.prototype.rb.call(this,a);if(null!==this.data){a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof L&&tl(d,function(a){null!==a.data&&a.rb()})}}};
O.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf){var d=c.Il(a),b=b.gF(d),e=this.Ba;b!==e&&(b=null!==e?c.$a(e.data):void 0,e=c.Yn,"function"===typeof e?e(a,b):a[e]=b,c.Av(a,d))}}}};H(O,{xu:"adornments"},function(){return null===this.gh?Cc:this.gh.AC});O.prototype.findAdornment=O.prototype.An=function(a){var b=this.gh;return null===b?null:b.ha(a)};
O.prototype.addAdornment=O.prototype.Uj=function(a,b){if(null!==b){var c=null,d=this.gh;null!==d&&(c=d.ha(a));if(c!==b){if(null!==c){var e=c.g;null!==e&&e.remove(c)}null===d&&(this.gh=d=new Fb("string",Vg));b.ih!==a&&(b.kc=a);d.add(a,b);c=this.g;null!==c&&(c.add(b),b.data=this.data)}}};O.prototype.removeAdornment=O.prototype.xk=function(a){var b=this.gh;if(null!==b){var c=b.ha(a);if(null!==c){var d=c.g;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.gh=null)}};
O.prototype.clearAdornments=O.prototype.nr=function(){var a=this.gh;if(null!==a){for(var b=ob(),a=a.i;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.xk(b[c]);pb(b)}};
O.prototype.updateAdornments=function(){var a=this.g;if(null!==a){a:{if(this.Ia&&this.FG){var b=this.ps;if(!(null!==b&&this.Q.w()&&this.qa()&&b.tk()&&b.Q.w()))break a;var c=this.An("Selection");if(null===c){c=this.GG;null===c&&(c=this instanceof W?a.VF:this instanceof Wg?a.tF:a.jG);if(!(c instanceof Vg))break a;Yg(c);c=c.copy();null!==c&&(c.kc="Selection",c.Xb=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.Sh(),f=0;b instanceof X&&(f=b.Na);var g=Ya();g.k((b.sa.width+f)*e,(b.sa.height+f)*
e);d.ka=g;$a(g)}c.angle=b.hk();c.type!==si&&(d=Va(),c.location=b.Ra(ud,d),A(d));this.Uj("Selection",c);break a}}this.xk("Selection")}hp(this,a);for(a=this.xu;a.next();)b=a.value,b.rb(),b.H()}};function hp(a,b){b.Xa.ue.each(function(b){b.isEnabled&&b.updateAdornments(a)})}H(O,{layer:"layer"},function(){return this.Ct});H(O,{g:"diagram"},function(){var a=this.Ct;return null!==a?a.g:null});
G(O,{Ne:"layerName"},function(){return this.Gj},function(a){var b=this.Gj;if(b!==a){w(a,"string",O,"layerName");var c=this.g;if(null===c||null!==c.wr(a)&&!c.$l)if(this.Gj=a,null!==c&&c.Rb(),this.h("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.g,null!==c&&(a=c.wr(a),null!==a&&a!==b))){var d=b.Xd(-1,this,!0);0<=d&&c.ec(Rf,"parts",b,this,null,d,!0);d=a.Hn(99999999,this,!0);0<=d&&c.ec(Qf,"parts",a,null,this,!0,d);d=this.Rr;if(null!==d){var e=c.ya;c.ya=!0;d(this,b,a);c.ya=e}}}});
G(O,{Rr:"layerChanged"},function(){return this.Bp},function(a){var b=this.Bp;b!==a&&(null!==a&&w(a,"function",O,"layerChanged"),this.Bp=a,this.h("layerChanged",b,a))});O.prototype.invalidateAdornments=O.prototype.rd=function(){var a=this.g;null!==a&&(yk(a),0!==(this.D&16384)!==!0&&(this.D|=16384,a.wd()))};function bk(a){0!==(a.D&16384)!==!1&&(a.updateAdornments(),a.D&=-16385,a=a.g,null!==a&&(a.ed=!0))}
G(O,{location:"location"},function(){return this.bg},function(a){var b=this.bg;if(!(b.A(a)||this instanceof W)){a=a.O();var c=this.g;this.bg=a;if(!1===Xk(this)){var d=this.xa,e=a.x-b.x,f=a.y-b.y,g=d.copy();d.k(g.x+e,g.y+f);fn(this,!1);!d.A(g)&&c&&this.h("position",g,d)}this.h("location",b,a)}});function fn(a,b){if(!1===cl(a)){var c=a.g;null!==c&&(c.nf.add(a),a instanceof V&&!c.V.Ua&&a.Je(),b||c.wd());ip(a,!0)}}
function jp(a){if(!1!==cl(a)){var b=a.position,c=a.location;c.w()&&b.w()||(kp(a,b,c),a.Zf());var b=a.xa,c=a.Bb,d=c.copy();c.wa();c.x=b.x;c.y=b.y;c.freeze();a.nv(d,c);ip(a,!1)}}H(O,{Jb:"locationObject"},function(){if(null===this.Jj){var a=this.py;""!==a?(a=this.Cd(a),this.Jj=null!==a?a:this):this.Jj=this instanceof Vg?this.type!==si&&null!==this.placeholder?this.placeholder:this:this}return this.Jj.visible?this.Jj:this});
G(O,{cG:"minLocation"},function(){return this.Sp},function(a){var b=this.Sp;b.A(a)||(this.Sp=a=a.O(),this.h("minLocation",b,a))});G(O,{YF:"maxLocation"},function(){return this.Lp},function(a){var b=this.Lp;b.A(a)||(this.Lp=a=a.O(),this.h("maxLocation",b,a))});G(O,{py:"locationObjectName"},function(){return this.Ip},function(a){var b=this.Ip;b!==a&&(this.Ip=a,this.Jj=null,$m(this),this.h("locationObjectName",b,a))});
G(O,{qe:"locationSpot"},function(){return this.Jp},function(a){var b=this.Jp;b.A(a)||(this.Jp=a=a.O(),$m(this),this.h("locationSpot",b,a))});O.prototype.move=O.prototype.move=function(a){this.position=a};O.prototype.moveTo=O.prototype.moveTo=function(a,b){var c=Wa(a,b);this.move(c);A(c)};
O.prototype.isVisible=O.prototype.qa=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.Ba;if(!(null===a||a.ud&&a.qa()))return!1;if(this instanceof V){a=this.Gl();if(null!==a&&!a.sc)return!1;a=this.vd;if(null!==a)return a.qa()}else if(this instanceof W){var b=!0,c=this.g;null!==c&&(b=c.Lc);c=this.M;if(null!==c){if(this.cc&&b&&!c.sc)return!1;if(c===a)return!0;c=c.findVisibleNode();if(null===c||c===a)return!1}c=this.R;if(null!==c){if(this.cc&&!b&&!c.sc)return!1;
if(c===a)return!0;b=c.findVisibleNode();if(null===b||b===a)return!1}}return!0};O.prototype.Zd=function(a){var b=this.g;a?(this.v(4),this.rd(),null!==b&&b.nf.add(this)):(this.v(8),this.nr());null!==b&&(b.Rb(),b.ba())};
O.prototype.findObject=O.prototype.Cd=function(a){if(this.name===a)return this;var b=this.Lj;null===b&&(this.Lj=b=new Sb);if(void 0!==b[a])return b[a];for(var c=this.la.l,d=c.length,e=0;e<d;e++){var f=c[e];if(f.name===a)return b[a]=f;if(f instanceof L)if(null===f.uh&&null===f.pf){if(f=f.Cd(a),null!==f)return b[a]=f}else if(Ol(f)&&(f=f.la.first(),null!==f&&f.name===a))return b[a]=f}return b[a]=null};
function lp(a,b,c,d){void 0===d&&(d=new z);c.Gd()&&(c=Dd);var e=b.sa;d.k(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.Ka(d);for(b=b.I;null!==b&&b!==a;)b.transform.Ka(d),b=b.I;a.Ij.Ka(d);d.offset(-a.nc.x,-a.nc.y);return d}O.prototype.ensureBounds=O.prototype.Ge=function(){jj(this,Infinity,Infinity);this.ac()};
function fk(a,b){var c;c=a.aE;var d;isNaN(a.vi)&&(a.vi=ro(a));d=a.vi;var e=2*d;if(!a.rk)return c.k(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,f=b.width,g=b.height,h=a.shadowBlur,k=a.MG,f=f+h,g=g+h;d-=h/2;e-=h/2;0<k.x?f+=k.x:(d+=k.x,f-=k.x);0<k.y?g+=k.y:(e+=k.y,g-=k.y);c.k(d-1,e-1,f+2,g+2);return c}r=O.prototype;
r.ac=function(){this.Zf();if(!1===Xk(this))jp(this);else{var a=bb();a.assign(this.Bb);Sm(this);this.Bb.wa();var b=ak(this);this.Kh(0,0,this.nc.width,this.nc.height);var c=this.position;kp(this,c,this.location);var d=this.Bb;d.x=c.x;d.y=c.y;d.freeze();this.Zf();this.nv(a,d);a.A(d)?this.Oe(b):!this.$c()||Q.q(a.width,d.width)&&Q.q(a.height,d.height)||0<=this.pA&&this.v(16);fb(a);ip(this,!1)}};
r.nv=function(a,b){Nm(this,!1);var c=this.g;if(null!==c){this.mk();var d=!1,e=a.w();if(!1===c.sh){var f=c.Xc,g=c.padding,h=f.x+g.left,k=f.y+g.top,l=f.width-2*g.right,f=f.height-2*g.bottom;e&&a.x>h&&a.y>k&&a.right<l&&a.bottom<f&&b.x>h&&b.y>k&&b.right<l&&b.bottom<f&&(d=!0)}0!==(this.D&65536)!==!0&&a.A(b)||wl(this,d,c);c.ba()}};
r.Vy=function(a,b){if(!a.w()||this instanceof W)return!1;if(this.g&&!(this instanceof Vg)){var c=this.g.hh;c.Gc&&Pj(c,this,"position",b.copy(),a.copy())}var c=this.bg,d=c.copy();c.k(c.x+(a.x-b.x),c.y+(a.y-b.y));this.xa=a;!1===cl(this)&&!1===Xk(this)&&(fn(this,!1),this.Zf(),jp(this));c.A(d)||this.h("location",d,c);return!0};r.pD=function(a,b){var c=this.bg;!1===cl(this)&&!1===Xk(this)?(this.bg.k(c.x+a-this.xa.x,c.y+b-this.xa.y),this.xa.k(a,b),fn(this,!0),this.Zf()):(c.k(NaN,NaN),this.xa.k(a,b))};
function kp(a,b,c){var d=NaN,e=NaN,f=Va(),g=a.qe,h=a.Jb;g.Gd()&&u("determineOffset: Part's locationSpot must be real: "+g.toString());var k=h.sa,d=0;h.Na&&(d=h.gg);f.ss(0,0,k.width+d,k.height+d,g);if(h!==a)for(h.Na&&f.offset(-d/2,-d/2),h.transform.Ka(f),g=h.I;null!==g&&g!==a;)g.transform.Ka(f),g=g.I;a.Ij.Ka(f);f.offset(-a.nc.x,-a.nc.y);g=a.g;c.w()?(h=b.x,k=b.y,d=c.x-f.x,e=c.y-f.y,b.k(d,e),c=!1,null!==g&&(d=g.hh,d.oi?c=!0:!d.Gc||a instanceof Vg||Pj(d,a,"position",new z(h,k),b),c||b.x===h&&b.y===k||
(d=g.Ma,g.Ma=!0,a.h("position",new z(h,k),b),g.Ma=d))):b.w()&&(d=b.x,e=b.y,b=c.copy(),c.k(d+f.x,e+f.y),c.A(b)||null===g||(d=g.Ma,g.Ma=!0,a.h("location",b,c),g.Ma=d));A(f)}function wl(a,b,c){Om(a,!1);a instanceof V&&lm(c,a);a.layer.bc||b||c.Rb();b=a.Bb;var d=c.Va;d.w()?(ak(a)?hd(b,d)||a.Oe(!1):b.If(d)&&a.Oe(!0),a.updateAdornments()):c.Ej=!0}r.qk=function(){return!0};
function dk(a,b){var c=a.Bb;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)&&a.qa()){var d=a.transform,e=a.I,f=a.bm;f.reset();null!==e&&(e.jf()?f.multiply(e.We):null!==e.I&&f.multiply(e.I.We));f.multiply(a.ld);null!==a.Nb&&(Um(a,b,a.Nb,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.Nb&&null===a.nb&&(Um(a,b,"rgba(0,0,0,0.4)",!0,!1),b.fillRect(c.x,c.y,c.width,c.height));null!==a.nb&&(d.Nr()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.sa,c=e.width,e=e.height,Um(a,b,a.nb,!0,!1),
b.fillRect(0,0,c+0,e+0),d.Nr()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}r.$c=function(){return!0};
G(O,{kc:"category"},function(){return this.ih},function(a){var b=this.ih;if(b!==a){w(a,"string",O,"category");var c=this.g,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof Vg)){var f=c.U.V;f.isEnabled&&!f.Ua&&(e=this.clone(),e.la.md(this.la))}this.ih=a;this.h("category",b,a);null===c||null===d||this instanceof Vg?(e=this.Yg,null!==e&&(a=e.gh,null!==a&&a.remove(b),e.Uj(this.kc,this))):(f=c.U,f.V.Ua||(this instanceof W?(f instanceof Xf?f.nD(d,a):f instanceof Yf&&f.JG(d,a),c=Yl(c,a),null!==
c&&(Yg(c),c=c.copy(),null!==c&&mp(this,c,b,a))):(null!==f&&f.yv(d,a),c=Vl(c,d,a),null!==c&&(Yg(c),c=c.copy(),null===c||c instanceof W||(c.location=this.location,mp(this,c,b,a)))),null!==e&&(b=this.clone(),b.la.md(this.la),this.h("self",e,b))))}});G(O,{self:"self"},function(){return this},function(a){mp(this,a,this.kc,a.kc)});var np=!1;
function mp(a,b,c,d){b.constructor===a.constructor||np||(np=!0,Da('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),Da("  Old class: "+xa(a)+", new class: "+xa(b)+", part: "+a.toString()));a.nr();var e=a.data;c=a.Ne;var f=a.Ia,g=a.kg,h=!0,k=!0,l=!1;if(a instanceof V)var m=a,h=m.Uh,k=m.sc,l=m.oo;b.Zg(a);b.cloneProtected(a);a.ih=d;a.H();a.ba();b=a.g;d=!0;null!==b&&(d=b.Ma,b.Ma=!0);a.Cg=e;null!==e&&a.rb();null!==b&&(b.Ma=d);e=a.Ne;e!==c&&(a.Gj=c,a.Ne=e);a instanceof
V&&(m=a,m.Uh=h,m.sc=k,m.oo=l,m.$c()&&m.v(64));a.Ia=f;a.kg=g}O.prototype.canCopy=function(){if(!this.QE)return!1;var a=this.layer;if(null===a)return!0;if(!a.Ui)return!1;a=a.g;return null===a?!0:a.Ui?!0:!1};O.prototype.canDelete=function(){if(!this.XE)return!1;var a=this.layer;if(null===a)return!0;if(!a.sl)return!1;a=a.g;return null===a?!0:a.sl?!0:!1};O.prototype.canEdit=function(){if(!this.WG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Cu)return!1;a=a.g;return null===a?!0:a.Cu?!0:!1};
O.prototype.canGroup=function(){if(!this.uF)return!1;var a=this.layer;if(null===a)return!0;if(!a.zu)return!1;a=a.g;return null===a?!0:a.zu?!0:!1};O.prototype.canMove=function(){if(!this.hG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Xj)return!1;a=a.g;return null===a?!0:a.Xj?!0:!1};O.prototype.canReshape=function(){if(!this.uG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Au)return!1;a=a.g;return null===a?!0:a.Au?!0:!1};
O.prototype.canResize=function(){if(!this.vG)return!1;var a=this.layer;if(null===a)return!0;if(!a.kr)return!1;a=a.g;return null===a?!0:a.kr?!0:!1};O.prototype.canRotate=function(){if(!this.yG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Bu)return!1;a=a.g;return null===a?!0:a.Bu?!0:!1};O.prototype.canSelect=function(){if(!this.yk)return!1;var a=this.layer;if(null===a)return!0;if(!a.Fe)return!1;a=a.g;return null===a?!0:a.Fe?!0:!1};
G(O,{QE:"copyable"},function(){return 0!==(this.D&1)},function(a){var b=0!==(this.D&1);b!==a&&(this.D^=1,this.h("copyable",b,a))});G(O,{XE:"deletable"},function(){return 0!==(this.D&2)},function(a){var b=0!==(this.D&2);b!==a&&(this.D^=2,this.h("deletable",b,a))});G(O,{WG:"textEditable"},function(){return 0!==(this.D&4)},function(a){var b=0!==(this.D&4);b!==a&&(this.D^=4,this.h("textEditable",b,a),this.rd())});
G(O,{uF:"groupable"},function(){return 0!==(this.D&8)},function(a){var b=0!==(this.D&8);b!==a&&(this.D^=8,this.h("groupable",b,a))});G(O,{hG:"movable"},function(){return 0!==(this.D&16)},function(a){var b=0!==(this.D&16);b!==a&&(this.D^=16,this.h("movable",b,a))});G(O,{FG:"selectionAdorned"},function(){return 0!==(this.D&32)},function(a){var b=0!==(this.D&32);b!==a&&(this.D^=32,this.h("selectionAdorned",b,a),this.rd())});
G(O,{jy:"isInDocumentBounds"},function(){return 0!==(this.D&64)},function(a){var b=0!==(this.D&64);if(b!==a){this.D^=64;var c=this.g;null!==c&&c.Rb();this.h("isInDocumentBounds",b,a)}});G(O,{xC:"isLayoutPositioned"},function(){return 0!==(this.D&128)},function(a){var b=0!==(this.D&128);b!==a&&(this.D^=128,this.h("isLayoutPositioned",b,a),this.v(a?4:8))});G(O,{yk:"selectable"},function(){return 0!==(this.D&256)},function(a){var b=0!==(this.D&256);b!==a&&(this.D^=256,this.h("selectable",b,a),this.rd())});
G(O,{uG:"reshapable"},function(){return 0!==(this.D&512)},function(a){var b=0!==(this.D&512);b!==a&&(this.D^=512,this.h("reshapable",b,a),this.rd())});G(O,{vG:"resizable"},function(){return 0!==(this.D&1024)},function(a){var b=0!==(this.D&1024);b!==a&&(this.D^=1024,this.h("resizable",b,a),this.rd())});G(O,{yG:"rotatable"},function(){return 0!==(this.D&2048)},function(a){var b=0!==(this.D&2048);b!==a&&(this.D^=2048,this.h("rotatable",b,a),this.rd())});
G(O,{Ia:"isSelected"},function(){return 0!==(this.D&4096)},function(a){var b=0!==(this.D&4096);if(b!==a){var c=this.g;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.ZF)){this.D^=4096;var d=!1;if(null!==c){d=c.Ma;c.Ma=!0;var e=c.selection;e.wa();a?e.add(this):e.remove(this);e.freeze()}this.h("isSelected",b,a);this.rd();a=this.HG;null!==a&&a(this);null!==c&&(c.wd(),c.Ma=d)}}});
G(O,{kg:"isHighlighted"},function(){return 0!==(this.D&524288)},function(a){var b=0!==(this.D&524288);if(b!==a){this.D^=524288;var c=this.g;null!==c&&(c=c.Yu,c.wa(),a?c.add(this):c.remove(this),c.freeze());this.h("isHighlighted",b,a);this.ba()}});G(O,{rk:"isShadowed"},function(){return 0!==(this.D&8192)},function(a){var b=0!==(this.D&8192);b!==a&&(this.D^=8192,this.h("isShadowed",b,a),this.ba())});function cl(a){return 0!==(a.D&32768)}function ip(a,b){a.D=b?a.D|32768:a.D&-32769}
function Om(a,b){a.D=b?a.D|65536:a.D&-65537}function ak(a){return 0!==(a.D&131072)}O.prototype.Oe=function(a){this.D=a?this.D|131072:this.D&-131073};function op(a,b){a.D=b?a.D|1048576:a.D&-1048577}G(O,{sC:"isAnimated"},function(){return 0!==(this.D&262144)},function(a){var b=0!==(this.D&262144);b!==a&&(this.D^=262144,this.h("isAnimated",b,a))});G(O,{Qy:"selectionObjectName"},function(){return this.Jq},function(a){var b=this.Jq;b!==a&&(this.Jq=a,this.il=null,this.h("selectionObjectName",b,a))});
G(O,{GG:"selectionAdornmentTemplate"},function(){return this.Hq},function(a){var b=this.Hq;b!==a&&(this instanceof W&&(a.type=si),this.Hq=a,this.h("selectionAdornmentTemplate",b,a))});H(O,{ps:"selectionObject"},function(){if(null===this.il){var a=this.Qy;null!==a&&""!==a?(a=this.Cd(a),this.il=null!==a?a:this):this instanceof W?(a=this.path,this.il=null!==a?a:this):this.il=this}return this.il});
G(O,{HG:"selectionChanged"},function(){return this.Iq},function(a){var b=this.Iq;b!==a&&(null!==a&&w(a,"function",O,"selectionChanged"),this.Iq=a,this.h("selectionChanged",b,a))});G(O,{aD:"resizeAdornmentTemplate"},function(){return this.vq},function(a){var b=this.vq;b!==a&&(this.vq=a,this.h("resizeAdornmentTemplate",b,a))});G(O,{cD:"resizeObjectName"},function(){return this.xq},function(a){var b=this.xq;b!==a&&(this.xq=a,this.Zm=null,this.h("resizeObjectName",b,a))});
H(O,{bD:"resizeObject"},function(){if(null===this.Zm){var a=this.cD;null!==a&&""!==a?(a=this.Cd(a),this.Zm=null!==a?a:this):this.Zm=this}return this.Zm});G(O,{wG:"resizeCellSize"},function(){return this.wq},function(a){var b=this.wq;b.A(a)||(this.wq=a=a.O(),this.h("resizeCellSize",b,a))});G(O,{zG:"rotateAdornmentTemplate"},function(){return this.yq},function(a){var b=this.yq;b!==a&&(this.yq=a,this.h("rotateAdornmentTemplate",b,a))});
G(O,{AG:"rotateObjectName"},function(){return this.zq},function(a){var b=this.zq;b!==a&&(this.zq=a,this.$m=null,this.h("rotateObjectName",b,a))});H(O,{eD:"rotateObject"},function(){if(null===this.$m){var a=this.AG;null!==a&&""!==a?(a=this.Cd(a),this.$m=null!==a?a:this):this.$m=this}return this.$m});G(O,{text:"text"},function(){return this.Bd},function(a){var b=this.Bd;b!==a&&(this.Bd=a,this.h("text",b,a))});
G(O,{Ba:"containingGroup"},function(){return this.uj},function(a){if(this.$c()){var b=this.uj;if(b!==a){null===a||this!==a&&!a.bh(this)||(this===a&&u("Cannot make a Group a member of itself: "+this.toString()),u("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.v(Al);var c=this.g;null!==b?pp(b,this):this instanceof Wg&&null!==c&&c.Sj.remove(this);this.uj=a;null!==a?qp(a,this):this instanceof Wg&&null!==c&&c.Sj.add(this);this.v(sl);if(null!==
c){var d=this.data,e=c.U;null!==d&&e instanceof Xf&&e.Av(d,e.$a(null!==a?a.data:null))}d=this.OB;null!==d&&(e=!0,null!==c&&(e=c.ya,c.ya=!0),d(this,b,a),null!==c&&(c.ya=e));if(this instanceof Wg)for(c=new Xb(O),Ug(c,this,!0,0,!0),c=c.i;c.next();)if(d=c.value,d instanceof V)for(d=d.Hd;d.next();)Tl(d.value);if(this instanceof V)for(d=this.Hd;d.next();)Tl(d.value);this.h("containingGroup",b,a);null!==a&&a.Ev()}}else u("cannot set the Part.containingGroup of a Link or Adornment")});r=O.prototype;
r.mk=function(){var a=this.Ba;null!==a&&(a.H(),null!==a.tb&&a.tb.H(),a.Je())};r.ba=function(){var a=this.g;null!==a&&!Xk(this)&&!cl(this)&&this.qa()&&this.Bb.w()&&a.ba(fk(this,this.Bb))};r.Ir=function(a){var b=this.uj;null===b||a||qp(b,this)};r.Jr=function(a){var b=this.uj;null===b||a||pp(b,this)};r.El=function(){var a=this.data;if(null!==a){var b=this.g;null!==b&&(b=b.U,null!==b&&b.My(a))}};
G(O,{OB:"containingGroupChanged"},function(){return this.Jo},function(a){var b=this.Jo;b!==a&&(null!==a&&w(a,"function",O,"containingGroupChanged"),this.Jo=a,this.h("containingGroupChanged",b,a))});O.prototype.findSubGraphLevel=function(){return rp(this,this)};function rp(a,b){var c=b.Ba;return null!==c?1+rp(a,c):b instanceof V&&(c=b.vd,null!==c)?rp(a,c):0}O.prototype.findTopLevelPart=function(){return sp(this,this)};
function sp(a,b){var c=b.Ba;return null!==c?sp(a,c):b instanceof V&&(c=b.vd,null!==c)?sp(a,c):b}H(O,{Kn:"isTopLevel"},function(){return null!==this.Ba||this instanceof V&&this.Ke?!1:!0});O.prototype.isMemberOf=O.prototype.bh=function(a){return a instanceof Wg?tp(this,this,a):!1};function tp(a,b,c){if(b===c||null===c)return!1;var d=b.Ba;return null===d||d!==c&&!tp(a,d,c)?b instanceof V&&(b=b.vd,null!==b)?tp(a,b,c):!1:!0}
O.prototype.findCommonContainingGroup=O.prototype.fF=function(a){if(null===a)return null;if(this===a)return this instanceof Wg?this:null;for(var b=this;null!==b;)b instanceof Wg&&op(b,!0),b=b.Ba;for(var c=null,b=a;null!==b;){if(0!==(b.D&1048576)){c=b;break}b=b.Ba}for(b=this;null!==b;)b instanceof Wg&&op(b,!1),b=b.Ba;return c};G(O,{QF:"layoutConditions"},function(){return this.Cp},function(a){var b=this.Cp;b!==a&&(this.Cp=a,this.h("layoutConditions",b,a))});
O.prototype.canLayout=function(){if(!this.xC||!this.qa())return!1;var a=this.layer;return null!==a&&a.bc||this instanceof V&&this.Ke?!1:!0};O.prototype.invalidateLayout=O.prototype.v=function(a){void 0===a&&(a=16777215);var b;this.xC&&0!==(a&this.QF)?(b=this.layer,null!==b&&b.bc||this instanceof V&&this.Ke?b=!1:(b=this.g,b=null!==b&&b.V.Ua?!1:!0)):b=!1;if(b)if(b=this.uj,null!==b){var c=b.ub;null!==c?c.v():b.v(a)}else a=this.g,null!==a&&(c=a.ub,null!==c&&c.v())};
function xl(a){if(!a.qa())return!1;a=a.layer;return null!==a&&a.bc?!1:!0}G(O,{XB:"dragComputation"},function(){return this.To},function(a){var b=this.To;b!==a&&(null!==a&&w(a,"function",O,"dragComputation"),this.To=a,this.h("dragComputation",b,a))});G(O,{MG:"shadowOffset"},function(){return this.ll},function(a){var b=this.ll;b.A(a)||(this.ll=a=a.O(),this.ba(),this.h("shadowOffset",b,a))});
G(O,{shadowColor:"shadowColor"},function(){return this.kl},function(a){var b=this.kl;b!==a&&(this.kl=a,this.ba(),this.h("shadowColor",b,a))});G(O,{shadowBlur:"shadowBlur"},function(){return this.jl},function(a){var b=this.jl;b!==a&&(this.jl=a,this.ba(),this.h("shadowBlur",b,a))});function Vg(a){0===arguments.length?O.call(this,Wi):O.call(this,a);this.Ne="Adornment";this.lb=null;this.D&=-257;this.bg=new z(NaN,NaN);this.fi=new N(D);this.tb=null}yb(Vg,O);vb("Adornment",Vg);
Vg.prototype.toString=function(){var a=this.Yg;return"Adornment("+this.kc+")"+(null!==a?a.toString():"")};Vg.prototype.updateRelationshipsFromData=function(){};Vg.prototype.Xr=function(){var a=this.Xb.J,b=this.Xb;if(a instanceof W&&b instanceof X){var c=a.path,b=c.za;a.Xr();for(var b=c.za,a=this.la.l,c=a.length,d=0;d<c;d++){var e=a[d];e.Jf&&e instanceof X&&(e.za=b)}}};H(Vg,{placeholder:"placeholder"},function(){return this.tb});
G(Vg,{Xb:"adornedObject"},function(){return this.lb},function(a){var b=this.Yg,c=null;null!==a&&(c=a.J);null===b||null!==a&&b===c||b.xk(this.kc);this.lb=a;null!==c&&c.Uj(this.kc,this)});H(Vg,{Yg:"adornedPart"},function(){var a=this.lb;return null!==a?a.J:null});Vg.prototype.qk=function(){var a=this.lb;if(null===a)return!0;a=a.J;return null===a||!Xk(a)};Vg.prototype.$c=function(){return!1};H(Vg,{Ba:"containingGroup"},function(){return null});
Vg.prototype.Ql=function(a,b,c,d,e,f,g){if(a===Qf&&"elements"===b)if(e instanceof Qi){var h=e;null===this.tb?this.tb=h:this.tb!==h&&u("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof L&&(h=e.vr(function(a){return a instanceof Qi}),h instanceof Qi&&(null===this.tb?this.tb=h:this.tb!==h&&u("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===Rf&&"elements"===b&&null!==this.tb&&(d===this.tb?this.tb=null:d instanceof L&&this.tb.pk(d)&&
(this.tb=null));O.prototype.Ql.call(this,a,b,c,d,e,f,g)};Vg.prototype.updateAdornments=function(){};Vg.prototype.El=function(){};function V(a){0===arguments.length?O.call(this,Wi):O.call(this,a);this.Kb=new N(W);this.Om=this.Hj=this.Fp=this.Ep=null;this.tp=!0;this.cr=!1;this.Yq=null;this.Co=this.vp=!0;this.Do=Q.TD;this.jd=this.zg=null;this.oq=up;this.Qi=!1}yb(V,O);vb("Node",V);
V.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.Ep=this.Ep;a.Fp=this.Fp;a.Hj=this.Hj;a.tp=this.tp;a.cr=this.cr;a.Yq=this.Yq;a.vp=this.vp;a.Co=this.Co;a.Do=this.Do.O();a.oq=this.oq};V.prototype.Zg=function(a){O.prototype.Zg.call(this,a);a.Je();a.zg=this.zg;a.jd=null};var vp;V.DirectionDefault=vp=I(V,"DirectionDefault",0);V.DirectionAbsolute=I(V,"DirectionAbsolute",1);var wp;V.DirectionRotatedNode=wp=I(V,"DirectionRotatedNode",2);var Fm;
V.DirectionRotatedNodeOrthogonal=Fm=I(V,"DirectionRotatedNodeOrthogonal",3);V.SpreadingNone=I(V,"SpreadingNone",10);var up;V.SpreadingEvenly=up=I(V,"SpreadingEvenly",11);var xp;V.SpreadingPacked=xp=I(V,"SpreadingPacked",12);function yp(a,b){null!==b&&(null===a.zg&&(a.zg=new Xb(zp)),a.zg.add(b))}
V.prototype.Ql=function(a,b,c,d,e,f,g){a===Qf&&"elements"===b?this.jd=null:a===Rf&&"elements"===b&&(null===this.g?this.jd=null:d instanceof U&&no(this,d,function(a,b){gn(a,b,!0)}));O.prototype.Ql.call(this,a,b,c,d,e,f,g)};V.prototype.invalidateConnectedLinks=V.prototype.Je=function(a){void 0===a&&(a=null);for(var b=this.Hd;b.next();){var c=b.value;null!==a&&a.contains(c)||(Ap(this,c.Jc),Ap(this,c.yd),c.zb())}};function Ap(a,b){if(null!==b){b.nq=null;var c=a.Ba;null===c||c.ud||Ap(c,c.fk(""))}}
V.prototype.qk=function(){return!0};G(V,{pG:"portSpreading"},function(){return this.oq},function(a){var b=this.oq;b!==a&&(this.oq=a,this.h("portSpreading",b,a),a=this.g,null!==a&&a.V.Ua||this.Je())});G(V,{GB:"avoidable"},function(){return this.Co},function(a){var b=this.Co;if(b!==a){this.Co=a;var c=this.g;null!==c&&lm(c,this);this.h("avoidable",b,a)}});
G(V,{AE:"avoidableMargin"},function(){return this.Do},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,V,"avoidableMargin");var b=this.Do;if(!b.A(a)){this.Do=a=a.O();var c=this.g;null!==c&&lm(c,this);this.h("avoidableMargin",b,a)}});V.prototype.canAvoid=function(){return this.GB&&!this.Ke};V.prototype.getAvoidableRect=function(a){a.set(this.Q);a.wu(this.AE);return a};V.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.qa();)a=a.Ba;return a};
V.prototype.Zd=function(a){O.prototype.Zd.call(this,a);for(var b=this.Hd;b.next();)b.value.Zd(a)};H(V,{Hd:"linksConnected"},function(){return this.Kb.i});V.prototype.findLinksConnected=V.prototype.aC=function(a){void 0===a&&(a=null);if(null===a)return this.Kb.i;var b=new Ec(this.Kb),c=this;b.Pl=function(b){return b.M===c&&b.Gf===a||b.R===c&&b.yg===a};return b};
V.prototype.findLinksOutOf=V.prototype.Tu=function(a){void 0===a&&(a=null);var b=new Ec(this.Kb),c=this;b.Pl=function(b){return b.M!==c?!1:null===a?!0:b.Gf===a};return b};V.prototype.findLinksInto=V.prototype.Ff=function(a){void 0===a&&(a=null);var b=new Ec(this.Kb),c=this;b.Pl=function(b){return b.R!==c?!1:null===a?!0:b.yg===a};return b};
V.prototype.findNodesConnected=V.prototype.bC=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Kb.i;d.next();){var e=d.value;if(e.M===this){if(null===a||e.Gf===a)e=e.R,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e}else e.R!==this||null!==a&&e.yg!==a||(e=e.M,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findNodesOutOf=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Kb.i;d.next();){var e=d.value;e.M!==this||null!==a&&e.Gf!==a||(e=e.R,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findNodesInto=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Kb.i;d.next();){var e=d.value;e.R!==this||null!==a&&e.yg!==a||(e=e.M,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Ec(this.Kb),e=this;d.Pl=function(d){return(d.M!==e||d.R!==a||null!==b&&d.Gf!==b||null!==c&&d.yg!==c)&&(d.M!==a||d.R!==e||null!==c&&d.Gf!==c||null!==b&&d.yg!==b)?!1:!0};return d};V.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Ec(this.Kb),e=this;d.Pl=function(d){return d.M!==e||d.R!==a||null!==b&&d.Gf!==b||null!==c&&d.yg===c?!1:!0};return d};
G(V,{SF:"linkConnected"},function(){return this.Ep},function(a){var b=this.Ep;b!==a&&(null!==a&&w(a,"function",V,"linkConnected"),this.Ep=a,this.h("linkConnected",b,a))});G(V,{TF:"linkDisconnected"},function(){return this.Fp},function(a){var b=this.Fp;b!==a&&(null!==a&&w(a,"function",V,"linkDisconnected"),this.Fp=a,this.h("linkDisconnected",b,a))});
G(V,{kv:"linkValidation"},function(){return this.Hj},function(a){var b=this.Hj;b!==a&&(null!==a&&w(a,"function",V,"linkValidation"),this.Hj=a,this.h("linkValidation",b,a))});
function Bp(a,b,c){Ap(a,c);if(!a.Kb.contains(b)){a.Kb.add(b);var d=a.SF;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.ya,f.ya=!0);d(a,b,c);null!==f&&(f.ya=e)}b.cc&&(c=b.M,b=b.R,null!==c&&null!==b&&c!==b&&(d=!0,f=a.g,null!==f&&(d=f.Lc),a=d?b:c,e=d?c:b,a.Qi||(a.Qi=e),!e.Uh||null!==f&&f.V.Ua||(d?c===e&&(e.Uh=!1):b===e&&(e.Uh=!1))))}}
function Cp(a,b,c){Ap(a,c);if(a.Kb.remove(b)){var d=a.TF,e=a.g;if(null!==d){var f=!0;null!==e&&(f=e.ya,e.ya=!0);d(a,b,c);null!==e&&(e.ya=f)}b.cc&&(c=!0,null!==e&&(c=e.Lc),a=c?b.R:b.M,b=c?b.M:b.R,null!==a&&(a.Qi=!1),null===b||b.Uh||(0===b.Kb.count?(b.Qi=null,null!==e&&e.V.Ua||(b.Uh=!0)):em(b)))}}
function em(a){a.Qi=!1;if(0!==a.Kb.count){var b=!0,c=a.g;if(null===c||!c.V.Ua){null!==c&&(b=c.Lc);for(c=a.Kb.i;c.next();){var d=c.value;if(d.cc)if(b){if(d.M===a){a.Uh=!1;return}}else if(d.R===a){a.Uh=!1;return}}a.Uh=!0}}}
V.prototype.updateRelationshipsFromData=function(){O.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Yf){var d=c.Jl(a),b=b.pe(d),e=this.Gl();b!==e&&(b=null!==e?c.$a(e.data):void 0,e=c.Zn,"function"===typeof e?e(a,b):a[e]=b,c.wg(a,d))}}}};V.prototype.Ir=function(a){O.prototype.Ir.call(this,a);a||em(this);var b=this.Om;null===b||a||Dp(b,this)};
V.prototype.Jr=function(a){O.prototype.Jr.call(this,a);var b=this.Om;null===b||a||null===b.Od||(b.Od.remove(this),b.H())};V.prototype.El=function(){if(0<this.Kb.count){var a=this.g;if(null===a)return;for(var b=this.Kb.copy().i;b.next();)a.remove(b.value)}this.vd=null;O.prototype.El.call(this)};H(V,{Ke:"isLinkLabel"},function(){return null!==this.Om});
G(V,{vd:"labeledLink"},function(){return this.Om},function(a){var b=this.Om;if(b!==a){var c=this.g,d=this.data;if(null!==b&&(null!==b.Od&&(b.Od.remove(this),b.H()),null!==c&&null!==d&&!c.V.Ua)){var e=b.data,f=c.U;if(null!==e&&f instanceof Xf){var g=f.$a(d);void 0!==g&&f.WC(e,g)}}this.Om=a;null!==a&&(Dp(a,this),null===c||null===d||c.V.Ua||(e=a.data,f=c.U,null!==e&&f instanceof Xf&&(g=f.$a(d),void 0!==g&&f.Ax(e,g))));$m(this);this.h("labeledLink",b,a)}});
V.prototype.findPort=V.prototype.fk=function(a){if(null===this.jd){if(""===a&&!1===this.Jg)return this;hn(this)}var b=this.jd.ha(a);return null!==b||""!==a&&(b=this.jd.ha(""),null!==b)?b:this};H(V,{port:"port"},function(){return this.fk("")});H(V,{ports:"ports"},function(){null===this.jd&&hn(this);return this.jd.AC});function hn(a){null===a.jd?a.jd=new Fb("string",U):a.jd.clear();no(a,a,function(a,c){var d=c.cd;null!==d&&a.jd.add(d,c)});0===a.jd.count&&a.jd.add("",a)}
function gn(a,b,c){var d=b.cd;if(null!==d&&(null!==a.jd&&a.jd.remove(d),b=a.g,null!==b&&c)){c=null;for(d=a.aC(d);d.next();)a=d.value,null===c&&(c=ob()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);pb(c)}}}
V.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.g;null!==c&&(b=c.Lc);c=this;if(b)for(;c!==a;){for(var b=null,d=c.Kb.i;d.next();){var e=d.value;if(e.cc&&(b=e.M,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.Kb.i;d.next()&&(e=d.value,!e.cc||(b=e.R,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
V.prototype.findTreeRoot=function(){var a=!0,b=this.g;null!==b&&(a=b.Lc);b=this;if(a)for(;;){for(var a=null,c=b.Kb.i;c.next();){var d=c.value;if(d.cc&&(a=d.M,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.Kb.i;c.next()&&(d=c.value,!d.cc||(a=d.R,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
V.prototype.findCommonTreeParent=function(a){if(null===a)return null;if(this===a)return this;for(var b=this;null!==b;)op(b,!0),b=b.Gl();for(var c=null,b=a;null!==b;){if(0!==(b.D&1048576)){c=b;break}b=b.Gl()}for(b=this;null!==b;)op(b,!1),b=b.Gl();return c};V.prototype.findTreeParentLink=V.prototype.Ar=function(){var a=!0,b=this.g;null!==b&&(a=b.Lc);b=this.Kb.i;if(a)for(;b.next();){if(a=b.value,a.cc&&a.M!==this)return a}else for(;b.next();)if(a=b.value,a.cc&&a.R!==this)return a;return null};
V.prototype.findTreeParentNode=V.prototype.Gl=function(){var a=this.Qi;if(null===a)return null;if(a instanceof V)return a;var b=!0,a=this.g;null!==a&&(b=a.Lc);a=this.Kb.i;if(b)for(;a.next();){if(b=a.value,b.cc&&(b=b.M,b!==this))return this.Qi=b}else for(;a.next();)if(b=a.value,b.cc&&(b=b.R,b!==this))return this.Qi=b;return this.Qi=null};V.prototype.findTreeLevel=function(){return Ep(this,this)};function Ep(a,b){var c=b.Gl();return null===c?0:1+Ep(a,c)}
V.prototype.findTreeChildrenLinks=V.prototype.Vu=function(){var a=!0,b=this.g;null!==b&&(a=b.Lc);if(a){var a=new Ec(this.Kb),c=this;a.Pl=function(a){return a.cc&&a.M===c?!0:!1}}else a=new Ec(this.Kb),c=this,a.Pl=function(a){return a.cc&&a.R===c?!0:!1};return a};
V.prototype.findTreeChildrenNodes=V.prototype.dC=function(){var a=!0,b=this.g;null!==b&&(a=b.Lc);var c=b=null,d=this.Kb.i;if(a)for(;d.next();)a=d.value,a.cc&&a.M===this&&(a=a.R,null!==b?b.add(a):null!==c&&c!==a?(b=new N(V),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.cc&&a.R===this&&(a=a.M,null!==b?b.add(a):null!==c&&c!==a?(b=new N(V),b.add(c),b.add(a)):c=a);return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);w(a,"number",V,"collapseTree:level");var b=new Xb(O);Ug(b,this,!1,a,!0);return b};V.prototype.collapseTree=V.prototype.collapseTree=function(a){void 0===a&&(a=1);ua(a,V,"collapseTree:level");1>a&&(a=1);var b=this.g;if(null!==b&&!b.Fd){var c=b.qb;0!==b.V.ce&&c.vk();b.Fd=!0;var c=b.Lc,d=new Xb(V);d.add(this);Fp(this,d,c,a,this.sc);b.Fd=!1}};
function Fp(a,b,c,d,e){if(1<d)for(e=c?a.Tu():a.Ff();e.next();){var f=e.value;f.cc&&(f=f.Vx(a),null===f||f===a||b.contains(f)||(b.add(f),Fp(f,b,c,d-1,f.sc)))}else Gp(a,b,c,e)}function Gp(a,b,c,d){for(var e=c?a.Tu():a.Ff();e.next();){var f=e.value;f.cc&&(f=f.Vx(a),null===f||f===a||b.contains(f)||(b.add(f),d&&(f.mk(),f.Zd(!1)),f.sc&&(f.oo=f.sc,Gp(f,b,c,f.oo))))}a.sc=!1}
V.prototype.expandTree=V.prototype.expandTree=function(a){void 0===a&&(a=2);ua(a,V,"expandTree:level");2>a&&(a=2);var b=this.g;if(null!==b&&!b.Fd){var c=b.qb;0!==b.V.ce&&c.vk();b.Fd=!0;var d=b.Lc,e=new Xb(V);e.add(this);Hp(this,e,d,a,this.sc,c,this);b.Fd=!1}};function Hp(a,b,c,d,e,f,g){for(var h=c?a.Tu():a.Ff();h.next();){var k=h.value;k.cc&&(e||k.yf||k.zb(),k=k.Vx(a),null!==k&&k!==a&&!b.contains(k)&&(b.add(k),e||(k.Zd(!0),k.mk(),Yj(f,k,g)),2<d||k.oo))&&(k.oo=!1,Hp(k,b,c,d-1,k.sc,f,g))}a.sc=!0}
G(V,{sc:"isTreeExpanded"},function(){return this.tp},function(a){var b=this.tp;if(b!==a){this.tp=a;var c=this.g;this.h("isTreeExpanded",b,a);b=this.aH;if(null!==b){var d=!0;null!==c&&(d=c.ya,c.ya=!0);b(this);null!==c&&(c.ya=d)}a?null===c||c.Fd||(0!==c.V.ce&&c.qb.vk(),c.Fd=!0,a=c.Lc,b=new Xb(V),b.add(this),Hp(this,b,a,2,!1,c.qb,this),c.Fd=!1):null===c||c.Fd||(0!==c.V.ce&&c.qb.vk(),c.Fd=!0,a=c.Lc,b=new Xb(V),b.add(this),Gp(this,b,a,!0),c.Fd=!1)}});
G(V,{oo:"wasTreeExpanded"},function(){return this.cr},function(a){var b=this.cr;b!==a&&(this.cr=a,this.h("wasTreeExpanded",b,a))});G(V,{aH:"treeExpandedChanged"},function(){return this.Yq},function(a){var b=this.Yq;b!==a&&(null!==a&&w(a,"function",V,"treeExpandedChanged"),this.Yq=a,this.h("treeExpandedChanged",b,a))});G(V,{Uh:"isTreeLeaf"},function(){return this.vp},function(a){var b=this.vp;b!==a&&(this.vp=a,this.h("isTreeLeaf",b,a))});
function W(){O.call(this,si);this.mf=null;this.Ig="";this.xf=this.ap=null;this.Wg="";this.Xq=null;this.uq=this.tq=this.sq=!1;this.wp=!0;this.xo=Ei;this.Ko=0;this.No=Ei;this.Oo=NaN;this.el=tn;this.Oq=.5;this.Od=null;this.oc=(new N(z)).freeze();this.an=this.Pd=null;this.yf=!1;this.ax=null;this.mx=!1;this.fm=this.rh=this.za=null;this.ze=0;this.rm=this.nm=null;this.fi=new N(D);this.qx=new z;this.eB=this.cB=null;this.Zv=!1;this.G=null}yb(W,O);vb("Link",W);
W.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.Ig=this.Ig;a.ap=this.ap;a.Wg=this.Wg;a.Xq=this.Xq;a.sq=this.sq;a.tq=this.tq;a.uq=this.uq;a.wp=this.wp;a.xo=this.xo;a.Ko=this.Ko;a.No=this.No;a.Oo=this.Oo;a.el=this.el;a.Oq=this.Oq;a.G=null!==this.G?this.G.copy():null};W.prototype.Zg=function(a){O.prototype.Zg.call(this,a);this.Ig=a.Ig;this.Wg=a.Wg;a.Pd=null;a.zb();a.fm=this.fm;a.ze=this.ze};var tn;W.Normal=tn=I(W,"Normal",1);W.Orthogonal=I(W,"Orthogonal",2);
W.AvoidsNodes=I(W,"AvoidsNodes",6);var Ip;W.AvoidsNodesStraight=Ip=I(W,"AvoidsNodesStraight",7);var Ei;W.None=Ei=I(W,"None",0);var Li;W.Bezier=Li=I(W,"Bezier",9);var Di;W.JumpGap=Di=I(W,"JumpGap",10);var ti;W.JumpOver=ti=I(W,"JumpOver",11);var qn;W.End=qn=I(W,"End",17);var rn;W.Scale=rn=I(W,"Scale",18);var sn;W.Stretch=sn=I(W,"Stretch",19);var Do;W.OrientAlong=Do=I(W,"OrientAlong",21);var Jp;W.OrientPlus90=Jp=I(W,"OrientPlus90",22);var Kp;W.OrientMinus90=Kp=I(W,"OrientMinus90",23);var Lp;
W.OrientOpposite=Lp=I(W,"OrientOpposite",24);var Mp;W.OrientUpright=Mp=I(W,"OrientUpright",25);var Np;W.OrientPlus90Upright=Np=I(W,"OrientPlus90Upright",26);var Op;W.OrientMinus90Upright=Op=I(W,"OrientMinus90Upright",27);var Pp;W.OrientUpright45=Pp=I(W,"OrientUpright45",28);W.prototype.Wd=function(){this.G=new Em};
W.prototype.qk=function(){var a=this.M;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(Xk(a)||cl(a))return!1}a=this.R;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Xk(a)||cl(a))?!1:!0};W.prototype.Vy=function(){return!1};W.prototype.$c=function(){return!1};
W.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case Ei:a=0;break;case Do:a=c;break;case Jp:a=c+90;break;case Kp:a=c-90;break;case Lp:a=c+180;break;case Mp:a=Q.cs(c);90<a&&270>a&&(a-=180);break;case Np:a=Q.cs(c+90);90<a&&270>a&&(a-=180);break;case Op:a=Q.cs(c-90);90<a&&270>a&&(a-=180);break;case Pp:a=Q.cs(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return Q.cs(a)};
G(W,{M:"fromNode"},function(){return this.mf},function(a){var b=this.mf;if(b!==a){var c=this.Jc;null!==b&&(this.xf!==b&&Cp(b,this,c),Qp(this),this.v(Al));this.mf=a;this.rh=null;this.zb();var d=this.g;if(null!==d){var e=this.data,f=d.U;if(null!==e)if(f instanceof Xf){var g=null!==a?a.data:null;f.zv(e,f.$a(g))}else f instanceof Yf&&(g=null!==a?a.data:null,d.Lc?f.wg(e,f.$a(g)):(null!==b&&f.wg(b.data,void 0),f.wg(g,f.$a(null!==this.xf?this.xf.data:null))))}e=this.Jc;f=this.gC;null!==f&&(g=!0,null!==d&&
(g=d.ya,d.ya=!0),f(this,c,e),null!==d&&(d.ya=g));null!==a&&(this.xf!==a&&Bp(a,this,e),Rp(this),this.v(sl));this.h("fromNode",b,a);Tl(this)}});
G(W,{Gf:"fromPortId"},function(){return this.Ig},function(a){var b=this.Ig;if(b!==a){var c=this.Jc;null!==c&&Ap(this.M,c);Qp(this);this.Ig=a;var d=this.Jc;null!==d&&Ap(this.M,d);var e=this.g;if(null!==e){var f=this.data,g=e.U;null!==f&&g instanceof Xf&&g.Sy(f,a)}c!==d&&(this.rh=null,this.zb(),f=this.gC,null!==f&&(g=!0,null!==e&&(g=e.ya,e.ya=!0),f(this,c,d),null!==e&&(e.ya=g)));Rp(this);this.h("fromPortId",b,a)}});H(W,{Jc:"fromPort"},function(){var a=this.mf;return null===a?null:a.fk(this.Ig)});
G(W,{gC:"fromPortChanged"},function(){return this.ap},function(a){var b=this.ap;b!==a&&(null!==a&&w(a,"function",W,"fromPortChanged"),this.ap=a,this.h("fromPortChanged",b,a))});
G(W,{R:"toNode"},function(){return this.xf},function(a){var b=this.xf;if(b!==a){var c=this.yd;null!==b&&(this.mf!==b&&Cp(b,this,c),Qp(this),this.v(Al));this.xf=a;this.rh=null;this.zb();var d=this.g;if(null!==d){var e=this.data,f=d.U;if(null!==e)if(f instanceof Xf){var g=null!==a?a.data:null;f.Bv(e,f.$a(g))}else f instanceof Yf&&(g=null!==a?a.data:null,d.Lc?(null!==b&&f.wg(b.data,void 0),f.wg(g,f.$a(null!==this.mf?this.mf.data:null))):f.wg(e,f.$a(g)))}e=this.yd;f=this.yD;null!==f&&(g=!0,null!==d&&
(g=d.ya,d.ya=!0),f(this,c,e),null!==d&&(d.ya=g));null!==a&&(this.mf!==a&&Bp(a,this,e),Rp(this),this.v(sl));this.h("toNode",b,a);Tl(this)}});
G(W,{yg:"toPortId"},function(){return this.Wg},function(a){var b=this.Wg;if(b!==a){var c=this.yd;null!==c&&Ap(this.R,c);Qp(this);this.Wg=a;var d=this.yd;null!==d&&Ap(this.R,d);var e=this.g;if(null!==e){var f=this.data,g=e.U;null!==f&&g instanceof Xf&&g.Wy(f,a)}c!==d&&(this.rh=null,this.zb(),f=this.yD,null!==f&&(g=!0,null!==e&&(g=e.ya,e.ya=!0),f(this,c,d),null!==e&&(e.ya=g)));Rp(this);this.h("toPortId",b,a)}});H(W,{yd:"toPort"},function(){var a=this.xf;return null===a?null:a.fk(this.Wg)});
G(W,{yD:"toPortChanged"},function(){return this.Xq},function(a){var b=this.Xq;b!==a&&(null!==a&&w(a,"function",W,"toPortChanged"),this.Xq=a,this.h("toPortChanged",b,a))});G(W,{Za:"fromSpot"},function(){return null!==this.G?this.G.ni:ee},function(a){null===this.G&&this.Wd();var b=this.G.ni;b.A(a)||(a=a.O(),this.G.ni=a,this.h("fromSpot",b,a),this.zb())});
G(W,{gk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.li:NaN},function(a){null===this.G&&this.Wd();var b=this.G.li;b!==a&&(0>a&&za(a,">= 0",W,"fromEndSegmentLength"),this.G.li=a,this.h("fromEndSegmentLength",b,a),this.zb())});G(W,{Er:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.ki:vp},function(a){null===this.G&&this.Wd();var b=this.G.ki;b!==a&&(this.G.ki=a,this.h("fromEndSegmentDirection",b,a),this.zb())});
G(W,{Fr:"fromShortLength"},function(){return null!==this.G?this.G.mi:NaN},function(a){null===this.G&&this.Wd();var b=this.G.mi;b!==a&&(this.G.mi=a,this.h("fromShortLength",b,a),this.zb())});G(W,{ab:"toSpot"},function(){return null!==this.G?this.G.Pi:ee},function(a){null===this.G&&this.Wd();var b=this.G.Pi;b.A(a)||(a=a.O(),this.G.Pi=a,this.h("toSpot",b,a),this.zb())});
G(W,{Dk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Ni:NaN},function(a){null===this.G&&this.Wd();var b=this.G.Ni;b!==a&&(0>a&&za(a,">= 0",W,"toEndSegmentLength"),this.G.Ni=a,this.h("toEndSegmentLength",b,a),this.zb())});G(W,{xs:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Mi:vp},function(a){null===this.G&&this.Wd();var b=this.G.Mi;b!==a&&(this.G.Mi=a,this.h("toEndSegmentDirection",b,a),this.zb())});
G(W,{zs:"toShortLength"},function(){return null!==this.G?this.G.Oi:NaN},function(a){null===this.G&&this.Wd();var b=this.G.Oi;b!==a&&(this.G.Oi=a,this.h("toShortLength",b,a),this.zb())});function Tl(a){var b=a.M,c=a.R;null!==b?null!==c?Sp(a,b.fF(c)):Sp(a,null):Sp(a,null)}function Sp(a,b){var c=a.uj;if(c!==b){null!==c&&pp(c,a);a.uj=b;null!==b&&qp(b,a);var d=a.OB;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.ya,f.ya=!0);d(a,c,b);null!==f&&(f.ya=e)}!a.yf||a.cB!==c&&a.eB!==c||a.zb()}}
W.prototype.mk=function(){var a=this.Ba;null!==a&&this.M!==a&&this.R!==a&&O.prototype.mk.call(this)};W.prototype.getOtherNode=W.prototype.Vx=function(a){var b=this.M;return a===b?this.R:b};W.prototype.getOtherPort=function(a){var b=this.Jc;return a===b?this.yd:b};H(W,{dI:"isLabeledLink"},function(){return null===this.Od?!1:0<this.Od.count});H(W,{Kf:"labelNodes"},function(){return null===this.Od?Cc:this.Od.i});function Dp(a,b){null===a.Od&&(a.Od=new Xb(V));a.Od.add(b);a.H()}
W.prototype.Ir=function(a){O.prototype.Ir.call(this,a);Tp(this)&&Fi(this,this.Q);if(!a){a=this.mf;var b=this.xf;null!==a&&(Bp(a,this,this.Jc),Rp(this));null!==b&&(Bp(b,this,this.yd),Rp(this))}};W.prototype.Jr=function(a){O.prototype.Jr.call(this,a);Tp(this)&&Fi(this,this.Q);if(!a){a=this.mf;var b=this.xf;null!==a&&(Cp(a,this,this.Jc),Qp(this));null!==b&&(Cp(b,this,this.yd),Qp(this))}};
W.prototype.El=function(){this.yf=!0;if(null!==this.Od){var a=this.g;if(null===a)return;for(var b=this.Od.copy().i;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.g,null!==a&&(a=a.U,a instanceof Xf?a.Ly(b):a instanceof Yf&&a.wg(b,void 0)))};
W.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf){var d=c.ik(a),e=b.pe(d),f=this.M;e!==f&&(e=null!==f?c.$a(f.data):void 0,f=c.Nn,"function"===typeof f?f(a,e):a[f]=e,c.zv(a,d));d=c.lk(a);e=b.pe(d);f=this.R;e!==f&&(e=null!==f?c.$a(f.data):void 0,f=c.Pn,"function"===typeof f?f(a,e):a[f]=e,c.Bv(a,d));var g=c.$i(a);if(0<g.length||0<this.Kf.count){if(1===g.length&&1===this.Kf.count&&(b=g[0],d=this.Kf.first(),c.$a(d.data)===
b))return;var d=(new Xb).md(g),h=new Xb;this.Kf.each(function(a){null!==a.data&&(a=c.$a(a.data),void 0!==a&&h.add(a))});b=h.copy();b.TC(d);d=d.copy();d.TC(h);if(0<b.count||0<d.count)g.length=0,h.each(function(a){g.push(a)}),b.each(function(b){c.WC(a,b)}),d.each(function(b){c.Ax(a,b)})}}}}};
W.prototype.move=W.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;O.prototype.move.call(this,a);this.uk(c,b);for(a=this.Kf;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};G(W,{rG:"relinkableFrom"},function(){return this.sq},function(a){var b=this.sq;b!==a&&(this.sq=a,this.h("relinkableFrom",b,a),this.rd())});
G(W,{sG:"relinkableTo"},function(){return this.tq},function(a){var b=this.tq;b!==a&&(this.tq=a,this.h("relinkableTo",b,a),this.rd())});W.prototype.canRelinkFrom=function(){if(!this.rG)return!1;var a=this.layer;if(null===a)return!0;if(!a.tl)return!1;a=a.g;return null===a||a.tl?!0:!1};W.prototype.canRelinkTo=function(){if(!this.sG)return!1;var a=this.layer;if(null===a)return!0;if(!a.tl)return!1;a=a.g;return null===a||a.tl?!0:!1};
G(W,{ks:"resegmentable"},function(){return this.uq},function(a){var b=this.uq;b!==a&&(this.uq=a,this.h("resegmentable",b,a),this.rd())});G(W,{cc:"isTreeLink"},function(){return this.wp},function(a){var b=this.wp;b!==a&&(this.wp=a,this.h("isTreeLink",b,a),null!==this.M&&em(this.M),null!==this.R&&em(this.R))});H(W,{path:"path"},function(){var a=this.Ze();return a instanceof X?a:null});
H(W,{Rl:"routeBounds"},function(){this.updateRoute();var a=new D;var b=Infinity,c=Infinity,d=this.Z;if(0===d)a.k(NaN,NaN,0,0);else{if(1===d)d=this.j(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.k(d.x,d.y,0,0);else if(2===d){var e=this.j(0),f=this.j(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y);a.k(e.x,e.y,0,0);a.Zh(f)}else if(this.computeCurve()===Li&&3<=d&&!this.Ib)if(e=this.j(0),b=e.x,c=e.y,a.k(b,c,0,0),3===d)d=this.j(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.j(2),b=Math.min(f.x,b),c=Math.min(f.y,
c),Q.rn(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(var g=3;g<d;g+=3){var h=this.j(g-2);g+3>=d&&(g=d-1);var k=this.j(g-1),f=this.j(g);Q.rn(e.x,e.y,h.x,h.y,k.x,k.y,f.x,f.y,.5,a);b=Math.min(f.x,b);c=Math.min(f.y,c);e=f}else for(e=this.j(0),f=this.j(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.k(e.x,e.y,0,0),a.Zh(f),g=2;g<d;g++)e=this.j(g),b=Math.min(e.x,b),c=Math.min(e.y,c),a.Zh(e);this.qx.k(b-a.x,c-a.y)}return this.ax=a});H(W,{GC:"midPoint"},function(){this.updateRoute();return this.computeMidPoint(new z)});
W.prototype.computeMidPoint=function(a){var b=this.Z;if(0===b)return a.assign(Q.RD),a;if(1===b)return a.assign(this.j(0)),a;if(2===b){var c=this.j(0),d=this.j(1);a.k((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Li&&3<=b&&!this.Ib){if(3===b)return this.j(1);var b=(b-1)/3|0,e=3*(b/2|0);1===b%2?(c=this.j(e),d=this.j(e+1),b=this.j(e+2),e=this.j(e+3),Q.DE(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.j(e));return a}for(var e=0,f=ob(),g=0;g<b-1;g++)c=0,c=this.j(g),d=this.j(g+1),Q.Sa(c.x,
d.x)?(c=d.y-c.y,0>c&&(c=-c)):Q.Sa(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Xi(d)),f.push(c),e+=c;for(d=g=c=0;c<e/2&&g<b;){d=f[g];if(c+d>e/2)break;c+=d;g++}pb(f);b=this.j(g);f=this.j(g+1);b.x===f.x?b.y>f.y?a.k(b.x,b.y-(e/2-c)):a.k(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.k(b.x-(e/2-c),b.y):a.k(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.k(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y)));return a};H(W,{FC:"midAngle"},function(){this.updateRoute();return this.computeMidAngle()});
W.prototype.computeMidAngle=function(){var a=this.Z;if(2>a)return NaN;if(this.computeCurve()===Li&&4<=a&&!this.Ib){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.j(c),b=this.j(c+1),d=this.j(c+2),c=this.j(c+3);return Q.CE(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(0<c&&c+1<a)return a=this.j(c-1),b=this.j(c+1),a.Qh(b)}d=a/2|0;if(0===a%2)return a=this.j(d-1),b=this.j(d),a.Qh(b);var a=this.j(d-1),b=this.j(d),d=this.j(d+1),c=a.Xi(b),e=b.Xi(d);return c>e?a.Qh(b):b.Qh(d)};
G(W,{points:"points"},function(){return this.oc},function(a){var b=this.oc;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new N(z),d=0;d<a.length/2;d++)e=(new z(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var f=!0,d=0;d<a.length;d++)if(e=a[d],!Ea(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){f=!1;break}if(f)for(c=new N(z),d=0;d<a.length;d++)e=a[d],c.add((new z(e.x,
e.y)).freeze());else u("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof N)for(c=a.copy(),a=c.i;a.next();)a.value.freeze();else u("Link.points value is not an instance of List or Array: "+a);c.freeze();this.oc=c;this.Ed();Up(this);this.g&&this.g.qb.Gc&&(this.an=c);this.h("points",b,c)}});H(W,{Z:"pointsCount"},function(){return this.oc.count});W.prototype.getPoint=W.prototype.j=function(a){return this.oc.l[a]};
W.prototype.setPoint=W.prototype.Pe=function(a,b){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.Rf(a,b)};W.prototype.setPointAt=W.prototype.L=function(a,b,c){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.Rf(a,new z(b,c))};W.prototype.insertPoint=function(a,b){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.qd(a,b)};
W.prototype.insertPointAt=W.prototype.n=function(a,b,c){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.qd(a,new z(b,c))};W.prototype.addPoint=W.prototype.Xg=function(a){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.add(a)};W.prototype.addPointAt=W.prototype.Vj=function(a,b){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.add(new z(a,b))};
W.prototype.removePoint=W.prototype.XC=function(a){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.Dc(a)};W.prototype.clearPoints=W.prototype.vn=function(){null===this.Pd&&u("Call Link.startRoute before modifying the points of the route.");this.oc.clear()};
W.prototype.movePoints=W.prototype.uk=function(a,b){for(var c=new N(z),d=this.oc.i;d.next();){var e=d.value;c.add((new z(e.x+a,e.y+b)).freeze())}c.freeze();d=this.oc;this.oc=c;this.Ed();Up(this);this.g&&this.g.qb.Gc&&(this.an=c);this.h("points",d,c)};W.prototype.startRoute=W.prototype.Ak=function(){null===this.Pd&&(this.Pd=this.oc,this.oc=this.oc.copy())};
W.prototype.commitRoute=W.prototype.Mh=function(){if(null!==this.Pd){for(var a=this.Pd,b=this.oc,c=Infinity,d=Infinity,e=a.l,f=e.length,g=0;g<f;g++)var h=e[g],c=Math.min(h.x,c),d=Math.min(h.y,d);for(var k=Infinity,l=Infinity,m=b.l,n=m.length,g=0;g<n;g++)h=m[g],k=Math.min(h.x,k),l=Math.min(h.y,l),h.freeze();b.freeze();if(n===f)for(g=0;g<n;g++){if(f=e[g],h=m[g],f.x-c!==h.x-k||f.y-d!==h.y-l){this.Ed();break}}else this.Ed();this.Pd=null;this.g&&this.g.qb.Gc&&(this.an=b);Up(this);this.h("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.xG=function(){null!==this.Pd&&(this.oc=this.Pd,this.Pd=null)};function Up(a){0===a.oc.count?a.yf=!1:(a.yf=!0,a.nm=a.j(0).copy(),a.rm=a.j(a.Z-1).copy(),Vp(a,!1))}W.prototype.invalidateRoute=W.prototype.zb=function(){if(!(this.mx||this.g&&this.g.V.Ua)){var a=this.path;null!==a&&(this.yf=!1,this.Ed(),a.H())}};G(W,{mo:null},function(){return this.mx},function(a){this.mx=a});
W.prototype.updateRoute=function(){if(!this.yf&&!this.Zv){var a=!0;try{this.Zv=!0,this.Ak(),a=this.computePoints()}finally{this.Zv=!1,a?this.Mh():this.xG()}}};
W.prototype.computePoints=function(){var a=this.g;if(null===a)return!1;var b=this.M,c=null;null===b?(a.fl||(a.Xt=new X,a.Xt.ka=Q.so,a.Xt.Na=0,a.fl=new V,a.fl.add(a.Xt),a.fl.Ge()),this.nm&&(a.fl.position=a.fl.location=this.nm,a.fl.Ge(),b=a.fl,c=a.Xt)):c=this.Jc;if(null!==c){var d=jn(c);d!==b&&b.qa()?c=d:(d=b.findVisibleNode(),null!==d&&d!==b?(b=d,c=d.fk("")):b=d)}this.cB=b;if(null===b||null===c||!b.location.w())return!1;var d=this.R,e=null;null===d?(a.gl||(a.Yt=new X,a.Yt.ka=Q.so,a.Yt.Na=0,a.gl=new V,
a.gl.add(a.Yt),a.gl.Ge()),this.rm&&(a.gl.position=a.gl.location=this.rm,a.gl.Ge(),d=a.gl,e=a.Yt)):e=this.yd;null!==e&&(a=jn(e),a!==d&&d.qa()?e=a:(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.fk("")):d=a));this.eB=d;if(null===d||null===e||!d.location.w())return!1;var a=this.Z,f=Wp(this,c),g=Xp(this,e),h=c===e&&null!==c,k=this.Ib,l=this.ne===Li;this.rh=h&&!k?l=!0:!1;var m=this.hr===Ei||h;if(k||f!==td||g!==td||h){l=this.nk;m&&(k&&l||h)&&this.vn();var n=h?this.computeCurviness():0,p=this.getLinkPoint(b,
c,f,!0,k,d,e),q=0,s=0,t=0;if(k||f!==td||h){var v=this.computeEndSegmentLength(b,c,f,!0),t=this.getLinkDirection(b,c,p,f,!0,k,d,e);h&&(t-=k?90:30,0>n&&(t-=180));0>t?t+=360:360<=t&&(t-=360);h&&(v+=Math.abs(n));0===t?q=v:90===t?s=v:180===t?q=-v:270===t?s=-v:(q=v*Math.cos(t*Math.PI/180),s=v*Math.sin(t*Math.PI/180));if(f.Gd()&&h){var x=c.Ra(Dd,Va()),B=Wa(x.x+1E3*q,x.y+1E3*s);this.getLinkPointFromPoint(b,c,x,B,!0,p);A(x);A(B)}}var v=this.getLinkPoint(d,e,g,!1,k,b,c),y=0,C=0,K=0;if(k||g!==td||h)x=this.computeEndSegmentLength(d,
e,g,!1),K=this.getLinkDirection(d,e,v,g,!1,k,b,c),h&&(K+=k?0:30,0>n&&(K+=180)),0>K?K+=360:360<=K&&(K-=360),h&&(x+=Math.abs(n)),0===K?y=x:90===K?C=x:180===K?y=-x:270===K?C=-x:(y=x*Math.cos(K*Math.PI/180),C=x*Math.sin(K*Math.PI/180)),g.Gd()&&h&&(x=e.Ra(Dd,Va()),B=Wa(x.x+1E3*y,x.y+1E3*C),this.getLinkPointFromPoint(d,e,x,B,!1,v),A(x),A(B));e=p;if(k||f!==td||h)e=new z(p.x+q,p.y+s);c=v;if(k||g!==td||h)c=new z(v.x+y,v.y+C);!m&&!k&&f===td&&3<a&&this.adjustPoints(0,p,a-2,c)?this.Pe(a-1,v):!m&&!k&&g===td&&
3<a&&this.adjustPoints(1,e,a-1,v)?this.Pe(0,p):!m&&!k&&4<a&&this.adjustPoints(1,e,a-2,c)?(this.Pe(0,p),this.Pe(a-1,v)):!m&&k&&6<=a&&!l&&this.adjustPoints(1,e,a-2,c)?(this.Pe(0,p),this.Pe(a-1,v)):(this.vn(),this.Xg(p),(k||f!==td||h)&&this.Xg(e),k&&this.addOrthoPoints(e,t,c,K,b,d),(k||g!==td||h)&&this.Xg(c),this.Xg(v))}else f=!1,!m&&3<=a&&(m=this.getLinkPoint(b,c,td,!0,!1,d,e),g=this.getLinkPoint(d,e,td,!1,!1,b,c),f=this.adjustPoints(0,m,a-1,g))&&(m=this.getLinkPoint(b,c,td,!0,!1,d,e),g=this.getLinkPoint(d,
e,td,!1,!1,b,c),this.adjustPoints(0,m,a-1,g)),f||(this.vn(),l?(a=this.getLinkPoint(b,c,td,!0,!1,d,e),m=this.getLinkPoint(d,e,td,!1,!1,b,c),f=m.x-a.x,g=m.y-a.y,h=this.computeCurviness(),l=k=0,p=a.x+f/3,t=a.y+g/3,q=p,s=t,Q.q(g,0)?s=0<f?s-h:s+h:(k=-f/g,l=Math.sqrt(h*h/(k*k+1)),0>h&&(l=-l),q=(0>g?-1:1)*l+p,s=k*(q-p)+t),p=a.x+2*f/3,t=a.y+2*g/3,v=p,y=t,Q.q(g,0)?y=0<f?y-h:y+h:(v=(0>g?-1:1)*l+p,y=k*(v-p)+t),this.vn(),this.Xg(a),this.Vj(q,s),this.Vj(v,y),this.Xg(m),this.Pe(0,this.getLinkPoint(b,c,td,!0,!1,
d,e)),this.Pe(3,this.getLinkPoint(d,e,td,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,td,!0,!1,a,e),e=this.getLinkPoint(a,e,td,!1,!1,b,c),this.hasCurviness()?(g=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+g/2,m=d.y+b/2,f=a,h=m,Q.q(b,0)?h=0<g?h-c:h+c:(g=-g/b,f=Math.sqrt(c*c/(g*g+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,h=g*(f-a)+m),this.Xg(d),this.Vj(f,h)):this.Xg(d),this.Xg(e)));return!0};
function Yp(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
W.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){void 0===f&&(f=new z);if(null===a||null===b)return f.assign(c),f;a.qa()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var g=e=0,h=0,k=0;a=null;e=b.I;null===e||e.jf()||(e=e.I);if(null===e)e=d.x,g=d.y,h=c.x,k=c.y;else{a=e.We;e=1/(a.m11*a.m22-a.m12*a.m21);var h=a.m22*e,k=-a.m12*e,l=-a.m21*e,m=a.m11*e,n=e*(a.m21*a.dy-a.m22*a.dx),p=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*h+d.y*l+n;g=d.x*k+d.y*m+p;h=c.x*h+c.y*l+n;k=c.x*k+c.y*m+p}b.Fn(e,g,h,k,f);null!==
a&&f.transform(a);return f};function Zp(a,b){var c=b.nq;null===c&&(c=new $p,c.port=b,c.dc=b.J,b.nq=c);return aq(c,a)}
W.prototype.getLinkPoint=function(a,b,c,d,e,f,g,h){void 0===h&&(h=new z);if(c.Kc())return b.Ra(c,h),h;if(c.Jn()&&(c=Zp(this,b),null!==c)){h.assign(c.On);if(e&&this.uv===Ip){var k=Zp(this,g);if(c.Cl<k.Cl){c=Va();var k=Va(),l=new D(b.Ra(ud,c),b.Ra(Hd,k)),m=this.computeSpot(!d);a=this.getLinkPoint(f,g,m,!d,e,a,b,k);a.x>=l.x&&a.x<=l.x+l.width?h.x=a.x:a.y>=l.y&&a.y<=l.y+l.height&&(h.y=a.y);A(c);A(k)}}return h}f=b.Ra(Dd,Va());k=c=null;this.Z>(e?6:2)?(k=d?this.j(1):this.j(this.Z-2),e&&(k=Yp(f,k.copy()))):
(c=Va(),k=g.Ra(Dd,c),e&&(k=Yp(f,k)));this.getLinkPointFromPoint(a,b,f,k,d,h);A(f);null!==c&&A(c);return h};
W.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){a:if(d.Kc())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.Jn()){var k=Zp(this,b);if(null!==k)switch(k.xd){case 1:c=270;break a;case 2:c=180;break a;default:case 4:c=0;break a;case 8:c=90;break a}}var k=b.Ra(Dd,Va()),l=null,m=null;this.Z>(f?6:2)?(m=e?this.j(1):this.j(this.Z-2),m=f?Yp(k,m.copy()):c):(l=Va(),m=h.Ra(Dd,l));c=0;c=Math.abs(m.x-k.x)>Math.abs(m.y-k.y)?m.x>=k.x?0:180:m.y>=
k.y?90:270;A(k);null!==l&&A(l)}d.Gd()&&g.bh(a)&&(c+=180,360<=c&&(c-=360));a=vp;a=e?this.Er:this.xs;a===vp&&(a=e?b.Er:b.xs);switch(a){case wp:b=b.hk();c+=b;360<=c&&(c-=360);break;case vp:case Fm:b=b.hk();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};W.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.Jn()&&(a=Zp(this,b),null!==a))return a.Pu;a=NaN;a=d?this.gk:this.Dk;null!==b&&isNaN(a)&&(a=d?b.gk:b.Dk);isNaN(a)&&(a=10);return a};
W.prototype.computeSpot=function(a){return a?Wp(this,this.Jc):Xp(this,this.yd)};function Wp(a,b){if(null===b)return Dd;var c=a.Za;c.lc()&&(void 0===b&&(b=a.Jc),null!==b&&(c=b.Za));return c===ee?td:c}function Xp(a,b){if(null===b)return Dd;var c=a.ab;c.lc()&&(void 0===b&&(b=a.yd),null!==b&&(c=b.ab));return c===ee?td:c}W.prototype.computeOtherPoint=function(a,b){var c=b.Ra(Dd),d;d=b.nq;d=null!==d?aq(d,this):null;null!==d&&(c=d.On);return c};
W.prototype.computeShortLength=function(a){return a?bq(this):cq(this)};function bq(a){var b=a.Fr;isNaN(b)&&(a=a.Jc,null!==a&&(b=a.Fr));return isNaN(b)?0:b}function cq(a){var b=a.zs;isNaN(b)&&(a=a.yd,null!==a&&(b=a.zs));return isNaN(b)?0:b}
W.prototype.Zi=function(a,b,c,d,e,f){if(!1===this.Qf)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var g=f;void 0===f&&(g=hb(),g.reset());g.multiply(this.transform);if(this.zl(a,g))return so(this,b,c,e),void 0===f&&jb(g),!0;if(this.If(a,g)){var h=!1;if(!this.$f)for(var k=this.la.l,l=k.length;l--;){var m=k[l];if(m.visible||m===this.Jb){var n=m.Q,p=this.sa;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=hb();n.set(g);if(m instanceof L)h=m.Zi(a,b,c,d,e,n);else if(this.path===m){var h=
m,q=a,s=d,p=n;if(!1===h.Qf)h=!1;else if(p.multiply(h.transform),s)b:{var t=q,v=p;if(h.zl(t,v))h=!0;else{if(void 0===v&&(v=h.transform,t.Wi(h.Q))){h=!0;break b}var p=t.left,q=t.right,s=t.top,t=t.bottom,x=Va(),B=Va(),y=Va(),C=hb();C.set(v);C.KC(h.transform);C.by();B.x=q;B.y=s;B.transform(C);x.x=p;x.y=s;x.transform(C);v=!1;Bo(h,x,B,y)?v=!0:(x.x=q,x.y=t,x.transform(C),Bo(h,x,B,y)?v=!0:(B.x=p,B.y=t,B.transform(C),Bo(h,x,B,y)?v=!0:(x.x=p,x.y=s,x.transform(C),Bo(h,x,B,y)&&(v=!0))));jb(C);A(x);A(B);A(y);
h=v}}else h=h.zl(q,p)}else h=Km(m,a,d,n);h&&(null!==b&&(m=b(m)),m&&(null===c||c(m))&&e.add(m));jb(n)}}}void 0===f&&jb(g);return h||null!==this.background||null!==this.ul}void 0===f&&jb(g);return!1};H(W,{Ib:"isOrthogonal"},function(){return 2===(this.el.value&2)});H(W,{nk:"isAvoiding"},function(){return 4===(this.el.value&4)});W.prototype.computeCurve=function(){if(null===this.rh){var a=this.Jc,b=this.Ib;this.rh=null!==a&&a===this.yd&&!b}return this.rh?Li:this.ne};
W.prototype.computeCorner=function(){if(this.ne===Li)return 0;var a=this.Lx;if(isNaN(a)||0>a)a=10;return a};W.prototype.computeCurviness=function(){var a=this.Lu;if(isNaN(a)){var b=this.ze;if(0!==b){var a=10,c=this.g;null!==c&&(a=c.jv);c=Math.abs(b);a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};W.prototype.computeThickness=function(){var a=this.path;return null!==a?Math.max(a.Na,1):1};W.prototype.hasCurviness=function(){return!isNaN(this.Lu)||0!==this.ze&&!this.Ib};
W.prototype.adjustPoints=function(a,b,c,d){var e=this.hr;if(this.Ib){if(e===rn)return!1;e===sn&&(e=qn)}switch(e){case rn:var f=this.j(a),g=this.j(c);if(!f.A(b)||!g.A(d)){var e=f.x,f=f.y,h=g.x-e,k=g.y-f,l=Math.sqrt(h*h+k*k);if(!Q.q(l,0)){var m=0;Q.q(h,0)?m=0>k?-Math.PI/2:Math.PI/2:(m=Math.atan(k/Math.abs(h)),0>h&&(m=Math.PI-m));var g=b.x,n=b.y,k=d.x-g,p=d.y-n,q=Math.sqrt(k*k+p*p),h=0;Q.q(k,0)?h=0>p?-Math.PI/2:Math.PI/2:(h=Math.atan(p/Math.abs(k)),0>k&&(h=Math.PI-h));l=q/l;m=h-m;this.Pe(a,b);for(a+=
1;a<c;a++)b=this.j(a),h=b.x-e,k=b.y-f,b=Math.sqrt(h*h+k*k),Q.q(b,0)||(p=0,Q.q(h,0)?p=0>k?-Math.PI/2:Math.PI/2:(p=Math.atan(k/Math.abs(h)),0>h&&(p=Math.PI-p)),h=p+m,b*=l,this.L(a,g+b*Math.cos(h),n+b*Math.sin(h)));this.Pe(c,d)}}return!0;case sn:f=this.j(a);n=this.j(c);if(!f.A(b)||!n.A(d)){var e=f.x,f=f.y,g=n.x,n=n.y,l=(g-e)*(g-e)+(n-f)*(n-f),h=b.x,m=b.y,k=d.x,p=d.y,q=0,s=1,q=0!==k-h?(p-m)/(k-h):9E9;0!==q&&(s=Math.sqrt(1+1/(q*q)));this.Pe(a,b);for(a+=1;a<c;a++){b=this.j(a);var t=b.x,v=b.y,x=.5;0!==l&&
(x=((e-t)*(e-g)+(f-v)*(f-n))/l);var B=e+x*(g-e),y=f+x*(n-f);b=Math.sqrt((t-B)*(t-B)+(v-y)*(v-y));v<q*(t-B)+y&&(b=-b);0<q&&(b=-b);t=h+x*(k-h);x=m+x*(p-m);0!==q?(b=t+b/s,this.L(a,b,x-(b-t)/q)):this.L(a,t,x+b)}this.Pe(c,d)}return!0;case qn:return this.Ib&&(e=this.j(a),f=this.j(a+1),g=this.j(a+2),Q.q(e.y,f.y)?Q.q(f.x,g.x)?this.L(a+1,f.x,b.y):Q.q(f.y,g.y)&&this.L(a+1,b.x,f.y):Q.q(e.x,f.x)&&(Q.q(f.y,g.y)?this.L(a+1,b.x,f.y):Q.q(f.x,g.x)&&this.L(a+1,f.x,b.y)),e=this.j(c),f=this.j(c-1),g=this.j(c-2),Q.q(e.y,
f.y)?Q.q(f.x,g.x)?this.L(c-1,f.x,d.y):Q.q(f.y,g.y)&&this.L(c-1,d.x,f.y):Q.q(e.x,f.x)&&(Q.q(f.y,g.y)?this.L(c-1,d.x,f.y):Q.q(f.x,g.x)&&this.L(c-1,f.x,d.y))),this.Pe(a,b),this.Pe(c,d),!0;default:return!1}};
W.prototype.addOrthoPoints=function(a,b,c,d,e,f){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var g=e.Q.copy(),h=f.Q.copy();if(g.w()&&h.w()){g.$e(8,8);h.$e(8,8);g.Zh(a);h.Zh(c);var k,l;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&h.right>a.x||90===d&&c.y>a.y&&h.right>a.x)k=new z(c.x,a.y),l=new z(c.x,(a.y+c.y)/2),180===d?(k.x=this.computeMidOrthoPosition(a.x,c.x,!1),l.x=k.x,l.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(k.x=a.x<h.left?this.computeMidOrthoPosition(a.x,
h.left,!1):a.x<h.right&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.right,l.x=k.x,l.y=c.y):0===d&&a.x<h.left&&a.y>h.top&&a.y<h.bottom&&(k.x=a.x,k.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),l.y=k.y);else{k=new z(a.x,c.y);l=new z((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)180===d&&(h.na(a)||g.na(c))?k.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?k.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,
h.bottom),!0):c.y>a.y&&(180===d||270===d)&&(k.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),l.x=c.x,l.y=k.y;if(k.y>g.top&&k.y<g.bottom)if(c.x>=g.left&&c.x<=a.x||a.x<=h.right&&a.x>=c.x){if(90===d||270===d)k=new z(Math.max((a.x+c.x)/2,a.x),a.y),l=new z(k.x,c.y)}else k.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,0===d?g.bottom:Math.max(g.bottom,h.bottom)),l.x=c.x,l.y=k.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&h.left<a.x||
90===d&&c.y>a.y&&h.left<a.x)k=new z(c.x,a.y),l=new z(c.x,(a.y+c.y)/2),0===d?(k.x=this.computeMidOrthoPosition(a.x,c.x,!1),l.x=k.x,l.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(k.x=a.x>h.right?this.computeMidOrthoPosition(a.x,h.right,!1):a.x>h.left&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.left,l.x=k.x,l.y=c.y):180===d&&a.x>h.right&&a.y>h.top&&a.y<h.bottom&&(k.x=a.x,k.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),l.y=k.y);else{k=new z(a.x,c.y);l=new z((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)0===d&&(h.na(a)||g.na(c))?k.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?k.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(0===d||270===d)&&(k.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),l.x=c.x,l.y=k.y;if(k.y>g.top&&k.y<g.bottom)if(c.x<=g.right&&c.x>=a.x||a.x>=h.left&&a.x<=c.x){if(90===d||270===d)k=new z(Math.min((a.x+c.x)/2,a.x),a.y),l=new z(k.x,c.y)}else k.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,180===d?g.bottom:Math.max(g.bottom,h.bottom)),l.x=c.x,l.y=k.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&h.bottom>a.y||0===d&&c.x>a.x&&h.bottom>a.y)k=new z(a.x,c.y),l=new z((a.x+c.x)/2,c.y),270===d?(k.y=this.computeMidOrthoPosition(a.y,c.y,!0),l.x=c.x,l.y=k.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(k.y=a.y<h.top?this.computeMidOrthoPosition(a.y,h.top,!0):a.y<h.bottom&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):h.bottom,l.x=c.x,l.y=k.y):90===d&&a.y<h.top&&a.x>h.left&&a.x<h.right&&(k.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),k.y=a.y,l.x=k.x);else{k=new z(c.x,a.y);l=new z(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<g.left||180===d&&c.x>g.right)270===d&&(h.na(a)||g.na(c))?k.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?k.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(270===d||180===d)&&(k.x=this.computeMidOrthoPosition(g.right,
Math.min(c.x,h.left),!1)),l.x=k.x,l.y=c.y;if(k.x>g.left&&k.x<g.right)if(c.y>=g.top&&c.y<=a.y||a.y<=h.bottom&&a.y>=c.y){if(0===d||180===d)k=new z(a.x,Math.max((a.y+c.y)/2,a.y)),l=new z(c.x,k.y)}else k.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,90===d?g.right:Math.max(g.right,h.right)),l.x=k.x,l.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&h.top<a.y||0===d&&c.x>a.x&&h.top<a.y)k=new z(a.x,c.y),l=new z((a.x+c.x)/2,c.y),90===d?(k.y=this.computeMidOrthoPosition(a.y,
c.y,!0),l.x=c.x,l.y=k.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(k.y=a.y>h.bottom?this.computeMidOrthoPosition(a.y,h.bottom,!0):a.y>h.top&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.top,l.x=c.x,l.y=k.y):270===d&&a.y>h.bottom&&a.x>h.left&&a.x<h.right&&(k.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),k.y=a.y,l.x=k.x);else{k=new z(c.x,a.y);l=new z(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<g.left||180===d&&c.x>g.right)90===d&&(h.na(a)||g.na(c))?k.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?k.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(90===d||180===d)&&(k.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),l.x=k.x,l.y=c.y;if(k.x>g.left&&k.x<g.right)if(c.y<=g.bottom&&c.y>=a.y||a.y>=h.top&&a.y<=c.y){if(0===d||180===d)k=new z(a.x,Math.min((a.y+c.y)/2,a.y)),l=new z(c.x,k.y)}else k.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,270===d?g.right:Math.max(g.right,
h.right)),l.x=k.x,l.y=c.y}var m=k,n=l;if(this.nk){var p=this.g,q;(q=null===p)||(p.qb.jg?q=!1:(q=p.Ea,q=q instanceof $g?!q.iu||q.EF:!0),q=!q);if(q||g.na(c)&&!f.bh(e)||h.na(a)&&!e.bh(f)||e===f||this.layer.bc)a=!1;else if(e=gm(p,!0,this.Ba,null),e.Mn(Math.min(a.x,m.x),Math.min(a.y,m.y),Math.abs(a.x-m.x),Math.abs(a.y-m.y))&&e.Mn(Math.min(m.x,n.x),Math.min(m.y,n.y),Math.abs(m.x-n.x),Math.abs(m.y-n.y))&&e.Mn(Math.min(n.x,c.x),Math.min(n.y,c.y),Math.abs(n.x-c.x),Math.abs(n.y-c.y)))a=!1;else if(g=g.copy().fh(h),
g.$e(2*e.un,2*e.sn),dq(e,a,b,c,d,g),h=eq(e,c.x,c.y),e.abort||999999!==h||(jm(e),h=e.tD,g.$e(e.un*h,e.sn*h),dq(e,a,b,c,d,g),h=eq(e,c.x,c.y)),e.abort||999999!==h||(jm(e),h=e.BC,g.$e(e.un*h,e.sn*h),dq(e,a,b,c,d,g),h=eq(e,c.x,c.y)),!e.abort&&999999===h&&e.KD&&(jm(e),dq(e,a,b,c,d,e.Qa),h=eq(e,c.x,c.y)),!e.abort&&999999>h&&0!==eq(e,c.x,c.y)){fq(this,e,c.x,c.y,d,!0);d=this.j(2);if(4>this.Z)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.L(2,d.x,d.y),this.n(3,d.x,d.y);else if(c=this.j(3),0===b||180===
b)Q.q(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.L(2,b,a.y),this.L(3,b,c.y)):Q.q(d.y,c.y)?(Math.abs(a.y-d.y)<=e.sn/2&&(this.L(2,d.x,a.y),this.L(3,c.x,a.y)),this.n(2,d.x,a.y)):this.L(2,a.x,d.y);else if(90===b||270===b)Q.q(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.L(2,a.x,b),this.L(3,c.x,b)):Q.q(d.x,c.x)?(Math.abs(a.x-d.x)<=e.un/2&&(this.L(2,a.x,d.y),this.L(3,a.x,c.y)),this.n(2,a.x,d.y)):this.L(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.Xg(k),this.Xg(l))}};
W.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function Fh(a){if(!a.nk)return!1;var b=a.points.l,c=b.length;if(4>c)return!1;a=gm(a.g,!0,a.Ba,null);for(var d=1;d<c-2;d++){var e=b[d],f=b[d+1];if(!a.Mn(Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0}return!1}
function fq(a,b,c,d,e,f){var g=b.un,h=b.sn,k=eq(b,c,d),l=c,m=d;for(0===e?l+=g:90===e?m+=h:180===e?l-=g:m-=h;1<k&&eq(b,l,m)===k-1;)c=l,d=m,0===e?l+=g:90===e?m+=h:180===e?l-=g:m-=h,k-=1;if(f){if(1<k)if(180===e||0===e)c=Math.floor(c/g)*g+g/2;else if(90===e||270===e)d=Math.floor(d/h)*h+h/2}else c=Math.floor(c/g)*g+g/2,d=Math.floor(d/h)*h+h/2;1<k&&(f=e,l=c,m=d,0===e?(f=90,m+=h):90===e?(f=180,l-=g):180===e?(f=270,m-=h):270===e&&(f=0,l+=g),eq(b,l,m)===k-1?fq(a,b,l,m,f,!1):(l=c,m=d,0===e?(f=270,m-=h):90===
e?(f=0,l+=g):180===e?(f=90,m+=h):270===e&&(f=180,l-=g),eq(b,l,m)===k-1&&fq(a,b,l,m,f,!1)));a.Vj(c,d)}W.prototype.findClosestSegment=function(a){var b=a.x;a=a.y;for(var c=this.j(0),d=this.j(1),e=Yc(b,a,c.x,c.y,d.x,d.y),f=0,g=1;g<this.Z-1;g++){var c=this.j(g+1),h=Yc(b,a,d.x,d.y,c.x,c.y),d=c;h<e&&(f=g,e=h)}return f};W.prototype.invalidateGeometry=W.prototype.Ed=function(){this.za=null;this.H()};H(W,{zc:"geometry"},function(){null===this.za&&(this.updateRoute(),this.za=this.makeGeometry());return this.za});
W.prototype.Xr=function(){if(null===this.za&&!1!==this.yf){this.za=this.makeGeometry();var a=this.path;if(null!==a){a.za=this.za;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.Jf&&e instanceof X&&(e.za=this.za)}}}};
W.prototype.makeGeometry=function(){var a=this.Z;if(2>a){var b=new Ke(Le),c=new Me(0,0);b.Ya.add(c);return b}var d=!1,b=this.g;null!==b&&0!==b.V.ce&&Tp(this)&&(d=!0);var c=b=0,e=this.j(0).copy(),f=e.copy(),b=this.oc.l,g=this.computeCurve();if(g===Li&&3<=a&&!Q.Sa(this.ko,0))if(3===a)var h=this.j(1),b=Math.min(e.x,h.x),c=Math.min(e.y,h.y),h=this.j(2),b=Math.min(b,h.x),c=Math.min(c,h.y);else{if(this.Ib)for(h=0;h<a;h++)c=b[h],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);else for(h=3;h<a;h+=3)h+3>=a&&(h=
a-1),b=this.j(h),f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x;c=f.y}else{for(h=0;h<a;h++)c=b[h],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);b=f.x;c=f.y}b-=this.qx.x;c-=this.qx.y;e.x-=b;e.y-=c;if(2===a){var k=this.j(1).copy();k.x-=b;k.y-=c;0!==bq(this)&&gq(this,e,!0,f);0!==cq(this)&&gq(this,k,!1,f);b=new Ke(Oe);b.ia=e.x;b.ja=e.y;b.s=k.x;b.u=k.y}else{k=E();0!==bq(this)&&gq(this,e,!0,f);S(k,e.x,e.y,!1,!1);if(g===Li&&3<=a&&!Q.Sa(this.ko,0))if(3===a)h=this.j(1),a=h.x-b,d=h.y-c,h=this.j(2).copy(),
h.x-=b,h.y-=c,0!==cq(this)&&gq(this,h,!1,f),T(k,a,d,a,d,h.x,h.y);else if(this.Ib){for(var f=new z(b,c),e=this.j(1).copy(),g=new z(b,c),a=new z(b,c),d=this.j(0),l=null,m=this.ko/3,h=1;h<this.Z-1;h++){var l=this.j(h),n=d,p=l,q=this.j(hq(this,l,h,!1));if(!Q.Sa(n.x,p.x)||!Q.Sa(p.x,q.x))if(!Q.Sa(n.y,p.y)||!Q.Sa(p.y,q.y)){var s=m,t=g,v=a;isNaN(s)&&(s=this.ko/3);var x=n.x,n=n.y,B=p.x,p=p.y,y=q.x,q=q.y,C=s*iq(x,n,B,p),s=s*iq(B,p,y,q);Q.Sa(n,p)&&Q.Sa(B,y)&&(B>x?q>p?(t.x=B-C,t.y=p-C,v.x=B+s,v.y=p+s):(t.x=B-
C,t.y=p+C,v.x=B+s,v.y=p-s):q>p?(t.x=B+C,t.y=p-C,v.x=B-s,v.y=p+s):(t.x=B+C,t.y=p+C,v.x=B-s,v.y=p-s));Q.Sa(x,B)&&Q.Sa(p,q)&&(p>n?(y>B?(t.x=B-C,t.y=p-C,v.x=B+s):(t.x=B+C,t.y=p-C,v.x=B-s),v.y=p+s):(y>B?(t.x=B-C,t.y=p+C,v.x=B+s):(t.x=B+C,t.y=p+C,v.x=B-s),v.y=p-s));if(Q.Sa(x,B)&&Q.Sa(B,y)||Q.Sa(n,p)&&Q.Sa(p,q))x=.5*(x+y),n=.5*(n+q),t.x=x,t.y=n,v.x=x,v.y=n;1===h?(e.x=.5*(d.x+l.x),e.y=.5*(d.y+l.y)):2===h&&Q.Sa(d.x,this.j(0).x)&&Q.Sa(d.y,this.j(0).y)&&(e.x=.5*(d.x+l.x),e.y=.5*(d.y+l.y));T(k,e.x-b,e.y-c,g.x-
b,g.y-c,l.x-b,l.y-c);f.set(g);e.set(a);d=l}}h=d.x;d=d.y;f=this.j(this.Z-1);h=.5*(h+f.x);d=.5*(d+f.y);T(k,a.x-b,a.y-c,h-b,d-c,f.x-b,f.y-c)}else for(h=3;h<a;h+=3)d=this.j(h-2),h+3>=a&&(h=a-1),f=this.j(h-1),e=this.j(h),h===a-1&&0!==cq(this)&&(e=e.copy(),gq(this,e,!1,Q.fj)),T(k,d.x-b,d.y-c,f.x-b,f.y-c,e.x-b,e.y-c);else{f=Va();f.assign(this.j(0));for(h=1;h<a;){h=hq(this,f,h,1<h);t=this.j(h);if(h>=a-1){f!==t&&(0!==cq(this)&&(t=t.copy(),gq(this,t,!1,Q.fj)),jq(this,k,-b,-c,f,t,d));break}h=hq(this,t,h+1,h<
a-3);e=k;g=-b;l=-c;m=f;v=this.j(h);x=f;n=d;Q.q(m.y,t.y)&&Q.q(t.x,v.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(t.x-m.x)/2),s=B=Math.min(s,Math.abs(v.y-t.y)/2),Q.q(s,0)?(jq(this,e,g,l,m,t,n),x.assign(t)):(p=t.x,y=t.y,q=p,C=y,p=t.x>m.x?t.x-s:t.x+s,C=v.y>t.y?t.y+B:t.y-B,jq(this,e,g,l,m,new z(p,y),n),df(e,t.x+g,t.y+l,q+g,C+l),x.k(q,C))):Q.q(m.x,t.x)&&Q.q(t.y,v.y)?(s=this.computeCorner(),B=Math.min(s,Math.abs(t.y-m.y)/2),B=s=Math.min(B,Math.abs(v.x-t.x)/2),Q.q(s,0)?(jq(this,e,g,l,m,t,n),x.assign(t)):
(p=t.x,C=y=t.y,y=t.y>m.y?t.y-B:t.y+B,q=v.x>t.x?t.x+s:t.x-s,jq(this,e,g,l,m,new z(p,y),n),df(e,t.x+g,t.y+l,q+g,C+l),x.k(q,C))):(jq(this,e,g,l,m,t,n),x.assign(t))}A(f)}b=k.m;F(k)}return b};function iq(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Q.Sa(a,0)?b:Q.Sa(b,0)?a:Math.sqrt(a*a+b*b)}
function gq(a,b,c,d){var e=a.Z;if(!(2>e))if(c){var f=a.j(1);c=f.x-d.x;d=f.y-d.y;f=iq(b.x,b.y,c,d);0!==f&&(e=2===e?.5*f:f,a=bq(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)}else f=a.j(e-2),c=f.x-d.x,d=f.y-d.y,f=iq(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=cq(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)}
function hq(a,b,c,d){for(var e=a.Z,f=b;Q.Sa(b.x,f.x)&&Q.Sa(b.y,f.y);){if(c>=e)return e-1;f=a.j(c++)}if(!Q.Sa(b.x,f.x)&&!Q.Sa(b.y,f.y))return c-1;for(var g=f;Q.Sa(b.x,f.x)&&Q.Sa(f.x,g.x)&&(!d||(b.y>=f.y?f.y>=g.y:f.y<=g.y))||Q.Sa(b.y,f.y)&&Q.Sa(f.y,g.y)&&(!d||(b.x>=f.x?f.x>=g.x:f.x<=g.x));){if(c>=e)return e-1;g=a.j(c++)}return c-2}
function jq(a,b,c,d,e,f,g){if(!g&&Tp(a)){g=[];var h=0;a.qa()&&(h=kq(a,e,f,g));var k=e.x,k=e.y;if(0<h)if(Q.q(e.y,f.y))if(e.x<f.x)for(var l=0;l<h;){var m=Math.max(e.x,Math.min(g[l++]-5,f.x-10));b.lineTo(m+c,f.y+d);for(var k=m+c,n=Math.min(m+10,f.x);l<h;){var p=g[l];if(p<n+10)l++,n=Math.min(p+5,f.x);else break}p=(m+n)/2+c;p=f.y-10+d;m=n+c;n=f.y+d;a.ne===Di?S(b,m,n,!1,!1):T(b,k,p,m,p,m,n)}else for(l=h-1;0<=l;){m=Math.min(e.x,Math.max(g[l--]+5,f.x+10));b.lineTo(m+c,f.y+d);k=m+c;for(n=Math.max(m-10,f.x);0<=
l;)if(p=g[l],p>n-10)l--,n=Math.max(p-5,f.x);else break;p=f.y-10+d;m=n+c;n=f.y+d;a.ne===Di?S(b,m,n,!1,!1):T(b,k,p,m,p,m,n)}else if(Q.q(e.x,f.x))if(e.y<f.y)for(l=0;l<h;){m=Math.max(e.y,Math.min(g[l++]-5,f.y-10));b.lineTo(f.x+c,m+d);k=m+d;for(n=Math.min(m+10,f.y);l<h;)if(p=g[l],p<n+10)l++,n=Math.min(p+5,f.y);else break;p=f.x-10+c;m=f.x+c;n+=d;a.ne===Di?S(b,m,n,!1,!1):T(b,p,k,p,n,m,n)}else for(l=h-1;0<=l;){m=Math.min(e.y,Math.max(g[l--]+5,f.y+10));b.lineTo(f.x+c,m+d);k=m+d;for(n=Math.max(m-10,f.y);0<=
l;)if(p=g[l],p>n-10)l--,n=Math.max(p-5,f.y);else break;p=f.x-10+c;m=f.x+c;n+=d;a.ne===Di?S(b,m,n,!1,!1):T(b,p,k,p,n,m,n)}}b.lineTo(f.x+c,f.y+d)}
function kq(a,b,c,d){var e=a.g;if(null===e||b.A(c))return 0;for(e=e.hv;e.next();){var f=e.value;if(null!==f&&f.visible)for(var f=f.hb.l,g=f.length,h=0;h<g;h++){var k=f[h];if(k instanceof W){if(k===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(k.qa()&&Tp(k)){var l=k.Rl;l.w()&&a.Rl.If(l)&&!a.usesSamePort(k)&&(l=k.path,null!==l&&l.tk()&&lq(b,c,d,k))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function lq(a,b,c,d){for(var e=Q.q(a.y,b.y),f=d.Z,g=d.j(0),h=Va(),k=1;k<f;k++){var l=d.j(k);if(k<f-1){var m=d.j(k+1);if(g.y===l.y&&l.y===m.y){if(l.x>g.x&&m.x>l.x||l.x<g.x&&m.x<l.x)l=m,k++}else g.x===l.x&&l.x===m.x&&(l.y>g.y&&m.y>l.y||l.y<g.y&&m.y<l.y)&&(l=m,k++)}a:{var m=h,n=a.x,p=a.y,q=b.x,s=b.y,t=g.x,g=g.y,v=l.x,x=l.y;if(!Q.q(n,q)){if(Q.q(p,s)&&Q.q(t,v)&&Math.min(n,q)<t&&Math.max(n,q)>t&&Math.min(g,x)<p&&Math.max(g,x)>p&&!Q.q(g,x)){m.x=t;m.y=p;m=!0;break a}}else if(!Q.q(p,s)&&Q.q(g,x)&&Math.min(p,
s)<g&&Math.max(p,s)>g&&Math.min(t,v)<n&&Math.max(t,v)>n&&!Q.q(t,v)){m.x=n;m.y=g;m=!0;break a}m.x=0;m.y=0;m=!1}m&&(e?c.push(h.x):c.push(h.y));g=l}A(h)}H(W,{Br:"firstPickIndex"},function(){return 2>=this.Z?0:this.Ib||Wp(this)!==td?1:0});H(W,{gv:"lastPickIndex"},function(){var a=this.Z;return 0===a?0:2>=a?a-1:this.Ib||Xp(this)!==td?a-2:a-1});function Tp(a){a=a.ne;return a===ti||a===Di}function Vp(a,b){if(b||Tp(a)){var c=a.g;null===c||c.Lk.contains(a)||null===a.ax||c.Lk.add(a,a.ax)}}
function Fi(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.bc){var d=c.g;if(null!==d)for(var e=!1,d=d.hv;d.next();){var f=d.value;if(f.visible)if(f===c)for(var e=!0,g=!1,f=f.hb.l,h=f.length,k=0;k<h;k++){var l=f[k];l instanceof W&&(l===a?g=!0:g&&mq(a,l,b))}else if(e)for(f=f.hb.l,h=f.length,k=0;k<h;k++)l=f[k],l instanceof W&&mq(a,l,b)}}}function mq(a,b,c){if(null!==b&&null!==b.za&&Tp(b)){var d=b.Rl;d.w()&&(a.Rl.If(d)||c.If(d))&&(a.usesSamePort(b)||b.Ed())}}
W.prototype.usesSamePort=function(a){var b=this.Z,c=a.Z;if(0<b&&0<c){var d=this.j(0),e=a.j(0);if(d.Vd(e))return!0;b=this.j(b-1);a=a.j(c-1);if(b.Vd(a)||d.Vd(a)||b.Vd(e))return!0}else if(this.M===a.M||this.R===a.R||this.M==a.R||this.R==a.M)return!0;return!1};W.prototype.Zd=function(a){O.prototype.Zd.call(this,a);if(null!==this.Od)for(var b=this.Od.i;b.next();)b.value.Zd(a)};G(W,{hr:"adjusting"},function(){return this.xo},function(a){var b=this.xo;b!==a&&(this.xo=a,this.h("adjusting",b,a))});
G(W,{Lx:"corner"},function(){return this.Ko},function(a){var b=this.Ko;b!==a&&(this.Ko=a,this.Ed(),this.h("corner",b,a))});G(W,{ne:"curve"},function(){return this.No},function(a){var b=this.No;b!==a&&(this.No=a,this.zb(),Vp(this,b===Di||b===ti||a===Di||a===ti),this.h("curve",b,a))});G(W,{Lu:"curviness"},function(){return this.Oo},function(a){var b=this.Oo;b!==a&&(this.Oo=a,this.zb(),this.h("curviness",b,a))});
G(W,{uv:"routing"},function(){return this.el},function(a){var b=this.el;b!==a&&(this.el=a,this.rh=null,this.zb(),Vp(this,2===(b.value&2)||2===(a.value&2)),this.h("routing",b,a))});G(W,{ko:"smoothness"},function(){return this.Oq},function(a){var b=this.Oq;b!==a&&(this.Oq=a,this.Ed(),this.h("smoothness",b,a))});
function Rp(a){var b=a.mf;if(null!==b){var c=a.xf;if(null!==c){var d=a.Ig,e=a.Wg;a:{if(null!==c&&null!==b.zg)for(a=b.zg.i;a.next();){var f=a.value;if(f.Xn===b&&f.as===c&&f.pv===d&&f.qv===e||f.Xn===c&&f.as===b&&f.pv===e&&f.qv===d){a=f;break a}}a=null}for(var g=null,h=null,k=b.Kb.l,l=k.length,f=0;f<l;f++){var m=k[f];if(m.mf===b&&m.Ig===d&&m.xf===c&&m.Wg===e||m.mf===c&&m.Ig===e&&m.xf===b&&m.Wg===d)null===h?h=m:(null===g&&(g=new N(W),g.add(h)),g.add(m))}if(null!==g)for(null===a&&(a=new zp,a.Xn=b,a.pv=
d,a.as=c,a.qv=e,yp(b,a),yp(c,a)),a.links=g,b=g.l,f=0;f<b.length;f++)if(m=b[f],0===m.ze){c=1;for(d=0;d<b.length;d++)Math.abs(b[d].ze)===c&&(c++,d=-1);m.fm=a;m.ze=m.M===a.Xn?c:-c;c=m.g;(null===c||c.Ce)&&m.zb()}}}}
function Qp(a){var b=a.fm;if(null!==b){var c=a.ze;a.fm=null;a.ze=0;b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.l[0],c.fm=null,c.ze=0,c.zb()),c=b.Xn,null!==b&&null!==c.zg&&c.zg.remove(b),c=b.as,null!==b&&null!==c.zg&&c.zg.remove(b);else for(c=Math.abs(c),a=0===c%2,b=b.links.i;b.next();){var d=b.value,e=Math.abs(d.ze),f=0===e%2;e>c&&a===f&&(d.ze=0<d.ze?d.ze-2:d.ze+2,d.zb())}}}function zp(){sb(this);this.links=this.qv=this.as=this.pv=this.Xn=null}
zb(zp,{Xn:!0,pv:!0,as:!0,qv:!0,links:!0,spacing:!0});function hm(){sb(this);this.Xy=this.group=null;this.Kr=!0;this.abort=!1;this.sf=this.rf=1;this.Np=this.Mp=-1;this.Ad=this.zd=8;this.Ob=null;this.KD=!1;this.tD=22;this.BC=111}zb(hm,{group:!0,Xy:!0,Kr:!0,abort:!0,KD:!0,tD:!0,BC:!0});
hm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.rf=Math.floor((a.x-this.zd)/this.zd)*this.zd;this.sf=Math.floor((b-this.Ad)/this.Ad)*this.Ad;this.Mp=Math.ceil((c+2*this.zd)/this.zd)*this.zd;this.Np=Math.ceil((d+2*this.Ad)/this.Ad)*this.Ad;a=1+(Math.ceil((this.Mp-this.rf)/this.zd)|0);b=1+(Math.ceil((this.Np-this.sf)/this.Ad)|0);if(null===this.Ob||this.kn<a-1||this.ln<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],f=0;f<=b;f++)e[f]=0;c[d]=e}this.Ob=
c;this.kn=a-1;this.ln=b-1}if(null!==this.Ob)for(a=0;a<=this.kn;a++)for(b=0;b<=this.ln;b++)this.Ob[a][b]=999999}};H(hm,{Qa:null},function(){return new D(this.rf,this.sf,this.Mp-this.rf,this.Np-this.sf)});G(hm,{un:null},function(){return this.zd},function(a){0<a&&a!==this.zd&&(this.zd=a,this.initialize(this.Qa))});G(hm,{sn:null},function(){return this.Ad},function(a){0<a&&a!==this.Ad&&(this.Ad=a,this.initialize(this.Qa))});function nq(a,b,c){return a.rf<=b&&b<=a.Mp&&a.sf<=c&&c<=a.Np}
function eq(a,b,c){if(!nq(a,b,c))return 0;b-=a.rf;b/=a.zd;c-=a.sf;c/=a.Ad;return a.Ob[b|0][c|0]}function km(a,b,c){nq(a,b,c)&&(b-=a.rf,b/=a.zd,c-=a.sf,c/=a.Ad,a.Ob[b|0][c|0]=0)}function jm(a){if(null!==a.Ob)for(var b=0;b<=a.kn;b++)for(var c=0;c<=a.ln;c++)1<=a.Ob[b][c]&&(a.Ob[b][c]|=999999)}
hm.prototype.Mn=function(a,b,c,d){if(a>this.Mp||a+c<this.rf||b>this.Np||b+d<this.sf)return!0;a=(a-this.rf)/this.zd|0;b=(b-this.sf)/this.Ad|0;c=Math.max(0,c)/this.zd+1|0;var e=Math.max(0,d)/this.Ad+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.kn)|0;for(c=Math.min(b+e-1,this.ln)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.Ob[a][e])return!1;return!0};
function oq(a,b,c,d,e,f,g,h,k){if(!(b<f||b>g||c<h||c>k)){var l,m;l=b|0;m=c|0;var n=a.Ob[l][m];if(1<=n&&999999>n)for(e?m+=d:l+=d,n+=1;f<=l&&l<=g&&h<=m&&m<=k&&!(n>=a.Ob[l][m]);)a.Ob[l][m]=n,n+=1,e?m+=d:l+=d;l=e?m:l;if(e)if(0<d)for(c+=d;c<l;c+=d)oq(a,b,c,1,!e,f,g,h,k),oq(a,b,c,-1,!e,f,g,h,k);else for(c+=d;c>l;c+=d)oq(a,b,c,1,!e,f,g,h,k),oq(a,b,c,-1,!e,f,g,h,k);else if(0<d)for(b+=d;b<l;b+=d)oq(a,b,c,1,!e,f,g,h,k),oq(a,b,c,-1,!e,f,g,h,k);else for(b+=d;b>l;b+=d)oq(a,b,c,1,!e,f,g,h,k),oq(a,b,c,-1,!e,f,g,
h,k)}}function pq(a,b,c,d,e,f,g,h,k,l,m){for(var n=b|0,p=c|0,q=a.Ob[n][p];0===q&&n>h&&n<k&&p>l&&p<m;)if(g?p+=f:n+=f,q=a.Ob[n][p],1>=Math.abs(n-d)&&1>=Math.abs(p-e))return a.abort=!0,0;n=b|0;p=c|0;q=a.Ob[n][p];b=1;for(a.Ob[n][p]=b;0===q&&n>h&&n<k&&p>l&&p<m;)g?p+=f:n+=f,q=a.Ob[n][p],a.Ob[n][p]=b,b+=1;return g?p:n}
function dq(a,b,c,d,e,f){if(null!==a.Ob){a.abort=!1;var g=b.x,h=b.y;if(nq(a,g,h)){var g=g-a.rf,g=g/a.zd,h=h-a.sf,h=h/a.Ad,k=d.x,l=d.y;if(nq(a,k,l))if(k-=a.rf,k/=a.zd,l-=a.sf,l/=a.Ad,1>=Math.abs(g-k)&&1>=Math.abs(h-l))a.abort=!0;else{var m=f.x;b=f.y;d=f.x+f.width;var n=f.y+f.height,m=m-a.rf,m=m/a.zd;b-=a.sf;b/=a.Ad;d-=a.rf;d/=a.zd;n-=a.sf;n/=a.Ad;f=Math.max(0,Math.min(a.kn,m|0));d=Math.min(a.kn,Math.max(0,d|0));b=Math.max(0,Math.min(a.ln,b|0));var n=Math.min(a.ln,Math.max(0,n|0)),g=g|0,h=h|0,k=k|0,
l=l|0,m=g,p=h,q=0===c||90===c?1:-1;(c=90===c||270===c)?p=pq(a,g,h,k,l,q,c,f,d,b,n):m=pq(a,g,h,k,l,q,c,f,d,b,n);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var q=k|0,s=l|0,t=a.Ob[q][s];0===t&&q>f&&q<d&&s>b&&s<n;)if(e?s+=c:q+=c,t=a.Ob[q][s],1>=Math.abs(q-g)&&1>=Math.abs(s-h)){a.abort=!0;break a}q=k|0;s=l|0;t=a.Ob[q][s];for(a.Ob[q][s]=999999;0===t&&q>f&&q<d&&s>b&&s<n;)e?s+=c:q+=c,t=a.Ob[q][s],a.Ob[q][s]=999999}a.abort||(oq(a,m,p,1,!1,f,d,b,n),oq(a,m,p,-1,!1,f,d,b,n),oq(a,m,p,1,!0,f,d,
b,n),oq(a,m,p,-1,!0,f,d,b,n))}}}}}function $p(){sb(this);this.port=this.dc=null;this.Mf=[];this.Wn=!1}zb($p,{dc:!0,port:!0,Mf:!0,Wn:!0});$p.prototype.toString=function(){for(var a=this.Mf,b=this.dc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function qq(a,b,c,d){b=b.offsetY;switch(b){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(b){case 9:return 180<c?270:90;case 6:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case 3:return c>a&&c<=180+a?180:270;case 5:return c>180-a&&c<=360-a?270:0;case 12:return c>a&&c<=180+a?90:0;case 10:return c>180-a&&c<=360-a?180:90;case 7:return 90<c&&c<=180+a?180:c>180+a&&c<=360-a?270:0;case 13:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case 14:return c>
a&&c<=180-a?90:c>180-a&&270>=c?180:0;case 11:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&15!==b&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function aq(a,b){var c=a.Mf;if(0===c.length){a:if(!a.Wn){c=a.Wn;a.Wn=!0;var d,e=null,f=a.dc,f=f instanceof Wg?f:null;if(null===f||f.ud)d=a.dc.aC(a.port.cd);else{if(!f.Q.w()){a.Wn=c;break a}e=f;d=e.$B()}var g=a.Mf.length=0,h=a.port.Ra(ud,Va()),k=a.port.Ra(Hd,Va()),f=db(h.x,h.y,0,0);f.Zh(k);A(h);A(k);h=Wa(f.x+f.width/2,f.y+f.height/2);for(d=d.i;d.next();)if(k=d.value,k.qa()){var l=td,m=k.Jc===a.port||k.M.bh(e),l=m?Wp(k,a.port):Xp(k,a.port);if(l.Jn()&&(m=m?k.yd:k.Jc,null!==m)){var n=m.J;if(null!==n){var m=
k.computeOtherPoint(n,m),n=h.Qh(m),l=qq(f,l,n,k.Ib),p=0;0===l?(p=4,180<n&&(n-=360)):p=90===l?8:180===l?2:1;l=a.Mf[g];void 0===l?(l=new rq(k,n,p),a.Mf[g]=l):(l.link=k,l.angle=n,l.xd=p);l.ov.set(m);g++}}}A(h);a.Mf.sort($p.prototype.iG);e=a.Mf.length;h=-1;for(g=d=0;g<e;g++)l=a.Mf[g],void 0!==l&&(l.xd!==h&&(h=l.xd,d=0),l.Gn=d,d++);h=-1;d=0;for(g=e-1;0<=g;g--)l=a.Mf[g],void 0!==l&&(l.xd!==h&&(h=l.xd,d=l.Gn+1),l.Cl=d);g=a.Mf;m=a.port;e=a.dc.pG;h=Va();d=Va();k=Va();l=Va();m.Ra(ud,h);m.Ra(Bd,d);m.Ra(Hd,k);
m.Ra(Fd,l);var q=p=n=m=0;if(e===xp)for(var s=0;s<g.length;s++){var t=g[s];if(null!==t){var v=t.link.computeThickness();switch(t.xd){case 8:p+=v;break;case 2:q+=v;break;case 1:m+=v;break;default:case 4:n+=v}}}for(var x=0,B=0,y=1,s=0;s<g.length;s++)if(t=g[s],null!==t){var C,K;if(x!=t.xd){x=t.xd;switch(x){case 8:C=k;K=l;break;case 2:C=l;K=h;break;case 1:C=h;K=d;break;default:case 4:C=d,K=k}var J=K.x-C.x;K=K.y-C.y;switch(x){case 8:p>Math.abs(J)?(y=Math.abs(J)/p,p=Math.abs(J)):y=1;break;case 2:q>Math.abs(K)?
(y=Math.abs(K)/q,q=Math.abs(K)):y=1;break;case 1:m>Math.abs(J)?(y=Math.abs(J)/m,m=Math.abs(J)):y=1;break;default:case 4:n>Math.abs(K)?(y=Math.abs(K)/n,n=Math.abs(K)):y=1}B=0}var ba=t.On;if(e===xp){v=t.link.computeThickness();v*=y;ba.set(C);switch(x){case 8:ba.x=C.x+J/2+p/2-B-v/2;break;case 2:ba.y=C.y+K/2+q/2-B-v/2;break;case 1:ba.x=C.x+J/2-m/2+B+v/2;break;default:case 4:ba.y=C.y+K/2-n/2+B+v/2}B+=v}else v=.5,e===up&&(v=(t.Gn+1)/(t.Cl+1)),ba.x=C.x+J*v,ba.y=C.y+K*v}A(h);A(d);A(k);A(l);C=a.Mf;for(J=0;J<
C.length;J++)K=C[J],null!==K&&(K.Pu=a.computeEndSegmentLength(K));a.Wn=c;fb(f)}c=a.Mf}for(f=0;f<c.length;f++)if(C=c[f],null!==C&&C.link===b)return C;return null}$p.prototype.iG=function(a,b){return a===b?0:null===a?-1:null===b?1:a.xd<b.xd?-1:a.xd>b.xd?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
$p.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.dc,this.port,td,b.Jc===this.port),d=a.Gn;if(0>d)return c;var e=a.Cl;if(1>=e||!b.Ib)return c;var b=a.ov,f=a.On;if(2===a.xd||8===a.xd)d=e-1-d;return((a=2===a.xd||4===a.xd)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)};function rq(a,b,c){this.link=a;this.angle=b;this.xd=c;this.ov=new z;this.Cl=this.Gn=0;this.On=new z;this.Pu=0}zb(rq,{link:!0,angle:!0,xd:!0,ov:!0,Gn:!0,Cl:!0,On:!0,Pu:!0});
rq.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.xd.toString()+":"+this.Gn.toString()+"/"+this.Cl.toString()+" "+this.On.toString()+" "+this.Pu.toString()+" "+this.ov.toString()};function Em(){this.Pi=this.ni=ee;this.Ni=this.li=NaN;this.Mi=this.ki=vp;this.Oi=this.mi=NaN}Em.prototype.copy=function(){var a=new Em;a.ni=this.ni.O();a.Pi=this.Pi.O();a.li=this.li;a.Ni=this.Ni;a.ki=this.ki;a.Mi=this.Mi;a.mi=this.mi;a.Oi=this.Oi;return a};
function Wg(a){0===arguments.length?V.call(this,Wi):V.call(this,a);this.Pp=new Xb(O);this.Tm=new Xb(Wg);this.Kj=this.Qp=this.Op=null;this.ar=!1;this.sp=!0;this.br=!1;this.tb=this.Rq=null;this.Go=!1;this.Ho=!0;this.fp=this.Io=!1;this.fd=new lg;this.fd.group=this;this.Vw=!1}yb(Wg,V);vb("Group",Wg);
Wg.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a);a.Op=this.Op;a.Qp=this.Qp;a.Kj=this.Kj;a.ar=this.ar;a.sp=this.sp;a.br=this.br;a.Rq=this.Rq;var b=a.vr(function(a){return a instanceof Qi});a.tb=b instanceof Qi?b:null;a.Go=this.Go;a.Ho=this.Ho;a.Io=this.Io;a.fp=this.fp;null!==this.fd?(a.fd=this.fd.copy(),a.fd.group=a):(null!==a.fd&&(a.fd.group=null),a.fd=null)};
Wg.prototype.Zg=function(a){V.prototype.Zg.call(this,a);var b=a.Bn();for(a=a.mc;a.next();){var c=a.value;c.H();c.v(8);c.nr();if(c instanceof V)c.Je(b);else if(c instanceof W)for(c=c.Kf;c.next();)c.value.Je(b)}};
Wg.prototype.Ql=function(a,b,c,d,e,f,g){if(a===Qf&&"elements"===b)if(e instanceof Qi){var h=e;null===this.tb?this.tb=h:this.tb!==h&&u("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof L&&(h=e.vr(function(a){return a instanceof Qi}),h instanceof Qi&&(null===this.tb?this.tb=h:this.tb!==h&&u("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===Rf&&"elements"===b&&null!==this.tb&&(d===this.tb?this.tb=null:d instanceof L&&this.tb.pk(d)&&
(this.tb=null));V.prototype.Ql.call(this,a,b,c,d,e,f,g)};Wg.prototype.Kh=function(a,b,c,d){this.Jj=this.tb;L.prototype.Kh.call(this,a,b,c,d)};Wg.prototype.qk=function(){if(!V.prototype.qk.call(this))return!1;for(var a=this.mc;a.next();){var b=a.value;if(b instanceof V){if(b.qa()&&Xk(b))return!1}else if(b instanceof W&&b.qa()&&Xk(b)&&b.M!==this&&b.R!==this)return!1}return!0};H(Wg,{placeholder:"placeholder"},function(){return this.tb});
G(Wg,{NB:"computesBoundsAfterDrag"},function(){return this.Go},function(a){var b=this.Go;b!==a&&(w(a,"boolean",Wg,"computesBoundsAfterDrag"),this.Go=a,this.h("computesBoundsAfterDrag",b,a))});G(Wg,{JE:"computesBoundsIncludingLinks"},function(){return this.Ho},function(a){w(a,"boolean",Wg,"computesBoundsIncludingLinks");var b=this.Ho;b!==a&&(this.Ho=a,this.h("computesBoundsIncludingLinks",b,a))});
G(Wg,{KE:"computesBoundsIncludingLocation"},function(){return this.Io},function(a){w(a,"boolean",Wg,"computesBoundsIncludingLocation");var b=this.Io;b!==a&&(this.Io=a,this.h("computesBoundsIncludingLocation",b,a))});G(Wg,{vF:"handlesDragDropForMembers"},function(){return this.fp},function(a){w(a,"boolean",Wg,"handlesDragDropForMembers");var b=this.fp;b!==a&&(this.fp=a,this.h("handlesDragDropForMembers",b,a))});H(Wg,{mc:"memberParts"},function(){return this.Pp.i});
function qp(a,b){if(a.Pp.add(b)){b instanceof Wg&&a.Tm.add(b);var c=a.$F;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ya,e.ya=!0);c(a,b);null!==e&&(e.ya=d)}a.qa()&&a.ud||b.Zd(!1)}c=a.tb;null===c&&(c=a);c.H()}function pp(a,b){if(a.Pp.remove(b)){b instanceof Wg&&a.Tm.remove(b);var c=a.aG;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ya,e.ya=!0);c(a,b);null!==e&&(e.ya=d)}a.qa()&&a.ud||b.Zd(!0)}c=a.tb;null===c&&(c=a);c.H()}
Wg.prototype.El=function(){if(0<this.Pp.count){var a=this.g;if(null===a)return;for(var b=this.Pp.copy().i;b.next();)a.remove(b.value)}V.prototype.El.call(this)};Wg.prototype.Ev=function(){var a=this.layer;null!==a&&a.Ev(this)};G(Wg,{ub:"layout"},function(){return this.fd},function(a){var b=this.fd;b!==a&&(null!==a&&ra(a,lg,Wg,"layout"),null!==b&&(b.g=null,b.group=null),this.fd=a,null!==a&&(a.g=this.g,a.group=this),this.h("layout",b,a))});
G(Wg,{$F:"memberAdded"},function(){return this.Op},function(a){var b=this.Op;b!==a&&(null!==a&&w(a,"function",Wg,"memberAdded"),this.Op=a,this.h("memberAdded",b,a))});G(Wg,{aG:"memberRemoved"},function(){return this.Qp},function(a){var b=this.Qp;b!==a&&(null!==a&&w(a,"function",Wg,"memberRemoved"),this.Qp=a,this.h("memberRemoved",b,a))});
G(Wg,{sy:"memberValidation"},function(){return this.Kj},function(a){var b=this.Kj;b!==a&&(null!==a&&w(a,"function",Wg,"memberValidation"),this.Kj=a,this.h("memberValidation",b,a))});Wg.prototype.canAddMembers=function(a){var b=this.g;if(null===b)return!1;b=b.ib;for(a=bh(a).i;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};
Wg.prototype.addMembers=function(a,b){var c=this.g;if(null===c)return!1;for(var c=c.ib,d=!0,e=bh(a).i;e.next();){var f=e.value;!b||c.isValidMember(this,f)?f.Ba=this:d=!1}return d};G(Wg,{cH:"ungroupable"},function(){return this.ar},function(a){var b=this.ar;b!==a&&(w(a,"boolean",Wg,"ungroupable"),this.ar=a,this.h("ungroupable",b,a))});Wg.prototype.canUngroup=function(){if(!this.cH)return!1;var a=this.layer;if(null!==a&&!a.Du)return!1;a=a.g;return null===a||a.Du?!0:!1};
Wg.prototype.invalidateConnectedLinks=Wg.prototype.Je=function(a){void 0===a&&(a=null);V.prototype.Je.call(this,a);for(var b=this.$B();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.M;null!==d&&d.bh(this)&&!d.qa()?c.zb():(d=c.R,null!==d&&d.bh(this)&&!d.qa()&&c.zb())}}};Wg.prototype.findExternalLinksConnected=Wg.prototype.$B=function(){var a=this.Bn();a.add(this);for(var b=new Xb(W),c=a.i;c.next();){var d=c.value;if(d instanceof V)for(d=d.Hd;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.i};
Wg.prototype.findExternalNodesConnected=function(){var a=this.Bn();a.add(this);for(var b=new Xb(V),c=a.i;c.next();){var d=c.value;if(d instanceof V)for(d=d.Hd;d.next();){var e=d.value,f=e.M;a.contains(f)&&f!==this||b.add(f);e=e.R;a.contains(e)&&e!==this||b.add(e)}}return b.i};Wg.prototype.findSubGraphParts=Wg.prototype.Bn=function(){var a=new Xb(O);Ug(a,this,!0,0,!0);a.remove(this);return a};Wg.prototype.Zd=function(a){V.prototype.Zd.call(this,a);for(var b=this.mc;b.next();)b.value.Zd(a)};
Wg.prototype.collapseSubGraph=Wg.prototype.collapseSubGraph=function(){var a=this.g;if(null!==a&&!a.Fd){a.Fd=!0;var b=this.Bn();sq(this,b);a.Fd=!1}};function sq(a,b){for(var c=a.mc;c.next();){var d=c.value;d.Zd(!1);if(d instanceof Wg){var e=d;e.ud&&(e.fz=e.ud,sq(e,b))}if(d instanceof V)d.Je(b);else if(d instanceof W)for(d=d.Kf;d.next();)d.value.Je(b)}a.ud=!1}
Wg.prototype.expandSubGraph=Wg.prototype.expandSubGraph=function(){var a=this.g;if(null!==a&&!a.Fd){var b=a.qb;0!==a.V.ce&&b.vk();a.Fd=!0;var c=this.Bn();tq(this,c,b,this);a.Fd=!1}};function tq(a,b,c,d){for(var e=a.mc;e.next();){var f=e.value;f.Zd(!0);if(f instanceof Wg){var g=f;g.fz&&(g.fz=!1,tq(g,b,c,d))}if(f instanceof V)f.Je(b),Yj(c,f,d);else if(f instanceof W)for(f=f.Kf;f.next();)f.value.Je(b)}a.ud=!0}
G(Wg,{ud:"isSubGraphExpanded"},function(){return this.sp},function(a){var b=this.sp;if(b!==a){w(a,"boolean",Wg,"isSubGraphExpanded");this.sp=a;var c=this.g;this.h("isSubGraphExpanded",b,a);b=this.UG;if(null!==b){var d=!0;null!==c&&(d=c.ya,c.ya=!0);b(this);null!==c&&(c.ya=d)}null!==c&&c.V.Ua||(a?this.expandSubGraph():this.collapseSubGraph())}});
G(Wg,{fz:"wasSubGraphExpanded"},function(){return this.br},function(a){var b=this.br;b!==a&&(w(a,"boolean",Wg,"wasSubGraphExpanded"),this.br=a,this.h("wasSubGraphExpanded",b,a))});G(Wg,{UG:"subGraphExpandedChanged"},function(){return this.Rq},function(a){var b=this.Rq;b!==a&&(null!==a&&w(a,"function",Wg,"subGraphExpandedChanged"),this.Rq=a,this.h("subGraphExpandedChanged",b,a))});
Wg.prototype.move=Wg.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=Wa(c,b);V.prototype.move.call(this,a);for(a=this.Bn().i;a.next();){var e=a.value;if(!(e instanceof W||e instanceof V&&e.Ke)){var f=e.position,g=e.location;f.w()?(d.x=f.x+c,d.y=f.y+b,e.position=d):g.w()&&(d.x=g.x+c,d.y=g.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof W&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));A(d)};
function Qi(){U.call(this);this.he=Q.ro;this.Cq=new D(NaN,NaN,NaN,NaN)}yb(Qi,U);vb("Placeholder",Qi);Qi.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.he=this.he.O();a.Cq=this.Cq.copy()};Qi.prototype.Vi=function(a){if(null===this.background&&null===this.ul)return!1;var b=this.sa;return jd(0,0,b.width,b.height,a.x,a.y)};
Qi.prototype.Rn=function(){var a=this.J;null!==a&&(a instanceof Wg||a instanceof Vg)||u("Placeholder is not inside a Group or Adornment.");if(a instanceof Wg){var b=this.computeBorder(this.Cq),c=this.hc;ad(c,b.width||0,b.height||0);Im(this,0,0,c.width,c.height);for(var c=a.mc,d=!1;c.next();)if(c.value.qa()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new z,c.qs(b,a.qe),a.location=new z(c.x,c.y))}else{var b=this.ka,c=this.hc,d=this.padding,e=d.left+d.right,f=d.top+d.bottom;if(b.w())ad(c,b.width+e||0,
b.height+f||0),Im(this,-d.left,-d.top,c.width,c.height);else{var g=a.Xb,h=g.Ra(ud,Va()),b=db(h.x,h.y,0,0);b.Zh(g.Ra(Hd,h));b.Zh(g.Ra(Bd,h));b.Zh(g.Ra(Fd,h));a.bg.k(b.x,b.y);ad(c,b.width+e||0,b.height+f||0);Im(this,-d.left,-d.top,c.width,c.height);A(h);fb(b)}}};Qi.prototype.Kh=function(a,b,c,d){var e=this.Q;e.x=a;e.y=b;e.width=c;e.height=d};
Qi.prototype.computeBorder=function(a){var b=this.J;if(b instanceof Wg){var c=b;if(c.NB&&this.Cq.w()){var d=c.g;if(null!==d&&(d=d.Ea,d instanceof $g&&!d.Uo&&null!==d.Hb&&!d.Hb.contains(c)))return a.assign(this.Cq),a}}var c=bb(),d=this.computeMemberBounds(c),e=this.padding;a.k(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom);fb(c);b instanceof Wg&&(c=b,c.KE&&c.location.w()&&a.Zh(c.location));return a};
Qi.prototype.computeMemberBounds=function(a){if(!(this.J instanceof Wg))return a.k(0,0,0,0),a;for(var b=this.J,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=b.mc;g.next();){var h=g.value;if(h.qa()){if(h instanceof W){var k=h;if(!b.JE)continue;if(Wk(k))continue;if(k.M===b||k.R===b)continue}h=h.Q;h.left<c&&(c=h.left);h.top<d&&(d=h.top);h.right>e&&(e=h.right);h.bottom>f&&(f=h.bottom)}}isFinite(c)&&isFinite(d)?a.k(c,d,e-c,f-d):(b=b.location,c=this.padding,a.k(b.x+c.left,b.y+c.top,0,0));return a};
G(Qi,{padding:"padding"},function(){return this.he},function(a){"number"===typeof a?((isNaN(a)||0>a)&&za(a,">= 0",Qi,"padding"),a=new qd(a)):(ra(a,qd,Qi,"padding"),(isNaN(a.left)||0>a.left)&&za(a.left,">= 0",Qi,"padding:value.left"),(isNaN(a.right)||0>a.right)&&za(a.right,">= 0",Qi,"padding:value.right"),(isNaN(a.top)||0>a.top)&&za(a.top,">= 0",Qi,"padding:value.top"),(isNaN(a.bottom)||0>a.bottom)&&za(a.bottom,">= 0",Qi,"padding:value.bottom"));var b=this.he;b.A(a)||(this.he=a=a.O(),this.h("padding",
b,a))});function lg(){0<arguments.length&&Aa(lg);sb(this);this.Dw=this.N=null;this.mp=this.op=!0;this.xp=!1;this.zo=(new z(0,0)).freeze();this.pp=this.rp=!0;this.Mz="";this.Km=!1;this.Ww=null}vb("Layout",lg);lg.prototype.cloneProtected=function(a){a.op=this.op;a.mp=this.mp;a.xp=this.xp;a.zo.assign(this.zo);a.rp=this.rp;a.pp=this.pp;a.Mz=this.Mz;this.mp||(a.Km=!0)};lg.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
lg.prototype.toString=function(){var a=xa(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.g&&(a+=" for "+this.g);return a+")"};G(lg,{g:"diagram"},function(){return this.N},function(a){null!==a&&ra(a,M,lg,"diagram");this.N=a});G(lg,{group:"group"},function(){return this.Dw},function(a){this.Dw!==a&&(null!==a&&ra(a,Wg,lg,"group"),this.Dw=a,null!==a&&(this.N=a.g))});
G(lg,{JF:"isOngoing"},function(){return this.op},function(a){this.op!==a&&(w(a,"boolean",lg,"isOngoing"),this.op=a)});G(lg,{HF:"isInitial"},function(){return this.mp},function(a){w(a,"boolean",lg,"isInitial");this.mp=a;a||(this.Km=!0)});G(lg,{ev:"isViewportSized"},function(){return this.xp},function(a){this.xp!==a&&(w(a,"boolean",lg,"isViewportSized"),(this.xp=a)&&this.v())});G(lg,{Qr:"isRouting"},function(){return this.rp},function(a){this.rp!==a&&(w(a,"boolean",lg,"isRouting"),this.rp=a)});
G(lg,{yC:"isRealtime"},function(){return this.pp},function(a){this.pp!==a&&(w(a,"boolean",lg,"isRealtime"),this.pp=a)});G(lg,{Me:"isValidLayout"},function(){return this.Km},function(a){this.Km!==a&&(w(a,"boolean",lg,"isValidLayout"),this.Km=a,a||(a=this.g,null!==a&&(a.Ps=!0)))});lg.prototype.invalidateLayout=lg.prototype.v=function(){if(this.Km){var a=this.g;if(null!==a&&!a.V.Ua){var b=a.qb;!b.Jm&&(b.jg&&b.Xh(),this.JF&&a.Ce||this.HF&&!a.Ce)&&(this.Me=!1,a.wd())}}};
G(lg,{network:"network"},function(){return this.Ww},function(a){var b=this.Ww;b!==a&&(null!==a&&ra(a,kc,lg,"network"),null!==b&&(b.ub=null),this.Ww=a,null!==a&&(a.ub=this))});lg.prototype.createNetwork=function(){return new kc};lg.prototype.makeNetwork=function(a){var b=this.createNetwork();b.ub=this;a instanceof M?(b.Si(a.Of,!0),b.Si(a.links,!0)):a instanceof Wg?b.Si(a.mc):b.Si(a.i);return b};
lg.prototype.updateParts=function(){var a=this.g;if(null===a&&null!==this.network)for(var b=this.network.vertexes.i;b.next();){var c=b.value.dc;if(null!==c&&(a=c.g,null!==a))break}this.Me=!0;try{null!==a&&a.Ab("Layout"),this.commitLayout()}finally{null!==a&&a.pd("Layout")}};lg.prototype.commitLayout=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();if(this.Qr)for(a=this.network.edges.i;a.next();)a.value.commit()};
lg.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new Xb(O);a instanceof M?(uq(this,b,a.Of,!0,this.xy,!0,!1,!0),uq(this,b,a.cj,!0,this.xy,!0,!1,!0)):a instanceof Wg?uq(this,b,a.mc,!1,this.xy,!0,!1,!0):b.md(a.i);var c=b.count;if(0<c){a=this.g;null!==a&&a.Ab("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.nd.x,e=d,f=this.nd.y,g=0,h=0,b=b.i;b.next();){var k=b.value;k.Ge();var l=k.oa,m=l.width,
l=l.height;k.moveTo(e,f);k.Vw=!1;e+=Math.max(m,50)+20;h=Math.max(h,Math.max(l,50));g>=c-1?(g=0,e=d,f+=h+20,h=0):g++}null!==a&&a.pd("Layout")}this.Me=!0};lg.prototype.xy=function(a){return!a.location.w()||a instanceof Wg&&a.Vw?!0:!1};
function uq(a,b,c,d,e,f,g,h){for(c=c.i;c.next();){var k=c.value;d&&!k.Kn||null!==e&&!e(k)||!k.canLayout()||(f&&k instanceof V?k.Ke||(k instanceof Wg?null===k.ub?uq(a,b,k.mc,!1,e,f,g,h):b.add(k):b.add(k)):g&&k instanceof W?b.add(k):!h||!k.$c()||k instanceof V||b.add(k))}}
lg.prototype.collectParts=function(a){var b=new Xb(O);a instanceof M?(uq(this,b,a.Of,!0,null,!0,!0,!0),uq(this,b,a.links,!0,null,!0,!0,!0),uq(this,b,a.cj,!0,null,!0,!0,!0)):a instanceof Wg?uq(this,b,a.mc,!1,null,!0,!0,!0):uq(this,b,a.i,!1,null,!0,!0,!0);return b};G(lg,{nd:"arrangementOrigin"},function(){return this.zo},function(a){ra(a,z,lg,"arrangementOrigin");this.zo.A(a)||(this.zo.assign(a),this.v())});
lg.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.Ra(ud),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function kc(){sb(this);this.fd=null;this.clear()}vb("LayoutNetwork",kc);
kc.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.i;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.i;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new Xb(lc);this.edges=new Xb(sc);this.By=new Fb(V,lc);this.oy=new Fb(W,sc)};
kc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.ub?"("+this.ub.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.i;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.i;c.next();)b+="\n    "+c.value.toString(a-1)}return b};G(kc,{ub:"layout"},function(){return this.fd},function(a){this.fd=a});kc.prototype.createVertex=function(){return new lc};kc.prototype.createEdge=function(){return new sc};
kc.prototype.addParts=kc.prototype.Si=function(a,b,c){if(null!==a){void 0===b&&(b=!1);w(b,"boolean",kc,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof V)return!a.Ke;if(a instanceof W){var b=a.M;if(null===b||b.Ke)return!1;a=a.R;return null===a||a.Ke?!1:!0}return!1});for(a=a.i;a.next();){var d=a.value;if(d instanceof V&&(!b||d.Kn)&&d.canLayout()&&c(d))if(d instanceof Wg&&null===d.ub)this.Si(d.mc,!1);else if(null===this.Hl(d)){var e=this.createVertex();e.dc=d;this.Wj(e)}}for(a.reset();a.next();)if(d=
a.value,d instanceof W&&(!b||d.Kn)&&d.canLayout()&&c(d)&&null===this.Ru(d)){var f=d.M,e=d.R;null!==f&&null!==e&&f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.Qn(f,e,d))}}};kc.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.Hl(b);if(null!==a)return a;for(b=b.Ba;null!==b;){a=this.Hl(b);if(null!==a)return a;b=b.Ba}return null};
kc.prototype.addVertex=kc.prototype.Wj=function(a){if(null!==a){this.vertexes.add(a);var b=a.dc;null!==b&&this.By.add(b,a);a.network=this}};kc.prototype.addNode=kc.prototype.gr=function(a){if(null===a)return null;var b=this.Hl(a);null===b&&(b=this.createVertex(),b.dc=a,this.Wj(b));return b};kc.prototype.deleteVertex=kc.prototype.WB=function(a){if(null!==a&&vq(this,a)){for(var b=a.$d,c=b.count-1;0<=c;c--){var d=b.Y(c);this.yn(d)}b=a.Ud;for(c=b.count-1;0<=c;c--)d=b.Y(c),this.yn(d)}};
function vq(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.By.remove(b.dc),b.network=null);return c}kc.prototype.deleteNode=function(a){null!==a&&(a=this.Hl(a),null!==a&&this.WB(a))};kc.prototype.findVertex=kc.prototype.Hl=function(a){return null===a?null:this.By.ha(a)};kc.prototype.addEdge=kc.prototype.nn=function(a){if(null!==a){this.edges.add(a);var b=a.link;null!==b&&null===this.Ru(b)&&this.oy.add(b,a);b=a.toVertex;null!==b&&b.zB(a);b=a.fromVertex;null!==b&&b.yB(a);a.network=this}};
kc.prototype.addLink=function(a){if(null===a)return null;var b=a.M,c=a.R,d=this.Ru(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.gr(b)),null!==c&&(d.toVertex=this.gr(c)),this.nn(d)):(d.fromVertex=null!==b?this.gr(b):null,d.toVertex=null!==c?this.gr(c):null);return d};kc.prototype.deleteEdge=kc.prototype.yn=function(a){if(null!==a){var b=a.toVertex;null!==b&&b.VB(a);b=a.fromVertex;null!==b&&b.UB(a);wq(this,a)}};
function wq(a,b){null!==b&&a.edges.remove(b)&&(a.oy.remove(b.link),b.network=null)}kc.prototype.deleteLink=function(a){null!==a&&(a=this.Ru(a),null!==a&&this.yn(a))};kc.prototype.findEdge=kc.prototype.Ru=function(a){return null===a?null:this.oy.ha(a)};kc.prototype.linkVertexes=kc.prototype.Qn=function(a,b,c){if(null===a||null===b)return null;if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.nn(d);return d}return null};
kc.prototype.reverseEdge=kc.prototype.tv=function(a){if(null!==a){var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.UB(a),c.VB(a),a.tv(),b.zB(a),c.yB(a))}};kc.prototype.deleteSelfEdges=kc.prototype.Nu=function(){for(var a=ob(),b=this.edges.i;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.yn(a[c]);pb(a)};
kc.prototype.deleteArtificialVertexes=function(){for(var a=ob(),b=this.vertexes.i;b.next();){var c=b.value;null===c.dc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.WB(a[b]);c=ob();for(b=this.edges.i;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.yn(c[b]);pb(a);pb(c)};function xq(a){for(var b=ob(),c=a.edges.i;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.yn(b[d]);pb(b)}
kc.prototype.splitIntoSubNetworks=kc.prototype.QG=function(){this.deleteArtificialVertexes();xq(this);this.Nu();for(var a=new N(kc),b=!0;b;)for(var b=!1,c=this.vertexes.i;c.next();){var d=c.value;if(0<d.$d.count||0<d.Ud.count){b=this.ub.createNetwork();a.add(b);yq(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function yq(a,b,c){if(null!==c&&c.network!==b){vq(a,c);b.Wj(c);for(var d=c.Mb;d.next();){var e=d.value;e.network!==b&&(wq(a,e),b.nn(e),yq(a,b,e.fromVertex))}for(d=c.Gb;d.next();)c=d.value,c.network!==b&&(wq(a,c),b.nn(c),yq(a,b,c.toVertex))}}kc.prototype.findAllParts=function(){for(var a=new Xb(O),b=this.vertexes.i;b.next();)a.add(b.value.dc);for(b=this.edges.i;b.next();)a.add(b.value.link);return a};
function lc(){sb(this);this.network=null;this.P=(new D(0,0,10,10)).freeze();this.B=(new z(5,5)).freeze();this.clear()}vb("LayoutVertex",lc);lc.prototype.clear=function(){this.Fc=this.Cg=null;this.$d=new N(sc);this.Ud=new N(sc)};
lc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+ub(this);if(0<a&&(b+=null!==this.dc?"("+this.dc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.$d.i;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.Ud.i;d.next();){var f=d.value;c?c=!1:e+=",";e+=f.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
G(lc,{data:"data"},function(){return this.Cg},function(a){this.Cg=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.B.k(d/2,b/2);this.P.k(a,c,d,b)}});G(lc,{dc:"node"},function(){return this.Fc},function(a){if(this.Fc!==a){this.Fc=a;a.Ge();var b=a.Q,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.P.k(c,d,e,b);if(!(a instanceof Wg)&&(a=a.Jb.Ra(Dd),a.w())){this.B.k(a.x-c,a.y-d);return}this.B.k(e/2,b/2)}});
G(lc,{Qa:"bounds"},function(){return this.P},function(a){this.P.A(a)||this.P.assign(a)});G(lc,{focus:"focus"},function(){return this.B},function(a){this.B.A(a)||this.B.assign(a)});G(lc,{ua:"centerX"},function(){return this.P.x+this.B.x},function(a){var b=this.P;b.x+this.B.x!==a&&(b.wa(),b.x=a-this.B.x,b.freeze())});G(lc,{Da:"centerY"},function(){return this.P.y+this.B.y},function(a){var b=this.P;b.y+this.B.y!==a&&(b.wa(),b.y=a-this.B.y,b.freeze())});
G(lc,{Cr:"focusX"},function(){return this.B.x},function(a){var b=this.B;b.x!==a&&(b.wa(),b.x=a,b.freeze())});G(lc,{Dr:"focusY"},function(){return this.B.y},function(a){var b=this.B;b.y!==a&&(b.wa(),b.y=a,b.freeze())});G(lc,{x:"x"},function(){return this.P.x},function(a){var b=this.P;b.x!==a&&(b.wa(),b.x=a,b.freeze())});G(lc,{y:"y"},function(){return this.P.y},function(a){var b=this.P;b.y!==a&&(b.wa(),b.y=a,b.freeze())});
G(lc,{width:"width"},function(){return this.P.width},function(a){var b=this.P;b.width!==a&&(b.wa(),b.width=a,b.freeze())});G(lc,{height:"height"},function(){return this.P.height},function(a){var b=this.P;b.height!==a&&(b.wa(),b.height=a,b.freeze())});
lc.prototype.commit=function(){var a=this.Cg;if(null!==a){var b=this.Qa,c=a.bounds;Ea(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.dc,null!==a){b=this.Qa;if(!(a instanceof Wg)){var c=a.Q,d=a.Jb.Ra(Dd);if(c.w()&&d.w()){a.moveTo(b.x+this.Cr-(d.x-c.x),b.y+this.Dr-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};lc.prototype.addSourceEdge=lc.prototype.zB=function(a){null!==a&&(this.$d.contains(a)||this.$d.add(a))};
lc.prototype.deleteSourceEdge=lc.prototype.VB=function(a){null!==a&&this.$d.remove(a)};lc.prototype.addDestinationEdge=lc.prototype.yB=function(a){null!==a&&(this.Ud.contains(a)||this.Ud.add(a))};lc.prototype.deleteDestinationEdge=lc.prototype.UB=function(a){null!==a&&this.Ud.remove(a)};H(lc,{PG:"sourceVertexes"},function(){for(var a=new Xb(lc),b=this.Mb;b.next();)a.add(b.value.fromVertex);return a.i});
H(lc,{ZE:"destinationVertexes"},function(){for(var a=new Xb(lc),b=this.Gb;b.next();)a.add(b.value.toVertex);return a.i});H(lc,{vertexes:"vertexes"},function(){for(var a=new Xb(lc),b=this.Mb;b.next();)a.add(b.value.fromVertex);for(b=this.Gb;b.next();)a.add(b.value.toVertex);return a.i});H(lc,{Mb:"sourceEdges"},function(){return this.$d.i});H(lc,{Gb:"destinationEdges"},function(){return this.Ud.i});
H(lc,{edges:"edges"},function(){for(var a=new N(sc),b=this.Mb;b.next();)a.add(b.value);for(b=this.Gb;b.next();)a.add(b.value);return a.i});H(lc,{eF:"edgesCount"},function(){return this.$d.count+this.Ud.count});var zq;lc.standardComparer=zq=function(a,b){var c=a.Fc,d=b.Fc;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
lc.smartComparer=function(a,b){if(null!==a){if(null!==b){var c=a.Fc,d=b.Fc;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),g=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(g))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(g))return-1;if(0!==f-g)return f-
g}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function sc(){sb(this);this.network=null;this.clear()}vb("LayoutEdge",sc);sc.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
sc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+ub(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};sc.prototype.tv=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};sc.prototype.commit=function(){};
sc.prototype.getOtherVertex=sc.prototype.nF=function(a){return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function sm(){0<arguments.length&&Aa(sm);lg.call(this);this.ev=!0;this.dr=this.er=NaN;this.di=(new Za(NaN,NaN)).freeze();this.Ug=(new Za(10,10)).freeze();this.Md=In;this.tc=Gn;this.Tg=vn;this.Bg=Aq}yb(sm,lg);vb("GridLayout",sm);
sm.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.er=this.er;a.dr=this.dr;a.di.assign(this.di);a.Ug.assign(this.Ug);a.Md=this.Md;a.tc=this.tc;a.Tg=this.Tg;a.Bg=this.Bg};
sm.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.nd=this.initialOrigin(this.nd);var b=this.g,c=new Xb(O);a instanceof M?(b=a,uq(this,c,a.Of,!0,null,!0,!0,!0),uq(this,c,a.links,!0,null,!0,!0,!0),uq(this,c,a.cj,!0,null,!0,!0,!0)):a instanceof Wg?(b=a.g,uq(this,c,a.mc,!1,null,!0,!0,!0)):c.md(a.i);for(a=c.copy().i;a.next();){var d=a.value;if(d instanceof W){var e=d;if(null!==e.M||null!==e.R){c.remove(e);
continue}}d.Ge();if(d instanceof Wg)for(d=d.mc;d.next();)c.remove(d.value)}e=c.be();if(0!==e.length){switch(this.sorting){case yn:e.reverse();break;case vn:e.sort(this.comparer);break;case wn:e.sort(this.comparer),e.reverse()}var f=this.fH;isNaN(f)&&(f=0);var g=this.ND,g=isNaN(g)&&null!==b?Math.max(b.Va.width-b.padding.left-b.padding.right,0):Math.max(this.ND,0);0>=f&&0>=g&&(f=1);c=this.spacing.width;isFinite(c)||(c=0);a=this.spacing.height;isFinite(a)||(a=0);null!==b&&b.Ab("Layout");d=[];switch(this.alignment){case Jn:var h=
c,k=a,l=Math.max(this.tn.width,1);if(!isFinite(l))for(var m=l=0;m<e.length;m++)var n=e[m],p=n.oa,l=Math.max(l,p.width);var l=Math.max(l+h,1),q=Math.max(this.tn.height,1);if(!isFinite(q))for(m=q=0;m<e.length;m++)n=e[m],p=n.oa,q=Math.max(q,p.height);for(var q=Math.max(q+k,1),s=this.Xe,t=this.nd.x,v=t,x=this.nd.y,B=0,y=0,m=0;m<e.length;m++){var n=e[m],p=n.oa,C=Math.ceil((p.width+h)/l)*l,K=Math.ceil((p.height+k)/q)*q,J=0;switch(s){case Hn:J=Math.abs(v-p.width);break;default:J=v+p.width}if(0<f&&B>f-1||
0<g&&0<B&&J>g)d.push(new D(0,x,g+h,y)),B=0,v=t,x+=y,y=0;y=Math.max(y,K);K=0;switch(s){case Hn:K=-p.width;break;default:K=0}n.moveTo(v+K,x);switch(s){case Hn:v-=C;break;default:v+=C}B++}d.push(new D(0,x,g+h,y));break;case In:h=f;k=c;l=a;m=Math.max(this.tn.width,1);n=x=C=0;p=Va();for(f=0;f<e.length;f++)q=e[f],s=q.oa,t=lp(q,q.Jb,q.qe,p),C=Math.max(C,t.x),x=Math.max(x,s.width-t.x),n=Math.max(n,t.y);v=this.Xe;switch(v){case Hn:C+=k;break;default:x+=k}var m=isFinite(m)?Math.max(m+k,1):Math.max(C+x,1),ba=
x=this.nd.x,B=this.nd.y,y=0;g>=C&&(g-=C);for(var C=K=0,J=Math.max(this.tn.height,1),ja=n=0,Y=!0,P=Va(),f=0;f<e.length;f++){q=e[f];s=q.oa;t=lp(q,q.Jb,q.qe,p);if(0<y)switch(v){case Hn:ba=Math.floor((ba-x-(s.width-t.x))/m)*m+x;break;default:ba=Math.ceil((ba-x+t.x)/m)*m+x}else switch(v){case Hn:K=ba+t.x+s.width;break;default:K=ba-t.x}var ha=0;switch(v){case Hn:ha=-(ba+t.x)+K;break;default:ha=ba+s.width-t.x-K}if(0<h&&y>h-1||0<g&&0<y&&ha>g){d.push(new D(0,Y?B-n:B,g+k,ja+n+l));for(ba=0;ba<y&&f!==y;ba++){var ha=
e[f-y+ba],Ra=lp(ha,ha.Jb,ha.qe,P);ha.moveTo(ha.position.x,ha.position.y+n-Ra.y)}ja+=l;B=Y?B+ja:B+(ja+n);y=ja=n=0;ba=x;Y=!1}ba===x&&(C=v===Hn?Math.max(C,s.width-t.x):Math.min(C,-t.x));n=Math.max(n,t.y);ja=Math.max(ja,s.height-t.y);isFinite(J)&&(ja=Math.max(ja,Math.max(s.height,J)-t.y));Y?q.moveTo(ba-t.x,B-t.y):q.moveTo(ba-t.x,B);switch(v){case Hn:ba-=t.x+k;break;default:ba+=s.width-t.x+k}y++}d.push(new D(0,B,g+k,(Y?ja:ja+n)+l));for(ba=0;ba<y&&f!==y;ba++)ha=e[f-y+ba],Ra=lp(ha,ha.Jb,ha.qe,p),ha.moveTo(ha.position.x,
ha.position.y+n-Ra.y);A(p);A(P);if(v===Hn)for(f=0;f<d.length;f++)e=d[f],e.width+=C,e.x-=C;else for(f=0;f<d.length;f++)e=d[f],e.x>C&&(e.width+=e.x-C,e.x=C)}for(h=f=g=e=0;h<d.length;h++)k=d[h],e=Math.min(e,k.x),g=Math.min(g,k.y),f=Math.max(f,k.x+k.width);this.Xe===Hn?this.commitLayers(d,new z(e+c/2-(f+e),g-a/2)):this.commitLayers(d,new z(e-c/2,g-a/2));null!==b&&b.pd("Layout");this.Me=!0}};sm.prototype.commitLayers=function(){};
G(sm,{ND:"wrappingWidth"},function(){return this.er},function(a){this.er!==a&&(w(a,"number",sm,"wrappingWidth"),0<a||isNaN(a))&&(this.er=a,this.ev=isNaN(a),this.v())});G(sm,{fH:"wrappingColumn"},function(){return this.dr},function(a){this.dr!==a&&(w(a,"number",sm,"wrappingColumn"),0<a||isNaN(a))&&(this.dr=a,this.v())});G(sm,{tn:"cellSize"},function(){return this.di},function(a){ra(a,Za,sm,"cellSize");this.di.A(a)||(this.di.assign(a),this.v())});
G(sm,{spacing:"spacing"},function(){return this.Ug},function(a){ra(a,Za,sm,"spacing");this.Ug.A(a)||(this.Ug.assign(a),this.v())});G(sm,{alignment:"alignment"},function(){return this.Md},function(a){this.Md!==a&&(va(a,sm,sm,"alignment"),a===In||a===Jn)&&(this.Md=a,this.v())});G(sm,{Xe:"arrangement"},function(){return this.tc},function(a){this.tc!==a&&(va(a,sm,sm,"arrangement"),a===Gn||a===Hn)&&(this.tc=a,this.v())});
G(sm,{sorting:"sorting"},function(){return this.Tg},function(a){this.Tg!==a&&(va(a,sm,sm,"sorting"),a===xn||a===yn||a===vn||a===wn)&&(this.Tg=a,this.v())});G(sm,{comparer:"comparer"},function(){return this.Bg},function(a){this.Bg!==a&&(w(a,"function",sm,"comparer"),this.Bg=a,this.v())});var Aq;sm.standardComparer=Aq=function(a,b){var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
sm.smartComparer=function(a,b){if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),g=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(g))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(g))return-1;if(0!==f-g)return f-g}}else if(""!==c[e])return 1;return""!==
d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var Jn;sm.Position=Jn=I(sm,"Position",0);var In;sm.Location=In=I(sm,"Location",1);var Gn;sm.LeftToRight=Gn=I(sm,"LeftToRight",2);var Hn;sm.RightToLeft=Hn=I(sm,"RightToLeft",3);var xn;sm.Forward=xn=I(sm,"Forward",4);var yn;sm.Reverse=yn=I(sm,"Reverse",5);var vn;sm.Ascending=vn=I(sm,"Ascending",6);var wn;sm.Descending=wn=I(sm,"Descending",7);
function Kn(){0<arguments.length&&Aa(Kn);lg.call(this);this.uw=this.vm=this.Oc=0;this.Vo=360;this.tw=Wn;this.wj=0;this.Tz=Wn;this.Ws=this.Af=this.mB=0;this.su=new Bq;this.Zs=this.bl=0;this.jE=600;this.pq=NaN;this.Bo=1;this.Qq=0;this.Sq=360;this.tc=Wn;this.aa=Sn;this.Tg=Pn;this.Bg=zq;this.Ug=6;this.cq=Zn}yb(Kn,lg);vb("CircularLayout",Kn);
Kn.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.pq=this.pq;a.Bo=this.Bo;a.Qq=this.Qq;a.Sq=this.Sq;a.tc=this.tc;a.aa=this.aa;a.Tg=this.Tg;a.Bg=this.Bg;a.Ug=this.Ug;a.cq=this.cq};Kn.prototype.createNetwork=function(){return new Cq};
Kn.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.ua=0,a.Da=0);else{var b=new N(Dq);b.md(a.i);a=new N(Dq);var c=new N(Dq),d;d=this.sort(b);var e=this.tw,f=this.Tz,g=this.Oc,h=this.vm,k=this.uw,l=this.Vo,b=this.wj,m=this.mB,n=this.Af,p=this.Ws,e=this.Xe,f=this.lv,g=this.qG;if(!isFinite(g)||
0>=g)g=NaN;h=this.zE;if(!isFinite(h)||0>=h)h=1;k=this.ae;isFinite(k)||(k=0);l=this.gf;if(!isFinite(l)||360<l||1>l)l=360;b=this.spacing;isFinite(b)||(b=NaN);e===Xn&&f===Yn?e=Wn:e===Xn&&f!==Yn&&(f=Yn,e=this.Xe);if((this.direction===Qn||this.direction===Rn)&&this.sorting!==Pn){for(var q=0;!(q>=d.length);q+=2){a.add(d.Y(q));if(q+1>=d.length)break;c.add(d.Y(q+1))}this.direction===Qn?(this.Xe===Xn&&a.reverse(),d=new N(Dq),d.md(a),d.md(c)):(this.Xe===Xn&&c.reverse(),d=new N(Dq),d.md(c),d.md(a))}for(var s=
d.length,t=m=0,q=0;q<d.length;q++){var n=k+l*t*(this.direction===Sn?1:-1)/s,v=d.Y(q).diameter;isNaN(v)&&(v=Eq(d.Y(q),n));360>l&&(0===q||q===d.length-1)&&(v/=2);m+=v;t++}if(isNaN(g)||e===Xn){isNaN(b)&&(b=6);if(e!==Wn&&e!==Xn){v=-Infinity;for(q=0;q<s;q++){var p=d.Y(q),x=d.Y(q===s-1?0:q+1);isNaN(p.diameter)&&Eq(p,0);isNaN(x.diameter)&&Eq(x,0);v=Math.max(v,(p.diameter+x.diameter)/2)}p=v+b;e===Un?(n=2*Math.PI/s,g=(v+b)/n):g=Fq(this,p*(360<=l?s:s-1),h,k*Math.PI/180,l*Math.PI/180)}else g=Fq(this,m+(360<=
l?s:s-1)*(e!==Xn?b:1.6*b),h,k*Math.PI/180,l*Math.PI/180);n=g*h}else if(n=g*h,t=Gq(this,g,n,k*Math.PI/180,l*Math.PI/180),isNaN(b)){if(e===Wn||e===Xn)b=(t-m)/(360<=l?s:s-1)}else if(e===Wn||e===Xn)q=(t-m)/(360<=l?s:s-1),q<b?(g=Fq(this,m+b*(360<=l?s:s-1),h,k*Math.PI/180,l*Math.PI/180),n=g*h):b=q;else{v=-Infinity;for(q=0;q<s;q++)p=d.Y(q),x=d.Y(q===s-1?0:q+1),isNaN(p.diameter)&&Eq(p,0),isNaN(x.diameter)&&Eq(x,0),v=Math.max(v,(p.diameter+x.diameter)/2);p=v+b;q=Fq(this,p*(360<=l?s:s-1),h,k*Math.PI/180,l*
Math.PI/180);q>g?(g=q,n=g*h):p=t/(360<=l?s:s-1)}this.tw=e;this.Tz=f;this.Oc=g;this.vm=h;this.uw=k;this.Vo=l;this.wj=b;this.mB=m;this.Af=n;this.Ws=p;b=d;d=this.tw;e=this.Oc;f=this.uw;h=this.Vo;k=this.wj;l=this.Af;m=this.Ws;if(this.direction!==Qn&&this.direction!==Rn||d!==Xn)if(this.direction===Qn||this.direction===Rn){g=0;switch(d){case Vn:g=180*Hq(this,e,l,f,m)/Math.PI;break;case Wn:m=b=0;g=a.first();null!==g&&(b=Eq(g,Math.PI/2));g=c.first();null!==g&&(m=Eq(g,Math.PI/2));g=180*Hq(this,e,l,f,k+(b+
m)/2)/Math.PI;break;case Un:g=h/b.length}if(this.direction===Qn){switch(d){case Vn:Iq(this,a,f,Tn);break;case Wn:Jq(this,a,f,Tn);break;case Un:Kq(this,a,h/2,f,Tn)}switch(d){case Vn:Iq(this,c,f+g,Sn);break;case Wn:Jq(this,c,f+g,Sn);break;case Un:Kq(this,c,h/2,f+g,Sn)}}else{switch(d){case Vn:Iq(this,c,f,Tn);break;case Wn:Jq(this,c,f,Tn);break;case Un:Kq(this,c,h/2,f,Tn)}switch(d){case Vn:Iq(this,a,f+g,Sn);break;case Wn:Jq(this,a,f+g,Sn);break;case Un:Kq(this,a,h/2,f+g,Sn)}}}else switch(d){case Vn:Iq(this,
b,f,this.direction);break;case Wn:Jq(this,b,f,this.direction);break;case Un:Kq(this,b,h,f,this.direction);break;case Xn:Lq(this,b,h,f,this.direction)}else Lq(this,b,h,f-h/2,Sn)}this.updateParts();this.network=null;this.Me=!0};
function Kq(a,b,c,d,e){var f=a.Vo,g=a.Oc;a=a.Af;d=d*Math.PI/180;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=d+(e===Sn?k*c/(360<=f?h:h-1):-(k*c)/h),m=b.Y(k),n=g*Math.tan(l)/a,n=Math.sqrt((g*g+a*a*n*n)/(1+n*n));m.ua=n*Math.cos(l);m.Da=n*Math.sin(l);m.actualAngle=180*l/Math.PI}}
function Jq(a,b,c,d){var e=a.Oc,f=a.Af,g=a.wj;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=b.Y(k),m=b.Y(k===h-1?0:k+1),n=f*Math.sin(c);l.ua=e*Math.cos(c);l.Da=n;l.actualAngle=180*c/Math.PI;isNaN(l.diameter)&&Eq(l,0);isNaN(m.diameter)&&Eq(m,0);l=Hq(a,e,f,d===Sn?c:-c,(l.diameter+m.diameter)/2+g);c+=d===Sn?l:-l}}
function Iq(a,b,c,d){var e=a.Oc,f=a.Af,g=a.Ws;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=b.Y(k);l.ua=e*Math.cos(c);l.Da=f*Math.sin(c);l.actualAngle=180*c/Math.PI;l=Hq(a,e,f,d===Sn?c:-c,g);c+=d===Sn?l:-l}}function Lq(a,b,c,d,e){var f=a.Zs,f=a.Vo;a.bl=0;a.su=new Bq;if(360>c){for(f=d+(e===Sn?f:-f);0>f;)f+=360;f%=360;180<f&&(f-=360);f*=Math.PI/180;a.Zs=f;Mq(a,b,c,d,e)}else Nq(a,b,c,d,e);a.su.commit(b)}
function Nq(a,b,c,d,e){var f=a.Oc,g=a.wj,h=a.vm,k=f*Math.cos(d*Math.PI/180),l=a.Af*Math.sin(d*Math.PI/180),m=b.be();if(3===m.length)m[0].ua=f,m[0].Da=0,m[1].ua=m[0].ua-m[0].width/2-m[1].width/2-g,m[1].y=m[0].y,m[2].ua=(m[0].ua+m[1].ua)/2,m[2].y=m[0].y-m[2].height-g;else if(4===m.length)m[0].ua=f,m[0].Da=0,m[2].ua=-m[0].ua,m[2].Da=m[0].Da,m[1].ua=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-g,m[3].ua=0,m[3].y=Math.max(m[0].y+m[0].height+g,m[2].y+m[2].height+g);else{for(var f=Va(),n=0;n<m.length;n++){m[n].ua=
k;m[n].Da=l;if(n>=m.length-1)break;Oq(a,k,l,m,n,e,f)||Pq(a,k,l,m,n,e,f);k=f.x;l=f.y}A(f);a.bl++;if(!(23<a.bl)){var k=m[0].ua,l=m[0].Da,f=m[m.length-1].ua,n=m[m.length-1].Da,p=Math.abs(k-f)-((m[0].width+m[m.length-1].width)/2+g),q=Math.abs(l-n)-((m[0].height+m[m.length-1].height)/2+g),g=0;1>Math.abs(q)?Math.abs(k-f)<(m[0].width+m[m.length-1].width)/2&&(g=0):g=0<q?q:1>Math.abs(p)?0:p;p=!1;p=Math.abs(f)>Math.abs(n)?0<f!==l>n:0<n!==k<f;if(p=e===Sn?p:!p)g=-Math.abs(g),g=Math.min(g,-m[m.length-1].width),
g=Math.min(g,-m[m.length-1].height);a.su.compare(g,m);1<Math.abs(g)&&(a.Oc=8>a.bl?a.Oc-g/(2*Math.PI):5>m.length&&10<g?a.Oc/2:a.Oc-(0<g?1.7:-2.3),a.Af=a.Oc*h,Nq(a,b,c,d,e))}}}
function Mq(a,b,c,d,e){for(var f=a.Oc,g=a.Af,h=a.vm,k=f*Math.cos(d*Math.PI/180),l=g*Math.sin(d*Math.PI/180),m=Va(),n=b.be(),p=0;p<n.length;p++){n[p].ua=k;n[p].Da=l;if(p>=n.length-1)break;Oq(a,k,l,n,p,e,m)||Pq(a,k,l,n,p,e,m);k=m.x;l=m.y}A(m);a.bl++;if(!(23<a.bl)){k=Math.atan2(l,k);k=e===Sn?a.Zs-k:k-a.Zs;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;f=k*(f+g)/2;g=a.su;if(Math.abs(f)<Math.abs(g.Dn))for(g.Dn=f,g.Vl=[],g.po=[],k=0;k<n.length;k++)g.Vl[k]=n[k].Qa.x,g.po[k]=n[k].Qa.y;1<Math.abs(f)&&(a.Oc=
8>a.bl?a.Oc-f/(2*Math.PI):a.Oc-(0<f?1.7:-2.3),a.Af=a.Oc*h,Mq(a,b,c,d,e))}}function Oq(a,b,c,d,e,f,g){var h=a.Oc,k=a.Af,l=0,m=0;a=(d[e].width+d[e+1].width)/2+a.wj;var n=!1;if(0<=c!==(f===Sn)){if(l=b+a,l>h){l=b-a;if(l<-h)return g.x=l,g.y=m,!1;n=!0}}else if(l=b-a,l<-h){l=b+a;if(l>h)return g.x=l,g.y=m,!1;n=!0}m=Math.sqrt(1-Math.min(1,l*l/(h*h)))*k;0>c!==n&&(m=-m);if(Math.abs(c-m)>(d[e].height+d[e+1].height)/2)return g.x=l,g.y=m,!1;g.x=l;g.y=m;return!0}
function Pq(a,b,c,d,e,f,g){var h=a.Oc,k=a.Af,l=0,m=0;a=(d[e].height+d[e+1].height)/2+a.wj;d=!1;if(0<=b!==(f===Sn)){if(m=c-a,m<-k){m=c+a;if(m>k){g.x=l;g.y=m;return}d=!0}}else if(m=c+a,m>k){m=c-a;if(m<-k){g.x=l;g.y=m;return}d=!0}l=Math.sqrt(1-Math.min(1,m*m/(k*k)))*h;0>b!==d&&(l=-l);g.x=l;g.y=m}Kn.prototype.commitLayout=function(){this.commitNodes();this.Qr&&this.commitLinks()};
Kn.prototype.commitNodes=function(){for(var a=this.rE,b=this.network.vertexes.i;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};Kn.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
function Gq(a,b,c,d,e){var f=a.jE;if(.001>Math.abs(a.vm-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var g=0,h=0,h=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1)),k=0,l=0;l<=f;l++)k=void 0!==d&&void 0!==e?d+l*e/f:l*Math.PI/(2*f),k=Math.sin(k),g+=Math.sqrt(1-a*a*k*k)*h;return void 0!==d&&void 0!==e?(b>c?b:c)*g:4*(b>c?b:c)*g}function Fq(a,b,c,d,e){var f=0,f=void 0!==d&&void 0!==e?Gq(a,1,c,d,e):Gq(a,1,c);return b/f}
function Hq(a,b,c,d,e){if(.001>Math.abs(a.vm-1))return e/b;var f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var h=0;;h++){var k=Math.sin(d+h*a),g=g+(b>c?b:c)*Math.sqrt(1-f*f*k*k)*a;if(g>=e)return h*a}}
Kn.prototype.sort=function(a){switch(this.sorting){case Nn:break;case On:a.reverse();break;case Ln:a.sort(this.comparer);break;case Mn:a.sort(this.comparer);a.reverse();break;case Pn:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new N(Dq),c=0;c<a.length;c++){var e=-1,f=-1;if(0===c)for(var g=0;g<a.length;g++){var h=a.Y(g).eF;h>e&&(e=h,f=g)}else for(g=0;g<a.length;g++)h=b[g],h>e&&(e=h,f=g);d.add(a.Y(f));b[f]=-1;f=a.Y(f);e=0;for(g=f.Mb;g.next();)e=a.indexOf(g.value.fromVertex),0>e||0<=b[e]&&b[e]++;
for(f=f.Gb;f.next();)e=a.indexOf(f.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){g=d.Y(b);a[b]=[];for(var k=0,c=g.Gb;c.next();)k=d.indexOf(c.value.toVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k);for(c=g.Mb;c.next();)k=d.indexOf(c.value.fromVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k)}g=[];for(b=0;b<a.length;b++)g[b]=0;for(var c=[],h=[],l=[],e=[],f=new N(Dq),m=0,b=0;b<a.length;b++){var n=a[b].length;if(1===n)e.push(b);else if(0===n)f.add(d.Y(b));else{if(0===m)c.push(b);else{for(var p=
Infinity,q=Infinity,s=-1,t=[],n=0;n<c.length;n++)0>a[c[n]].indexOf(c[n===c.length-1?0:n+1])&&t.push(n===c.length-1?0:n+1);if(0===t.length)for(n=0;n<c.length;n++)t.push(n);for(n=0;n<t.length;n++){var v=t[n],x,k=a[b];x=h;for(var B=l,y=g,C=v,K=c,J=0,ba=0;ba<x.length;ba++){var ja=y[x[ba]],Y=y[B[ba]],P=0,ha=0;ja<Y?(P=ja,ha=Y):(P=Y,ha=ja);if(P<C&&C<=ha)for(ja=0;ja<k.length;ja++)Y=k[ja],0>K.indexOf(Y)||P<y[Y]&&y[Y]<ha||P===y[Y]||ha===y[Y]||J++;else for(ja=0;ja<k.length;ja++)Y=k[ja],0>K.indexOf(Y)||P<y[Y]&&
y[Y]<ha&&P!==y[Y]&&ha!==y[Y]&&J++}x=J;for(y=B=0;y<a[b].length;y++)k=c.indexOf(a[b][y]),0<=k&&(k=Math.abs(v-(k>=v?k+1:k)),B+=k<c.length+1-k?k:c.length+1-k);for(y=0;y<h.length;y++)k=g[h[y]],C=g[l[y]],k>=v&&k++,C>=v&&C++,k>C&&(K=C,C=k,k=K),C-k<(c.length+2)/2===(k<v&&v<=C)&&B++;if(x<p||x===p&&B<q)p=x,q=B,s=v}c.splice(s,0,b);for(n=0;n<c.length;n++)g[c[n]]=n;for(n=0;n<a[b].length;n++)p=a[b][n],0<=c.indexOf(p)&&(h.push(b),l.push(p))}m++}}h=!1;for(l=c.length;;){h=!0;for(g=0;g<e.length;g++)if(b=e[g],m=a[b][0],
k=c.indexOf(m),0<=k){for(q=n=0;q<a[m].length;q++)p=a[m][q],p=c.indexOf(p),0>p||p===k||(s=p>k?p-k:k-p,n+=p<k!==s>l-s?1:-1);c.splice(0>n?k:k+1,0,b);e.splice(g,1);g--}else h=!1;if(h)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)k=c[b],f.add(d.Y(k));return f;default:u("Invalid sorting type.")}return a};G(Kn,{qG:"radius"},function(){return this.pq},function(a){this.pq!==a&&(w(a,"number",Kn,"radius"),0<a||isNaN(a))&&(this.pq=a,this.v())});
G(Kn,{zE:"aspectRatio"},function(){return this.Bo},function(a){this.Bo!==a&&(w(a,"number",Kn,"aspectRatio"),0<a&&(this.Bo=a,this.v()))});G(Kn,{ae:"startAngle"},function(){return this.Qq},function(a){this.Qq!==a&&(w(a,"number",Kn,"startAngle"),this.Qq=a,this.v())});G(Kn,{gf:"sweepAngle"},function(){return this.Sq},function(a){this.Sq!==a&&(w(a,"number",Kn,"sweepAngle"),this.Sq=0<a&&360>=a?a:360,this.v())});
G(Kn,{Xe:"arrangement"},function(){return this.tc},function(a){this.tc!==a&&(va(a,Kn,Kn,"arrangement"),a===Xn||a===Wn||a===Vn||a===Un)&&(this.tc=a,this.v())});G(Kn,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(va(a,Kn,Kn,"direction"),a===Sn||a===Tn||a===Qn||a===Rn)&&(this.aa=a,this.v())});G(Kn,{sorting:"sorting"},function(){return this.Tg},function(a){this.Tg!==a&&(va(a,Kn,Kn,"sorting"),a===Nn||a===On||a===Ln||Mn||a===Pn)&&(this.Tg=a,this.v())});
G(Kn,{comparer:"comparer"},function(){return this.Bg},function(a){this.Bg!==a&&(w(a,"function",Kn,"comparer"),this.Bg=a,this.v())});G(Kn,{spacing:"spacing"},function(){return this.Ug},function(a){this.Ug!==a&&(w(a,"number",Kn,"spacing"),this.Ug=a,this.v())});G(Kn,{lv:"nodeDiameterFormula"},function(){return this.cq},function(a){this.cq!==a&&(va(a,Kn,Kn,"nodeDiameterFormula"),a===Zn||a===Yn)&&(this.cq=a,this.v())});H(Kn,{sE:"actualXRadius"},function(){return this.Oc});H(Kn,{tE:"actualYRadius"},function(){return this.Af});
H(Kn,{gH:"actualSpacing"},function(){return this.wj});H(Kn,{rE:"actualCenter"},function(){return isNaN(this.nd.x)||isNaN(this.nd.y)?new z(0,0):new z(this.nd.x+this.sE,this.nd.y+this.tE)});var Wn;Kn.ConstantSpacing=Wn=I(Kn,"ConstantSpacing",0);var Vn;Kn.ConstantDistance=Vn=I(Kn,"ConstantDistance",1);var Un;Kn.ConstantAngle=Un=I(Kn,"ConstantAngle",2);var Xn;Kn.Packed=Xn=I(Kn,"Packed",3);var Sn;Kn.Clockwise=Sn=I(Kn,"Clockwise",4);var Tn;Kn.Counterclockwise=Tn=I(Kn,"Counterclockwise",5);var Qn;
Kn.BidirectionalLeft=Qn=I(Kn,"BidirectionalLeft",6);var Rn;Kn.BidirectionalRight=Rn=I(Kn,"BidirectionalRight",7);var Nn;Kn.Forwards=Nn=I(Kn,"Forwards",8);var On;Kn.Reverse=On=I(Kn,"Reverse",9);var Ln;Kn.Ascending=Ln=I(Kn,"Ascending",10);var Mn;Kn.Descending=Mn=I(Kn,"Descending",11);var Pn;Kn.Optimized=Pn=I(Kn,"Optimized",12);var Zn;Kn.Pythagorean=Zn=I(Kn,"Pythagorean",13);var Yn;Kn.Circular=Yn=I(Kn,"Circular",14);function Bq(){this.Dn=-Infinity;this.po=this.Vl=null}
Bq.prototype.compare=function(a,b){if(0<a&&0>this.Dn||Math.abs(a)<Math.abs(this.Dn)&&!(0>a&&0<this.Dn)){this.Dn=a;this.Vl=[];this.po=[];for(var c=0;c<b.length;c++)this.Vl[c]=b[c].Qa.x,this.po[c]=b[c].Qa.y}};Bq.prototype.commit=function(a){if(null!==this.Vl&&null!==this.po)for(var b=0;b<this.Vl.length;b++){var c=a.Y(b);c.x=this.Vl[b];c.y=this.po[b]}};function Cq(){kc.call(this)}yb(Cq,kc);vb("CircularNetwork",Cq);Cq.prototype.createVertex=function(){return new Dq};Cq.prototype.createEdge=function(){return new Qq};
function Dq(){lc.call(this);this.actualAngle=this.diameter=NaN}yb(Dq,lc);vb("CircularVertex",Dq);
function Eq(a,b){var c=a.network;if(null===c)return NaN;c=c.ub;if(null===c)return NaN;if(c.Xe===Xn)if(c.lv===Yn)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.lv===Yn?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function Qq(){sc.call(this)}yb(Qq,sc);vb("CircularEdge",Qq);
function Rq(){0<arguments.length&&Aa(Rq);lg.call(this);this.zf=null;this.zp=0;this.kf=(new Za(100,100)).freeze();this.Ao=!1;this.Sg=!0;this.Ag=!1;this.Sm=100;this.Xo=1;this.Kg=1E3;this.qq=Math;this.qm=.05;this.pm=50;this.mm=150;this.om=0;this.Ro=10;this.Qo=5}yb(Rq,lg);vb("ForceDirectedLayout",Rq);
Rq.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.kf.assign(this.kf);a.Ao=this.Ao;a.Sg=this.Sg;a.Ag=this.Ag;a.Sm=this.Sm;a.Xo=this.Xo;a.Kg=this.Kg;a.qq=this.qq;a.qm=this.qm;a.pm=this.pm;a.mm=this.mm;a.om=this.om;a.Ro=this.Ro;a.Qo=this.Qo};Rq.prototype.createNetwork=function(){return new Sq};
Rq.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.qy;if(0<this.network.vertexes.count){this.network.Nu();for(var b=this.network.vertexes.i;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.i;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.Cx();this.zp=0;if(this.needsClusterLayout()){b=this.network;for(c=b.QG().i;c.next();){this.network=c.value;for(var d=this.network.vertexes.i;d.next();){var e=d.value;e.ef=e.vertexes.count;e.bj=1;e.yl=null;e.vg=null}Tq(this,0,a)}this.network=b;c.reset();for(var d=this.EB,f=c.count,g=!0,h=e=0,k=ob(),l=0;l<f+b.vertexes.count+2;l++)k[l]=null;f=0;c.reset();for(var m=bb();c.next();)if(l=c.value,this.Bf(l,m),g)g=!1,e=m.x+m.width/2,h=m.y+m.height/2,k[0]=new z(m.x+m.width+d.width,m.y),k[1]=new z(m.x,
m.y+m.height+d.height),f=2;else{var n=Uq(k,f,e,h,m.width,m.height,d),p=k[n],q=new z(p.x+m.width+d.width,p.y),s=new z(p.x,p.y+m.height+d.height);n+1<f&&k.splice(n+1,0,null);k[n]=q;k[n+1]=s;f++;n=p.x-m.x;p=p.y-m.y;for(l=l.vertexes.i;l.next();)q=l.value,q.ua+=n,q.Da+=p}fb(m);for(l=b.vertexes.i;l.next();)g=l.value,m=g.Qa,2>f?(e=m.x+m.width/2,h=m.y+m.height/2,k[0]=new z(m.x+m.width+d.width,m.y),k[1]=new z(m.x,m.y+m.height+d.height),f=2):(n=Uq(k,f,e,h,m.width,m.height,d),p=k[n],q=new z(p.x+m.width+d.width,
p.y),s=new z(p.x,p.y+m.height+d.height),n+1<f&&k.splice(n+1,0,null),k[n]=q,k[n+1]=s,f++,g.ua=p.x+g.width/2,g.Da=p.y+g.height/2);pb(k);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.i;e.next();)b.Wj(e.value);for(d=d.edges.i;d.next();)b.nn(d.value)}}Vq(this,a);this.updateParts()}this.Sm=a;this.network=null;this.Me=!0};
Rq.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().Qa,d=this.network.vertexes.i;d.next();){if(d.value.Qa.If(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};Rq.prototype.Bf=function(a,b){for(var c=!0,d=a.vertexes.i;d.next();){var e=d.value;c?(c=!1,b.set(e.Qa)):b.fh(e.Qa)}return b};
function Tq(a,b,c){if(Wq(a,b)){var d=a.Kg;a.Kg*=1+1/(b+1);var e=Xq(a,b),f=Math.max(0,Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10));a.qy+=f;Tq(a,b+1,c);Vq(a,f);Yq(a,e);b=a.zf;null===b?b=new N(Zq):b.clear();b.md(e.vertexes);b.sort(function(a,b){return null===a||null===b||a===b?0:b.ef-a.ef});for(e=b.i;e.next();)$q(a,e.value);a.Kg=d}}
function Wq(a,b){if(10<b||3>a.network.vertexes.count)return!1;null===a.zf?a.zf=new N(Zq):a.zf.clear();a.zf.md(a.network.vertexes);var c=a.zf;c.sort(function(a,b){return null===a||null===b||a===b?0:b.ef-a.ef});for(var d=c.count-1;0<=d&&1>=c.Y(d).ef;)d--;return 1<c.count-d}
function Xq(a,b){for(var c=a.network,d=new Sq,e=a.zf.i;e.next();){var f=e.value;if(1<f.ef){d.Wj(f);var g=new fr;g.Nv=f.ef;g.Qv=f.width;g.Mv=f.height;g.hz=f.B.x;g.iz=f.B.y;null===f.vg&&(f.vg=new N(fr));f.vg.add(g);f.Py=f.vg.count-1}else break}for(var h=c.edges.i;h.next();)if(e=h.value,e.fromVertex.network===d&&e.toVertex.network===d)d.nn(e);else if(e.fromVertex.network===d){var k=e.fromVertex.yl;null===k&&(k=new N(Zq),e.fromVertex.yl=k);k.add(e.toVertex);e.fromVertex.ef--;e.fromVertex.bj+=e.toVertex.bj}else e.toVertex.network===
d&&(k=e.toVertex.yl,null===k&&(k=new N(Zq),e.toVertex.yl=k),k.add(e.fromVertex),e.toVertex.ef--,e.toVertex.bj+=e.fromVertex.bj);for(e=d.edges.i;e.next();)f=e.value,f.length*=Math.max(1,Q.sqrt((f.fromVertex.bj+f.toVertex.bj)/(4*b+1)));for(e=d.vertexes.i;e.next();)if(f=e.value,k=f.yl,null!==k&&0<k.count&&(g=f.vg.Y(f.vg.count-1),g=g.Nv-f.ef,!(0>=g))){for(var l=0,m=0,n=k.count-g;n<k.count;n++){for(var p=k.Y(n),q=null,h=p.edges.i;h.next();){var s=h.value;if(s.nF(p)===f){q=s;break}}null!==q&&(m+=q.length,
l+=p.width*p.height)}k=f.ua;h=f.Da;n=f.width;p=f.height;q=f.B;s=n*p;1>s&&(s=1);l=Q.sqrt((l+s+m*m*4/(g*g))/s);g=(l-1)*n/2;l=(l-1)*p/2;f.Qa=new D(k-q.x-g,h-q.y-l,n+2*g,p+2*l);f.focus=new z(q.x+g,q.y+l)}a.network=d;return c}function Yq(a,b){for(var c=a.network.vertexes.i;c.next();){var d=c.value;d.network=b;if(null!==d.vg){var e=d.vg.Y(d.Py);d.ef=e.Nv;var f=e.hz,g=e.iz;d.Qa=new D(d.ua-f,d.Da-g,e.Qv,e.Mv);d.focus=new z(f,g);d.Py--}}for(c=a.network.edges.i;c.next();)c.value.network=b;a.network=b}
function $q(a,b){var c=b.yl;if(null!==c&&0!==c.count){var d=b.ua,e=b.Da,f=b.width,g=b.height;null!==b.vg&&0<b.vg.count&&(g=b.vg.Y(0),f=g.Qv,g=g.Mv);for(var f=Q.sqrt(f*f+g*g)/2,h=!1,k=g=0,l=0,m=b.vertexes.i;m.next();){var n=m.value;1>=n.ef?k++:(h=!0,l++,g+=Math.atan2(b.Da-n.Da,b.ua-n.ua))}if(0!==k)for(0<l&&(g/=l),m=l=0,l=h?2*Math.PI/(k+1):2*Math.PI/k,0===k%2&&(m=l/2),1<c.count&&c.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),h=0===k%2?0:1,c=c.i;c.next();)if(k=
c.value,!(1<k.ef||a.isFixed(k))){for(var n=null,p=k.edges.i;p.next();){n=p.value;break}var p=k.width,q=k.height,p=Q.sqrt(p*p+q*q)/2,n=f+n.length+p,p=g+(l*(h/2>>1)+m)*(0===h%2?1:-1);k.ua=d+n*Math.cos(p);k.Da=e+n*Math.sin(p);h++}}}function Uq(a,b,c,d,e,f,g){var h=9E19,k=-1,l=0;a:for(;l<b;l++){var m=a[l],n=m.x-c,p=m.y-d,n=n*n+p*p;if(n<h){for(p=l-1;0<=p;p--)if(a[p].y>m.y&&a[p].x-m.x<e+g.width)continue a;for(p=l+1;p<b;p++)if(a[p].x>m.x&&a[p].y-m.y<f+g.height)continue a;k=l;h=n}}return k}
Rq.prototype.Cx=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Rq.prototype.addComments=function(a){var b=a.dc;if(null!==b)for(b=b.bC();b.next();){var c=b.value;if("Comment"===c.kc&&c.qa()){var d=this.network.Hl(c);null===d&&(d=this.network.gr(c));d.charge=this.TE;for(var c=null,e=d.Gb;e.next();){var f=e.value;if(f.toVertex===a){c=f;break}}if(null===c)for(e=d.Mb;e.next();)if(f=e.value,f.fromVertex===a){c=f;break}null===c&&(c=this.network.Qn(a,d,null));c.length=this.UE}}};
function jr(a,b){var c=a.P,d=c.x,e=c.y,f=c.width,c=c.height,g=b.P,h=g.x,k=g.y,l=g.width,g=g.height;return d+f<h?e>k+g?(d=d+f-h,e=e-k-g,Q.sqrt(d*d+e*e)):e+c<k?(d=d+f-h,e=e+c-k,Q.sqrt(d*d+e*e)):h-(d+f):d>h+l?e>k+g?(d=d-h-l,e=e-k-g,Q.sqrt(d*d+e*e)):e+c<k?(d=d-h-l,e=e+c-k,Q.sqrt(d*d+e*e)):d-(h+l):e>k+g?e-(k+g):e+c<k?k-(e+c):.1}function Vq(a,b){a.zf=null;for(var c=a.zp+b;a.zp<c&&(a.zp++,kr(a)););a.zf=null}
function kr(a){null===a.zf&&(a.zf=new N(Zq),a.zf.md(a.network.vertexes));var b=a.zf.l;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.ua,e=d,f=c.Da,g=f,c=1;c<b.length;c++){var h=b[c];h.forceX=0;h.forceY=0;var k=h.ua,h=h.Da,d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h)}(f=e-d>g-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.ua-b.ua}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.Da-b.Da});for(var g=a.Kg,l=0,m=0,n=0,c=0;c<b.length;c++){var h=
b[c],k=h.P,p=h.B,d=k.x+p.x,k=k.y+p.y,m=h.charge*a.electricalFieldX(d,k),n=h.charge*a.electricalFieldY(d,k),m=m+h.mass*a.gravitationalFieldX(d,k),n=n+h.mass*a.gravitationalFieldY(d,k);h.forceX+=m;h.forceY+=n;for(p=c+1;p<b.length;p++)if(e=b[p],e!==h){var q=e.P,m=e.B,n=q.x+m.x,q=q.y+m.y;if(d-n>g||n-d>g){if(f)break}else if(k-q>g||q-k>g){if(!f)break}else{var s=jr(h,e);1>s?(m=a.sv,null===m&&(a.sv=m=new Ac(0)),l=m.random(),s=m.random(),d>n?(m=Math.abs(e.P.right-h.P.x),m=(1+m)*l):d<n?(m=Math.abs(e.P.x-h.P.right),
m=-(1+m)*l):(m=Math.max(e.width,h.width),m=(1+m)*l-m/2),k>q?(n=Math.abs(e.P.bottom-h.P.y),n=(1+n)*s):d<n?(n=Math.abs(e.P.y-h.P.bottom),n=-(1+n)*s):(n=Math.max(e.height,h.height),n=(1+n)*s-n/2)):(l=-(h.charge*e.charge)/(s*s),m=(n-d)/s*l,n=(q-k)/s*l);h.forceX+=m;h.forceY+=n;e.forceX-=m;e.forceY-=n}}}for(c=a.network.edges.i;c.next();)f=c.value,h=f.fromVertex,e=f.toVertex,k=h.P,p=h.B,d=k.x+p.x,k=k.y+p.y,q=e.P,m=e.B,n=q.x+m.x,q=q.y+m.y,s=jr(h,e),1>s?(m=a.sv,null===m&&(a.sv=m=new Ac(0)),l=m.random(),s=
m.random(),m=(d>n?1:-1)*(1+(e.width>h.width)?e.width:h.width)*l,n=(k>q?1:-1)*(1+(e.height>h.height)?e.height:h.height)*s):(l=f.stiffness*(s-f.length),m=(n-d)/s*l,n=(q-k)/s*l),h.forceX+=m,h.forceY+=n,e.forceX-=m,e.forceY-=n;c=0;d=Math.max(a.Kg/20,50);for(e=0;e<b.length;e++)h=b[e],a.isFixed(h)?a.moveFixedVertex(h):(f=h.forceX,g=h.forceY,f<-d?f=-d:f>d&&(f=d),g<-d?g=-d:g>d&&(g=d),h.ua+=f,h.Da+=g,c=Math.max(c,f*f+g*g));return c>a.ZB*a.ZB}Rq.prototype.moveFixedVertex=function(){};
Rq.prototype.commitLayout=function(){this.Uy();this.commitNodes();this.Qr&&this.commitLinks()};Rq.prototype.Uy=function(){if(this.jo)for(var a=this.network.edges.i;a.next();){var b=a.value.link;null!==b&&(b.Za=ee,b.ab=ee)}};Rq.prototype.commitNodes=function(){var a=0,b=0;if(this.yE){var c=bb();this.Bf(this.network,c);b=this.nd;a=b.x-c.x;b=b.y-c.y;fb(c)}for(var c=bb(),d=this.network.vertexes.i;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.Qa),c.x+=a,c.y+=b,e.Qa=c;e.commit()}fb(c)};
Rq.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};Rq.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.qm:a};Rq.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.pm:a};Rq.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.mm:a};Rq.prototype.electricalFieldX=function(){return 0};Rq.prototype.electricalFieldY=function(){return 0};
Rq.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.om:a};Rq.prototype.gravitationalFieldX=function(){return 0};Rq.prototype.gravitationalFieldY=function(){return 0};Rq.prototype.isFixed=function(a){return a.isFixed};H(Rq,{GH:"currentIteration"},function(){return this.zp});G(Rq,{EB:"arrangementSpacing"},function(){return this.kf},function(a){ra(a,Za,Rq,"arrangementSpacing");this.kf.A(a)||(this.kf.assign(a),this.v())});
G(Rq,{yE:"arrangesToOrigin"},function(){return this.Ao},function(a){this.Ao!==a&&(w(a,"boolean",Rq,"arrangesToOrigin"),this.Ao=a,this.v())});G(Rq,{jo:"setsPortSpots"},function(){return this.Sg},function(a){this.Sg!==a&&(w(a,"boolean",Rq,"setsPortSpots"),this.Sg=a,this.v())});G(Rq,{comments:"comments"},function(){return this.Ag},function(a){this.Ag!==a&&(w(a,"boolean",Rq,"comments"),this.Ag=a,this.v())});
G(Rq,{qy:"maxIterations"},function(){return this.Sm},function(a){this.Sm!==a&&(w(a,"number",Rq,"maxIterations"),0<=a&&(this.Sm=a,this.v()))});G(Rq,{ZB:"epsilonDistance"},function(){return this.Xo},function(a){this.Xo!==a&&(w(a,"number",Rq,"epsilonDistance"),0<a&&(this.Xo=a,this.v()))});G(Rq,{$H:"infinityDistance"},function(){return this.Kg},function(a){this.Kg!==a&&(w(a,"number",Rq,"infinityDistance"),1<a&&(this.Kg=a,this.v()))});
G(Rq,{sv:"randomNumberGenerator"},function(){return this.qq},function(a){this.qq!==a&&(null!==a&&"function"!==typeof a.random&&u('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.qq=a)});G(Rq,{TH:"defaultSpringStiffness"},function(){return this.qm},function(a){this.qm!==a&&(w(a,"number",Rq,"defaultSpringStiffness"),this.qm=a,this.v())});
G(Rq,{SH:"defaultSpringLength"},function(){return this.pm},function(a){this.pm!==a&&(w(a,"number",Rq,"defaultSpringLength"),this.pm=a,this.v())});G(Rq,{MH:"defaultElectricalCharge"},function(){return this.mm},function(a){this.mm!==a&&(w(a,"number",Rq,"defaultElectricalCharge"),this.mm=a,this.v())});G(Rq,{NH:"defaultGravitationalMass"},function(){return this.om},function(a){this.om!==a&&(w(a,"number",Rq,"defaultGravitationalMass"),this.om=a,this.v())});
G(Rq,{UE:"defaultCommentSpringLength"},function(){return this.Ro},function(a){this.Ro!==a&&(w(a,"number",Rq,"defaultCommentSpringLength"),this.Ro=a,this.v())});G(Rq,{TE:"defaultCommentElectricalCharge"},function(){return this.Qo},function(a){this.Qo!==a&&(w(a,"number",Rq,"defaultCommentElectricalCharge"),this.Qo=a,this.v())});function fr(){this.iz=this.hz=this.Mv=this.Qv=this.Nv=0}function Sq(){kc.call(this)}yb(Sq,kc);vb("ForceDirectedNetwork",Sq);Sq.prototype.createVertex=function(){return new Zq};
Sq.prototype.createEdge=function(){return new lr};function Zq(){lc.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.bj=this.ef=this.forceY=this.forceX=0;this.vg=this.yl=null;this.Py=0}yb(Zq,lc);vb("ForceDirectedVertex",Zq);function lr(){sc.call(this);this.length=this.stiffness=NaN}yb(lr,sc);vb("ForceDirectedEdge",lr);
function un(){0<arguments.length&&Aa(un);lg.call(this);this.Nc=this.Xk=25;this.aa=0;this.lm=mr;this.Qm=nr;this.Fm=or;this.Uk=4;this.am=pr;this.Ch=qr;this.Sg=!0;this.ri=4;this.mb=this.Gt=this.Pa=-1;this.Te=this.Rp=0;this.pb=this.Se=this.qf=this.ag=this.dd=null;this.Yp=0;this.Xp=this.Zk=null;this.tf=0;this.Zp=null;this.cg=[];this.cg.length=100}yb(un,lg);vb("LayeredDigraphLayout",un);
un.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.Xk=this.Xk;a.Nc=this.Nc;a.aa=this.aa;a.lm=this.lm;a.Qm=this.Qm;a.Fm=this.Fm;a.Uk=this.Uk;a.am=this.am;a.Ch=this.Ch;a.Sg=this.Sg;a.ri=this.ri};un.prototype.createNetwork=function(){return new rr};
un.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.nd=this.initialOrigin(this.nd);this.Gt=-1;this.Te=this.Rp=0;this.Zp=this.Xp=this.Zk=null;for(a=0;a<this.cg.length;a++)this.cg[a]=null;if(0<this.network.vertexes.count){this.network.Nu();for(a=this.network.edges.i;a.next();)a.value.rev=!1;switch(this.lm){default:case sr:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.i;d.next();)d.value.valid=!0;for(;null!==tr(this.network);){for(d=ur(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=ur(this.network);for(d=vr(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=vr(this.network);for(var d=null,e=0,f=this.network.vertexes.i;f.next();){var g=f.value;if(g.valid){for(var h=0,k=g.Gb;k.next();)k.value.toVertex.valid&&h++;for(var k=0,l=g.Mb;l.next();)l.value.fromVertex.valid&&k++;if(null===d||e<h-k)d=g,e=h-k}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.i;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.tv(b),b.rev=!0);break;case mr:for(b=this.network.vertexes.i;b.next();)a=b.value,a.zn=-1,a.finish=-1;for(a=this.network.edges.i;a.next();)a.value.forest=!1;this.Yp=0;for(b.reset();b.next();)c=b.value,0===c.Mb.count&&wr(this,c);for(b.reset();b.next();)c=b.value,-1===c.zn&&wr(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,f=e.finish,e.zn<c.zn&&d<f&&(this.network.tv(b),b.rev=!0))}for(a=this.network.vertexes.i;a.next();)a.value.layer=-1;this.Pa=-1;this.assignLayers();for(a.reset();a.next();)this.Pa=Math.max(this.Pa,a.value.layer);a=[];for(c=this.network.edges.i;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.Fc&&null!==b.toVertex.Fc||b.fromVertex.layer!==b.toVertex.layer)){k=g=h=f=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){h=b.link;
if(null===h)continue;var m=e.Fc,f=d.Fc;if(null===m||null===f)continue;var n=h.M,g=h.R,p=h.Jc,k=h.yd;b.rev&&(h=n,l=p,n=g,p=k,g=h,k=l);var q=e.B,h=b.toVertex.B,s=b.rev?d.P:e.P,l=Va();s.w()?(lp(n,p,Dd,l),l.w()||l.assign(q)):l.assign(q);m!==n&&s.w()&&n.qa()&&(m=e.P,m.w()&&(l.x+=s.x-m.x,l.y+=s.y-m.y));n=b.rev?e.P:d.P;m=Va();n.w()?(lp(g,k,Dd,m),m.w()||m.assign(h)):m.assign(h);f!==g&&n.w()&&g.qa()&&(f=d.P,f.w()&&(m.x+=n.x-f.x,m.y+=n.y-f.y));90===this.aa||270===this.aa?(f=Math.round((l.x-q.x)/this.Nc),g=
l.x,h=Math.round((m.x-h.x)/this.Nc),k=m.x):(f=Math.round((l.y-q.y)/this.Nc),g=l.y,h=Math.round((m.y-h.y)/this.Nc),k=m.y);A(l);A(m);b.portFromColOffset=f;b.portFromPos=g;b.portToColOffset=h;b.portToPos=k}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;l=e.layer;q=d.layer;m=b;n=0;s=m.link;if(null!==s){var t=s.Jc,v=s.yd;if(null!==t&&null!==v){var x=s.M,p=s.R;if(null!==x&&null!==p){var B=t.Za,y=v.ab;this.jo||(s.Za.lc()||(B=s.Za),s.ab.lc()||(y=s.ab));if(B.lc()||B===td)B=xr(this,
!0);if(y.lc()||y===td)y=xr(this,!1);var C=s.Ib,K=s.getLinkPoint(x,t,B,!0,C,p,v,Va()),B=s.getLinkDirection(x,t,K,B,!0,C,p,v);A(K);B===yr(this,m,!0)?n+=1:this.jo&&null!==x&&1===x.ports.count&&m.rev&&(n+=1);K=s.getLinkPoint(p,v,y,!1,C,x,t,Va());s=s.getLinkDirection(p,v,K,y,!1,C,x,t);A(K);s===yr(this,m,!1)?n+=2:this.jo&&null!==p&&1===p.ports.count&&m.rev&&(n+=2)}}}m=1===n||3===n?!0:!1;if(n=2===n||3===n?!0:!1)p=this.network.createVertex(),p.Fc=null,p.vl=1,p.layer=l,p.near=e,this.network.Wj(p),e=this.network.Qn(e,
p,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=g,e.portToPos=0,e=p;s=1;m&&s--;if(l-q>s&&0<l){b.valid=!1;p=this.network.createVertex();p.Fc=null;p.vl=2;p.layer=l-1;this.network.Wj(p);e=this.network.Qn(e,p,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=n?0:f;e.portToColOffset=0;e.portFromPos=n?0:g;e.portToPos=0;e=p;for(l--;l-q>s&&0<l;)p=this.network.createVertex(),p.Fc=null,p.vl=3,p.layer=l-1,this.network.Wj(p),e=this.network.Qn(e,p,b.link),e.valid=!0,e.rev=
b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=p,l--;e=this.network.Qn(p,d,b.link);e.valid=!m;m&&(p.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=h;e.portFromPos=0;e.portToPos=k}else b.valid=!0}b=this.dd=[];for(c=0;c<=this.Pa;c++)b[c]=0;for(a=this.network.vertexes.i;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.Gt=-1;for(c=this.Te=this.Rp=0;c<=this.Pa;c++)b[c]>b[this.Te]&&(this.Gt=b[c]-1,this.Te=c),b[c]<b[this.Rp]&&(this.Rp=c);this.Zp=
[];for(c=0;c<b.length;c++)this.Zp[c]=[];for(a.reset();a.next();)b=a.value,c=this.Zp[b.layer],c[b.index]=b;this.mb=-1;for(a=0;a<=this.Pa;a++){b=zr(this,a);c=0;d=this.dd[a];for(e=0;e<d;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.mb=Math.max(this.mb,c-1);Ar(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.Me=!0};
un.prototype.linkMinLength=function(a){var b=a.toVertex,c=0;for(a=a.fromVertex.Gb;a.next();)a.value.toVertex===b&&c++;return 1<c?2:1};function Br(a){var b=a.fromVertex.Fc;a=a.toVertex.Fc;return null===b&&null===a?8:null===b||null===a?4:1}un.prototype.nodeMinLayerSpace=function(a,b){return null===a.Fc?0:90===this.aa||270===this.aa?b?a.B.y+10:a.P.height-a.B.y+10:b?a.B.x+10:a.P.width-a.B.x+10};
un.prototype.nodeMinColumnSpace=function(a,b){if(null===a.Fc)return 0;var c=b?a.zy:a.yy;if(null!==c)return c;c=this.aa;return 90===c||270===c?b?a.zy=a.B.x/this.Nc+1|0:a.yy=(a.P.width-a.B.x)/this.Nc+1|0:b?a.zy=a.B.y/this.Nc+1|0:a.yy=(a.P.height-a.B.y)/this.Nc+1|0};function Cr(a){null===a.Zk&&(a.Zk=[]);for(var b=0,c=a.network.vertexes.i;c.next();){var d=c.value;a.Zk[b]=d.layer;b++;a.Zk[b]=d.column;b++;a.Zk[b]=d.index;b++}return a.Zk}
function Dr(a,b){for(var c=0,d=a.network.vertexes.i;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function Er(a,b,c){var d=zr(a,b),e=a.dd[b];if(null===a.Xp||a.Xp.length<e*e)a.Xp=[];for(var f=a.Xp,g=0;g<e;g++){var h=0,k=d[g],l=k.near,m=0;if(null!==l&&l.layer===k.layer)if(m=l.index,m>g)for(var n=g+1;n<m;n++)k=d[n],k.near===l&&k.vl===l.vl||h++;else for(n=g-1;n>m;n--)k=d[n],k.near===l&&k.vl===l.vl||h++;var l=0,p,q=p=n=k=0,s,t=0,v=0;s=0;var x;if(0<=c)for(m=d[g].$d,l=0;l<m.count;l++)if(p=m.l[l],p.valid&&p.fromVertex.layer!==b)for(k=p.fromVertex.index,n=p.portToPos,p=p.portFromPos,q=l+1;q<m.count;q++)s=
m.l[q],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,v=s.portToPos,s=s.portFromPos,n<v&&(k>t||k===t&&p>s)&&h++,v<n&&(t>k||t===k&&s>p)&&h++);if(0>=c)for(m=d[g].Ud,l=0;l<m.count;l++)if(p=m.l[l],p.valid&&p.toVertex.layer!==b)for(k=p.toVertex.index,n=p.portToPos,p=p.portFromPos,q=l+1;q<m.count;q++)s=m.l[q],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,v=s.portToPos,s=s.portFromPos,p<s&&(k>t||k===t&&n>v)&&h++,s<p&&(t>k||t===k&&v>n)&&h++);f[g*e+g]=h;for(m=g+1;m<e;m++){var B=0,y=0;if(0<=c)for(h=
d[g].$d,x=d[m].$d,l=0;l<h.count;l++)if(p=h.l[l],p.valid&&p.fromVertex.layer!==b)for(k=p.fromVertex.index,p=p.portFromPos,q=0;q<x.count;q++)s=x.l[q],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,s=s.portFromPos,(k<t||k===t&&p<s)&&y++,(t<k||t===k&&s<p)&&B++);if(0>=c)for(h=d[g].Ud,x=d[m].Ud,l=0;l<h.count;l++)if(p=h.l[l],p.valid&&p.toVertex.layer!==b)for(k=p.toVertex.index,n=p.portToPos,q=0;q<x.count;q++)s=x.l[q],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,v=s.portToPos,(k<t||k===t&&n<
v)&&y++,(t<k||t===k&&v<n)&&B++);f[g*e+m]=B;f[m*e+g]=y}}Ar(a,b,d);return f}un.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.Pa;b++)for(var c=Er(this,b,1),d=this.dd[b],e=0;e<d;e++)for(var f=e;f<d;f++)a+=c[e*d+f];return a};
function Fr(a){for(var b=0,c=0;c<=a.Pa;c++){for(var d=a,e=c,f=zr(d,e),g=d.dd[e],h=0,k=0;k<g;k++){var l=null,l=f[k].Ud,m,n=0,p=0;if(null!==l)for(var q=0;q<l.count;q++)m=l.l[q],m.valid&&m.toVertex.layer!==e&&(n=m.fromVertex.column+m.portFromColOffset,p=m.toVertex.column+m.portToColOffset,h+=(Math.abs(n-p)+1)*Br(m))}Ar(d,e,f);b+=h}return b}
un.prototype.normalize=function(){var a=Infinity;this.mb=-1;for(var b=this.network.vertexes.i;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.mb=Math.max(this.mb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.mb-=a};
function Gr(a,b,c){for(var d=zr(a,b),e=a.dd[b],f=[],g=0;g<e;g++){var h=d[g],k=null;0>=c&&(k=h.$d);var l=null;0<=c&&(l=h.Ud);var m=0,n=0,p=h.near;null!==p&&p.layer===h.layer&&(m+=p.column-1,n++);if(null!==k)for(p=0;p<k.count;p++){var h=k.l[p],q=h.fromVertex;h.valid&&!h.rev&&q.layer!==b&&(m+=q.column+h.portFromColOffset,n++)}if(null!==l)for(k=0;k<l.count;k++)h=l.l[k],p=h.toVertex,h.valid&&!h.rev&&p.layer!==b&&(m+=p.column+h.portToColOffset,n++);f[g]=0===n?-1:m/n}Ar(a,b,d);return f}
function Hr(a,b,c){for(var d=zr(a,b),e=a.dd[b],f=[],g=0;g<e;g++){var h=d[g],k=null;0>=c&&(k=h.$d);var l=null;0<=c&&(l=h.Ud);var m=0,n=[],p=h.near;null!==p&&p.layer===h.layer&&(n[m]=p.column-1,m++);if(null!==k)for(p=0;p<k.count;p++){var h=k.l[p],q=h.fromVertex;h.valid&&!h.rev&&q.layer!==b&&(n[m]=q.column+h.portFromColOffset,m++)}if(null!==l)for(k=0;k<l.count;k++)h=l.l[k],p=h.toVertex,h.valid&&!h.rev&&p.layer!==b&&(n[m]=p.column+h.portToColOffset,m++);0===m?f[g]=-1:(n.sort(function(a,b){return a-b}),
l=m>>1,f[g]=m&1?n[l]:n[l-1]+n[l]>>1)}Ar(a,b,d);return f}function Ir(a,b,c,d,e,f){if(b.component===d){b.component=c;var g=0,h=0;if(e)for(var k=b.Gb;k.next();){var h=k.value,l=h.toVertex,g=b.layer-l.layer,h=a.linkMinLength(h);g===h&&Ir(a,l,c,d,e,f)}if(f)for(k=b.Mb;k.next();)h=k.value,l=h.fromVertex,g=l.layer-b.layer,h=a.linkMinLength(h),g===h&&Ir(a,l,c,d,e,f)}}
function Jr(a,b,c,d,e,f){if(b.component===d){b.component=c;if(e)for(var g=b.Gb;g.next();)Jr(a,g.value.toVertex,c,d,e,f);if(f)for(b=b.Mb;b.next();)Jr(a,b.value.fromVertex,c,d,e,f)}}function tr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid)return b}return null}function ur(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.Gb;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function vr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.Mb;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function wr(a,b){b.zn=a.Yp;a.Yp++;for(var c=b.Gb;c.next();){var d=c.value,e=d.toVertex;-1===e.zn&&(d.forest=!0,wr(a,e))}b.finish=a.Yp;a.Yp++}
un.prototype.assignLayers=function(){switch(this.Qm){case Kr:Lr(this);break;case Mr:for(var a=0,b=this.network.vertexes.i;b.next();)a=Nr(this,b.value),this.Pa=Math.max(a,this.Pa);for(b.reset();b.next();)a=b.value,a.layer=this.Pa-a.layer;break;default:case nr:Lr(this);for(b=this.network.vertexes.i;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.Mb.count&&Or(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.Pa=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.Pa=Math.max(this.Pa,c.layer)}}};function Lr(a){for(var b=a.network.vertexes.i;b.next();){var c=Pr(a,b.value);a.Pa=Math.max(c,a.Pa)}}function Pr(a,b){var c=0;if(-1===b.layer){for(var d=b.Gb;d.next();)var e=d.value,f=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Pr(a,f)+e);b.layer=c}else c=b.layer;return c}function Nr(a,b){var c=0;if(-1===b.layer){for(var d=b.Mb;d.next();)var e=d.value,f=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Nr(a,f)+e);b.layer=c}else c=b.layer;return c}
function Or(a,b){if(!b.valid){b.valid=!0;for(var c=b.Gb;c.next();)Or(a,c.value.toVertex);for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(var d=b.$d.l,e=d.length,f=0;f<e;f++){var g=d[f],h=a.linkMinLength(g);g.fromVertex.layer-g.toVertex.layer>h&&Ir(a,g.fromVertex,0,-1,!0,!1)}for(Ir(a,b,1,-1,!0,!0);0!==b.component;){for(var h=0,d=Infinity,k=0,l=null,m=a.network.vertexes.i;m.next();){var n=m.value;if(1===n.component){for(var p=0,q=!1,s=n.$d.l,e=s.length,f=0;f<e;f++){var g=s[f],t=g.fromVertex,
p=p+1;1!==t.component&&(h+=1,t=t.layer-n.layer,g=a.linkMinLength(g),d=Math.min(d,t-g))}g=n.Ud.l;e=g.length;for(f=0;f<e;f++)s=g[f].toVertex,p-=1,1!==s.component?h-=1:q=!0;(null===l||p<k)&&!q&&(l=n,k=p)}}if(0<h){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else l.component=0}for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(Ir(a,b,1,-1,!0,!1);0!==b.component;){f=0;e=Infinity;d=0;h=null;for(k=a.network.vertexes.i;k.next();)if(l=k.value,1===l.component){m=
0;n=!1;g=l.$d.l;p=g.length;for(q=0;q<p;q++)s=g[q].fromVertex,m+=1,1!==s.component?f+=1:n=!0;g=l.Ud.l;p=g.length;for(q=0;q<p;q++)s=g[q],t=s.toVertex,m-=1,1!==t.component&&(f-=1,t=l.layer-t.layer,s=a.linkMinLength(s),e=Math.min(e,t-s));(null===h||m>d)&&!n&&(h=l,d=m)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else h.component=0}}}
function yr(a,b,c){return 90===a.aa?c&&!b.rev||!c&&b.rev?270:90:180===a.aa?c&&!b.rev||!c&&b.rev?0:180:270===a.aa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
un.prototype.initializeIndices=function(){switch(this.Fm){default:case Qr:for(var a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;b.index=this.dd[c];this.dd[c]++}break;case or:a=this.network.vertexes.i;for(b=this.Pa;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Rr(this,c);break;case Sr:for(a=this.network.vertexes.i,b=0;b<=this.Pa;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Tr(this,c)}};
function Rr(a,b){var c=b.layer;b.index=a.dd[c];a.dd[c]++;for(var c=b.Ud.be(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var f=c[e],g=c[e+1];f.portFromColOffset>g.portFromColOffset&&(d=!0,c[e]=g,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Rr(a,d))}
function Tr(a,b){var c=b.layer;b.index=a.dd[c];a.dd[c]++;for(var c=b.$d.be(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var f=c[e],g=c[e+1];f.portToColOffset>g.portToColOffset&&(d=!0,c[e]=g,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Tr(a,d))}
un.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=Cr(this),c=0,d=0,e=0,c=0;c<this.Uk;c++){for(d=0;d<=this.Pa;d++)Ur(this,d,1),Vr(this,d,1);e=this.countCrossings();e<a&&(a=e,b=Cr(this));for(d=this.Pa;0<=d;d--)Ur(this,d,-1),Vr(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=Cr(this))}Dr(this,b);for(c=0;c<this.Uk;c++){for(d=0;d<=this.Pa;d++)Ur(this,d,0),Vr(this,d,0);e=this.countCrossings();e<a&&(a=e,b=Cr(this));for(d=this.Pa;0<=d;d--)Ur(this,d,0),Vr(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=Cr(this))}Dr(this,b);var f=!1,g=c=0,h=0,d=0;switch(this.am){case Wr:break;case Xr:for(h=a+1;(d=this.countCrossings())<h;)for(h=d,c=this.Pa;0<=c;c--)for(g=0;g<=c;g++){for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,-1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Vr(this,d,1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,
d=g;d<=c;d++)f=Vr(this,d,-1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this))}break;default:case pr:for(c=this.Pa,g=0,h=a+1;(d=this.countCrossings())<h;){h=d;for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,-1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,1)||f;e=this.countCrossings();
e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Vr(this,d,1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Vr(this,d,-1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this))}}Dr(this,b)};
function Ur(a,b,c){var d=0,e=zr(a,b),f=a.dd[b],g=Hr(a,b,c);c=Gr(a,b,c);for(d=0;d<f;d++)-1===c[d]&&(c[d]=e[d].column),-1===g[d]&&(g[d]=e[d].column);for(var h=!0,k;h;)for(h=!1,d=0;d<f-1;d++)if(g[d+1]<g[d]||g[d+1]===g[d]&&c[d+1]<c[d])h=!0,k=g[d],g[d]=g[d+1],g[d+1]=k,k=c[d],c[d]=c[d+1],c[d+1]=k,k=e[d],e[d]=e[d+1],e[d+1]=k;for(d=g=0;d<f;d++)k=e[d],k.index=d,g+=a.nodeMinColumnSpace(k,!0),k.column=g,g+=1,g+=a.nodeMinColumnSpace(k,!1);Ar(a,b,e)}
function Vr(a,b,c){var d=zr(a,b),e=a.dd[b];c=Er(a,b,c);var f=0,g;g=[];for(f=0;f<e;f++)g[f]=-1;var h;h=[];for(f=0;f<e;f++)h[f]=-1;for(var k=!1,l=!0;l;)for(l=!1,f=0;f<e-1;f++){var m=c[d[f].index*e+d[f+1].index],n=c[d[f+1].index*e+d[f].index],p=0,q=0,s=d[f].column,t=d[f+1].column,v=a.nodeMinColumnSpace(d[f],!0),x=a.nodeMinColumnSpace(d[f],!1),B=a.nodeMinColumnSpace(d[f+1],!0),y=a.nodeMinColumnSpace(d[f+1],!1),v=s-v+B,x=t-x+y,B=B=0,C=d[f].Mb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.fromVertex.layer===
b){y=y.fromVertex;for(B=0;d[B]!==y;)B++;B<f&&(p+=2*(f-B),q+=2*(f+1-B));B===f+1&&(p+=1);B>f+1&&(p+=4*(B-f),q+=4*(B-(f+1)))}C=d[f].Gb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.toVertex.layer===b){y=y.toVertex;for(B=0;d[B]!==y;)B++;B===f+1&&(q+=1)}C=d[f+1].Mb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.fromVertex.layer===b){y=y.fromVertex;for(B=0;d[B]!==y;)B++;B<f&&(p+=2*(f+1-B),q+=2*(f-B));B===f&&(q+=1);B>f+1&&(p+=4*(B-(f+1)),q+=4*(B-f))}C=d[f+1].Gb.i;for(C.reset();C.next();)if(y=C.value,
y.valid&&y.toVertex.layer===b){y=y.toVertex;for(B=0;d[B]!==y;)B++;B===f&&(p+=1)}var B=y=0,C=g[d[f].index],K=h[d[f].index],J=g[d[f+1].index],ba=h[d[f+1].index];-1!==C&&(y+=Math.abs(C-s),B+=Math.abs(C-x));-1!==K&&(y+=Math.abs(K-s),B+=Math.abs(K-x));-1!==J&&(y+=Math.abs(J-t),B+=Math.abs(J-v));-1!==ba&&(y+=Math.abs(ba-t),B+=Math.abs(ba-v));if(q<p-.5||q===p&&n<m-.5||q===p&&n===m&&B<y-.5)l=k=!0,d[f].column=x,d[f+1].column=v,m=d[f],d[f]=d[f+1],d[f+1]=m}for(f=0;f<e;f++)d[f].index=f;Ar(a,b,d);return k}
un.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.Ch&Yr),a=this.Ch===qr;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.Pa;a++)b[a]=0;for(var d=0,e=this.network.vertexes.i;e.next();){var f=e.value,a=f.layer,d=f.column,f=this.nodeMinColumnSpace(f,!1);b[a]=Math.max(b[a],d+f)}for(e.reset();e.next();)f=e.value,a=f.layer,d=f.column,f.column=(8*(this.mb-b[a])>>1)+8*d;this.mb*=8}if(0!==(this.Ch&Zr))for(b=!0;b;){b=!1;for(a=this.Te+1;a<=this.Pa;a++)b=$r(this,a,1)||b;
for(a=this.Te-1;0<=a;a--)b=$r(this,a,-1)||b;b=$r(this,this.Te,0)||b}if(0!==(this.Ch&as)){for(a=this.Te+1;a<=this.Pa;a++)bs(this,a,1);for(a=this.Te-1;0<=a;a--)bs(this,a,-1);bs(this,this.Te,0)}c&&(cs(this,-1),cs(this,1));if(0!==(this.Ch&Zr))for(b=!0;b;){b=!1;b=$r(this,this.Te,0)||b;for(a=this.Te+1;a<=this.Pa;a++)b=$r(this,a,0)||b;for(a=this.Te-1;0<=a;a--)b=$r(this,a,0)||b}};function $r(a,b,c){for(var d=!1;ds(a,b,c);)d=!0;return d}
function ds(a,b,c){var d=0,e=zr(a,b),f=a.dd[b],g=Gr(a,b,-1);if(0<c)for(d=0;d<f;d++)g[d]=-1;var h=Gr(a,b,1);if(0>c)for(d=0;d<f;d++)h[d]=-1;for(var k=!1,l=!0;l;)for(l=!1,d=0;d<f;d++){var m=e[d].column,n=a.nodeMinColumnSpace(e[d],!0),p=a.nodeMinColumnSpace(e[d],!1),q=0,q=0>d-1||m-e[d-1].column-1>n+a.nodeMinColumnSpace(e[d-1],!1)?m-1:m,n=0,n=d+1>=f||e[d+1].column-m-1>p+a.nodeMinColumnSpace(e[d+1],!0)?m+1:m,s=p=0,t=0,v=0,x=0,B=0;if(0>=c)for(var y=e[d].Mb.i;y.next();){var C=y.value;C.valid&&C.fromVertex.layer!==
b&&(v=Br(C),x=C.portFromColOffset,B=C.portToColOffset,C=C.fromVertex.column,p+=(Math.abs(m+B-(C+x))+1)*v,s+=(Math.abs(q+B-(C+x))+1)*v,t+=(Math.abs(n+B-(C+x))+1)*v)}if(0<=c)for(y=e[d].Gb.i;y.next();)C=y.value,C.valid&&C.toVertex.layer!==b&&(v=Br(C),x=C.portFromColOffset,B=C.portToColOffset,C=C.toVertex.column,p+=(Math.abs(m+x-(C+B))+1)*v,s+=(Math.abs(q+x-(C+B))+1)*v,t+=(Math.abs(n+x-(C+B))+1)*v);B=x=v=0;y=g[e[d].index];C=h[e[d].index];-1!==y&&(v+=Math.abs(y-m),x+=Math.abs(y-q),B+=Math.abs(y-n));-1!==
C&&(v+=Math.abs(C-m),x+=Math.abs(C-q),B+=Math.abs(C-n));if(s<p||s===p&&x<v)l=k=!0,e[d].column=q;if(t<p||t===p&&B<v)l=k=!0,e[d].column=n}Ar(a,b,e);a.normalize();return k}
function bs(a,b,c){var d=0,e=zr(a,b),f=a.dd[b],g=Hr(a,b,c);c=[];for(d=0;d<f;d++)c[d]=g[d];for(g=!0;g;)for(g=!1,d=0;d<f;d++){var h=e[d].column,k=a.nodeMinColumnSpace(e[d],!0),l=a.nodeMinColumnSpace(e[d],!1),m=0,n=0,p=0,p=n=0;-1===c[d]?0===d&&d===f-1?m=h:0===d?(n=e[d+1].column,m=n-h===l+a.nodeMinColumnSpace(e[d+1],!0)?h-1:h):d===f-1?(p=e[d-1].column,m=h-p===k+a.nodeMinColumnSpace(e[d-1],!1)?h+1:h):(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+
1],!0)-l-1,m=(p+n)/2|0):0===d&&d===f-1?m=c[d]:0===d?(n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+1],!0)-l-1,m=Math.min(c[d],n)):d===f-1?(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,m=Math.max(c[d],p)):(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+1],!0)-l-1,p<c[d]&&c[d]<n?m=c[d]:p>=c[d]?m=p:n<=c[d]&&(m=n));m!==h&&(g=!0,e[d].column=m)}Ar(a,b,e);a.normalize()}
function es(a,b){for(var c=!0,d=a.network.vertexes.i;d.next();){var e=d.value,f=a.nodeMinColumnSpace(e,!0),g=a.nodeMinColumnSpace(e,!1);if(e.column-f<=b&&e.column+g>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function fs(a,b){for(var c=b,c=b+1,d=0,e=[],f=[],d=0;d<=a.Pa;d++)e[d]=!1,f[d]=!1;for(var g=a.network.vertexes.i;g.next();){var d=g.value,h=d.column-a.nodeMinColumnSpace(d,!0),k=d.column+a.nodeMinColumnSpace(d,!1);h<=b&&k>=b&&(e[d.layer]=!0);h<=c&&k>=c&&(f[d.layer]=!0)}h=!0;c=!1;for(d=0;d<=a.Pa;d++)h=h&&!(e[d]&&f[d]);if(h)for(g.reset();g.next();)e=g.value,e.column>b&&(e.column-=1,c=!0);return c}
function cs(a,b){for(var c=0;c<=a.mb;c++)for(;es(a,c););a.normalize();for(c=0;c<a.mb;c++)for(;fs(a,c););a.normalize();var c=0,d,e=0,f=0,g=0;if(0<b)for(c=0;c<=a.mb;c++)for(d=Cr(a),e=Fr(a),f=e+1;e<f;)f=e,gs(a,c,1),g=Fr(a),g>e?Dr(a,d):g<e&&(e=g,d=Cr(a));if(0>b)for(c=a.mb;0<=c;c--)for(d=Cr(a),e=Fr(a),f=e+1;e<f;)f=e,gs(a,c,-1),g=Fr(a),g>e?Dr(a,d):g<e&&(e=g,d=Cr(a));a.normalize()}
function gs(a,b,c){a.tf=0;for(var d=a.network.vertexes.i;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.tf)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.tf);a.tf++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Jr(a,b,a.tf,-1,!0,!0),a.tf++);var f=0;b=[];for(f=0;f<a.tf*a.tf;f++)b[f]=!1;e=[];for(f=0;f<(a.Pa+1)*(a.mb+1);f++)e[f]=-1;for(d.reset();d.next();)for(var f=
d.value,g=f.layer,h=Math.max(0,f.column-a.nodeMinColumnSpace(f,!0)),k=Math.min(a.mb,f.column+a.nodeMinColumnSpace(f,!1));h<=k;h++)e[g*(a.mb+1)+h]=f.component;for(f=0;f<=a.Pa;f++){if(0<c)for(h=0;h<a.mb;h++)-1!==e[f*(a.mb+1)+h]&&-1!==e[f*(a.mb+1)+h+1]&&e[f*(a.mb+1)+h]!==e[f*(a.mb+1)+h+1]&&(b[e[f*(a.mb+1)+h]*a.tf+e[f*(a.mb+1)+h+1]]=!0);if(0>c)for(h=a.mb;0<h;h--)-1!==e[f*(a.mb+1)+h]&&-1!==e[f*(a.mb+1)+h-1]&&e[f*(a.mb+1)+h]!==e[f*(a.mb+1)+h-1]&&(b[e[f*(a.mb+1)+h]*a.tf+e[f*(a.mb+1)+h-1]]=!0)}e=[];for(f=
0;f<a.tf;f++)e[f]=!0;g=new N("number");g.add(0);for(k=0;0!==g.count;)if(k=g.l[g.count-1],g.Dc(g.count-1),e[k])for(e[k]=!1,f=0;f<a.tf;f++)b[k*a.tf+f]&&g.qd(0,f);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
un.prototype.commitLayout=function(){if(this.jo)for(var a=xr(this,!0),b=xr(this,!1),c=this.network.edges.i;c.next();){var d=c.value.link;null!==d&&(d.Za=a,d.ab=b)}this.commitNodes();this.Fx();this.Qr&&this.commitLinks()};function xr(a,b){return 270===a.aa?b?fe:ie:90===a.aa?b?ie:fe:180===a.aa?b?ge:he:b?he:ge}
un.prototype.commitNodes=function(){this.ag=[];this.qf=[];this.Se=[];this.pb=[];for(var a=0;a<=this.Pa;a++)this.ag[a]=0,this.qf[a]=0,this.Se[a]=0,this.pb[a]=0;for(a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;this.ag[c]=Math.max(this.ag[c],this.nodeMinLayerSpace(b,!0));this.qf[c]=Math.max(this.qf[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.Xk,c=0;c<=this.Pa;c++){var e=d;0>=this.ag[c]+this.qf[c]&&(e=0);0<c&&(b+=e/2);90===this.aa||0===this.aa?(b+=this.qf[c],this.Se[c]=b,b+=this.ag[c]):
(b+=this.ag[c],this.Se[c]=b,b+=this.qf[c]);c<this.Pa&&(b+=e/2);this.pb[c]=b}d=b;b=this.nd;for(c=0;c<=this.Pa;c++)270===this.aa?this.Se[c]=b.y+this.Se[c]:90===this.aa?(this.Se[c]=b.y+d-this.Se[c],this.pb[c]=d-this.pb[c]):180===this.aa?this.Se[c]=b.x+this.Se[c]:(this.Se[c]=b.x+d-this.Se[c],this.pb[c]=d-this.pb[c]);for(a.reset();a.next();){var c=a.value,d=c.layer,e=c.column|0,f=0,g=0;270===this.aa||90===this.aa?(f=b.x+this.Nc*e,g=this.Se[d]):(f=this.Se[d],g=b.y+this.Nc*e);c.ua=f;c.Da=g;c.commit()}};
un.prototype.Fx=function(){for(var a=0,b=this.Xk,c=0;c<=this.Pa;c++)a+=this.ag[c],a+=this.qf[c];for(var a=a+this.Pa*b,b=[],c=this.Nc*this.mb,d=this.XF;0<=d;d--)270===this.aa?0===d?b.push(new D(0,0,c,Math.abs(this.pb[0]))):b.push(new D(0,this.pb[d-1],c,Math.abs(this.pb[d-1]-this.pb[d]))):90===this.aa?0===d?b.push(new D(0,this.pb[0],c,Math.abs(this.pb[0]-a))):b.push(new D(0,this.pb[d],c,Math.abs(this.pb[d-1]-this.pb[d]))):180===this.aa?0===d?b.push(new D(0,0,Math.abs(this.pb[0]),c)):b.push(new D(this.pb[d-
1],0,Math.abs(this.pb[d-1]-this.pb[d]),c)):0===d?b.push(new D(this.pb[0],0,Math.abs(this.pb[0]-a),c)):b.push(new D(this.pb[d],0,Math.abs(this.pb[d-1]-this.pb[d]),c));this.commitLayers(b,Q.fj)};un.prototype.commitLayers=function(){};
un.prototype.commitLinks=function(){for(var a=this.network.edges.i,b;a.next();)b=a.value.link,null!==b&&(b.Ak(),b.vn(),b.Mh());for(a.reset();a.next();)b=a.value.link,null!==b&&b.updateRoute();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.Ak();var d=b,e=d.M,f=d.R,g=d.Jc,h=d.yd;if(c.valid){if(b.ne===Li&&4===b.Z){if(c.rev)var k=e,e=f,f=k,l=g,g=h,h=l;if(c.fromVertex.column===c.toVertex.column){var m=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h),n=b.getLinkPoint(f,h,b.computeSpot(!1),
!1,!1,e,g);m.w()||m.set(e.Q.Yj);n.w()||n.set(f.Q.Yj);b.vn();b.Vj(m.x,m.y);b.Vj((2*m.x+n.x)/3,(2*m.y+n.y)/3);b.Vj((m.x+2*n.x)/3,(m.y+2*n.y)/3);b.Vj(n.x,n.y)}else{var p=!1,q=!1;null!==g&&b.computeSpot(!0)===td&&(p=!0);null!==h&&b.computeSpot(!1)===td&&(q=!0);if(p||q){var s=b.j(0).x,t=b.j(0).y,v=b.j(1).x,x=b.j(1).y,B=b.j(2).x,y=b.j(2).y,C=b.j(3).x,K=b.j(3).y;if(p){90===this.aa||270===this.aa?(v=s,x=(t+K)/2):(v=(s+C)/2,x=t);b.L(1,v,x);var J=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h);J.w()||J.set(e.Q.Yj);
b.L(0,J.x,J.y)}q&&(90===this.aa||270===this.aa?(B=C,y=(t+K)/2):(B=(s+C)/2,y=K),b.L(2,B,y),J=b.getLinkPoint(f,h,b.computeSpot(!1),!1,!1,e,g),J.w()||J.set(f.Q.Yj),b.L(3,J.x,J.y))}}}b.Mh()}else if(c.fromVertex.layer===c.toVertex.layer)b.Mh();else{var ba=!1,ja=!1,Y=0,P=b.Br+1;if(b.Ib)ja=!0,Y=b.Z,4<Y&&b.points.removeRange(2,Y-3);else if(b.ne===Li)ba=!0,Y=b.Z,4<Y&&b.points.removeRange(2,Y-3),P=2;else{var Y=b.Z,ha=b.computeSpot(!0)===td,Ra=b.computeSpot(!1)===td;2<Y&&ha&&Ra?b.points.removeRange(1,Y-2):3<
Y&&ha&&!Ra?b.points.removeRange(1,Y-3):3<Y&&!ha&&Ra?b.points.removeRange(2,Y-2):4<Y&&!ha&&!Ra&&b.points.removeRange(2,Y-3)}var Ha=c.fromVertex,eb=c.toVertex,ya,Pa;if(c.rev){for(var Ca=0;null!==eb&&Ha!==eb;){Pa=ya=null;for(var Hc=eb.Mb.i;Hc.next();){var Nd=Hc.value;if(Nd.link===c.link&&(ya=Nd.fromVertex,Pa=Nd.toVertex,null===ya.Fc))break}ya!==Ha&&(lb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=ya.ua,Ma=ya.Da,ja?180===this.aa||0===this.aa?2===P?(b.n(P++,lb,Bb),b.n(P++,lb,Ma)):(Nc=null!==Pa?Pa.Da:Bb,Nc!==Ma&&(Jb=this.pb[ya.layer-
1],b.n(P++,Jb,Bb),b.n(P++,Jb,Ma))):2===P?(b.n(P++,lb,Bb),b.n(P++,Ja,Bb)):(Re=null!==Pa?Pa.ua:lb,Re!==Ja&&(Jb=this.pb[ya.layer-1],b.n(P++,lb,Jb),b.n(P++,Ja,Jb))):2===P?ba?(fc=Math.max(10,this.ag[eb.layer]),wb=Math.max(10,this.qf[eb.layer]),180===this.aa?(Ca=eb.P.x,b.n(P++,Ca-fc,Ma),b.n(P++,Ca,Ma),b.n(P++,Ca+wb,Ma)):90===this.aa?(Ca=eb.P.y+eb.P.height,b.n(P++,Ja,Ca+wb),b.n(P++,Ja,Ca),b.n(P++,Ja,Ca-fc)):270===this.aa?(Ca=eb.P.y,b.n(P++,Ja,Ca-fc),b.n(P++,Ja,Ca),b.n(P++,Ja,Ca+wb)):(Ca=eb.P.x+eb.P.width,
b.n(P++,Ca+wb,Ma),b.n(P++,Ca,Ma),b.n(P++,Ca-fc,Ma))):(b.n(P++,lb,Bb),180===this.aa||0===this.aa?b.n(P++,lb,Ma):b.n(P++,Ja,Bb),b.n(P++,Ja,Ma)):(fc=Math.max(10,this.ag[ya.layer]),wb=Math.max(10,this.qf[ya.layer]),180===this.aa?(ba&&b.n(P++,Ja-fc,Ma),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja+wb,Ma)):90===this.aa?(ba&&b.n(P++,Ja,Ma+wb),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja,Ma-fc)):270===this.aa?(ba&&b.n(P++,Ja,Ma-fc),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja,Ma+wb)):(ba&&b.n(P++,Ja+wb,Ma),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja-fc,Ma))));eb=
ya}if(null===h||b.computeSpot(!1)!==td)if(lb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=b.j(P).x,Ma=b.j(P).y,ja){var Cg=this.qf[Ha.layer],Ic=0;180===this.aa||0===this.aa?(Ic=Bb,Ic>=Ha.P.y&&Ic<=Ha.P.bottom&&(Ca=Ha.ua+Cg,Ic=Ic<Ha.P.y+Ha.P.height/2?Ha.P.y-this.Nc/2:Ha.P.bottom+this.Nc/2,b.n(P++,Ca,Bb),b.n(P++,Ca,Ic)),b.n(P++,Ja,Ic)):(Ic=lb,Ic>=Ha.P.x&&Ic<=Ha.P.right&&(Ca=Ha.Da+Cg,Ic=Ic<Ha.P.x+Ha.P.width/2?Ha.P.x-this.Nc/2:Ha.P.right+this.Nc/2,b.n(P++,lb,Ca),b.n(P++,Ic,Ca)),b.n(P++,Ic,Ma));b.n(P++,Ja,Ma)}else ba?(fc=
Math.max(10,this.ag[Ha.layer]),wb=Math.max(10,this.qf[Ha.layer]),180===this.aa?(Ca=Ha.P.x+Ha.P.width,b.L(P-2,Ca,Bb),b.L(P-1,Ca+wb,Bb)):90===this.aa?(Ca=Ha.P.y,b.L(P-2,lb,Ca),b.L(P-1,lb,Ca-fc)):270===this.aa?(Ca=Ha.P.y+Ha.P.height,b.L(P-2,lb,Ca),b.L(P-1,lb,Ca+wb)):(Ca=Ha.P.x,b.L(P-2,Ca,Bb),b.L(P-1,Ca-fc,Bb))):(180===this.aa||0===this.aa?b.n(P++,Ja,Bb):b.n(P++,lb,Ma),b.n(P++,Ja,Ma))}else{for(;null!==Ha&&Ha!==eb;){Pa=ya=null;for(var Jf=Ha.Gb.i;Jf.next();){var Dg=Jf.value;if(Dg.link===c.link&&(ya=Dg.toVertex,
Pa=Dg.fromVertex,null!==Pa.Fc&&(Pa=null),null===ya.Fc))break}var lb=0,Bb=0,Ja=0,Ma=0,Jb=0,fc=0,wb=0;if(ya!==eb)if(lb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=ya.ua,Ma=ya.Da,ja)if(180===this.aa||0===this.aa){var Nc=null!==Pa?Pa.Da:Bb;Nc!==Ma&&(Jb=this.pb[ya.layer],2===P&&(Jb=0===this.aa?Math.max(Jb,lb):Math.min(Jb,lb)),b.n(P++,Jb,Bb),b.n(P++,Jb,Ma))}else{var Re=null!==Pa?Pa.ua:lb;Re!==Ja&&(Jb=this.pb[ya.layer],2===P&&(Jb=90===this.aa?Math.max(Jb,Bb):Math.min(Jb,Bb)),b.n(P++,lb,Jb),b.n(P++,Ja,Jb))}else fc=Math.max(10,
this.ag[ya.layer]),wb=Math.max(10,this.qf[ya.layer]),180===this.aa?(b.n(P++,Ja+wb,Ma),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja-fc,Ma)):90===this.aa?(b.n(P++,Ja,Ma-fc),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja,Ma+wb)):270===this.aa?(b.n(P++,Ja,Ma+wb),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja,Ma-fc)):(b.n(P++,Ja-fc,Ma),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja+wb,Ma));Ha=ya}ja&&(lb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=b.j(P).x,Ma=b.j(P).y,180===this.aa||0===this.aa?Bb!==Ma&&(Jb=0===this.aa?Math.min(Math.max((Ja+lb)/2,this.pb[eb.layer]),Ja):Math.max(Math.min((Ja+
lb)/2,this.pb[eb.layer]),Ja),b.n(P++,Jb,Bb),b.n(P++,Jb,Ma)):lb!==Ja&&(Jb=90===this.aa?Math.min(Math.max((Ma+Bb)/2,this.pb[eb.layer]),Ma):Math.max(Math.min((Ma+Bb)/2,this.pb[eb.layer]),Ma),b.n(P++,lb,Jb),b.n(P++,Ja,Jb)))}if(null!==d&&ba){if(null!==g){if(b.computeSpot(!0)===td){var Sc=b.j(0),xe=b.j(2);Sc.A(xe)||b.L(1,(Sc.x+xe.x)/2,(Sc.y+xe.y)/2)}J=b.getLinkPoint(e,g,td,!0,!1,f,h);J.w()||J.set(e.Q.Yj);b.L(0,J.x,J.y)}null!==h&&(b.computeSpot(!1)===td&&(Sc=b.j(b.Z-1),xe=b.j(b.Z-3),Sc.A(xe)||b.L(b.Z-2,
(Sc.x+xe.x)/2,(Sc.y+xe.y)/2)),J=b.getLinkPoint(f,h,td,!1,!1,e,g),J.w()||J.set(f.Q.Yj),b.L(b.Z-1,J.x,J.y))}b.Mh();c.commit()}}}for(var Se=new N(W),Kf=this.network.edges.i;Kf.next();){var eg=Kf.value.link;null!==eg&&eg.Ib&&!Se.contains(eg)&&Se.add(eg)}if(0<Se.count)if(90===this.aa||270===this.aa){for(var ye=0,gc=new N(hs),mc,kd,Hh=Se.i;Hh.next();){var nc=Hh.value;if(null!==nc&&nc.Ib)for(var $b=2;$b<nc.Z-3;$b++)if(mc=nc.j($b),kd=nc.j($b+1),this.q(mc.y,kd.y)&&!this.q(mc.x,kd.x)){var Jc=new hs;Jc.layer=
Math.floor(mc.y/2);var Kb=nc.j(0),kf=nc.j(nc.Z-1);Jc.first=Kb.x*Kb.x+Kb.y;Jc.ad=kf.x*kf.x+kf.y;Jc.Td=Math.min(mc.x,kd.x);Jc.od=Math.max(mc.x,kd.x);Jc.index=$b;Jc.link=nc;if($b+2<nc.Z){var ze=nc.j($b-1),hh=nc.j($b+2),Eg=0;ze.y<mc.y?Eg=hh.y<mc.y?3:mc.x<kd.x?2:1:ze.y>mc.y&&(Eg=hh.y>mc.y?0:kd.x<mc.x?2:1);Jc.eh=Eg}gc.add(Jc)}}if(1<gc.count){gc.sort(this.jD);for(var ac=0;ac<gc.count;){for(var Od=gc.l[ac].layer,Tc=ac+1;Tc<gc.count&&gc.l[Tc].layer===Od;)Tc++;if(1<Tc-ac)for(var Yb=ac;Yb<Tc;){for(var ld=gc.l[Yb].od,
oc=ac+1;oc<Tc&&gc.l[oc].Td<ld;)ld=Math.max(ld,gc.l[oc].od),oc++;var cb=oc-Yb;if(1<cb){gc.lo(this.vv,Yb,Yb+cb);for(var Cb=1,bc=gc.l[Yb].ad,$b=Yb;$b<oc;$b++){var Kc=gc.l[$b];Kc.ad!==bc&&(Cb++,bc=Kc.ad)}gc.lo(this.iD,Yb,Yb+cb);for(var Ae=1,bc=gc.l[Yb].first,$b=Yb;$b<oc;$b++)Kc=gc.l[$b],Kc.first!==bc&&(Ae++,bc=Kc.first);var Be=!0,fg=Ae;Cb<Ae?(Be=!1,fg=Cb,bc=gc.l[Yb].ad,gc.lo(this.vv,Yb,Yb+cb)):bc=gc.l[Yb].first;for(var lf=0,$b=Yb;$b<oc;$b++){Kc=gc.l[$b];(Be?Kc.first:Kc.ad)!==bc&&(lf++,bc=Be?Kc.first:
Kc.ad);nc=Kc.link;mc=nc.j(Kc.index);kd=nc.j(Kc.index+1);var gg=this.jv*(lf-(fg-1)/2);ye++;nc.Ak();nc.L(Kc.index,mc.x,mc.y+gg);nc.L(Kc.index+1,kd.x,kd.y+gg);nc.Mh()}}Yb=oc}ac=Tc}}}else{for(var uc=0,Ab=new N(hs),Uc,wd,Pd=Se.i;Pd.next();){var xb=Pd.value;if(null!==xb&&xb.Ib)for(var Vb=2;Vb<xb.Z-3;Vb++)if(Uc=xb.j(Vb),wd=xb.j(Vb+1),this.q(Uc.x,wd.x)&&!this.q(Uc.y,wd.y)){var Oc=new hs;Oc.layer=Math.floor(Uc.x/2);var Qd=xb.j(0),Ih=xb.j(xb.Z-1);Oc.first=Qd.x+Qd.y*Qd.y;Oc.ad=Ih.x+Ih.y*Ih.y;Oc.Td=Math.min(Uc.y,
wd.y);Oc.od=Math.max(Uc.y,wd.y);Oc.index=Vb;Oc.link=xb;if(Vb+2<xb.Z){var Jh=xb.j(Vb-1),Kh=xb.j(Vb+2),Fg=0;Jh.x<Uc.x?Fg=Kh.x<Uc.x?3:Uc.y<wd.y?2:1:Jh.x>Uc.x&&(Fg=Kh.x>Uc.x?0:wd.y<Uc.y?2:1);Oc.eh=Fg}Ab.add(Oc)}}if(1<Ab.count){Ab.sort(this.jD);for(var md=0;md<Ab.count;){for(var xd=Ab.l[md].layer,nd=md+1;nd<Ab.count&&Ab.l[nd].layer===xd;)nd++;if(1<nd-md)for(var Lb=md;Lb<nd;){for(var Te=Ab.l[Lb].od,Mb=md+1;Mb<nd&&Ab.l[Mb].Td<Te;)Te=Math.max(Te,Ab.l[Mb].od),Mb++;var dd=Mb-Lb;if(1<dd){Ab.lo(this.vv,Lb,Lb+
dd);for(var mf=1,cc=Ab.l[Lb].ad,Vb=Lb;Vb<Mb;Vb++){var dc=Ab.l[Vb];dc.ad!==cc&&(mf++,cc=dc.ad)}Ab.lo(this.iD,Lb,Lb+dd);for(var Rd=1,cc=Ab.l[Lb].first,Vb=Lb;Vb<Mb;Vb++)dc=Ab.l[Vb],dc.first!==cc&&(Rd++,cc=dc.first);var yd=!0,Ce=Rd;mf<Rd?(yd=!1,Ce=mf,cc=Ab.l[Lb].ad,Ab.lo(this.vv,Lb,Lb+dd)):cc=Ab.l[Lb].first;for(var De=0,Vb=Lb;Vb<Mb;Vb++){dc=Ab.l[Vb];(yd?dc.first:dc.ad)!==cc&&(De++,cc=yd?dc.first:dc.ad);xb=dc.link;Uc=xb.j(dc.index);wd=xb.j(dc.index+1);var Lf=this.jv*(De-(Ce-1)/2);uc++;xb.Ak();xb.L(dc.index,
Uc.x+Lf,Uc.y);xb.L(dc.index+1,wd.x+Lf,wd.y);xb.Mh()}}Lb=Mb}md=nd}}}};un.prototype.jD=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.Td<b.Td?-1:a.Td>b.Td?1:a.od<b.od?-1:a.od>b.od?1:0:0};un.prototype.iD=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.first<b.first?-1:a.first>b.first||a.eh<b.eh?1:a.eh>b.eh||a.Td<b.Td?-1:a.Td>b.Td?1:a.od<b.od?-1:a.od>b.od?1:0:0};
un.prototype.vv=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.ad<b.ad?-1:a.ad>b.ad||a.eh<b.eh?1:a.eh>b.eh||a.Td<b.Td?-1:a.Td>b.Td?1:a.od<b.od?-1:a.od>b.od?1:0:0};un.prototype.q=function(a,b){var c=a-b;return-1<c&&1>c};function zr(a,b){var c,d=a.dd[b];if(d>=a.cg.length){c=[];for(var e=0;e<a.cg.length;e++)c[e]=a.cg[e];a.cg=c}void 0===a.cg[d]||null===a.cg[d]?c=[]:(c=a.cg[d],a.cg[d]=null);d=a.Zp[b];for(e=0;e<d.length;e++){var f=d[e];c[f.index]=f}return c}
function Ar(a,b,c){a.cg[a.dd[b]]=c}G(un,{layerSpacing:"layerSpacing"},function(){return this.Xk},function(a){this.Xk!==a&&(w(a,"number",un,"layerSpacing"),0<=a&&(this.Xk=a,this.v()))});G(un,{DH:"columnSpacing"},function(){return this.Nc},function(a){this.Nc!==a&&(w(a,"number",un,"columnSpacing"),0<=a&&(this.Nc=a,this.v()))});G(un,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(w(a,"number",un,"direction"),this.aa=a,this.v())});
G(un,{SE:"cycleRemoveOption"},function(){return this.lm},function(a){this.lm!==a&&(va(a,un,un,"cycleRemoveOption"),a===sr||a===mr)&&(this.lm=a,this.v())});G(un,{PF:"layeringOption"},function(){return this.Qm},function(a){this.Qm!==a&&(va(a,un,un,"layeringOption"),a===nr||a===Kr||a===Mr)&&(this.Qm=a,this.v())});G(un,{CF:"initializeOption"},function(){return this.Fm},function(a){this.Fm!==a&&(va(a,un,un,"initializeOption"),a===or||a===Sr||a===Qr)&&(this.Fm=a,this.v())});
G(un,{lI:"iterations"},function(){return this.Uk},function(a){this.Uk!==a&&(ua(a,rr,"iterations"),0<=a&&(this.Uk=a,this.v()))});G(un,{wE:"aggressiveOption"},function(){return this.am},function(a){this.am!==a&&(va(a,un,un,"aggressiveOption"),a===Wr||a===pr||a===Xr)&&(this.am=a,this.v())});G(un,{KI:"packOption"},function(){return this.Ch},function(a){this.Ch!==a&&(w(a,"number",un,"packOption"),0<=a&&8>a&&(this.Ch=a,this.v()))});
G(un,{jo:"setsPortSpots"},function(){return this.Sg},function(a){this.Sg!==a&&(w(a,"boolean",un,"setsPortSpots"),this.Sg=a,this.v())});G(un,{jv:"linkSpacing"},function(){return this.ri},function(a){this.ri!==a&&(w(a,"number",un,"linkSpacing"),0<=a&&(this.ri=a,this.v()))});H(un,{XF:"maxLayer"},function(){return this.Pa});H(un,{sI:"maxIndex"},function(){return this.Gt});H(un,{rI:"maxColumn"},function(){return this.mb});H(un,{yI:"minIndexLayer"},function(){return this.Rp});
H(un,{tI:"maxIndexLayer"},function(){return this.Te});var mr;un.CycleDepthFirst=mr=I(un,"CycleDepthFirst",0);var sr;un.CycleGreedy=sr=I(un,"CycleGreedy",1);var nr;un.LayerOptimalLinkLength=nr=I(un,"LayerOptimalLinkLength",0);var Kr;un.LayerLongestPathSink=Kr=I(un,"LayerLongestPathSink",1);var Mr;un.LayerLongestPathSource=Mr=I(un,"LayerLongestPathSource",2);var or;un.InitDepthFirstOut=or=I(un,"InitDepthFirstOut",0);var Sr;un.InitDepthFirstIn=Sr=I(un,"InitDepthFirstIn",1);var Qr;
un.InitNaive=Qr=I(un,"InitNaive",2);var Wr;un.AggressiveNone=Wr=I(un,"AggressiveNone",0);var pr;un.AggressiveLess=pr=I(un,"AggressiveLess",1);var Xr;un.AggressiveMore=Xr=I(un,"AggressiveMore",2);un.PackNone=0;var Yr;un.PackExpand=Yr=1;var Zr;un.PackStraighten=Zr=2;var as;un.PackMedian=as=4;var qr;un.PackAll=qr=7;function hs(){this.index=this.od=this.Td=this.ad=this.first=this.layer=0;this.link=null;this.eh=0}zb(hs,{layer:!0,first:!0,ad:!0,Td:!0,od:!0,index:!0,link:!0,eh:!0});
function rr(){kc.call(this)}yb(rr,kc);vb("LayeredDigraphNetwork",rr);rr.prototype.createVertex=function(){return new is};rr.prototype.createEdge=function(){return new js};function is(){lc.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.zn=NaN;this.vl=0;this.yy=this.zy=null}yb(is,lc);vb("LayeredDigraphVertex",is);
function js(){sc.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}yb(js,sc);vb("LayeredDigraphEdge",js);function Z(){0<arguments.length&&Aa(Z);lg.call(this);this.Ic=new Xb(Object);this.jq=ks;this.Re=ls;this.Zq=ms;this.Dt=ns;this.oz=null;this.Ag=!0;this.tc=os;this.kf=(new Za(10,10)).freeze();this.fa=new ps;this.ea=new ps;this.ox=[]}yb(Z,lg);vb("TreeLayout",Z);
Z.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.jq=this.jq;a.Zq=this.Zq;a.Dt=this.Dt;a.Ag=this.Ag;a.tc=this.tc;a.kf.assign(this.kf);a.fa.copyInheritedPropertiesFrom(this.fa);a.ea.copyInheritedPropertiesFrom(this.ea)};Z.prototype.createNetwork=function(){return new qs};
Z.prototype.makeNetwork=function(a){function b(a){if(a instanceof V)return!a.Ke&&"Comment"!==a.kc;if(a instanceof W){var b=a.M;if(null===b||b.Ke||"Comment"===b.kc)return!1;a=a.R;return null===a||a.Ke||"Comment"===a.kc?!1:!0}return!1}var c=this.createNetwork();c.ub=this;a instanceof M?(c.Si(a.Of,!0,b),c.Si(a.links,!0,b)):a instanceof Wg?c.Si(a.mc,!1,b):c.Si(a.i,!1,b);return c};
Z.prototype.doLayout=function(a){null===a&&u("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Xe!==rs&&(this.nd=this.initialOrigin(this.nd));var b=this.g;null===b&&a instanceof M&&(b=a);this.Re=this.path===ks&&null!==b?b.Lc?ls:ss:this.path===ks?ls:this.path;if(0<this.network.vertexes.count){this.network.Nu();for(a=this.network.vertexes.i;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.Ic.count){a=new Xb(ps);for(b=this.Ic.i;b.next();){var c=b.value;c instanceof V?(c=this.network.Hl(c),null!==c&&a.add(c)):c instanceof ps&&a.add(c)}this.Ic=a}0===this.Ic.count&&this.findRoots();for(a=this.Ic.copy().i;a.next();)b=a.value,b.initialized||(b.initialized=!0,ts(this,b));for(a=this.Ic.i;a.next();)b=a.value,b instanceof ps&&us(this,b);for(a=this.Ic.i;a.next();)b=a.value,b instanceof ps&&vs(this,b);for(a=this.Ic.i;a.next();)b=a.value,b instanceof ps&&
ws(this,b);this.Cx();if(this.my===xs){c=[];for(a=this.network.vertexes.i;a.next();){var d=a.value,b=d.parent;null==b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.oz=c;for(a=this.network.vertexes.i;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===b.angle?(180===b.angle&&(d.Cr+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.Dr+=c[d.level]-d.height),d.height=
c[d.level])}else if(this.my===ys)for(a=this.network.vertexes.i;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var f=c.children[d],e=Math.max(e,b?f.width:f.height);if(0<=e)for(d=0;d<c.children.length;d++)f=c.children[d],b?(180===c.angle&&(f.Cr+=e-f.width),f.width=e):(270===c.angle&&(f.Dr+=e-f.height),f.height=e)}for(a=this.Ic.i;a.next();)b=a.value,b instanceof ps&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.Ic=new Xb(Object);
this.Me=!0};
Z.prototype.findRoots=function(){for(var a=this.network.vertexes.i;a.next();){var b=a.value;switch(this.Re){case ls:0===b.Mb.count&&this.Ic.add(b);break;case ss:0===b.Gb.count&&this.Ic.add(b);break;default:u("Unhandled path value "+this.Re.toString())}}if(0===this.Ic.count){for(var a=999999,b=null,c=this.network.vertexes.i;c.next();){var d=c.value;switch(this.Re){case ls:d.Mb.count<a&&(a=d.Mb.count,b=d);break;case ss:d.Gb.count<a&&(a=d.Gb.count,b=d);break;default:u("Unhandled path value "+this.Re.toString())}}null!==
b&&this.Ic.add(b)}};
function ts(a,b){if(null!==b){switch(a.Re){case ls:if(0<b.Gb.count){for(var c=new N(ps),d=b.ZE;d.next();){var e=d.value;zs(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.be())}break;case ss:if(0<b.Mb.count){c=new N(ps);for(d=b.PG;d.next();)e=d.value,zs(a,b,e)&&c.add(e);0<c.count&&(b.children=c.be())}break;default:u("Unhandled path value"+a.Re.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var f=c[e];f.initialized=!0;f.level=b.level+1;f.parent=b;a.Ic.remove(f)}for(e=0;e<d;e++)f=c[e],ts(a,f)}}
function zs(a,b,c){if(c.initialized){var d;if(null===b)d=!1;else{for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}Z.prototype.removeChild=function(a,b){if(null!==a&&null!==b){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),f=0,e=0;e<c.length;e++)c[e]!==b&&(d[f++]=c[e]);a.children=d}}};
function us(a,b){if(null!==b){a.initializeTreeVertexValues(b);b.alignment===As&&a.sortTreeVertexChildren(b);for(var c=0,d=b.xl,e=0,f=b.children,g=f.length,h=0;h<g;h++){var k=f[h];us(a,k);c+=k.descendantCount+1;d=Math.max(d,k.maxChildrenCount);e=Math.max(e,k.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function Bs(a,b){switch(a.Zq){default:case ms:return null!==b.parent?b.parent:a.fa;case Cs:return null===b.parent?a.fa:null===b.parent.parent?a.ea:b.parent;case Ds:if(null!==b.parent)return null!==b.parent.parent?b.parent.parent:a.ea;case Es:var c=!0;if(0===b.xl)c=!1;else for(var d=b.children,e=d.length,f=0;f<e;f++)if(0<d[f].xl){c=!1;break}return c&&null!==b.parent?a.ea:null!==b.parent?b.parent:a.fa}}
Z.prototype.initializeTreeVertexValues=function(a){var b=Bs(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===As){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};function vs(a,b){if(null!==b){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)vs(a,c[e])}}Z.prototype.assignTreeVertexValues=function(){};
function ws(a,b){if(null!==b){b.alignment!==As&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ws(a,c[e])}}Z.prototype.sortTreeVertexChildren=function(a){switch(a.sorting){case Fs:break;case Gs:a.children.reverse();break;case Hs:a.children.sort(a.comparer);break;case Is:a.children.sort(a.comparer);a.children.reverse();break;default:u("Unhandled sorting value "+a.sorting.toString())}};Z.prototype.Cx=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Z.prototype.addComments=function(a){var b=a.angle,c=a.parent,d=0,e=Js,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Ks(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.xl,f=0,g=0,h=0,k=a.commentSpacing;if(null!==a.dc)for(var l=a.dc.bC();l.next();){var m=l.value;"Comment"===m.kc&&m.qa()&&(null===a.comments&&(a.comments=[]),a.comments.push(m),m.Ge(),m=m.oa,b&&!c||!e&&!d&&c||e&&d&&c?(f=Math.max(f,m.width),g+=m.height+Math.abs(h)):(f+=m.width+Math.abs(h),g=Math.max(g,m.height)),h=k)}null!==a.comments&&
(b&&!c||!e&&!d&&c||e&&d&&c?(f+=Math.abs(a.commentMargin),g=Math.max(0,g-a.height)):(g+=Math.abs(a.commentMargin),f=Math.max(0,f-a.width)),e=db(0,0,a.P.width+f,a.P.height+g),a.Qa=e,fb(e))};function Ks(a){return a===Ls||a===As||a===Ms||a===Ns}function Os(a){return a===Ls||a===As}function Ps(a){var b=a.parent;if(null!==b){var c=b.alignment;if(Ks(c)){if(Os(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Ms)return!0}}return!1}
Z.prototype.layoutComments=function(a){if(null!==a.comments){var b=a.dc.oa,c=a.parent,d=a.angle,e=0,f=Js,f=!1;null!==c&&(e=c.angle,f=c.alignment,f=Ks(f));for(var c=90===d||270===d,d=90===e||270===e,g=0===a.xl,h=Ps(a),k=0,l=a.comments,m=l.length,n=Va(),p=0;p<m;p++){var q=l[p],s=q.oa;if(c&&!g||!f&&!d&&g||f&&d&&g){if(135<e&&!f||d&&h)if(0<=a.commentMargin)for(n.k(a.P.x-a.commentMargin-s.width,a.P.y+k),q.move(n),q=q.Ff();q.next();){var t=q.value;t.Za=ge;t.ab=he}else for(n.k(a.P.x+2*a.B.x-a.commentMargin,
a.P.y+k),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=he,t.ab=ge;else if(0<=a.commentMargin)for(n.k(a.P.x+2*a.B.x+a.commentMargin,a.P.y+k),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=he,t.ab=ge;else for(n.k(a.P.x+a.commentMargin-s.width,a.P.y+k),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=ge,t.ab=he;k=0<=a.commentSpacing?k+(s.height+a.commentSpacing):k+(a.commentSpacing-s.height)}else{if(135<e&&!f||!d&&h)if(0<=a.commentMargin)for(n.k(a.P.x+k,a.P.y-a.commentMargin-s.height),q.move(n),q=q.Ff();q.next();)t=
q.value,t.Za=fe,t.ab=ie;else for(n.k(a.P.x+k,a.P.y+2*a.B.y-a.commentMargin),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=ie,t.ab=fe;else if(0<=a.commentMargin)for(n.k(a.P.x+k,a.P.y+2*a.B.y+a.commentMargin),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=ie,t.ab=fe;else for(n.k(a.P.x+k,a.P.y+a.commentMargin-s.height),q.move(n),q=q.Ff();q.next();)t=q.value,t.Za=fe,t.ab=ie;k=0<=a.commentSpacing?k+(s.width+a.commentSpacing):k+(a.commentSpacing-s.width)}}A(n);b=k-a.commentSpacing-(c?b.height:b.width);if(this.Re===
ls)for(e=a.Gb;e.next();)a=e.value.link,null===a||a.nk||(a.gk=0<b?b:NaN);else for(e=a.Mb;e.next();)a=e.value.link,null===a||a.nk||(a.Dk=0<b?b:NaN)}};
Z.prototype.layoutTree=function(a){if(null!==a){for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Qs:Rs(this,a);break;case Ss:if(a.alignment===As)Rs(this,a);else if(0===a.xl){var d=a.parent,b=!1,c=0,e=Js;null!==d&&(c=d.angle,e=d.alignment,b=Ks(e));d=Ps(a);a.W.k(0,0);a.Ha.k(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.ta.k(0,0):180===c&&!b||(90===c||270===c)&&d?a.ta.k(a.width-2*a.B.x,0):a.ta.k(0,a.height-2*a.B.y);a.Sr=null;
a.ls=null}else{for(var f=Ts(a),b=90===f||270===f,g=0,h=a.children,k=h.length,l=0;l<k;l++)var m=h[l],g=Math.max(g,b?m.Ha.width:m.Ha.height);var n=a.alignment,d=n===Us,p=n===Vs,q=Ks(n),s=Math.max(0,a.breadthLimit),c=Ws(a),t=a.nodeSpacing,v=Xs(a),x=a.rowSpacing,B=0;if(d||p||a.eo||a.fo&&1===a.maxGenerationCount)B=Math.max(0,a.rowIndent);var d=a.width,e=a.height,y=0,C=0,K=0,J=null,ba=null,ja=0,Y=0,P=0,ha=0,Ra=0,Ha=0,eb=0,ya=0,m=0;q&&!Os(n)&&135<f&&h.reverse();if(Os(n))if(1<k)for(l=0;l<k;l++)0===l%2&&l!==
k-1?ya=Math.max(ya,b?h[l].Ha.width:h[l].Ha.height):0!==l%2&&(m=Math.max(m,b?h[l].Ha.width:h[l].Ha.height));else 1===k&&(ya=b?h[0].Ha.width:h[0].Ha.height);if(q){switch(n){case Ls:Y=135>f?Ys(a,h,ya,y,C):Zs(a,h,ya,y,C);ya=Y.x;y=Y.width;C=Y.height;break;case Ms:for(l=0;l<k;l++){var m=h[l],Pa=m.Ha,J=0===Ha?0:x;b?(m.W.k(g-Pa.width,ha+J),y=Math.max(y,Pa.width),C=Math.max(C,ha+J+Pa.height),ha+=J+Pa.height):(m.W.k(P+J,g-Pa.height),y=Math.max(y,P+J+Pa.width),C=Math.max(C,Pa.height),P+=J+Pa.width);Ha++}break;
case Ns:for(l=0;l<k;l++)m=h[l],Pa=m.Ha,J=0===Ha?0:x,b?(m.W.k(t/2+a.B.x,ha+J),y=Math.max(y,Pa.width),C=Math.max(C,ha+J+Pa.height),ha+=J+Pa.height):(m.W.k(P+J,t/2+a.B.y),y=Math.max(y,P+J+Pa.width),C=Math.max(C,Pa.height),P+=J+Pa.width),Ha++}J=$s(this,2);ba=$s(this,2);b?(J[0].k(0,0),J[1].k(0,C),ba[0].k(y,0)):(J[0].k(0,0),J[1].k(y,0),ba[0].k(0,C));ba[1].k(y,C)}else for(l=0;l<k;l++){m=h[l];Pa=m.Ha;if(b){0<s&&0<Ha&&P+t+Pa.width>s&&(P<g&&at(a,n,g-P,0,eb,l-1),Ra++,Ha=0,eb=l,K=C,P=0,ha=135<f?-C-x:C+x);bt(this,
m,0,ha);var Ca=0;if(0===Ha){if(J=m.Sr,ba=m.ls,ja=Pa.width,Y=Pa.height,null===J||null===ba||f!==Ts(m))J=$s(this,2),ba=$s(this,2),J[0].k(0,0),J[1].k(0,Y),ba[0].k(ja,0),ba[1].k(ja,Y)}else{var Hc=ob(),Y=ct(this,a,m,J,ba,ja,Y,Hc),Ca=Y.x,J=Hc[0],ba=Hc[1],ja=Y.width,Y=Y.height;pb(Hc);P<Pa.width&&0>Ca&&(dt(a,-Ca,0,eb,l-1),et(J,-Ca,0),et(ba,-Ca,0),Ca=0)}m.W.k(Ca,ha);y=Math.max(y,ja);C=Math.max(C,K+(0===Ra?0:x)+Pa.height);P=ja}else{0<s&&0<Ha&&ha+t+Pa.height>s&&(ha<g&&at(a,n,0,g-ha,eb,l-1),Ra++,Ha=0,eb=l,K=
y,ha=0,P=135<f?-y-x:y+x);bt(this,m,P,0);Ca=0;if(0===Ha){if(J=m.Sr,ba=m.ls,ja=Pa.width,Y=Pa.height,null===J||null===ba||f!==Ts(m))J=$s(this,2),ba=$s(this,2),J[0].k(0,0),J[1].k(ja,0),ba[0].k(0,Y),ba[1].k(ja,Y)}else Hc=ob(),Y=ct(this,a,m,J,ba,ja,Y,Hc),Ca=Y.x,J=Hc[0],ba=Hc[1],ja=Y.width,Y=Y.height,pb(Hc),ha<Pa.height&&0>Ca&&(dt(a,0,-Ca,eb,l-1),et(J,0,-Ca),et(ba,0,-Ca),Ca=0);m.W.k(P,Ca);C=Math.max(C,Y);y=Math.max(y,K+(0===Ra?0:x)+Pa.width);ha=Y}Ha++}0<Ra&&(b?(C+=Math.max(0,c),P<y&&at(a,n,y-P,0,eb,k-1),
0<B&&(p||dt(a,B,0,0,k-1),y+=B)):(y+=Math.max(0,c),ha<C&&at(a,n,0,C-ha,eb,k-1),0<B&&(p||dt(a,0,B,0,k-1),C+=B)));p=g=0;switch(n){case ft:b?g+=y/2-a.B.x-v/2:p+=C/2-a.B.y-v/2;break;case Js:0<Ra?b?g+=y/2-a.B.x-v/2:p+=C/2-a.B.y-v/2:b?(l=h[0].W.x+h[0].ta.x,ya=h[k-1].W.x+h[k-1].ta.x+2*h[k-1].B.x,g+=l+(ya-l)/2-a.B.x-v/2):(l=h[0].W.y+h[0].ta.y,ya=h[k-1].W.y+h[k-1].ta.y+2*h[k-1].B.y,p+=l+(ya-l)/2-a.B.y-v/2);break;case Us:b?(g-=v,y+=v):(p-=v,C+=v);break;case Vs:b?(g+=y-a.width+v,y+=v):(p+=C-a.height+v,C+=v);
break;case Ls:b?g=1<k?g+(ya+t/2-a.B.x):g+(h[0].B.x-a.B.x+h[0].ta.x):p=1<k?p+(ya+t/2-a.B.y):p+(h[0].B.y-a.B.y+h[0].ta.y);break;case Ms:b?g+=y+t/2-a.B.x:p+=C+t/2-a.B.y;break;case Ns:break;default:u("Unhandled alignment value "+n.toString())}for(l=0;l<k;l++)m=h[l],b?m.W.k(m.W.x+m.ta.x-g,m.W.y+(135<f?(q?-C:-m.Ha.height)+m.ta.y-c:e+c+m.ta.y)):m.W.k(m.W.x+(135<f?(q?-y:-m.Ha.width)+m.ta.x-c:d+c+m.ta.x),m.W.y+m.ta.y-p);k=h=0;q?b?(y=gt(a,y,g),0>g&&(g=0),135<f&&(p+=C+c),C+=e+c,n===Ns&&(h+=t/2+a.B.x),k+=e+c):
(135<f&&(g+=y+c),y+=d+c,C=ht(a,C,p),0>p&&(p=0),n===Ns&&(k+=t/2+a.B.y),h+=d+c):b?(null===a.comments?d>y&&(n=it(n,d-y,0),h=n.x,k=n.y,y=d,g=0):y=gt(a,y,g),0>g&&(h-=g,g=0),135<f&&(p+=C+c),C=Math.max(Math.max(C,e),C+e+c),k+=e+c):(135<f&&(g+=y+c),y=Math.max(Math.max(y,d),y+d+c),null===a.comments?e>C&&(n=it(n,0,e-C),h=n.x,k=n.y,C=e,p=0):C=ht(a,C,p),0>p&&(k-=p,p=0),h+=d+c);if(0<Ra)f=$s(this,4),n=$s(this,4),b?(f[2].k(0,e+c),f[3].k(f[2].x,C),n[2].k(y,f[2].y),n[3].k(n[2].x,f[3].y)):(f[2].k(d+c,0),f[3].k(y,f[2].y),
n[2].k(f[2].x,C),n[3].k(f[3].x,n[2].y));else{f=$s(this,J.length+2);n=$s(this,ba.length+2);for(l=0;l<J.length;l++)q=J[l],f[l+2].k(q.x+h,q.y+k);for(l=0;l<ba.length;l++)q=ba[l],n[l+2].k(q.x+h,q.y+k)}b?(f[0].k(g,0),f[1].k(f[0].x,e),f[2].y<f[1].y&&(f[2].x>f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x>f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),n[0].k(g+d,0),n[1].k(n[0].x,e),n[2].y<n[1].y&&(n[2].x<n[0].x?n[2].assign(n[1]):n[1].assign(n[2])),n[3].y<n[2].y&&(n[3].x<n[0].x?n[3].assign(n[2]):
n[2].assign(n[3])),f[2].y-=c/2,n[2].y-=c/2):(f[0].k(0,p),f[1].k(d,f[0].y),f[2].x<f[1].x&&(f[2].y>f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y>f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),n[0].k(0,p+e),n[1].k(d,n[0].y),n[2].x<n[1].x&&(n[2].y<n[0].y?n[2].assign(n[1]):n[1].assign(n[2])),n[3].x<n[2].x&&(n[3].y<n[0].y?n[3].assign(n[2]):n[2].assign(n[3])),f[2].x-=c/2,n[2].x-=c/2);jt(this,J);jt(this,ba);a.Sr=f;a.ls=n;a.ta.k(g,p);a.Ha.k(y,C)}break;default:u("Unhandled compaction value "+
a.compaction.toString())}}};
function Rs(a,b){if(0===b.xl){var c=!1,d=0,e=Js;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Ks(e));e=Ps(b);b.W.k(0,0);b.Ha.k(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.ta.k(0,0):180===d&&!c||(90===d||270===d)&&e?b.ta.k(b.width-2*b.B.x,0):b.ta.k(0,b.height-2*b.B.y)}else{for(var c=Ts(b),d=90===c||270===c,f=0,e=b.children,g=e.length,h=0;h<g;h++)var k=e[h],f=Math.max(f,d?k.Ha.width:k.Ha.height);var l=b.alignment,m=l===Us,n=l===Vs,p=Ks(l),q=Math.max(0,
b.breadthLimit),s=Ws(b),t=b.nodeSpacing,v=Xs(b),x=m||n?0:v/2,B=b.rowSpacing,y=0;if(m||n||b.eo||b.fo&&1===b.maxGenerationCount)y=Math.max(0,b.rowIndent);var m=b.width,C=b.height,K=0,J=0,ba=0,ja=0,Y=0,P=0,ha=0,Ra=0,Ha=0,eb=0;p&&!Os(l)&&135<c&&e.reverse();if(Os(l))if(1<g)for(h=0;h<g;h++){var k=e[h],ya=k.Ha;0===h%2&&h!==g-1?Ha=Math.max(Ha,(d?ya.width:ya.height)+kt(k)-t):0!==h%2&&(eb=Math.max(eb,(d?ya.width:ya.height)+kt(k)-t))}else 1===g&&(Ha=d?e[0].Ha.width:e[0].Ha.height);if(p)switch(l){case Ls:case As:J=
135>c?Ys(b,e,Ha,K,J):Zs(b,e,Ha,K,J);Ha=J.x;K=J.width;J=J.height;break;case Ms:for(h=0;h<g;h++)k=e[h],ya=k.Ha,q=0===ha?0:B,d?(k.W.k(f-ya.width,Y+q),K=Math.max(K,ya.width),J=Math.max(J,Y+q+ya.height),Y+=q+ya.height):(k.W.k(ja+q,f-ya.height),K=Math.max(K,ja+q+ya.width),J=Math.max(J,ya.height),ja+=q+ya.width),ha++;break;case Ns:for(f=0;f<g;f++)k=e[f],ya=k.Ha,q=0===ha?0:B,d?(k.W.k(t/2+b.B.x,Y+q),K=Math.max(K,ya.width),J=Math.max(J,Y+q+ya.height),Y+=q+ya.height):(k.W.k(ja+q,t/2+b.B.y),K=Math.max(K,ja+q+
ya.width),J=Math.max(J,ya.height),ja+=q+ya.width),ha++}else for(h=0;h<g;h++)k=e[h],ya=k.Ha,d?(0<q&&0<ha&&ja+t+ya.width>q&&(ja<f&&at(b,l,f-ja,0,Ra,h-1),P++,ha=0,Ra=h,ba=J,ja=0,Y=135<c?-J-B:J+B),eb=0===ha?x:t,bt(a,k,0,Y),k.W.k(ja+eb,Y),K=Math.max(K,ja+eb+ya.width),J=Math.max(J,ba+(0===P?0:B)+ya.height),ja+=eb+ya.width):(0<q&&0<ha&&Y+t+ya.height>q&&(Y<f&&at(b,l,0,f-Y,Ra,h-1),P++,ha=0,Ra=h,ba=K,Y=0,ja=135<c?-K-B:K+B),eb=0===ha?x:t,bt(a,k,ja,0),k.W.k(ja,Y+eb),J=Math.max(J,Y+eb+ya.height),K=Math.max(K,
ba+(0===P?0:B)+ya.width),Y+=eb+ya.height),ha++;0<P&&(d?(J+=Math.max(0,s),ja<K&&at(b,l,K-ja,0,Ra,g-1),0<y&&(n||dt(b,y,0,0,g-1),K+=y)):(K+=Math.max(0,s),Y<J&&at(b,l,0,J-Y,Ra,g-1),0<y&&(n||dt(b,0,y,0,g-1),J+=y)));y=n=0;switch(l){case ft:d?n+=K/2-b.B.x-v/2:y+=J/2-b.B.y-v/2;break;case Js:0<P?d?n+=K/2-b.B.x-v/2:y+=J/2-b.B.y-v/2:d?(l=e[0].W.x+e[0].ta.x,t=e[g-1].W.x+e[g-1].ta.x+2*e[g-1].B.x,n+=l+(t-l)/2-b.B.x-v/2):(l=e[0].W.y+e[0].ta.y,t=e[g-1].W.y+e[g-1].ta.y+2*e[g-1].B.y,y+=l+(t-l)/2-b.B.y-v/2);break;case Us:d?
(n-=v,K+=v):(y-=v,J+=v);break;case Vs:d?(n+=K-b.width+v,K+=v):(y+=J-b.height+v,J+=v);break;case Ls:case As:d?n=1<g?n+(Ha+t/2-b.B.x):n+(e[0].B.x-b.B.x+e[0].ta.x):y=1<g?y+(Ha+t/2-b.B.y):y+(e[0].B.y-b.B.y+e[0].ta.y);break;case Ms:d?n+=K+t/2-b.B.x:y+=J+t/2-b.B.y;break;case Ns:break;default:u("Unhandled alignment value "+l.toString())}for(h=0;h<g;h++)k=e[h],d?k.W.k(k.W.x+k.ta.x-n,k.W.y+(135<c?(p?-J:-k.Ha.height)+k.ta.y-s:C+s+k.ta.y)):k.W.k(k.W.x+(135<c?(p?-K:-k.Ha.width)+k.ta.x-s:m+s+k.ta.x),k.W.y+k.ta.y-
y);d?(K=gt(b,K,n),0>n&&(n=0),135<c&&(y+=J+s),J+=C+s):(135<c&&(n+=K+s),K+=m+s,J=ht(b,J,y),0>y&&(y=0));b.ta.k(n,y);b.Ha.k(K,J)}}
function Ys(a,b,c,d,e){var f=b.length;if(0===f)return new D(c,0,d,e);if(1===f){var g=b[0];d=g.Ha.width;e=g.Ha.height;return new D(c,0,d,e)}for(var h=a.nodeSpacing,k=a.rowSpacing,l=90===Ts(a),m=0,n=0,p=0,q=0;q<f;q++)if(!(0!==q%2||1<f&&q===f-1)){var g=b[q],s=g.Ha,t=0===m?0:k;if(l){var v=kt(g)-h;g.W.k(c-(s.width+v),p+t);d=Math.max(d,s.width+v);e=Math.max(e,p+t+s.height);p+=t+s.height}else v=kt(g)-h,g.W.k(n+t,c-(s.height+v)),e=Math.max(e,s.height+v),d=Math.max(d,n+t+s.width),n+=t+s.width;m++}var m=0,
x=n,B=p;l?(n=c+h,p=0):(n=0,p=c+h);for(q=0;q<f;q++)0!==q%2&&(g=b[q],s=g.Ha,t=0===m?0:k,l?(v=kt(g)-h,g.W.k(n+v,p+t),d=Math.max(d,n+s.width+v),e=Math.max(e,p+t+s.height),p+=t+s.height):(v=kt(g)-h,g.W.k(n+t,p+v),d=Math.max(d,n+t+s.width),e=Math.max(e,p+s.height+v),n+=t+s.width),m++);1<f&&1===f%2&&(g=b[f-1],s=g.Ha,b=lt(g,l?Math.max(Math.abs(B),Math.abs(p)):Math.max(Math.abs(x),Math.abs(n))),l?(g.W.k(c+h/2-g.B.x-g.ta.x,e+b),l=c+h/2-g.B.x-g.ta.x,d=Math.max(d,l+s.width),0>l&&(d-=l),e=Math.max(e,Math.max(B,
p)+b+s.height),0>g.W.x&&(c=rt(a,g.W.x,!1,c,h))):(g.W.k(d+b,c+h/2-g.B.y-g.ta.y),d=Math.max(d,Math.max(x,n)+b+s.width),l=c+h/2-g.B.y-g.ta.y,e=Math.max(e,l+s.height),0>l&&(e-=l),0>g.W.y&&(c=rt(a,g.W.y,!0,c,h))));return new D(c,0,d,e)}
function Zs(a,b,c,d,e){var f=b.length;if(0===f)return new D(c,0,d,e);if(1===f){var g=b[0];d=g.Ha.width;e=g.Ha.height;return new D(c,0,d,e)}for(var h=a.nodeSpacing,k=a.rowSpacing,l=270===Ts(a),m=0,n=0,p=0,q=0;q<f;q++)if(!(0!==q%2||1<f&&q===f-1)){var g=b[q],s=g.Ha,t=0===m?0:k;if(l){var v=kt(g)-h,p=p-(t+s.height);g.W.k(c-(s.width+v),p);d=Math.max(d,s.width+v);e=Math.max(e,Math.abs(p))}else v=kt(g)-h,n-=t+s.width,g.W.k(n,c-(s.height+v)),e=Math.max(e,s.height+v),d=Math.max(d,Math.abs(n));m++}var m=0,x=
n,B=p;l?(n=c+h,p=0):(n=0,p=c+h);for(q=0;q<f;q++)0!==q%2&&(g=b[q],s=g.Ha,t=0===m?0:k,l?(v=kt(g)-h,p-=t+s.height,g.W.k(n+v,p),d=Math.max(d,n+s.width+v),e=Math.max(e,Math.abs(p))):(v=kt(g)-h,n-=t+s.width,g.W.k(n,p+v),e=Math.max(e,p+s.height+v),d=Math.max(d,Math.abs(n))),m++);1<f&&1===f%2&&(g=b[f-1],s=g.Ha,k=lt(g,l?Math.max(Math.abs(B),Math.abs(p)):Math.max(Math.abs(x),Math.abs(n))),l?(g.W.k(c+h/2-g.B.x-g.ta.x,-e-s.height-k),n=c+h/2-g.B.x-g.ta.x,d=Math.max(d,n+s.width),0>n&&(d-=n),e=Math.max(e,Math.abs(Math.min(B,
p))+k+s.height),0>g.W.x&&(c=rt(a,g.W.x,!1,c,h))):(g.W.k(-d-s.width-k,c+h/2-g.B.y-g.ta.y),d=Math.max(d,Math.abs(Math.min(x,n))+k+s.width),n=c+h/2-g.B.y-g.ta.y,e=Math.max(e,n+s.height),0>n&&(e-=n),0>g.W.y&&(c=rt(a,g.W.y,!0,c,h))));for(q=0;q<f;q++)g=b[q],l?g.W.k(g.W.x,g.W.y+e):g.W.k(g.W.x+d,g.W.y);return new D(c,0,d,e)}function kt(a){return null===a.parent?0:a.parent.nodeSpacing}function lt(a){return null===a.parent?0:a.parent.rowSpacing}
function rt(a,b,c,d,e){a=a.children;for(var f=a.length,g=0;g<f;g++)c?a[g].W.k(a[g].W.x,a[g].W.y-b):a[g].W.k(a[g].W.x-b,a[g].W.y);b=a[f-1];return Math.max(d,c?b.ta.y+b.B.y-e/2:b.ta.x+b.B.x-e/2)}
function gt(a,b,c){switch(a.alignment){case Js:case ft:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Us:return a.width>b?a.width:b;case Vs:return 2*a.B.x>b?a.width:b+a.width-2*a.B.x;case Ls:case As:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Ms:return a.width-a.B.x+a.nodeSpacing/2+b;case Ns:return Math.max(a.width,a.B.x+a.nodeSpacing/2+b);default:return b}}
function ht(a,b,c){switch(a.alignment){case Js:case ft:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Us:return a.height>b?a.height:b;case Vs:return 2*a.B.y>b?a.height:b+a.height-2*a.B.y;case Ls:case As:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Ms:return a.height-a.B.y+a.nodeSpacing/2+b;case Ns:return Math.max(a.height,a.B.y+a.nodeSpacing/2+b);default:return b}}
function it(a,b,c){switch(a){case ft:b/=2;c/=2;break;case Js:b/=2;c/=2;break;case Us:c=b=0;break;case Vs:break;default:u("Unhandled alignment value "+a.toString())}return new z(b,c)}function at(a,b,c,d,e,f){b=it(b,c,d);dt(a,b.x,b.y,e,f)}function dt(a,b,c,d,e){if(0!==b||0!==c)for(a=a.children;d<=e;d++){var f=a[d].W;f.x+=b;f.y+=c}}
function bt(a,b,c,d){var e=b.parent;switch(a.Re){case ls:for(a=b.Mb;a.next();)b=a.value,b.fromVertex===e&&b.rq.k(c,d);break;case ss:for(a=b.Gb;a.next();)b=a.value,b.toVertex===e&&b.rq.k(c,d);break;default:u("Unhandled path value "+a.Re.toString())}}function et(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function ct(a,b,c,d,e,f,g,h){var k=Ts(b),l=90===k||270===k,m=b.nodeSpacing;b=d;var n=e;d=f;e=g;var p=c.Sr,q=c.ls;g=c.Ha;var s=l?Math.max(e,g.height):Math.max(d,g.width);if(null===p||k!==Ts(c))p=$s(a,2),q=$s(a,2),l?(p[0].k(0,0),p[1].k(0,g.height),q[0].k(g.width,0),q[1].k(q[0].x,p[1].y)):(p[0].k(0,0),p[1].k(g.width,0),q[0].k(0,g.height),q[1].k(p[1].x,q[0].y));if(l){c=d;d=9999999;if(!(null===n||2>n.length||null===p||2>p.length))for(l=k=0;k<n.length&&l<p.length;){e=n[k];var t=p[l];f=t.x;var v=t.y;f+=
c;var x=e;k+1<n.length&&(x=n[k+1]);var B=t,t=B.x,B=B.y;l+1<p.length&&(B=p[l+1],t=B.x,B=B.y,t+=c);var y=d;e.y===v?y=f-e.x:e.y>v&&e.y<B?y=f+(e.y-v)/(B-v)*(t-f)-e.x:v>e.y&&v<x.y&&(y=f-(e.x+(v-e.y)/(x.y-e.y)*(x.x-e.x)));y<d&&(d=y);x.y<=e.y?k++:B<=v?l++:(x.y<=B&&k++,B<=x.y&&l++)}c-=d;c+=m;k=p;l=c;if(null===b||2>b.length||null===k||2>k.length)d=null;else{m=$s(a,b.length+k.length);for(d=f=e=0;f<k.length&&k[f].y<b[0].y;)v=k[f++],m[d++].k(v.x+l,v.y);for(;e<b.length;)v=b[e++],m[d++].k(v.x,v.y);for(e=b[b.length-
1].y;f<k.length&&k[f].y<=e;)f++;for(;f<k.length&&k[f].y>e;)v=k[f++],m[d++].k(v.x+l,v.y);k=$s(a,d);for(e=0;e<d;e++)k[e].assign(m[e]);jt(a,m);d=k}f=q;v=c;if(null===n||2>n.length||null===f||2>f.length)e=null;else{m=$s(a,n.length+f.length);for(l=x=k=0;k<n.length&&n[k].y<f[0].y;)e=n[k++],m[l++].k(e.x,e.y);for(;x<f.length;)e=f[x++],m[l++].k(e.x+v,e.y);for(f=f[f.length-1].y;k<n.length&&n[k].y<=f;)k++;for(;k<n.length&&n[k].y>f;)e=n[k++],m[l++].k(e.x,e.y);e=$s(a,l);for(k=0;k<l;k++)e[k].assign(m[k]);jt(a,m)}f=
Math.max(0,c)+g.width;g=s}else{c=e;d=9999999;if(!(null===n||2>n.length||null===p||2>p.length))for(l=k=0;k<n.length&&l<p.length;)e=n[k],t=p[l],f=t.x,v=t.y,v+=c,x=e,k+1<n.length&&(x=n[k+1]),B=t,t=B.x,B=B.y,l+1<p.length&&(B=p[l+1],t=B.x,B=B.y,B+=c),y=d,e.x===f?y=v-e.y:e.x>f&&e.x<t?y=v+(e.x-f)/(t-f)*(B-v)-e.y:f>e.x&&f<x.x&&(y=v-(e.y+(f-e.x)/(x.x-e.x)*(x.y-e.y))),y<d&&(d=y),x.x<=e.x?k++:t<=f?l++:(x.x<=t&&k++,t<=x.x&&l++);c-=d;c+=m;k=p;l=c;if(null===b||2>b.length||null===k||2>k.length)d=null;else{m=$s(a,
b.length+k.length);for(d=f=e=0;f<k.length&&k[f].x<b[0].x;)v=k[f++],m[d++].k(v.x,v.y+l);for(;e<b.length;)v=b[e++],m[d++].k(v.x,v.y);for(e=b[b.length-1].x;f<k.length&&k[f].x<=e;)f++;for(;f<k.length&&k[f].x>e;)v=k[f++],m[d++].k(v.x,v.y+l);k=$s(a,d);for(e=0;e<d;e++)k[e].assign(m[e]);jt(a,m);d=k}f=q;v=c;if(null===n||2>n.length||null===f||2>f.length)e=null;else{m=$s(a,n.length+f.length);for(l=x=k=0;k<n.length&&n[k].x<f[0].x;)e=n[k++],m[l++].k(e.x,e.y);for(;x<f.length;)e=f[x++],m[l++].k(e.x,e.y+v);for(f=
f[f.length-1].x;k<n.length&&n[k].x<=f;)k++;for(;k<n.length&&n[k].x>f;)e=n[k++],m[l++].k(e.x,e.y);e=$s(a,l);for(k=0;k<l;k++)e[k].assign(m[k]);jt(a,m)}f=s;g=Math.max(0,c)+g.height}jt(a,b);jt(a,p);jt(a,n);jt(a,q);h[0]=d;h[1]=e;return new D(c,0,f,g)}function $s(a,b){var c=a.ox[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new z;return c}function jt(a,b){var c=b.length,d=a.ox[c];void 0===d&&(d=[],a.ox[c]=d);d.push(b)}
Z.prototype.arrangeTrees=function(){if(this.tc===rs)for(var a=this.Ic.i;a.next();){var b=a.value;if(b instanceof ps){var c=b.dc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);st(this,b,c,d)}}}else for(a=this.nd,b=a.x,c=a.y,a=this.Ic.i;a.next();)if(d=a.value,d instanceof ps)switch(st(this,d,b+d.ta.x,c+d.ta.y),this.tc){case os:c+=d.Ha.height+this.kf.height;break;case tt:b+=d.Ha.width+this.kf.width;break;default:u("Unhandled arrangement value "+this.tc.toString())}};
function st(a,b,c,d){if(null!==b){b.x=c;b.y=d;b=b.children;for(var e=b.length,f=0;f<e;f++){var g=b[f];st(a,g,c+g.W.x,d+g.W.y)}}}Z.prototype.commitLayout=function(){this.Uy();this.commitNodes();this.Fx();this.Qr&&this.commitLinks()};Z.prototype.commitNodes=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Z.prototype.Fx=function(){if(this.my===xs){for(var a=this.oz,b=[],c=null,d=this.network.vertexes.i;d.next();){var e=d.value;null===c?c=e.Qa.copy():c.fh(e.Qa);var f=b[e.level],f=void 0===f?Ws(e):Math.max(f,Ws(e));b[e.level]=f}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.$e(this.nodeSpacing/2,this.layerSpacing),e=new z(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.$e(this.layerSpacing,this.nodeSpacing/2),e=new z(-this.layerSpacing/2,-this.nodeSpacing/2));var f=
[],c=90===this.angle||270===this.angle?c.width:c.height,g=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)g+=a[d]+b[d];for(d=0;d<a.length;d++){var h=a[d]+b[d];270===this.angle?(g-=h,f.push(new D(0,g,c,h))):90===this.angle?(f.push(new D(0,g,c,h)),g+=h):180===this.angle?(g-=h,f.push(new D(g,0,h,c))):(f.push(new D(g,0,h,c)),g+=h)}this.commitLayers(f,e)}};Z.prototype.commitLayers=function(){};Z.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
Z.prototype.Uy=function(){for(var a=this.Ic.i;a.next();){var b=a.value;b instanceof ps&&ut(this,b)}};function ut(a,b){if(null!==b){a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ut(a,c[e])}}
Z.prototype.setPortSpots=function(a){var b=a.alignment;if(Ks(b)){var c=this.Re===ls,d=Ts(a),e;switch(d){case 0:e=he;break;case 90:e=ie;break;case 180:e=ge;break;default:e=fe}var f=a.children,g=f.length;switch(b){case Ls:case As:for(b=0;b<g;b++){var h=f[b],h=(c?h.Mb:h.Gb).first();if(null!==h&&(h=h.link,null!==h)){var k=90===d||270===d?ge:fe;if(1===g||b===g-1&&1===g%2)switch(d){case 0:k=ge;break;case 90:k=fe;break;case 180:k=he;break;default:k=ie}else 0===b%2&&(k=90===d||270===d?he:ie);c?(a.setsPortSpot&&
(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&(h.ab=e))}}break;case Ms:k=90===d||270===d?he:ie;for(d=c?a.Gb:a.Mb;d.next();)h=d.value.link,null!==h&&(c?(a.setsPortSpot&&(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&(h.ab=e)));break;case Ns:for(k=90===d||270===d?ge:fe,d=c?a.Gb:a.Mb;d.next();)h=d.value.link,null!==h&&(c?(a.setsPortSpot&&(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&
(h.ab=e)))}}else if(c=Ts(a),this.Re===ls)for(e=a.Gb;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.lc())switch(c){case 0:d.Za=he;break;case 90:d.Za=ie;break;case 180:d.Za=ge;break;default:d.Za=fe}else d.Za=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.lc())switch(c){case 0:d.ab=ge;break;case 90:d.ab=fe;break;case 180:d.ab=he;break;default:d.ab=ie}else d.ab=a.childPortSpot}}else for(e=a.Mb;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.lc())switch(c){case 0:d.ab=
he;break;case 90:d.ab=ie;break;case 180:d.ab=ge;break;default:d.ab=fe}else d.ab=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.lc())switch(c){case 0:d.Za=ge;break;case 90:d.Za=fe;break;case 180:d.Za=he;break;default:d.Za=ie}else d.Za=a.childPortSpot}};function Ts(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Ws(a){var b=Ts(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function Xs(a){var b=Ts(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
G(Z,{SI:"roots"},function(){return this.Ic},function(a){this.Ic!==a&&(ra(a,Xb,Z,"roots"),this.Ic=a,this.v())});G(Z,{path:"path"},function(){return this.jq},function(a){this.jq!==a&&(va(a,Z,Z,"path"),this.jq=a,this.v())});G(Z,{bH:"treeStyle"},function(){return this.Zq},function(a){this.tc!==a&&(va(a,Z,Z,"treeStyle"),a===ms||a===Ds||a===Es||a===Cs)&&(this.Zq=a,this.v())});
G(Z,{my:"layerStyle"},function(){return this.Dt},function(a){this.tc!==a&&(va(a,Z,Z,"layerStyle"),a===ns||a===ys||a===xs)&&(this.Dt=a,this.v())});G(Z,{comments:"comments"},function(){return this.Ag},function(a){this.Ag!==a&&(w(a,"boolean",Z,"comments"),this.Ag=a,this.v())});G(Z,{Xe:"arrangement"},function(){return this.tc},function(a){this.tc!==a&&(va(a,Z,Z,"arrangement"),a===os||a===tt||a===rs)&&(this.tc=a,this.v())});
G(Z,{EB:"arrangementSpacing"},function(){return this.kf},function(a){ra(a,Za,Z,"arrangementSpacing");this.kf.A(a)||(this.kf.assign(a),this.v())});G(Z,{RI:"rootDefaults"},function(){return this.fa},function(a){this.fa!==a&&(ra(a,ps,Z,"rootDefaults"),this.fa=a,this.v())});G(Z,{pH:"alternateDefaults"},function(){return this.ea},function(a){this.ea!==a&&(ra(a,ps,Z,"alternateDefaults"),this.ea=a,this.v())});
G(Z,{sorting:"sorting"},function(){return this.fa.sorting},function(a){this.fa.sorting!==a&&(va(a,Z,Z,"sorting"),a===Fs||a===Gs||a===Hs||Is)&&(this.fa.sorting=a,this.v())});G(Z,{comparer:"comparer"},function(){return this.fa.comparer},function(a){this.fa.comparer!==a&&(w(a,"function",Z,"comparer"),this.fa.comparer=a,this.v())});G(Z,{angle:"angle"},function(){return this.fa.angle},function(a){this.fa.angle!==a&&(w(a,"number",Z,"angle"),0===a||90===a||180===a||270===a)&&(this.fa.angle=a,this.v())});
G(Z,{alignment:"alignment"},function(){return this.fa.alignment},function(a){this.fa.alignment!==a&&(va(a,Z,Z,"alignment"),this.fa.alignment=a,this.v())});G(Z,{nodeIndent:"nodeIndent"},function(){return this.fa.nodeIndent},function(a){this.fa.nodeIndent!==a&&(w(a,"number",Z,"nodeIndent"),0<=a&&(this.fa.nodeIndent=a,this.v()))});
G(Z,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.fa.nodeIndentPastParent},function(a){this.fa.nodeIndentPastParent!==a&&(w(a,"number",Z,"nodeIndentPastParent"),0<=a&&1>=a&&(this.fa.nodeIndentPastParent=a,this.v()))});G(Z,{nodeSpacing:"nodeSpacing"},function(){return this.fa.nodeSpacing},function(a){this.fa.nodeSpacing!==a&&(w(a,"number",Z,"nodeSpacing"),this.fa.nodeSpacing=a,this.v())});
G(Z,{layerSpacing:"layerSpacing"},function(){return this.fa.layerSpacing},function(a){this.fa.layerSpacing!==a&&(w(a,"number",Z,"layerSpacing"),this.fa.layerSpacing=a,this.v())});G(Z,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.fa.layerSpacingParentOverlap},function(a){this.fa.layerSpacingParentOverlap!==a&&(w(a,"number",Z,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.fa.layerSpacingParentOverlap=a,this.v()))});
G(Z,{compaction:"compaction"},function(){return this.fa.compaction},function(a){this.fa.compaction!==a&&(va(a,Z,Z,"compaction"),a===Qs||a===Ss)&&(this.fa.compaction=a,this.v())});G(Z,{breadthLimit:"breadthLimit"},function(){return this.fa.breadthLimit},function(a){this.fa.breadthLimit!==a&&(w(a,"number",Z,"breadthLimit"),0<=a&&(this.fa.breadthLimit=a,this.v()))});
G(Z,{rowSpacing:"rowSpacing"},function(){return this.fa.rowSpacing},function(a){this.fa.rowSpacing!==a&&(w(a,"number",Z,"rowSpacing"),this.fa.rowSpacing=a,this.v())});G(Z,{rowIndent:"rowIndent"},function(){return this.fa.rowIndent},function(a){this.fa.rowIndent!==a&&(w(a,"number",Z,"rowIndent"),0<=a&&(this.fa.rowIndent=a,this.v()))});
G(Z,{commentSpacing:"commentSpacing"},function(){return this.fa.commentSpacing},function(a){this.fa.commentSpacing!==a&&(w(a,"number",Z,"commentSpacing"),this.fa.commentSpacing=a,this.v())});G(Z,{commentMargin:"commentMargin"},function(){return this.fa.commentMargin},function(a){this.fa.commentMargin!==a&&(w(a,"number",Z,"commentMargin"),this.fa.commentMargin=a,this.v())});
G(Z,{setsPortSpot:"setsPortSpot"},function(){return this.fa.setsPortSpot},function(a){this.fa.setsPortSpot!==a&&(w(a,"boolean",Z,"setsPortSpot"),this.fa.setsPortSpot=a,this.v())});G(Z,{portSpot:"portSpot"},function(){return this.fa.portSpot},function(a){ra(a,R,Z,"portSpot");this.fa.portSpot.A(a)||(this.fa.portSpot=a,this.v())});
G(Z,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.fa.setsChildPortSpot},function(a){this.fa.setsChildPortSpot!==a&&(w(a,"boolean",Z,"setsChildPortSpot"),this.fa.setsChildPortSpot=a,this.v())});G(Z,{childPortSpot:"childPortSpot"},function(){return this.fa.childPortSpot},function(a){ra(a,R,Z,"childPortSpot");this.fa.childPortSpot.A(a)||(this.fa.childPortSpot=a,this.v())});
G(Z,{AH:"alternateSorting"},function(){return this.ea.sorting},function(a){this.ea.sorting!==a&&(va(a,Z,Z,"alternateSorting"),a===Fs||a===Gs||a===Hs||Is)&&(this.ea.sorting=a,this.v())});G(Z,{oH:"alternateComparer"},function(){return this.ea.comparer},function(a){this.ea.comparer!==a&&(w(a,"function",Z,"alternateComparer"),this.ea.comparer=a,this.v())});
G(Z,{iH:"alternateAngle"},function(){return this.ea.angle},function(a){this.ea.angle!==a&&(w(a,"number",Z,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.ea.angle=a,this.v())});G(Z,{hH:"alternateAlignment"},function(){return this.ea.alignment},function(a){this.ea.alignment!==a&&(va(a,Z,Z,"alternateAlignment"),this.ea.alignment=a,this.v())});
G(Z,{sH:"alternateNodeIndent"},function(){return this.ea.nodeIndent},function(a){this.ea.nodeIndent!==a&&(w(a,"number",Z,"alternateNodeIndent"),0<=a&&(this.ea.nodeIndent=a,this.v()))});G(Z,{tH:"alternateNodeIndentPastParent"},function(){return this.ea.nodeIndentPastParent},function(a){this.ea.nodeIndentPastParent!==a&&(w(a,"number",Z,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.ea.nodeIndentPastParent=a,this.v()))});
G(Z,{uH:"alternateNodeSpacing"},function(){return this.ea.nodeSpacing},function(a){this.ea.nodeSpacing!==a&&(w(a,"number",Z,"alternateNodeSpacing"),this.ea.nodeSpacing=a,this.v())});G(Z,{qH:"alternateLayerSpacing"},function(){return this.ea.layerSpacing},function(a){this.ea.layerSpacing!==a&&(w(a,"number",Z,"alternateLayerSpacing"),this.ea.layerSpacing=a,this.v())});
G(Z,{rH:"alternateLayerSpacingParentOverlap"},function(){return this.ea.layerSpacingParentOverlap},function(a){this.ea.layerSpacingParentOverlap!==a&&(w(a,"number",Z,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.ea.layerSpacingParentOverlap=a,this.v()))});G(Z,{nH:"alternateCompaction"},function(){return this.ea.compaction},function(a){this.ea.compaction!==a&&(va(a,Z,Z,"alternateCompaction"),a===Qs||a===Ss)&&(this.ea.compaction=a,this.v())});
G(Z,{jH:"alternateBreadthLimit"},function(){return this.ea.breadthLimit},function(a){this.ea.breadthLimit!==a&&(w(a,"number",Z,"alternateBreadthLimit"),0<=a&&(this.ea.breadthLimit=a,this.v()))});G(Z,{xH:"alternateRowSpacing"},function(){return this.ea.rowSpacing},function(a){this.ea.rowSpacing!==a&&(w(a,"number",Z,"alternateRowSpacing"),this.ea.rowSpacing=a,this.v())});
G(Z,{wH:"alternateRowIndent"},function(){return this.ea.rowIndent},function(a){this.ea.rowIndent!==a&&(w(a,"number",Z,"alternateRowIndent"),0<=a&&(this.ea.rowIndent=a,this.v()))});G(Z,{mH:"alternateCommentSpacing"},function(){return this.ea.commentSpacing},function(a){this.ea.commentSpacing!==a&&(w(a,"number",Z,"alternateCommentSpacing"),this.ea.commentSpacing=a,this.v())});
G(Z,{lH:"alternateCommentMargin"},function(){return this.ea.commentMargin},function(a){this.ea.commentMargin!==a&&(w(a,"number",Z,"alternateCommentMargin"),this.ea.commentMargin=a,this.v())});G(Z,{zH:"alternateSetsPortSpot"},function(){return this.ea.setsPortSpot},function(a){this.ea.setsPortSpot!==a&&(w(a,"boolean",Z,"alternateSetsPortSpot"),this.ea.setsPortSpot=a,this.v())});
G(Z,{vH:"alternatePortSpot"},function(){return this.ea.portSpot},function(a){ra(a,R,Z,"alternatePortSpot");this.ea.portSpot.A(a)||(this.ea.portSpot=a,this.v())});G(Z,{yH:"alternateSetsChildPortSpot"},function(){return this.ea.setsChildPortSpot},function(a){this.ea.setsChildPortSpot!==a&&(w(a,"boolean",Z,"alternateSetsChildPortSpot"),this.ea.setsChildPortSpot=a,this.v())});
G(Z,{kH:"alternateChildPortSpot"},function(){return this.ea.childPortSpot},function(a){ra(a,R,Z,"alternateChildPortSpot");this.ea.childPortSpot.A(a)||(this.ea.childPortSpot=a,this.v())});var ks;Z.PathDefault=ks=I(Z,"PathDefault",-1);var ls;Z.PathDestination=ls=I(Z,"PathDestination",0);var ss;Z.PathSource=ss=I(Z,"PathSource",1);var Fs;Z.SortingForwards=Fs=I(Z,"SortingForwards",10);var Gs;Z.SortingReverse=Gs=I(Z,"SortingReverse",11);var Hs;Z.SortingAscending=Hs=I(Z,"SortingAscending",12);var Is;
Z.SortingDescending=Is=I(Z,"SortingDescending",13);var ft;Z.AlignmentCenterSubtrees=ft=I(Z,"AlignmentCenterSubtrees",20);var Js;Z.AlignmentCenterChildren=Js=I(Z,"AlignmentCenterChildren",21);var Us;Z.AlignmentStart=Us=I(Z,"AlignmentStart",22);var Vs;Z.AlignmentEnd=Vs=I(Z,"AlignmentEnd",23);var Ls;Z.AlignmentBus=Ls=I(Z,"AlignmentBus",24);var As;Z.AlignmentBusBranching=As=I(Z,"AlignmentBusBranching",25);var Ms;Z.AlignmentTopLeftBus=Ms=I(Z,"AlignmentTopLeftBus",26);var Ns;
Z.AlignmentBottomRightBus=Ns=I(Z,"AlignmentBottomRightBus",27);var Qs;Z.CompactionNone=Qs=I(Z,"CompactionNone",30);var Ss;Z.CompactionBlock=Ss=I(Z,"CompactionBlock",31);var ms;Z.StyleLayered=ms=I(Z,"StyleLayered",40);var Es;Z.StyleLastParents=Es=I(Z,"StyleLastParents",41);var Ds;Z.StyleAlternating=Ds=I(Z,"StyleAlternating",42);var Cs;Z.StyleRootOnly=Cs=I(Z,"StyleRootOnly",43);var os;Z.ArrangementVertical=os=I(Z,"ArrangementVertical",50);var tt;
Z.ArrangementHorizontal=tt=I(Z,"ArrangementHorizontal",51);var rs;Z.ArrangementFixedRoots=rs=I(Z,"ArrangementFixedRoots",52);var ns;Z.LayerIndividual=ns=I(Z,"LayerIndividual",60);var ys;Z.LayerSiblings=ys=I(Z,"LayerSiblings",61);var xs;Z.LayerUniform=xs=I(Z,"LayerUniform",62);function qs(){kc.call(this)}yb(qs,kc);vb("TreeNetwork",qs);qs.prototype.createVertex=function(){return new ps};qs.prototype.createEdge=function(){return new vt};
function ps(){lc.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.W=new z(0,0);this.Ha=new Za(0,0);this.ta=new z(0,0);this.fo=this.eo=this.CG=!1;this.ls=this.Sr=null;this.sorting=Fs;this.comparer=zq;this.angle=0;this.alignment=Js;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Ss;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=ee;this.setsChildPortSpot=!0;this.childPortSpot=ee}yb(ps,lc);vb("TreeVertex",ps);
ps.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};H(ps,{xl:"childrenCount"},function(){return this.children.length});G(ps,{QI:"relativePosition"},function(){return this.W},function(a){this.W.set(a)});G(ps,{$I:"subtreeSize"},function(){return this.Ha},function(a){this.Ha.set(a)});G(ps,{ZI:"subtreeOffset"},function(){return this.ta},function(a){this.ta.set(a)});
function vt(){sc.call(this);this.rq=new z(0,0)}yb(vt,sc);vb("TreeEdge",vt);
vt.prototype.commit=function(){var a=this.link;if(null!==a&&!a.nk){var b=this.network.ub,c=null,d=null;switch(b.Re){case ls:c=this.fromVertex;d=this.toVertex;break;case ss:c=this.toVertex;d=this.fromVertex;break;default:u("Unhandled path value "+b.Re.toString())}if(null!==c&&null!==d)if(b=this.rq,0!==b.x||0!==b.y||c.CG){var d=c.Qa,e=Ts(c),f=Ws(c),g=c.rowSpacing;a.updateRoute();var h=a.ne===Li,k=a.Ib,l=0,m,n;a.Ak();if(k||h){for(l=2;4<a.Z;)a.XC(2);m=a.j(1);n=a.j(2)}else{for(l=1;3<a.Z;)a.XC(1);m=a.j(0);
n=a.j(a.Z-1)}var p=a.j(a.Z-1),q=0;0===e?(c.alignment===Vs?(q=d.bottom+b.y,0===b.y&&m.y>p.y+c.rowIndent&&(q=Math.min(q,Math.max(m.y,q-Xs(c))))):c.alignment===Us?(q=d.top+b.y,0===b.y&&m.y<p.y-c.rowIndent&&(q=Math.max(q,Math.min(m.y,q+Xs(c))))):q=c.eo||c.fo&&1===c.maxGenerationCount?d.top-c.ta.y+b.y:d.y+d.height/2+b.y,h?(a.n(l,m.x,q),l++,a.n(l,d.right+f,q),l++,a.n(l,d.right+f+(b.x-g)/3,q),l++,a.n(l,d.right+f+2*(b.x-g)/3,q),l++,a.n(l,d.right+f+(b.x-g),q),l++,a.n(l,n.x,q)):(k&&(a.n(l,d.right+f/2,m.y),
l++),a.n(l,d.right+f/2,q),l++,a.n(l,d.right+f+b.x-(k?g/2:g),q),l++,k&&a.n(l,a.j(l-1).x,n.y))):90===e?(c.alignment===Vs?(q=d.right+b.x,0===b.x&&m.x>p.x+c.rowIndent&&(q=Math.min(q,Math.max(m.x,q-Xs(c))))):c.alignment===Us?(q=d.left+b.x,0===b.x&&m.x<p.x-c.rowIndent&&(q=Math.max(q,Math.min(m.x,q+Xs(c))))):q=c.eo||c.fo&&1===c.maxGenerationCount?d.left-c.ta.x+b.x:d.x+d.width/2+b.x,h?(a.n(l,q,m.y),l++,a.n(l,q,d.bottom+f),l++,a.n(l,q,d.bottom+f+(b.y-g)/3),l++,a.n(l,q,d.bottom+f+2*(b.y-g)/3),l++,a.n(l,q,d.bottom+
f+(b.y-g)),l++,a.n(l,q,n.y)):(k&&(a.n(l,m.x,d.bottom+f/2),l++),a.n(l,q,d.bottom+f/2),l++,a.n(l,q,d.bottom+f+b.y-(k?g/2:g)),l++,k&&a.n(l,n.x,a.j(l-1).y))):180===e?(c.alignment===Vs?(q=d.bottom+b.y,0===b.y&&m.y>p.y+c.rowIndent&&(q=Math.min(q,Math.max(m.y,q-Xs(c))))):c.alignment===Us?(q=d.top+b.y,0===b.y&&m.y<p.y-c.rowIndent&&(q=Math.max(q,Math.min(m.y,q+Xs(c))))):q=c.eo||c.fo&&1===c.maxGenerationCount?d.top-c.ta.y+b.y:d.y+d.height/2+b.y,h?(a.n(l,m.x,q),l++,a.n(l,d.left-f,q),l++,a.n(l,d.left-f+(b.x+
g)/3,q),l++,a.n(l,d.left-f+2*(b.x+g)/3,q),l++,a.n(l,d.left-f+(b.x+g),q),l++,a.n(l,n.x,q)):(k&&(a.n(l,d.left-f/2,m.y),l++),a.n(l,d.left-f/2,q),l++,a.n(l,d.left-f+b.x+(k?g/2:g),q),l++,k&&a.n(l,a.j(l-1).x,n.y))):270===e?(c.alignment===Vs?(q=d.right+b.x,0===b.x&&m.x>p.x+c.rowIndent&&(q=Math.min(q,Math.max(m.x,q-Xs(c))))):c.alignment===Us?(q=d.left+b.x,0===b.x&&m.x<p.x-c.rowIndent&&(q=Math.max(q,Math.min(m.x,q+Xs(c))))):q=c.eo||c.fo&&1===c.maxGenerationCount?d.left-c.ta.x+b.x:d.x+d.width/2+b.x,h?(a.n(l,
q,m.y),l++,a.n(l,q,d.top-f),l++,a.n(l,q,d.top-f+(b.y+g)/3),l++,a.n(l,q,d.top-f+2*(b.y+g)/3),l++,a.n(l,q,d.top-f+(b.y+g)),l++,a.n(l,q,n.y)):(k&&(a.n(l,m.x,d.top-f/2),l++),a.n(l,q,d.top-f/2),l++,a.n(l,q,d.top-f+b.y+(k?g/2:g)),l++,k&&a.n(l,n.x,a.j(l-1).y))):u("Invalid angle "+e);a.Mh()}else e=c,f=d,a=this.link,c=Ts(e),c!==Ts(f)&&(b=Ws(e),d=e.Qa,e=f.Qa,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.updateRoute(),e=a.ne===Li,f=a.Ib,g=
Ks(this.fromVertex.alignment),a.Ak(),0===c?(c=d.right+b/2,e?4===a.Z&&(b=a.j(3).y,a.L(1,c-20,a.j(1).y),a.n(2,c-20,b),a.n(3,c,b),a.n(4,c+20,b),a.L(5,a.j(5).x,b)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,c,a.j(2).y),a.L(3,c,a.j(3).y)):4===a.Z?a.n(2,c,a.j(2).y):3===a.Z?a.L(1,c,a.j(2).y):2===a.Z&&a.n(1,c,a.j(1).y)):90===c?(b=d.bottom+b/2,e?4===a.Z&&(c=a.j(3).x,a.L(1,a.j(1).x,b-20),a.n(2,c,b-20),a.n(3,c,b),a.n(4,c,b+20),a.L(5,c,a.j(5).y)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,a.j(2).x,b),a.L(3,
a.j(3).x,b)):4===a.Z?a.n(2,a.j(2).x,b):3===a.Z?a.L(1,a.j(2).x,b):2===a.Z&&a.n(1,a.j(1).x,b)):180===c?(c=d.left-b/2,e?4===a.Z&&(b=a.j(3).y,a.L(1,c+20,a.j(1).y),a.n(2,c+20,b),a.n(3,c,b),a.n(4,c-20,b),a.L(5,a.j(5).x,b)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,c,a.j(2).y),a.L(3,c,a.j(3).y)):4===a.Z?a.n(2,c,a.j(2).y):3===a.Z?a.L(1,c,a.j(2).y):2===a.Z&&a.n(1,c,a.j(1).y)):270===c&&(b=d.top-b/2,e?4===a.Z&&(c=a.j(3).x,a.L(1,a.j(1).x,b+20),a.n(2,c,b+20),a.n(3,c,b),a.n(4,c,b-20),a.L(5,c,a.j(5).y)):f?g?
a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,a.j(2).x,b),a.L(3,a.j(3).x,b)):4===a.Z?a.n(2,a.j(2).x,b):3===a.Z?a.L(1,a.j(2).x,b):2===a.Z&&a.n(1,a.j(1).x,b)),a.Mh()))}};G(vt,{OI:"relativePoint"},function(){return this.rq},function(a){this.rq.set(a)});function wt(){this.Bm=[]}
function mn(a){var b=new wt,c=null;"string"===typeof a?c=(new DOMParser).parseFromString(a,"text/xml"):a instanceof Document&&(c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),c.appendChild(c.importNode(a.documentElement,!0)));if(null===c)return null;a=c.getElementsByTagName("svg");if(0===a.length)return null;var d=a[0],e=c.getElementsByTagName("linearGradient"),f=c.getElementsByTagName("radialGradient");for(a=0;a<e.length;a++){for(var g=e[a],h=nn($f,cg,{start:je,end:oe}),
k=g.childNodes,l=0;l<k.length;l++)if("stop"===k[l].tagName){var m=xt(b,k[l],"stop-color");if(null!==m&&""!==m){var n=xt(b,k[l],"offset");if(null===n||""===n)n="0";var p=parseFloat(n);isNaN(p)&&(p=0);h.addColorStop((-1!==n.indexOf("%")?.01:1)*p,m)}}g=g.getAttribute("id");"string"===typeof g&&(b["_brush"+g]=h)}for(a=0;a<f.length;a++){g=f[a];h=nn($f,dg,{start:Dd,end:Dd});k=g.childNodes;for(l=0;l<k.length;l++)if("stop"===k[l].tagName&&(m=xt(b,k[l],"stop-color"),null!==m&&""!==m)){n=xt(b,k[l],"offset");
if(null===n||""===n)n="0";p=parseFloat(n);isNaN(p)&&(p=0);h.addColorStop((-1!==n.indexOf("%")?.01:1)*p,m)}g=g.getAttribute("id");"string"===typeof g&&(b["_brush"+g]=h)}for(e=!0;e;)for(e=!1,f=c.getElementsByTagName("use"),a=0;a<f.length;a++)h=f[a],0===h.childNodes.length&&(g=h.href,void 0!==g&&(g=c.getElementById(g.baseVal.substring(1)),null!==g&&(g=g.cloneNode(!0),g.removeAttribute("id"),k=parseFloat(h.getAttribute("x")),isNaN(k)&&(k=0),l=parseFloat(h.getAttribute("y")),isNaN(l)&&(l=0),m=h.getAttribute("transform"),
null===m&&(m=""),h.setAttribute("transform",m+" translate("+k+","+l+")"),h.appendChild(g),"use"===g.tagName&&(e=!0))));yt(b,d,null);c=new L;if(0===b.Bm.length)return c;if(1===b.Bm.length)return b.Bm[0];for(a=0;a<b.Bm.length;a++)c.add(b.Bm[a]);return c}function zt(a,b){var c=a.getAttribute(b);"string"!==typeof c&&a.style&&(c=a.style[b]);return"string"!==typeof c?null:c}
function xt(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&b.style&&(d=b.style[c]);return"string"!==typeof d||""===d||"inherit"===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?xt(a,b,c):null):d}
function yt(a,b,c){var d=b.tagName;if(("g"===d||"svg"===d||"use"===d||"symbol"===d)&&"none"!==xt(a,b,"display")){for(var d=b.childNodes,e=0;e<d.length;e++){var f=d[e],g=null;if(void 0!==f.getAttribute){var h=f.getAttribute("transform");switch(f.tagName){case "g":null===h?yt(a,f,null):(g=new L,yt(a,f,g));break;case "use":null===h?yt(a,f,null):(g=new L,yt(a,f,g));break;case "symbol":if("use"!==b.tagName)break;g=new L;yt(a,f,g);var k=g,l=a,m=f;xt(l,m,"preserveAspectRatio");xt(l,m,"viewBox");k.scale=
1;break;case "path":k=f;g=new X;k=k.getAttribute("d");"string"===typeof k&&(g.lF=bf(k));break;case "line":var n=f,g=new X,k=parseFloat(n.getAttribute("x1"));isNaN(k)&&(k=0);l=parseFloat(n.getAttribute("y1"));isNaN(l)&&(l=0);m=parseFloat(n.getAttribute("x2"));isNaN(m)&&(m=0);n=parseFloat(n.getAttribute("y2"));isNaN(n)&&(n=0);var p=new Ke(Oe);g.position=new z(Math.min(k,m),Math.min(l,n));0<(m-k)/(n-l)?(p.ia=0,p.ja=0,p.s=Math.abs(m-k),p.u=Math.abs(n-l)):(p.ia=0,p.ja=Math.abs(n-l),p.s=Math.abs(m-k),p.u=
0);g.zc=p;break;case "circle":m=f;g=new X;k=parseFloat(m.getAttribute("r"));isNaN(k)||0>k?g=null:(l=parseFloat(m.getAttribute("cx")),isNaN(l)&&(l=0),m=parseFloat(m.getAttribute("cy")),isNaN(m)&&(m=0),n=new Ke(Qe),n.ia=0,n.ja=0,n.s=2*k,n.u=2*k,g.position=new z(l-k,m-k),g.zc=n);break;case "ellipse":n=f;g=new X;k=parseFloat(n.getAttribute("rx"));isNaN(k)||0>k?g=null:(l=parseFloat(n.getAttribute("ry")),isNaN(l)||0>l?g=null:(m=parseFloat(n.getAttribute("cx")),isNaN(m)&&(m=0),n=parseFloat(n.getAttribute("cy")),
isNaN(n)&&(n=0),p=new Ke(Qe),p.ia=0,p.ja=0,p.s=2*k,p.u=2*l,g.position=new z(m-k,n-l),g.zc=p));break;case "rect":p=f;g=new X;k=parseFloat(p.getAttribute("width"));if(isNaN(k)||0>k)g=null;else if(l=parseFloat(p.getAttribute("height")),isNaN(l)||0>l)g=null;else{m=parseFloat(p.getAttribute("x"));isNaN(m)&&(m=0);n=parseFloat(p.getAttribute("y"));isNaN(n)&&(n=0);var q=p.getAttribute("rx"),s=p.getAttribute("ry"),p=parseFloat(q);if(isNaN(p)||0>p)p=0;var t=parseFloat(s);if(isNaN(t)||0>t)t=0;null!==q&&""!==
q||null===s||""===s?null===q||""===q||null!==s&&""!==s||(t=p):p=t;p=Math.min(p,k/2);t=Math.min(t,l/2);s=void 0;0===p&&0===t?(s=new Ke(Pe),s.ia=0,s.ja=0,s.s=k,s.u=l):(s=Q.ga/2,q=E(),S(q,p,0,!0),q.lineTo(k-p,0),T(q,k-p*s,0,k,t*s,k,t),q.lineTo(k,l-t),T(q,k,l-t*s,k-p*s,l,k-p,l),q.lineTo(p,l),T(q,p*s,l,0,l-t*s,0,l-t),q.lineTo(0,t),T(q,0,t*s,p*s,0,p,0),ff(q),s=q.m,F(q));g.position=new z(m,n);g.zc=s}break;case "polygon":g=At(f);break;case "polyline":g=At(f)}if(null!==g){if(g instanceof X){l=g;k=xt(a,f,"fill");
null!==k&&-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],l.fill=k instanceof $f?k:"black"):l.fill=null===k?"black":"none"===k?null:k;k=xt(a,f,"stroke");null!==k&&-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],l.stroke=k instanceof $f?k:"black"):l.stroke="none"===k?null:k;k=parseFloat(xt(a,f,"stroke-width"));isNaN(k)||(l.Na=k);k=xt(a,f,"stroke-linecap");null!==k&&(l.SG=k);k=xt(a,f,"stroke-dasharray");if(null!==k&&""!==k){m=k.split(",");
n=[];for(k=0;k<m.length;k++)p=parseFloat(m[k]),!isNaN(p)&&0<p&&n.push(p);l.Yy=n}f=xt(a,f,"stroke-dashoffset");null!==f&&""!==f&&(f=parseFloat(f),isNaN(f)||(l.TG=f));l.hy=!0}if(null!==h){h=h.split(")");f=!0;for(k=0;k<h.length;k++)/\(.*[^0-9\.,\s-]/.test(h[k])&&(f=!1),/\(.*[0-9]-[0-9]/.test(h[k])&&(f=!1);if(f)for(k=h.length-1;0<=k;k--)if(l=h[k],""!==l)switch(m=l.indexOf("("),f=l.substring(0,m).replace(/\s*/,""),m=l.substring(m+1).split(/\s*[\s,]\s*/),f){case "rotate":Bt(a,g,m);break;case "translate":f=
g;l=parseFloat(m[0]);isNaN(l)&&(l=0);m=parseFloat(m[1]);isNaN(m)&&(m=0);if(0!==l||0!==m)n=f.position.copy(),isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),f.position=new z(l+n.x,m+n.y);break;case "scale":Ct(a,g,m);break;case "skewX":Dt(a,g,m);break;case "skewY":Et(a,g,m);break;case "matrix":Ft(a,g,m)}}if(g instanceof L){h=g;k=f=0;l=h.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);for(m=h.elements.i;m.next();)n=m.value.position.copy(),isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),n.x<f&&(f=n.x),n.y<k&&
(k=n.y);l.x+=f;l.y+=k;h.position=l}null===c?a.Bm.push(g):c.add(g)}}}if(null!==g){a=zt(b,"visibility");if("hidden"===a||"collapse"===a)g.visible=!1;b=zt(b,"opacity");null!==b&&""!==b&&(b=parseFloat(b),isNaN(b)||(g.opacity=b))}}}
function Ft(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]);if(!isNaN(d+e+f+g+h+k)){var l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof X){c=b.zc.copy();if(c.type===Pe)c=a.$q(c);else if(c.type===Qe)c=Gt(c);else if(c.type===Oe){c.type=Le;a=new Me(c.ia,c.ja);var m=new Cf($e,c.s,c.u);a.ra.add(m);c.Ya.add(a)}c.offset(l.x,l.y);c.transform(d,e,f,g,h-l.x,k-l.y);a=c.normalize();b.zc=c;l.x-=a.x;l.y-=a.y;
b.position=l}else if(b instanceof L){for(b=b.elements.i;b.next();)e=b.value,d=e.position.copy(),d.x+=l.x,d.y+=l.y,e.position=d;for(b.reset();b.next();)Ft(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=l.x,d.y-=l.y,a.position=d}}}
function Bt(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=0);var e=parseFloat(c[1]);isNaN(e)&&(e=0);var f=parseFloat(c[2]);isNaN(f)&&(f=0);if(0!==d){var g=d*Math.PI/180,h=b.position.copy();isNaN(h.x)&&(h.x=0);isNaN(h.y)&&(h.y=0);if(b instanceof X){c=b.zc.copy();c.type===Qe?c=Gt(c):c.type===Pe&&(c=a.$q(c));if(c.type===Le)c.rotate(d,e-h.x,f-h.y),f=c.normalize(),b.zc=c,h.x-=f.x,h.y-=f.y,b.position=h;else{var d=c.ia-e+h.x,k=c.ja-f+h.y,l=c.s-e+h.x,m=c.u-f+h.y;a=d*Math.cos(g)-k*Math.sin(g)+e-h.x;d=k*Math.cos(g)+
d*Math.sin(g)+f-h.y;e=l*Math.cos(g)-m*Math.sin(g)+e-h.x;f=m*Math.cos(g)+l*Math.sin(g)+f-h.y;l=Math.min(a,e);m=Math.min(d,f);c.ia=a-l;c.ja=d-m;c.s=e-l;c.u=f-m;h.x+=l;h.y+=m;b.position=h;b.zc=c}b.fill instanceof $f&&(h=b.fill.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new R((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new R((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.fill=h);b.stroke instanceof $f&&(h=b.stroke.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=
g,h.start=new R((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new R((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.stroke=h)}else if(b instanceof L){for(b=b.elements.i;b.next();)f=b.value,g=f.position.copy(),g.x+=h.x,g.y+=h.y,f.position=g;for(b.reset();b.next();)Bt(a,b.value,c);for(b.reset();b.next();)c=b.value,g=c.position.copy(),g.x-=h.x,g.y-=h.y,c.position=g}}}
function Ct(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=1);var e=parseFloat(c[1]);isNaN(e)&&(e=d);if(1!==d||1!==e){var f=b.position.copy();isNaN(f.x)&&(f.x=0);isNaN(f.y)&&(f.y=0);if(b instanceof X)a=b.zc.copy(),f.x*=d,f.y*=e,b.position=f,a.scale(d,e),b.zc=a;else if(b instanceof L){for(b=b.elements.i;b.next();)e=b.value,d=e.position.copy(),d.x+=f.x,d.y+=f.y,e.position=d;for(b.reset();b.next();)Ct(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=f.x,d.y-=f.y,a.position=d}}}
function Dt(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);if(b instanceof X){c=b.zc.copy();if(c.type===Pe)c=a.$q(c);else if(c.type===Qe)c=Gt(c);else if(c.type===Oe){c.type=Le;a=new Me(c.ia,c.ja);var f=new Cf($e,c.s,c.u);a.ra.add(f);c.Ya.add(a)}c.offset(e.x,e.y);c.transform(1,0,Math.tan(d),1,-e.x,-e.y);a=c.normalize();b.zc=c;e.x-=a.x;e.y-=a.y;b.position=e}else if(b instanceof L){for(b=b.elements.i;b.next();)d=b.value.position.copy(),
d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)Dt(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=e.x,d.y-=e.y,a.position=d}}}
function Et(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);if(b instanceof X){c=b.zc.copy();if(c.type===Pe)c=a.$q(c);else if(c.type===Qe)c=Gt(c);else if(c.type===Oe){c.type=Le;a=new Me(c.ia,c.ja);var f=new Cf($e,c.s,c.u);a.ra.add(f);c.Ya.add(a)}c.offset(e.x,e.y);c.transform(1,Math.tan(d),0,1,-e.x,-e.y);a=c.normalize();b.zc=c;e.x-=a.x;e.y-=a.y;b.position=e}else if(b instanceof L){for(b=b.elements.i;b.next();)f=b.value,d=f.position.copy(),
d.x+=e.x,d.y+=e.y,f.position=d;for(b.reset();b.next();)Et(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=e.x,d.y-=e.y,a.position=d}}}
function At(a){var b=!1;if("polygon"===a.tagName)b=!0;else if("polyline"!==a.tagName)return null;var c=new X,d=a.getAttribute("points");a=new Ke;var e=new N(Me),f=d.split(/\s*[\s,]\s*/);if(4>f.length)return null;for(var d=null,g=new N(Cf),h=1;h<f.length;h+=2){var k=parseFloat(f[h-1]),l=parseFloat(f[h]);if("number"!==typeof k||isNaN(k)||"number"!==typeof l||isNaN(l))return null;1===h?d=new Me(k,l):g.add(new Cf($e,k,l))}b&&(b=new Cf($e,d.ia,d.ja),b.close(),g.add(b));d.ra=g;e.add(d);a.Ya=e;b=a.normalize();
c.position=new z(-b.x,-b.y);c.zc=a;return c}
function Gt(a){var b=a.ia,c=a.ja,d=a.s,e=a.u,f=Math.abs(d-b)/2,g=Math.abs(e-c)/2,b=Math.min(b,d)+f,c=Math.min(c,e)+g,e=new Me(b,c-g),d=new Cf(wf);d.vb=b+Q.ga*f;d.Lb=c-g;d.ve=b+f;d.we=c-Q.ga*g;d.s=b+f;d.u=c;e.ra.add(d);d=new Cf(wf);d.vb=b+f;d.Lb=c+Q.ga*g;d.ve=b+Q.ga*f;d.we=c+g;d.s=b;d.u=c+g;e.ra.add(d);d=new Cf(wf);d.vb=b-Q.ga*f;d.Lb=c+g;d.ve=b-f;d.we=c+Q.ga*g;d.s=b-f;d.u=c;e.ra.add(d);d=new Cf(wf);d.vb=b-f;d.Lb=c-Q.ga*g;d.ve=b-Q.ga*f;d.we=c-g;d.s=b;d.u=c-g;e.ra.add(d);a.type=Le;a.Ya.add(e);return a}
wt.prototype.$q=function(a){var b=a.ia,c=a.ja,d=a.s,e=a.u,f=Math.min(b,d),g=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new Me(f,g);e.ra.add(new Cf($e,f+b,g));e.ra.add(new Cf($e,f+b,g+c));e.ra.add((new Cf($e,f,g+c)).close());a.type=Le;a.Ya.add(e);return a};function to(){U.call(this);this.de=null}yb(to,U);to.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.element=this.de.cloneNode(!0)};to.prototype.toString=function(){return"HTMLHost("+this.de.toString()+")#"+ub(this)};
to.prototype.Yi=function(a,b){var c=this.de;if(null!==c){var d=this.Ra(Dd);d.x-=this.Q.width/2;d.y-=this.Q.height/2;d.x-=this.Q.x;d.y-=this.Q.y;var d=b.ED(d),e=b.dk;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
to.prototype.Rn=function(a,b,c,d){var e=this.ka;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.se,f=this.Lf;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.de;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);ad(this.hc,a,b);Im(this,0,0,a,b)};to.prototype.Kh=function(a,b,c,d){Mm(this,a,b,c,d)};H(to,{sa:"naturalBounds"},function(){return this.hc});
G(to,{element:"element"},function(){return this.de},function(a){var b=this.de;b!==a&&(a instanceof HTMLElement||u("HTMLHost.element must be an instance of HTMLElement."),this.de=a,a.className="HTMLHost",this.h("element",b,a),this.ba())});aa.version="1.5.7";window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=aa:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=aa,window.define(aa)):window.go=aa); })(window);
